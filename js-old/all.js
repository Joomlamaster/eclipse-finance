/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);

/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD. Register as anonymous module.
		define(['jquery'], factory);
	} else {
		// Browser globals.
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function raw(s) {
		return s;
	}

	function decoded(s) {
		return decodeURIComponent(s.replace(pluses, ' '));
	}

	function converted(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}
		try {
			return config.json ? JSON.parse(s) : s;
		} catch(er) {}
	}

	var config = $.cookie = function (key, value, options) {

		// write
		if (value !== undefined) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setDate(t.getDate() + days);
			}

			value = config.json ? JSON.stringify(value) : String(value);

			return (document.cookie = [
				config.raw ? key : encodeURIComponent(key),
				'=',
				config.raw ? value : encodeURIComponent(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// read
		var decode = config.raw ? raw : decoded;
		var cookies = document.cookie.split('; ');
		var result = key ? undefined : {};
		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = decode(parts.join('='));

			if (key && key === name) {
				result = converted(cookie);
				break;
			}

			if (!key) {
				result[name] = converted(cookie);
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) !== undefined) {
			// Must not alter options, thus extending a fresh object...
			$.cookie(key, '', $.extend({}, options, { expires: -1 }));
			return true;
		}
		return false;
	};

}));

/*
 * jquery.requestAnimationFrame
 * https://github.com/gnarf37/jquery-requestAnimationFrame
 * Requires jQuery 1.8+
 *
 * Copyright (c) 2012 Corey Frang
 * Licensed under the MIT license.
 */

(function( $ ) {

// requestAnimationFrame polyfill adapted from Erik Möller
// fixes from Paul Irish and Tino Zijdel
// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating


var animating,
	lastTime = 0,
	vendors = ['webkit', 'moz'],
	requestAnimationFrame = window.requestAnimationFrame,
	cancelAnimationFrame = window.cancelAnimationFrame;

for(; lastTime < vendors.length && !requestAnimationFrame; lastTime++) {
	requestAnimationFrame = window[ vendors[lastTime] + "RequestAnimationFrame" ];
	cancelAnimationFrame = cancelAnimationFrame ||
		window[ vendors[lastTime] + "CancelAnimationFrame" ] || 
		window[ vendors[lastTime] + "CancelRequestAnimationFrame" ];
}

function raf() {
	if ( animating ) {
		requestAnimationFrame( raf );
		jQuery.fx.tick();
	}
}

if ( requestAnimationFrame ) {
	// use rAF
	window.requestAnimationFrame = requestAnimationFrame;
	window.cancelAnimationFrame = cancelAnimationFrame;
	jQuery.fx.timer = function( timer ) {
		if ( timer() && jQuery.timers.push( timer ) && !animating ) {
			animating = true;
			raf();
		}
	};

	jQuery.fx.stop = function() {
		animating = false;
	};
} else {
	// polyfill
	window.requestAnimationFrame = function( callback, element ) {
		var currTime = new Date().getTime(),
			timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) ),
			id = window.setTimeout( function() {
				callback( currTime + timeToCall );
			}, timeToCall );
		lastTime = currTime + timeToCall;
		return id;
	};

	window.cancelAnimationFrame = function(id) {
		clearTimeout(id);
	};
    
}

}( jQuery ));

/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.widget.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.accordion.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n),r=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(r.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!r.collapsible&&(r.active===!1||r.active==null)&&(r.active=0),r.active<0&&(r.active+=this.headers.length),this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(n){var r=e(this),i=r.attr("id"),s=r.next(),o=s.attr("id");i||(i=t+"-header-"+n,r.attr("id",i)),o||(o=t+"-panel-"+n,s.attr("id",o)),r.attr("aria-controls",o),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(r.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,r=this.options.heightStyle,i=this.element.parent();r==="fill"?(e.support.minHeight||(n=i.css("overflow"),i.css("overflow","hidden")),t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),n&&i.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={};if(!t)return;e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,r=this.element.find(this.options.header),i=r.next(),s=r.add(i).find("a").filter(this.options.navigationFilter)[0];s&&r.add(i).each(function(n){if(e.contains(this,s))return t.options.active=Math.floor(n/2),!1})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,r=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();r.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";if(e.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return e===-1&&(e=!1),e&&typeof e!="number"&&(e=this.headers.index(this.headers.filter(e)),e===-1&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,r){var i=n.apply(this,arguments);return i?(e==="beforeActivate"?i=n.call(this,"changestart",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel}):e==="activate"&&(i=n.call(this,"change",t,{oldHeader:r.oldHeader,oldContent:r.oldPanel,newHeader:r.newHeader,newContent:r.newPanel})),i):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;e.animate===null&&(e.animated?e.animated==="slide"?e.animate=300:e.animated==="bounceslide"?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.effect.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";if(a)return s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],c,h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;if(r.jquery||r.nodeType)r=t(r).css(i),i=n;var f=this,l=t.type(r),v=this._rgba=[];i!==n&&(r=[r,i,s,a],l="array");if(l==="string")return this.parse(d(r)||c._default);if(l==="array")return h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this;if(l==="object")return r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if(e==="alpha"||r[e]==null)return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=this.alpha()===0?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};if(o===null)return;s===null?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r))}),this[r](l)},blend:function(e){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(r*255)),"#"+t.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,f===0||f===1?c=f:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},u.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(v(o,s,t+1/3)*255),Math.round(v(o,s,t)*255),Math.round(v(o,s,t-1/3)*255),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){a&&!this[u]&&(this[u]=a(this._rgba));if(e===n)return this[u].slice();var r,i=t.type(e),l=i==="array"||i==="object"?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){if(o.fn[n])return;o.fn[n]=function(s){var o=t.type(s),u=n==="alpha"?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=t.type(s)),s==null&&r.empty?this:(o==="string"&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[r.idx]=s,this[u](a)))}})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if(t.type(r)!=="string"||(i=d(r))){r=o(i||r);if(!f.rgba&&r._rgba[3]!==1){s=n==="backgroundColor"?e.parentNode:e;while((u===""||u==="transparent")&&s&&s.style)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},r,i;if(t&&t.length&&t[0]&&t[t[0]]){i=t.length;while(i--)r=t[i],typeof t[r]=="string"&&(n[e.camelCase(r)]=t[r])}else for(r in t)typeof t[r]=="string"&&(n[r]=t[r]);return n}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?n&&e.effects[t]?!1:!0:!1}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)n[s]!==null&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?s==="hide":s==="show")?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);
/*
 Shadow animation 1.11
 http://www.bitstorm.org/jquery/shadow-animation/
 Copyright 2011, 2013 Edwin Martin <edwin@bitstorm.org>
 Contributors: Mark Carver, Xavier Lepretre and Jason Redding
 Released under the MIT and GPL licenses.
*/
'use strict';jQuery(function(h){function r(b,m,d){var l=[];h.each(b,function(f){var g=[],e=b[f];f=m[f];e.b&&g.push("inset");"undefined"!==typeof f.left&&g.push(parseFloat(e.left+d*(f.left-e.left))+"px "+parseFloat(e.top+d*(f.top-e.top))+"px");"undefined"!==typeof f.blur&&g.push(parseFloat(e.blur+d*(f.blur-e.blur))+"px");"undefined"!==typeof f.a&&g.push(parseFloat(e.a+d*(f.a-e.a))+"px");if("undefined"!==typeof f.color){var p="rgb"+(h.support.rgba?"a":"")+"("+parseInt(e.color[0]+d*(f.color[0]-e.color[0]),
10)+","+parseInt(e.color[1]+d*(f.color[1]-e.color[1]),10)+","+parseInt(e.color[2]+d*(f.color[2]-e.color[2]),10);h.support.rgba&&(p+=","+parseFloat(e.color[3]+d*(f.color[3]-e.color[3])));g.push(p+")")}l.push(g.join(" "))});return l.join(", ")}function q(b){function m(){var a=/^inset\b/.exec(b.substring(c));return null!==a&&0<a.length?(k.b=!0,c+=a[0].length,!0):!1}function d(){var a=/^(-?[0-9\.]+)(?:px)?\s+(-?[0-9\.]+)(?:px)?(?:\s+(-?[0-9\.]+)(?:px)?)?(?:\s+(-?[0-9\.]+)(?:px)?)?/.exec(b.substring(c));
return null!==a&&0<a.length?(k.left=parseInt(a[1],10),k.top=parseInt(a[2],10),k.blur=a[3]?parseInt(a[3],10):0,k.a=a[4]?parseInt(a[4],10):0,c+=a[0].length,!0):!1}function l(){var a=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1],c+=a[0].length,!0;a=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[17*parseInt(a[1],16),17*parseInt(a[2],
16),17*parseInt(a[3],16),1],c+=a[0].length,!0;a=/^rgb\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),1],c+=a[0].length,!0;a=/^rgba\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)/.exec(b.substring(c));return null!==a&&0<a.length?(k.color=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4])],c+=a[0].length,!0):!1}function f(){var a=/^\s+/.exec(b.substring(c));
null!==a&&0<a.length&&(c+=a[0].length)}function g(){var a=/^\s*,\s*/.exec(b.substring(c));return null!==a&&0<a.length?(c+=a[0].length,!0):!1}function e(a){if(h.isPlainObject(a)){var b,e,c=0,d=[];h.isArray(a.color)&&(e=a.color,c=e.length);for(b=0;4>b;b++)b<c?d.push(e[b]):3===b?d.push(1):d.push(0)}return h.extend({left:0,top:0,blur:0,spread:0},a)}for(var p=[],c=0,n=b.length,k=e();c<n;)if(m())f();else if(d())f();else if(l())f();else if(g())p.push(e(k)),k={};else break;p.push(e(k));return p}h.extend(!0,
h,{support:{rgba:function(){var b=h("script:first"),m=b.css("color"),d=!1;if(/^rgba/.test(m))d=!0;else try{d=m!==b.css("color","rgba(0, 0, 0, 0.5)").css("color"),b.css("color",m)}catch(l){}b.removeAttr("style");return d}()}});var s=h("html").prop("style"),n;h.each(["boxShadow","MozBoxShadow","WebkitBoxShadow"],function(b,h){if("undefined"!==typeof s[h])return n=h,!1});n&&(h.Tween.propHooks.boxShadow={get:function(b){return h(b.elem).css(n)},set:function(b){var m=b.elem.style,d=q(h(b.elem)[0].style[n]||
h(b.elem).css(n)),l=q(b.end),f=Math.max(d.length,l.length),g;for(g=0;g<f;g++)l[g]=h.extend({},d[g],l[g]),d[g]?"color"in d[g]&&!1!==h.isArray(d[g].color)||(d[g].color=l[g].color||[0,0,0,0]):d[g]=q("0 0 0 0 rgba(0,0,0,0)")[0];b.run=function(b){b=r(d,l,b);m[n]=b}}})});

if(IS_ROBOT === true){
	(function($) {
	  var xhrPool = [];
	  $(document).ajaxSend(function(e, jqXHR, options){
	    xhrPool.push(jqXHR);
	  });
	  $(document).ajaxComplete(function(e, jqXHR, options) {
	    xhrPool = $.grep(xhrPool, function(x){return x!=jqXHR});
	  });
	  var abort = function() {
	    $.each(xhrPool, function(idx, jqXHR) {
	      jqXHR.abort();
	    });
	  };

	  var oldbeforeunload = window.onbeforeunload;
	  window.onbeforeunload = function() {
	    var r = oldbeforeunload ? oldbeforeunload() : undefined;
	    if (r == undefined) {
	      // only cancel requests if there is no prompt to stay on the page
	      // if there is a prompt, it will likely give the requests enough time to finish
	      abort();
	    }
	    return r;
	  }
	})(jQuery);
}
if(IS_DEBUG === true){
	var origSetInterval = window.setInterval,
		origSetTimeout = window.setTimeout;

	window.setInterval = function(){
		var origFn = arguments[0],
			newFn = function(){
				console.log('setInterval call', origFn);
				origFn.call(window);
			};

		return window.origSetInterval.call(window, newFn, Array.prototype.slice.call(arguments, 1));
	};
	
	window.setTimeout = function(){
		var origFn = arguments[0],
			newFn = function(){
				console.log('setTimeout call', origFn);
				origFn.call(window);
			};

		return window.origSetTimeout.call(window, newFn, Array.prototype.slice.call(arguments, 1));
	};	
}
/* Control of sidebar menu auto-folding */
function sidebar_menu_folding() {

	$(".sidebar a").each(function(){
		$(this).html($(this).html().replace("&gt; ",""));
	});

    $(".sidebar .menu").find("li").each(function() {
        var submenu = $(this).find("ul.sub-menu:first");
        if (submenu.length == 1) {
            if (!$(this).hasClass("current-menu-ancestor")) {
                submenu.hide(); // Hide sub-menu if this is not the active page.
            } else {
                $(this).find("a:first").addClass("MenuOpen");
            }
			$(this).find("a:first").click(submenu_toggle); // Attach toggling event to sub-menu link.
        }
    });
}

function submenu_toggle() {
	var MenuLink=$(this);
	if($(this).next().css("display")=="block") MenuLink.removeClass("MenuOpen");
	else MenuLink.addClass("MenuOpen");

    $(this).next().slideToggle("fast", function() {});
    return false;
}

/* Control of inner page child topics auto-folding */
function child_pages_folding() {
    $(".child-content.deep").hide();
    $("#assetIndex .child-content.deep.active").show();

    $('#assetIndex').on('click','h3 a',function(e){
      e.preventDefault();
      if($(this).parent().attr('class')!=='child-title activeper')
      {
        $('.entry-content').find('.child-title.activeper').removeClass('activeper');
        $('.entry-content').find('.child-content.deep.active').hide().removeClass('active');
        $(this).parent().addClass('activeper').next().show().addClass('active');
      }
    });

    $('.child-pages').on('click','h3 a',function(e){
      e.preventDefault();
      if($(this).parent().attr('class')==='child-title'){
        $('.entry-content').find('.child-content.deep.active').slideUp('fast').removeClass('active');
        $('.entry-content').find('.child-title.active').removeClass('active');
        $(this).parent().toggleClass('active').next().toggleClass('active').slideDown('fast');
      }
    });
}

/* Parses a given url and returns only the path part of it. */
function parse_url(url) {
    if (url.substr(0, 8) == "https://") { /* https url */
        url = url.substr(8, url.length);
        url = url.split(/\/+/g);
        if (url[0] == window.location.hostname) {
            url[0] = null;
            url = url.join('/');
            url = url.split("?");
            url = _trim_slashes(url[0]);
            return url;
        }
        return false;
    }
    else if (url.substr(0, 7) == "http://") { /* http url */
        url = url.substr(7, url.length);
        url = url.split(/\/+/g);
        if (url[0] == window.location.hostname) {
            url[0] = null;
            url = url.join('/');
            url = url.split("?");
            url = _trim_slashes(url[0]);
            return url;
        }
        return false;
    }
    else if (url.substr(0,1) == '/') { /* starts with a slash */
        url = url.substr(1, url.length);
        url = url.split("?");
        return _trim_slashes(url[0]);
    }
    else { /* non-domain url without a slash */
        url = url.split("?");
        return _trim_slashes(url[0]);
    }
    return false;
}

/* Helper function that trim extra slashes from both ends of a string. */
function _trim_slashes(str) {
	str = str.replace(/^\s*/, "").replace(/\s*$/, "");
    if (str == "/") {
        return "";
    }

    var start = 0;
    var end = str.length;
    if (str.charAt(0) == "/") {
        ++start;
    }
    if (str.charAt(str.length - 1) == "/") {
        --end;
    }
    return str.substring(start, end);
}

/* setParentHeight */
function setParentHeight() {
    try {
        if(typeof parent.window !== 'undefined' && typeof parent.window.resizeContentFrame === 'function'){ // in iframe & function exists
            var the_height = $(document).height();
            parent.window.resizeContentFrame(the_height); //call the function

            $("#content ul a").each(function() {
                $(this).click(function() {
                //  parent.window.resizeContentFrame($('html').height());
                parent.window.resizeContentFrame($(document).height());
            });
            });
        }
    } catch(e) {
        qbaka.report(e);
    }
}

/* Adds click event to inner links that makes them only update the parent window hash. */
function update_parent_window_hash() {
    $("a").each(function() {
        var url = $(this).attr("href");
        if (url !== undefined) {
            var hashed_url = parse_url(url);
            if (hashed_url !== false && hashed_url != "#" && hashed_url.indexOf("content/") === 0) {
              $(this).one('click', function() {
                parent.navigateToContent(hashed_url);
                return false;
            });
          }
      }
  });
}

/* newsTicker */
function initNewsTicker(lang_code) {
	var url = "";

	switch(lang_code){
		case "de":
		url = "https://de.finance.yahoo.com/nachrichten/kategorie-aktien/?format=rss";
		break;

		case "fr":
		url = "https://fr.finance.yahoo.com/actualites/categorie-statistiques/?format=rss";
		break;

		case "it":
		url = "https://it.finance.yahoo.com/?format=rss";
		break;

    case "ja":
    url = "http://info.finance.yahoo.co.jp/kabuyoso/rss/";
    break;

		default:
		url = "http://rss.news.yahoo.com/rss/stocks";
		break;
	}

	$.ajax({
     url: 'https://query.yahooapis.com/v1/public/yql',
     jsonp: 'callback',
     dataType: 'jsonp',
     data: {
       q: 'select * from rss where url = "' + url + '"',
       format: 'json'
   },
   success: function(data) {
       var news_data = '';
  			 if (data.query.count > 3) {
              $.each(data.query.results.item, function(i,data) {

                 var description = data.description.replace(/<\/?[^>]+>/gi, '');
                 var d =  new Date(data.pubDate);

                 news_data += '<div class="yahooNewsFeed">';
                 news_data += '<a class="clickEvent yahooNewsFeedHeader" eventAction="Lower Area Banner" eventLabel="Yahoo News Article" target="_blank" href="'+ data.link +'">'+ data.title +'</a>';
                 news_data += '<div class="yahooNewsFeedDescription">' + description.substr(0, 150) + '...</div>';
                 news_data += '<div class="yahooNewsFeedData">' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</div>';
                 news_data += '</div>';
             });
              $('.yahooNewsContentScroll').append(news_data);

              rotateNews();


              $('.yahooNewsContentScroll').hover(function(){
                $(this).stop();
            }, function(){
                rotateNews();
            });

           }
          }
      });
}

function rotateNews() {

  $yahooNews = $('.yahooNewsContentScroll');
	$first = $('.yahooNewsContentScroll > div:first-child');
  $last = $first.clone();
	$speed = 60;

  $top = parseInt($yahooNews.css('top')) || 0;

  $duration = (parseInt($first.height()) + $top)/$speed * 2000;


  $yahooNews.animate({ top: (-1 * parseInt($first.height())) -16 },$duration,'linear', function() {

      $first.remove();

      $yahooNews.css('top', '15px').append($last);

      rotateNews();
  });

}

/* trading simulator from home page */
function initSimulator() {
	Trading_Simulator();
	Choose_Direction();
	Amount_Validator();
	Choose_Asset();
	InitSimulatorCallbacks();
}

var $amountValid=false,
$directionValid=false;

function getSWF(movieName) {
    if (navigator.appName.indexOf("Microsoft") != -1) {
        return window[movieName];
    }
    else {
        return document[movieName];
    }
}

function InitSimulatorCallbacks() {
	$('.showTypeBtn').click(function(e){
		var type = $(e.target).attr('button-type');
		getSWF('simulatorRight').showType(type);

		$('#buyBtn').attr('button-type', type);
	});

	$('#buyBtn').click(function(e){
		if (!$(e.target).hasClass('disabled')) {
			var type = $(e.target).attr('button-type');
			getSWF('simulatorRight').showAnimationType(type);
		}
	});
}

function Trading_Simulator() {
	$('.tradingMenu a').click(function(event) {
		$('.trading .active').removeClass("active");
    var $chosen_option=$(this).attr('class').split(' ')[1]; // first class enables events, so choose the second
		$(this).addClass("active");
		$('.trading .' + $chosen_option).addClass("active");
		$('.clicked').removeClass("clicked"); //removes clicked on any direction
		$('.chosenAmount').addClass('disabled'); //disables the buy button
		$('.center input').val(''); //setting input amount to none;
		$amountValid=false;
		$directionValid=false;
	});
}

function Choose_Direction() {
	$('.direction').click(function(event) {
		$(".direction").removeClass("clicked");
		$(this).addClass("clicked");
		var $dir_value = $(this).text();

		$directionValid=true;
		_is_ammount_and_direction_valid() ? $('.chosenAmount').removeClass('disabled') : $('.chosenAmount').addClass('disabled');
	});
}

function Amount_Validator() {
	$('.center input').keyup(function (event) {
		this.value = this.value.replace(/[^0-9\.]/g, '');
		$amountValid=false;
		if( $(this).val() != '' && $(this).val() != '0' ) {
			$amountValid=true;
			var inTheMoney=(parseFloat($('.center input').attr('value'))*1.85).toString();
			if(inTheMoney.indexOf('.') != -1) {
				inTheMoney=inTheMoney.split('.');
				inTheMoney=inTheMoney[0]+'.'+inTheMoney[1].substr(0,2);
			}
			$('.returnIn').text(inTheMoney+' ');
		}
		else $('.returnIn').text('0');
		_is_ammount_and_direction_valid() ? $('.chosenAmount').removeClass('disabled') : $('.chosenAmount').addClass('disabled');
	});
}

function Choose_Asset() {
	$('#chooseAsset li').click(function(e){
		$('#chooseAsset li').removeClass('selected');
		$(e.target).addClass('selected');
	});
}

function _is_ammount_and_direction_valid()	{
	if($amountValid==true && $directionValid==true) return true;
}

function Control_Sound() {
    $('#mainVideoMuteBtn').click(function(e){
        $(this).toggleClass('muted');
        $('#mainVideo').prop('muted', $(this).hasClass('muted'));
    });

    // mute video hack for ie9
    $('#mainVideo').prop('muted', true);
}

function HideMuteButton() {
    $('#mainVideoMuteBtn').hide();
}

var integrationMode = 0;

var widgetsSettings = {
    baseUrl:    "//widgets.tradologic.net/widgets",
    libUrl:     "//widgets.tradologic.net/widgets/v6/lib",
    webApiUrl:  "//" + window.location.host + "/api",
    restApiUrl: 'https://api4.tradologic.net',
    feedApiUrl: '//feed.tradologic.net',
    advfeedApiUrl: 'https://advfeed.tradologic.net',
    sessionCookieName: 'm_session_247',
	brandId: 11
};

(function(root){
    var StorageProvider = function StorageProvider(){
        var me = this;

        me.backendId = 'storage_provider';
        me.storageTtl = 24 * 3600 * 1000; // one day
        //me.storageTtl = 30 * 1000; // 30secs

        me._lastRefreshTimestamp = 0;
        me._nextRefreshTimestamp = 0;
        me._backend = {};
        me._data = undefined;

        me._init();
    };

    StorageProvider.prototype._init = function _init(){
        //console.log('StorageProvider::_init()');
        var me = this;

        me._backend = localStorage;
    };

    StorageProvider.prototype.get = function get(key){
        var me = this;

        if(typeof me._data === 'undefined'){
            me._data = me.readData();
        }

        if(me._isDataValid()){
            return me._data[key];
        }else{
            return undefined;
        }
    };

    StorageProvider.prototype.set = function set(key, value){
        var me = this;

        if(typeof me._data === 'undefined'){
            me._data = me.readData();
        }

        me._data[key] = value;

        me.saveData();
    };

    StorageProvider.prototype.remove = function remove(key){
        var me = this;

        delete me._data[key];

        me.saveData();

    };

    StorageProvider.prototype.clear = function clear(){
        var me = this;

        delete me._data;

        me._backend.removeItem(me.backendId);
    };

    StorageProvider.prototype.saveData = function saveData(data){
        var me = this;

        if(!me._isDataValid()){
            me.setRefreshTimestamp();
        }

        me._backend[me.backendId] = JSON.stringify({
            data: data || me._data,
            lastRefreshTimestamp: this._lastRefreshTimestamp,
            nextRefreshTimestamp: this._nextRefreshTimestamp
        });
    };

    StorageProvider.prototype.readData = function readData(){
        var me = this,
            data = me._backend[me.backendId];

        if (data) {
            try {
                data = JSON.parse(data);
            }catch(e){
                console.warn(e);
                me.clear();
            }
        }else{
            data = {
                data: {}
            };
        }

        //console.log('DATA: ', data);

        me._lastRefreshTimestamp = data.lastRefreshTimestamp;
        me._nextRefreshTimestamp = data.nextRefreshTimestamp;
        return data.data;
    };

    StorageProvider.prototype.setRefreshTimestamp = function setRefreshTimestamp(){
        var me = this,
            now = (new Date()).getTime(),
            then = new Date();

        me._lastRefreshTimestamp = now;
        me._nextRefreshTimestamp = then.setTime(now + me.storageTtl);
    };

    StorageProvider.prototype._isDataValid = function _isDataValid(){
        return new Date().getTime() < this._nextRefreshTimestamp;
    };

    StorageProvider.prototype._dataExists = function _dataExists(){
        return this._backend[this.backendId];
    };

    root.StorageProvider = StorageProvider;

})(window);

(function(root){
    var Storage = function Storage(){
        var me = this;

        me._provider = null;
        //me._init();
    };

    Storage.prototype._init = function _init(){
        console.log('Storage::_init()');
    };

    Storage.prototype.getProvider = function getProvider(){
        return this._provider;
    };

    Storage.prototype.setProvider = function setProvider(provider){
        this._provider = provider;
    };

    Storage.prototype.get = function get(key){
        return this.getProvider().get(key);
    };
    Storage.prototype.set = function set(key, value){
        return this.getProvider().set(key, value);
    };
    Storage.prototype.remove = function remove(key){
        return this.getProvider().remove(key);
    };
    Storage.prototype.clear = function clear(){
        return this.getProvider().clear();
    };

    root.Storage = Storage;

})(window);

(function(root){
    var UserPreferences = function UserPreferences(){
        var me = this;

        me._storage = new Storage();
        //me._init();
    };

    UserPreferences.prototype._init = function _init(){
        console.log('UserPreferences::_init');
    };

    UserPreferences.prototype.getStorage = function getStorage(){
        return this._storage;
    };

    UserPreferences.prototype.setStorage = function setStorage(storage){
        this._storage = storage;
    };

    UserPreferences.prototype.get = function get(key){
        return this.getStorage().get(key);
    };

    UserPreferences.prototype.set = function set(key, value){
        return this.getStorage().set(key, value);
    };

    UserPreferences.prototype.remove = function remove(key){
        return this.getStorage().remove(key);
    };

    UserPreferences.prototype.clear = function clear(){
        return this.getStorage().clear();
    };

    root.UserPreferences = UserPreferences;

})(window);
if(0){
	$.getScript('https://widgets.tradologic.net/widgets/v6/widgets.min.js');
}

$.ajaxPrefilter(function(opts){
	opts.crossDomain = !(opts.url.indexOf(window.location.host) > -1);
	//console.log(opts.crossDomain + ': ' + opts.url);
});

var initWidgets = function () {
	widgets.baseUrl = widgetsSettings.baseUrl;
	widgets.apiUrl = widgetsSettings.restApiUrl;
	widgets.edgeUrl = widgetsSettings.webApiUrl;
	widgets.feedApiUrl = widgetsSettings.feedApiUrl;
	widgets.init();
};

//----------------------------- LD custom code
var accountFields = ['firstName', 'lastName', 'countryPhoneCode', 'areaCode', 'phone', 'email', 'countryCode'];
var userPages = ['history', 'open-trades', 'my-account', 'my-profile', 'past-expiries', 'change-password', 'my-trades'];
var languagesMap = {
	'en': 1033,
	'de': 1031,
	'fr': 1036,
	'it': 1040,
	'ru': 1049,
	'ja': 1041,
	'ko': 1042,
	'ar': 1025
};

var userPrefs = new UserPreferences();
userPrefs.getStorage().setProvider(new StorageProvider());

// ---- events binding
if(0){
	$(window).on('widgetsRegisterEvents', function(){
		//console.log('widgetsRegisterEvents');
		//console.log('events', widgets.events, arguments);
		$.each(widgets.events, function(key, eventName){
			$(window).on(eventName, window['_on_' + eventName] || _on_defaultListener);
		});
	});
}else{
	$(window).on('widgetsRegisterEvents', function(){
		$.each(widgets.events, function(key, eventName){
			if(window['_on_' + eventName]){
				$(window).on(eventName, window['_on_' + eventName]);
			}
		});
	});
}
// -- event listeners
var _on_defaultListener = function(){
	//console.log('default event listener for: ', arguments[0].type, arguments);
};

var _on_userLogin = function(){
	//console.log('userLogin');
	showUserBadge();
	sendTimezoneOffset();
};

var _on_userLogout = function(){
	//console.log('userLogout');
	showUserBadge();
};

var _on_loadingIsStarted = function(){
	//console.log('loadingIsStarted');
	$('#loadingElement').show();
	$('.bodyWrapper').hide();
};

var _on_loadingIsCompleted = function(){
	//console.log('loadingIsCompleted', arguments);
	if (isLogged()) {
		loadUserData(refreshBalance);
		loadUserNotifications();

	} else {
		$('.userdata-wrapper').hide();
		$('.login-widget-wrapper').show();
	}

	$('#loadingElement').hide();
	$('.widgetContent').show();

	$('#loadingElement').hide();
	$('.bodyWrapper').show();
	setTimeout(function(){
		showUserBadge();
	}, 300);
	addPatchForRobots();
};

var _on_noOptions = function(){
	//console.log('noOptions');
	$('#loadingElement').hide();
	$('.widgetContent').show();

	$('#loadingElement').hide();
	$('.bodyWrapper').show();
};

var _on_loginIsCompleted = function(e, response){
	//console.log('loginIsCompleted');
	if(response.code > 400){
		loginFailed(response.data);
	}else if(response.code === 201){
		loginSuccess(response.data);
	}
};

var _on_tradeIsCompleted = function(e, response){
	//console.log('tradeIsCompleted');
	if ( typeof(showAlertBubble) !== 'undefined' ){
		showAlertBubble(translateWidgetMessage(response));
	} else {
		alert(translateWidgetMessage(response));
	}

	if(typeof clearTradeBox === 'function'){
		clearTradeBox();
	}

	return;
};

var _on_notLogged = function(e, response){
	//console.log('notLogged');
	if ( typeof(showAlertBubble) !== 'undefined' ){
		showAlertBubble(widgetMessage['SaveTradeOrder_NotLoggedIn']);
	} else {
		alert(translateWidgetMessage(response));
	}
	$('.tradeButton').removeAttr('disabled');

	return;
};

var _on_click = function(e){
	//console.log('click', e, e.target);
	var target = e.target;

	if($(target).is('.logout-action')){
		widgets.api.logoutUser(LogoutUser);
	}

	if($(target).is('.actionButton')){
		if(typeof onActionButtonClick === 'function'){
			onActionButtonClick(target);
		}
	}
};

var _on_userDetailsUpdated = function(){
	$("[data-widget=userDetails][data-type=error]").addClass('formSuccess').html(translateWidgetMessage({
		data: {
			type: 'UserDetails_UpdatedSuccessfully'
		}
	})).show();

	$('html, body').animate({
		scrollTop: ($("[data-widget=userDetails][data-type=error]").offset().top - 10)
	}, 200);
};

var _on_resetPassword = function(e, response){
	//console.log('resetPassword');

	var widget = resetPasswordWidget;
	if (response.code == 401) {
		widget.message(widgetMessage['ResetPassword_InvalidEmail']);
		return;
	}
	if (response.code != 200) {
		widget.message(widgetMessage['ResetPassword_Unsuccessful']);
		return;
	}
	$("[data-widget=resetPassword][data-type=error]").addClass('formSuccess');
	widget.message(widgetMessage['ResetPassword_Successful']);
};

var _on_changePassword = function(e, response){
	var label = $("[data-widget=changePassword][data-type=error]");

	if (response.code === 401) {
		label.html(translateWidgetMessage(response)).show();
	} else if (response.code === 200 ) {
		label.addClass('formSuccess').html(widgetMessage['ChangePassword_Successful']).show();
	}
};

var _on_passwordMissmatch = function(e, response){
	//console.log('passwordMissmatch');
	var label = $("[data-widget=changePassword][data-type=error]");

	label.html(widgetMessage['passwordMissmatch']).show();
};

var _on_registrationCompleted = function(e, response){
	//console.log('registrationCompleted');
	var widget = registrationWidget;

	// HTTP 201 = "Created"
	if (response.code == 201) {

		var sessionId = response.data.sessionId;

		// set user logged-in session (auto-login)
		$.cookie('widgetSession', sessionId, { path: '/' });
		widgets.token.sessionId = sessionId;
		loadUserData(doWidgetRegistration); // set user data cookie for the iframe integrated pages

		return;
	} else if ( response.code === 400 && response.data.text !== null ) {
		// error with text description
		//widget.message(response.data.text);

		$("[data-widget=registration][data-type=error]").html(translateWidgetMessage(response)).show();

		$('html, body').animate({
			scrollTop: ($("[data-widget=registration][data-type=error]").offset().top - 10)
		}, 200);


		return;
	} else {
		// general error fallback

		$("[data-widget=registration][data-type=error]").html('Registration failed!').show();
		//widget.message('Registration failed');


		return;
	}

	return;
};

//handling events and responsive tables
if (typeof responsive !== 'undefined') {
	var selector = '.responsiveTable';
	var _on_myTradesTableIsLoaded = function(){
		responsive.responsiveTable(selector);
	};
	var _on_openTradesUpdated = function(){
		responsive.responsiveTable(selector);
	};
	var _on_tradeIsStarted = function(){
		responsive.responsiveTable(selector);
	};
	var _on_closedTradesIsReady = function(){
		responsive.responsiveTable(selector);
	};
}

// -- helper functions
function qs(key) {
	key = key.replace(/[*+?^$.\[\]{}()|\\\/]/g, "\\$&"); // escape RegEx meta chars
		var match = location.search.match(new RegExp("[?&]"+key+"=([^&]+)(&|$)"));
		return match && decodeURIComponent(match[1].replace(/\+/g, " "));
}

function getServerResource() { }

// overwrite jquery html methods to be listeners for custom actions
(function(){
	var original_html = jQuery.fn.html;
	var original_remove = jQuery.fn.remove;

	jQuery.fn.html = function(value){

		// payout changes
		this.filter(".openTradesPayout").each(function(payout){

			if (value.replace(/[^\d\.]/g, '') > 0) {
				$(this).parent('tr').addClass('willWin');
				//$(this).parent('tr').removeClass('willLose');
			} else {
				$(this).parent('tr').removeClass('willWin');
				//$(this).parent('tr').addClass('willLose');
			}
		});

		return original_html.apply(this, arguments);
	};

	jQuery.fn.remove = function(){
		// payout changes
		this.filter('[data-widget="openTrades"] tbody tr').each(function(row) {
			loadUserData(refreshBalance);
			// restore banner if last trade is finished
			if ( typeof initOpenTradesBanner !== 'undefined') {
				setTimeout(initOpenTradesBanner, 250);
			};
		 });
		return original_remove.apply(this, arguments);
	};

})();

var isLogged = function(){
	if (typeof widgets !== 'undefined' && typeof widgets.isLogged === 'function'){
		if (widgets.isLogged()) {
			return true;
		} else {
			$.removeCookie('apiToken');
			$.removeCookie('apiToken', { path: '/' });
			$.removeCookie('widgetSession', { path: '/' });

			return false;
		}
	}

	if (typeof $.cookie('widgetUserData') !== 'undefined') {

		var userData = $.parseJSON($.cookie('widgetUserData'));
		if (userData && userData.id) {
			return true;
		}
	}

	$.removeCookie('apiToken');
	$.removeCookie('apiToken', { path: '/' });
	$.removeCookie('widgetSession', { path: '/' });

	return false;
};

var showUserBadge = function(){
	//console.log('isLogged', isLogged());
	if (isLogged() === true) {

		// if open account page
		if ($('[data-widget=registration]').length) {
			location.href = redirectUrl['trade'];
		}

		var userData = widgets.user;

		$('#userId').text(userData.id);
		$('#userFirstName').text(userData.firstName);
		$('#userFullName').text(userData.firstName + ' ' + userData.lastName);
		$('#userAccountBalance').text((userData.currencySymbol == '$' ? '$' : '') + userData.balance + (userData.currencySymbol == '$' ? '' : userData.currencySymbol));

		$('#userInfoBadge').show();
		$('#loginForm').hide();
		$('body').addClass('trader-logged-in');

		externalMessage('userLoggedIn');
	} else {
		$('#loginForm').show();
		$('#userInfoBadge').hide();
		$('body').addClass('trader-logged-out');

		externalMessage('userLoggedOut');

		$('.tradeTabsWrapper').remove();
		$('.tradesGridWrapper').remove();
		$('.bannerHavingQuestion').css('display', 'block');


		if ( window.location.pathname.indexOf( '/cashier' ) > -1 || window.location.pathname.indexOf( '/kasse' ) > -1 ) {
			location.href = redirectUrl['login-cashier'];
		}

		else {
			 $.each(userPages, function (index, pageName) {
				if (window.location.pathname.indexOf( '/' + pageName ) > -1) {
					location.href = redirectUrl['trade'];
				}
			 });
		}

		// if open account page
		if ($('[data-widget=registration]').length) {

			//console.log('registration page');

			var formData = {},
				fromLeadForm = false;

			$.each(accountFields, function (index, fieldName) {

				if (qs(fieldName) !== null) {
					fillOpenAccoountFormField(fieldName, qs(fieldName));
					formData[fieldName] = qs(fieldName);
					fromLeadForm = true;
				}

			});

			if (fromLeadForm) {
				$.cookie('userFormData', JSON.stringify(formData));
				if (!$.cookie('ourLeadForm')) {
					$("#openAccountSecondStep").show();
				}
			} else if ($.cookie('userFormData')) {
				var cookieUserFormData = $.parseJSON($.cookie('userFormData'));
				$.each(accountFields, function (index, fieldName) {
					fillOpenAccoountFormField(fieldName, cookieUserFormData[fieldName]);
				});
			}


		}
	}
};

var fillOpenAccoountFormField = function(fieldName, fieldValue) {
	if (fieldValue != undefined) {
		if (fieldName == 'countryCode' && typeof(fieldValue) == 'string') {
			$(document).ajaxStop(function() {
				$("fieldset").find("[data-type='countryCode']").find('option[value='+fieldValue+']').attr('selected', true);
			});
		} else if (fieldName == 'countryPhoneCode' && typeof(fieldValue) == 'string') {
			$(document).ajaxStop(function(){
				$("fieldset").find("[data-type='countryPhoneCode']").val( fieldValue );
			});
		} else {
			$("fieldset").find("[data-type='" + fieldName + "']").val( fieldValue );
		}
	}
}

var translateWidgetMessage = function(response) {
	if (widgetMessage[response.data.type]) {
		// search for extra parameters and show correct values
		var tempMessage = widgetMessage[response.data.type];

		// fill placeholders like {xxx} with correct values from response
		if(response.data.parameters) {
			$.each(response.data.parameters, function(key, value) {
				tempMessage = tempMessage.replace('{' + key + '}',value);
			});
		}

		return tempMessage;
	} else {
		// just show the message
		qbaka.report('Translation not found', {
			tags: ['missingTranslation'],
			params: {
				key: response.data.type
			}
		});
		return response.data.text;
	}
};

var loginFailed = function(responseData){
	$('.login .loginButton').removeClass('loginButtonLoading');

	// show multilanguage error message
	loginWidget.message = function() {};
	$("[data-widget=login][data-type=error]").html(widgetMessage[responseData.type]).show();

	$.removeCookie('widgetSession', { path: '/' });
	$.removeCookie("widgetUserData", { path: '/' });
};

var loginSuccess = function(responseData){
	//to provide backwards compatibility
	widgets.config = widgets.config || {};
	widgets.config.sessionId = responseData.sessionId;
	loadUserData(doWidgetLogin);
};

var doWidgetLogin = function(response){
	$.cookie('widgetUserData', JSON.stringify(response.data), { path: '/' });
	$.cookie('widgetSession', widgets.token.sessionId, { path: '/' });

	// redirect to cashier after cashier-login
	if( window.location.pathname.indexOf( 'login-cashier' ) > -1 ) {
		location.href = redirectUrl['cashier'];
	}

	// low balance - redirect to cashier
	else if (response.data.balance < 10 || parseInt($.cookie('IRobot'), 10) === 1) {
		externalMessage('userLoggedIn');
		location.href = redirectUrl['cashier'];
	}

	else if(window.location.pathname.indexOf('refer-a-friend') > -1 ) {
		location.href= redirectUrl['refer-a-friend'];
	}

	// redirect to trading room or how-to-trade for robots
	else {

		if ((typeof GlobalNetObject !== 'undefined') && GlobalNetObject.widgetsReady) {
			location.href = redirectUrl['how-to-trade'];
			//location.href = redirectUrl['cashier-standalone'];
			////console.log('GlobalNetObject.widgetsReady');
		} else {
			location.href = redirectUrl['trade'];
			////console.log('GlobalNetObject.widgetsReady undefined');
		}
	}
};

var doWidgetRegistration = function(response) {

	if ( response.code == 200 ) {
		$.cookie('widgetUserData', JSON.stringify(response.data), { path: '/' });
		$.cookie('widgetSession', widgets.token.sessionId, { path: '/' });
		location.href = redirectUrl['registration-success'];
		return false;

	} else {
		$.removeCookie('widgetSession', { path: '/' });
		$.removeCookie("widgetUserData", { path: '/' });
	}
};

var loadUserData = function(callback) {
	widgets.api.getUserData(function(data){
		//TODO: check this
		if(data.code > 400 || typeof $.cookie(widgetsSettings.sessionCookieName) !== 'string' || $.cookie(widgetsSettings.sessionCookieName) === 'null'){
			LogoutUser();
		}else{
			if(typeof callback === 'function'){
				callback(data);
			}
		}
	});
	if (document.getElementById("traderoom_control") !== null &&
			widgets.token.sessionId !== undefined && widgets.token.sessionId !== null) {

		//if the cookie has been lost somewhere it will be reset
		//but traderoom iframe may not be aware of this fact, so
		//we're going to reload it to make sure it works as expected
		if(typeof $.cookie(widgetsSettings.sessionCookieName) !== 'string' || $.cookie(widgetsSettings.sessionCookieName) === 'null'){
			try {
				document.getElementById('traderoom').src = document.getElementById('traderoom').src;
			}catch(e){}
		}
		setTraderoomCookie(widgets.token.sessionId);
	}
};

var LogoutUser = function() {
	//deletes all session cookies
	widgets.token.sessionId = '00000000-0000-0000-0000-000000000000';
	$.removeCookie('widgetSession', { path: '/' });
	$.removeCookie('token', { path: '/' });
	$.removeCookie('apiToken', { path: '/' });
	$.removeCookie('refresh_token', { path: '/' });
	$.removeCookie("widgetUserData", { path: '/' });
	//deletes session cookies for <iframe> integrated pages
	if (document.getElementById("traderoom_control") !== null) {
		setTraderoomCookie(null);
	}

	externalMessage('userLoggedOut');
	location.href = redirectUrl['home-page'];
};

var setTraderoomCookie = function(cookieValue){
	var win = document.getElementById("traderoom_control").contentWindow,
		args = ['setCookie', widgetsSettings.sessionCookieName, cookieValue],
		json = JSON.stringify({ type: 'function', data: args });

	//TODO: test the domain discovering mechanism
	$.cookie(
		widgetsSettings.sessionCookieName,
		cookieValue,
		{
			domain: document.location.host.split('.').slice(-2).join('.'),
			path: '/'
		}
	);
	win.postMessage(json, '*');
};

var refreshBalance = function(response) {
	if ( response.code == 200 ) {
		$.cookie('widgetUserData', JSON.stringify(response.data), { path: '/' });
		$.cookie('widgetSession', widgets.token.sessionId, { path: '/' });
		$('#userAccountBalance').text((response.data.currencySymbol == '$' ? '$' : '') + response.data.balance + (response.data.currencySymbol == '$' ? '' : response.data.currencySymbol));
	} else {
		$.removeCookie('widgetSession', { path: '/' });
		$.removeCookie("widgetUserData", { path: '/' });
		$.removeCookie('widgetSession', { path: '/' });
	}
};

var loadUserNotifications = function() {
	widgets.api.getNotifications(function(response){
		if (response && response.code == 200) {
			try {
				$.each(response.data, function (i, notification) {
					var obj = $('<textarea/>').html(notification.url).val();
					$('body').append(obj);
				});
			} catch (e) { }
		}
	});
};

// -- external integration functions
function externalLogin(user, pass){
	if($('#username').is(':visible')){
		$.cookie(
			'IRobot',
			1,
			{
				domain: document.location.host.split('.').slice(-2).join('.'),
				path: '/'
			}
		);
		if(user && pass){
			$('#username').val(user);
			$('#password').val(pass);
			$('#submit').click();
		}
	}
}

function externalMessage(message){
	try {
		window.parent.postMessage(message, '*');
	}catch(e){}
}

function addPatchForRobots(){
	$('body').append(
		'<div style="display: none"><div data-widget="slider"><ul class="container"><li></li></ul></div></div>'
	);
}

$(document).ready(function(){

	try {
		var playerTag = qs('utm_medium') + '.' + qs('utm_source') + '.' + qs('utm_campaign');
		var playerId = qs('id');
	} catch(e){}

	if (playerId && playerTag) {
		$.ajax({
			type: "POST",
			url: widgetsSettings.webApiUrl + '/api/v1/int/tag2object/player',
			data: {'playerId': playerId , 'tag': playerTag},
			error: function(data){
				qbaka.report('Error requesting api: /int/tag2object/player ');
			}
		});
	}

	externalMessage(JSON.stringify({
		method: 'urlChanged',
		data: document.location.href
	}));

	_on_loadingIsStarted();
});

var sendTimezoneOffset = function(){
	if(!userPrefs.get('timezoneOffsetSent')){
		try {
			var data = {
					id: widgets.user.id,
					data: {
						timezoneOffset: (new Date()).getTimezoneOffset()
					}
				};

			if(data.id > 0){
				$.ajax({
					type: 'POST',
					url: widgetsSettings.webApiUrl + '/v1/users/additionalData',
					data: data
				}).always(function(msg, type, xhr){
					if(xhr.status === 201){
						userPrefs.set('timezoneOffsetSent', true);
					}
					console.log('Timezone offset sent, ended with status: ', xhr.status);
				});
			}

		}catch(e){
			console.log('Unable to send timezone offset', e, arguments);
		}
	}

	sendTimezoneOffset = function(){};
};

// -- Track event in GA, action is required, label is optional.
// Production: track in GA. DEV: just console.log(). onError: qbaka ?>
function trackCustomEvent(category, action, label) {
	try {
		if (!isDevEnv) { // if prod environment
			if (typeof(_gaq) !== 'undefined'){
				if (typeof(label) === 'undefined') {
					_gaq.push(['_trackEvent', category + '_' + icl_lang, action]);
				} else {
					_gaq.push(['_trackEvent', category + '_' + icl_lang, action, label]);
				}
			}
		} else if (isDevEnv) { // if dev environment
			if (typeof(label) === 'undefined') {
				console.log(category + '_' + icl_lang + ' | ' + action);
			} else {
				console.log(category + '_' + icl_lang + ' | ' + action + ' | ' + label);
			}
		}
	} catch(e) {
		var errorMessage = '';
		if (typeof(label) === 'undefined') {
			errorMessage = category + '_' + icl_lang + ' | Error: trackCustomEvent | ' + action + ' - user ' + (isLogged()?'LOGGED':'NOT LOGGED') + ' in';
		} else {
			errorMessage = category + '_' + icl_lang + ' | Error: trackCustomEvent | ' + action + ' - user ' + (isLogged()?'LOGGED':'NOT LOGGED') + ' in' + ' | ' + label;
		}
		qbaka.report(errorMessage);
	}
}

// -- Attach click-event listener to objects with .clickEvent class located in passed containers
function attachEvents(container, category) {
	$.each(container, function(index, value) {
		$(value).on('click', '.clickEvent', function(e) {
			trackCustomEvent(category, $(this).attr('eventAction'), $(this).attr('eventLabel'));
		});
	});
}


// -- GA experiment related functions
function executeChosenVariation(variation) {
		pageVariations[variation]();
}

function chooseVariation() {
	if (!isDevEnv && typeof(chosenVariation) !== 'undefined') {
		executeChosenVariation(chosenVariation);
	} else if (!isDevEnv && typeof(chosenVariation) === 'undefined') {
		executeChosenVariation(0);
	} else {
		executeChosenVariation(Math.floor((Math.random()* pageVariations.length )));
	}
}

// -- Slider init function for both brands
var executeSlider = function(container, configuration) {
	var $selector = $(container);
	$selector.flexslider(configuration);
	$selector.removeClass('loaderBig');
	$selector.find('ul').show();
};

// -- handler for language selector click
// TODO: enable it when TL API is ready
/*$(document).ready(function(){
	$('#lang_sel').on('click', 'a', function(evt){
		var $target = $(evt.target),
			lang = $target.attr('hreflang'),
			url = $target.attr('href');

		if(typeof lang !== 'undefined' && typeof languagesMap[lang] !== 'undefined' && isLogged()){
			widgets.api.updateUserDetails(widgets.token.sessionId, {languageCode: languagesMap[lang]}, function(){
				window.location.href = url;
			});
		}else{
			window.location.href = url;
		}

		return false;
	});
});*/


// Expire slide - stop rendering a chosen slide when defined date is reached
expireSlide = function(slide, expiryDate) {
	targetDate = Date.parse(expiryDate)/1000,
	currentDate = Math.floor($.now() / 1000);
	if (currentDate > targetDate) {
		console.log('Expiring slide: ', slide);
		$(slide).parent().remove();
	}
};
var widgetsEvents={widgetsRegisterEvents:"widgetsRegisterEvents",loadingIsStarted:"loadingIsStarted",loadingIsCompleted:"loadingIsCompleted",loginIsStarted:"loginIsStarted",loginIsCompleted:"loginIsCompleted",optionsUpdated:"optionsUpdated",linkOptionUpdated:"linkOptionUpdated",linkOptionExpired:"linkOptionExpired",optionPricesUpdated:"optionPricesUpdated",openTradesUpdated:"openTradesUpdated",turboChartOpenTradeShow:"turboChartOpenTradeShow",assetPricesUpdated:"assetPricesUpdated",userLogin:"userLogin",userLogout:"userLogout",tradeIsStarted:"tradeIsStarted",tradeIsCompleted:"tradeIsCompleted",tradeInProgress:"tradeInProgress",noOptions:"noOptions",mouseOver:"mouseOver",mouseOut:"mouseOut",click:"click",buttonAlphaClick:"buttonAlphaClick",buttonBetaClick:"buttonBetaClick",closedTradesNotLoggedIn:"closedTradesNotLoggedIn",myTradesTableIsLoaded:"myTradesTableIsLoaded",updatePayoutType:"updatePayoutType",updateTurboExpire:"updateTurboExpire",registrationOnSubmit:"registrationOnSubmit",registrationCompleted:"registrationCompleted",userDetailsUpdated:"userDetailsUpdated",resetPassword:"resetPassword",changePassword:"changePassword",passwordMissmatch:"passwordMissmatch",contactUsSubmited:"contactUsSubmited",initNotificationsWidget:"initNotificationsWidget",initChart:"initChart",leadAdded:"leadAdded",sellCompleted:"sellCompleted",settingsLoaded:"settingsLoaded",limitationsLoaded:"limitationsLoaded",changeDynamicPayout:"changeDynamicPayout",investAmountKeyup:"investAmountKeyup",changeInvestAmountDropDown:"changeInvestAmountDropDown",expireOptions:"expireOptions",clickedOptionRow:"clickedOptionRow",clickedStrikeButton:"clickedStrikeButton",ladderOptionClosing:"ladderOptionClosing",populateMarketAssets:"populateMarketAssets",assetAlreadyUsed:"assetAlreadyUsed",assetAlreadyUsedForWidgets:"assetAlreadyUsedForWidgets",tableMobileSelectOption:"tableMobileSelectOption",afterWagerBonusWon:"afterWagerBonusWon",afterWagerBonusPopUpShow:"afterWagerBonusPopUpShow",cashierSubmitDeposit:"cashierSubmitDeposit",cashierDepositLimitationFail:"cashierDepositLimitationFail",cashierDepositQuickLimitationFail:"cashierDepositQuickLimitationFail",cashierWithdrawalUnsuccessful:"cashierWithdrawalUnsuccessful",cashierKioskWithdrawSuccessful:"cashierKioskWithdrawSuccessful",cashierKioskWithdrawUnsuccessful:"cashierKioskWithdrawUnsuccessful",cashierWithdrawalSuccessful:"cashierWithdrawalSuccessful",cashierPendingWithdrawal:"cashierPendingWithdrawal",cashierStartWithdrawProcessing:"cashierStartWithdrawProcessing",cashierEndWithdrawProcessing:"cashierEndWithdrawProcessing",cashierWithdrawalBlocked:"cashierWithdrawalBlocked",cashierWithdrawBonusTRNotMet:"cashierWithdrawBonusTRNotMet",cashierWithdrawBonusTRMet:"cashierWithdrawBonusTRMet",cashierWithdrawCancelled:"cashierWithdrawCancelled",cashierWithdrawLimitationResult:"cashierWithdrawLimitationResult",cashierCancelBonusSuccessful:"cashierCancelBonusSuccessful",cashierCancelBonusUnsuccessful:"cashierCancelBonusUnsuccessful",cashierCancelWithdrawalRequest:"cashierCancelWithdrawalRequest",cashierBonusHistoryError:"cashierBonusHistoryError",cashierActivateBonusSuccessful:"cashierActivateBonusSuccessful",cashierActivateBonusUnsuccessful:"cashierActivateBonusUnsuccessful",cashierProcessBonusDescription:"cashierProcessBonusDescription",cashierDepositSuccessful:"cashierDepositSuccessful",cashierDepositUnsuccessful:"cashierDepositUnsuccessful",cashierDepositLoadIframe:"cashierDepositLoadIframe",cashierWireTransferRedirect:"cashierWireTransferRedirect",cashierWireTransferCMSRedirect:"cashierWireTransferCMSRedirect",cashierWireTransferDetailsRequest:"cashierWireTransferDetailsRequest",cashierTraderTransferCompleted:"cashierTraderTransferCompleted",cashierUserSuspended:"cashierUserSuspended",cashierLoading:"cashierLoading",cashierLoaded:"cashierLoaded",cashierNoPaymentMethods:"cashierNoPaymentMethods",cashierCurrencyChanged:"cashierCurrencyChanged",cashierCCDepositProvinceShow:"cashierCCDepositProvinceShow",cashierCCDepositProvinceHide:"cashierCCDepositProvinceHide",cashierPromocodePopupOpen:"cashierPromocodePopupOpen",cashierPromocodeEnter:"cashierPromocodeEnter",resetWidget:"resetWidget",noAvailableOptions:"noAvailableOptions",unhideMilkMessage:"unhideMilkMessage",languageUpdate:"languageUpdate",cashierStartDepositProcessing:"cashierStartDepositProcessing",cashierEndDepositProcessing:"cashierEndDepositProcessing",cashierModalWindowStart:"cashierModalWindowStart",cashierModalWindowReady:"cashierModalWindowReady",cashierModalWindowEnd:"cashierModalWindowEnd",cashierWidgetDisabled:"cashierWidgetDisabled",cashierWidgetError:"cashierWidgetError",closedTradesIsReady:"closedTradesIsReady",notLogged:"notLogged",tableIsLoaded:"tableIsLoaded",tableOptionsUpdated:"tableOptionsUpdated",reportsTradeSearchBtnClicked:"reportsTradeSearchBtnClicked",reportsTradeAssetsIsLoading:"reportsTradeAssetsIsLoading",pastExpiriesLadderTableProcessOptions:"pastExpiriesLadderTableProcessOptions",pastExpiriesLadderTableExpandLadder:"pastExpiriesLadderTableExpandLadder",pastExpiriesLadderTableCollapseLadder:"pastExpiriesLadderTableCollapseLadder",pastExpiriesTableProcessOptions:"pastExpiriesTableProcessOptions",pastExpiriesOptionsLoad:"pastExpiriesOptionsLoad",reportsTransactionSearchBtnClicked:"reportsTransactionSearchBtnClicked",reportsTransactionAssetsIsLoading:"reportsTransactionAssetsIsLoading",traderInsightNoContent:"traderInsightNoContent",assetCarouselInit:"assetCarouselInit",assetCarouselOptionsUpdated:"assetCarouselOptionsUpdated",changeLadderContracts:"changeLadderContracts",userDetailsSubmit:"userDetailsSubmit",filterOptionsByTAId:"filterOptionsByTAId",setBetSelection:"setBetSelection",tableWidgetInvestDropDown:"tableWidgetInvestDropDown",tableWidgetChangeInvestDropDown:"tableWidgetChangeInvestDropDown",tableWidgetButtonBuyClick:"tableWidgetButtonBuyClick",expireDropDownChange:"expireDropDownChange",tradingToolsIsReady:"tradingToolsIsReady",openTradesNoOptionsExtend:"openTradesNoOptionsExtend",openTradesHasExtendOptions:"openTradesHasExtendOptions",showOpenTradeTimer:"showOpenTradeTimer",openTradeIsCompleted:"openTradeIsCompleted",showSellClicked:"showSellClicked",tosRequired:"tosRequired",tosUpdated:"tosUpdated",updateUserStatus:"updateUserStatus",invalidFileType:"invalidFileType",validFileType:"validFileType",payoutUpdated:"payoutUpdated",socialLoadingComplete:"socialLoadingComplete",locationLoaded:"locationLoaded",currenciesLoaded:"currenciesLoaded",docsNotSent:"docsNotSent",strikeLevelTouched:"strikeLevelTouched",docsNotSentPanelDismissed:"docsNotSentPanelDismissed",quickDemoLogin:"quickDemoLogin",openTradesTradeOrderExecuted:"openTradesTradeOrderExecuted",balanceUpdated:"balanceUpdated",assetFilterChanged:"assetFilterChanged",btnOverClicked:"btnOverClicked",btnUnderClicked:"btnUnderClicked",deleteOption:"deleteOption",payoutsOverUnder:"payoutsOverUnder",changeSpinnerValue:"changeSpinnerValue"};
var afterWagerBonusWidget={bonusCache:[],isProcessed:false,isProcessedInitInterval:false,isConfigProgressBar:false,init:function(){var a=this;a.isConfigProgressBar=typeof a.element.data("progress")!="undefined"?a.element.data("progress"):false;a.element.append("<tbody></tbody>");$(window).on(widgets.events.userLogin+" "+widgets.events.loginIsCompleted+" "+widgets.events.registrationCompleted,function(b){if(!a.isProcessed){if(widgets.user!=null){a.isProcessed=true;widgets.api.getAfterWagerBonuses(function(c){a.processBonuses(c)})}}});$(window).on(widgets.events.tradeIsCompleted,function(b){if(a.bonusCache.length>0){widgets.api.getAfterWagerBonuses(function(c){a.processBonuses(c)})}else{if(!a.isProcessedInitInterval){a.isProcessedInitInterval=true;widgets.timers.afterWagerInitInterval=setInterval(function(){widgets.api.getAfterWagerBonuses(function(c){a.tryProcessBonuses(c)})},5*1000*60)}}});$(window).on(widgets.events.cashierDepositSuccessful,function(b){widgets.api.getAfterWagerBonuses(function(c){a.processBonuses(c)})});$(window).on(widgets.events.userLogout,function(b){a.isProcessed=false;a.element.hide();a.element.find("tbody").children().remove();a.clearAfterWagersInterval();clearInterval(widgets.timers.afterWagerInitInterval);a.isProcessedInitInterval=false;var c=$("div.afterWagerBonusPopup");c.remove()})},showCongratMsg:function(c){var e=this;var b=0;for(var a=0;a<c.length;a++){b+=c[a].amount}var f=$('<div class="afterWagerBonusPopup"><span>'+widgetMessage.afterWagerBonusCongratMsg.replace("{Amount}",helper.formatCurrency(c[0].currencySymbol,b))+"</span><button>"+widgetMessage.btnConfirmAfterWagerBonus+"</button></div>");var d=f.find("button");d.unbind("click").bind("click",(function(){$(window).trigger(widgets.events.afterWagerBonusWon);f.remove();if(e.bonusCache.length>0){e.element.show()}}));e.element.hide();e.element.after(f);$(window).trigger(widgets.events.afterWagerBonusPopUpShow)},getLastWonBonuses:function(e){var d=this;var c=[];if(d.bonusCache.length==0){return c}var a=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());if(e.length==0){for(var b=0;b<d.bonusCache.length;b++){if(d.bonusCache[b].expirationTS.timestamp>a.getTime()){c[c.length]=d.bonusCache[b]}}}else{for(var b=0;b<d.bonusCache.length;b++){if(d.bonusCache[b].bonusID==e[0].bonusID){break}if(d.bonusCache[b].expirationTS.timestamp>a.getTime()){c[c.length]=d.bonusCache[b]}}}return c},startAfterWagersInterval:function(){var a=this;widgets.timers.afterWagersetInterval=setInterval(function(){var c=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var b=false;for(var d=0;d<a.bonusCache.length;d++){if(a.bonusCache[d].expirationTS.timestamp<=c.getTime()){b=true;break}}if(b){widgets.api.getAfterWagerBonuses(function(f){a.processBonuses(f)})}else{var e=a.element.find("tbody tr");$.each(e,function(g,h){var j=$(h).find("td[data-column=remainingTime]");var f=a.bonusCache[g].expirationTS.timestamp-c.getTime();j.html(helper.formatExpirationTime(f,false))})}},1000*60)},clearAfterWagersInterval:function(){var a=this;clearInterval(widgets.timers.afterWagersetInterval)},tryProcessBonuses:function(a){var b=this;if(a==undefined||!a.code||a.code!=200||!a.data){return}var c=a.data;if(c.length>0){clearInterval(widgets.timers.afterWagerInitInterval);b.isProcessedInitInterval=false;b.processBonuses(a)}},processBonuses:function(b){var g=this;g.element.find("tbody").children().remove();if(b==undefined||!b.code||b.code!=200||!b.data){g.element.hide();return}var h=b.data;if(g.bonusCache.length==0&&h.length>0){g.startAfterWagersInterval()}if(g.bonusCache.length>0&&h.length==0){g.clearAfterWagersInterval()}var e=[];if(g.bonusCache.length>0){e=g.getLastWonBonuses(h)}g.bonusCache=h;if(h.length==0){g.element.hide();if(e.length>0){g.showCongratMsg(e)}return}var f=g.element.find("tbody");var d=g.element.find("thead tr th");var c=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var a="";$.each(h,function(j,k){var l='<tr data-bonusId="'+k.bonusID+'">';$.each(d,function(n,o){var q="";switch($(o).attr("data-column")){case"amount":q+="<td>"+helper.formatCurrency(k.currencySymbol,k.amount)+"</td>";break;case"remainingVolume":var p=k.trTargetAmount-k.trCurrent;q+='<td><div class="afterWagerBonusRemaining">'+helper.formatCurrency(k.currencySymbol,p)+"</div>";if(g.isConfigProgressBar){var m=((k.trCurrent*100)/k.trTargetAmount).toFixed(2);q+='<div class="afterWagerBonusProgressBar"><div style="width:'+m+'%;"></div></div>'}q+="</td>";break;case"remainingTime":var i=k.expirationTS.timestamp-c.getTime();q+='<td data-column="remainingTime">'+helper.formatExpirationTime(i,false)+"</td>";break}l+=q});l+="</tr>";a+=l});f.append(a);if(e.length>0){g.showCongratMsg(e)}else{g.element.show()}}};
var amountWidget={elementCache:{},hideSymbol:false,init:function(){var a=this;var b=$(a.element).attr("data-hideSymbol");a.hideSymbol=(b=="true"?true:false);$(window).on(widgets.events.expireDropDownChange,function(f,d,e){if(e!=a.link){return}var c=a.getInvestAmount();a.calculatePNL(c)});$(window).on(widgets.events.changeDynamicPayout,function(f,c,e){if(a.link!=e||!widgets.links[a.link].option||!widgets.links[a.link].payout){return}var d=a.getInvestAmount();if(parseFloat(d)||d===0){a.calculatePNL(d)}else{if(a.isUp){var g=$(a.elements).filter("[data-type=win]");g.html('<span class="percentage">('+helper.formatPayout(a.getProfit())+")</span>")}else{var h=$(a.elements).filter("[data-type=lose]");h.html('<span class="percentage">('+helper.formatPayout(a.getLoss()-100)+")</span>")}}});$(window).on(widgets.events.investAmountKeyup+" "+widgets.events.changeInvestAmountDropDown,function(f,e,g){if(!a.isProcessed&&a.game=="turboBinary"&&g!=a.link){a.isProcessed=true;return}if(g!=a.link){return}var c=$(e);var d=c.val();a.calculatePNL(d)});$(window).on(widgets.events.linkOptionUpdated+" "+widgets.events.tradeIsCompleted+" "+widgets.events.updateTurboExpire,function(d){if(!widgets.links[a.link].option){return}var c=a.getInvestAmount();a.calculatePNL(c)});$(a.elements).show()},getProfit:function(){var d=this;if(widgets.links[d.link].option==undefined){return}if(widgets.links[d.link].payout!=undefined){return widgets.links[d.link].payout.profit}else{if(widgets.links[d.link].option.payout!=undefined){return widgets.links[d.link].option.payout}else{var a=widgets.links[d.link].option;var b=$("[data-widget="+d.game+"_"+d.link+"_expireTurbo] .activeRule").attr("data-ruleId");var c=false;$.each(a.rules,function(e,f){if(f.id==b){c=f;return false}});if(c){return c.payout}else{if(a.rules&&a.rules[0]&&a.rules[0].payout){return a.rules[0].payout}}}}},getLoss:function(){var b=this;if(widgets.links[b.link].option==undefined){return}if(widgets.links[b.link].payout!=undefined){return widgets.links[b.link].payout.loss}else{if(widgets.links[b.link].option.returnOnLoss!=undefined){return widgets.links[b.link].option.returnOnLoss}else{var a=widgets.all["turboBinary_"+b.link+"_expireTurbo"];return a.rule.returnOnLoss}}},calculatePNL:function(c){var e=this;var b=(e.getProfit()+100)*c/100;var d=e.getLoss()*c/100;var a=(e.hideSymbol?"":helper.getCurrencySymbol());var f=$(e.elements).filter("[data-type=win]");var g=$(e.elements).filter("[data-type=lose]");f.html('<span class="value">'+helper.formatCurrency(a,b)+'</span> <span class="percentage">('+helper.formatPayout(e.getProfit())+")</span>");g.html('<span class="value">'+helper.formatCurrency(a,d)+'</span> <span class="percentage">('+helper.formatPayout(e.getLoss()-100)+")</span>")},getInvestAmount:function(){var c=this;var b=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var a=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");if(b.length==0){if(isNaN(parseInt(a.val()))){return 0}else{return a.val()}}else{return b.find("option:selected").val()}}};
var amountAlphaWidget={isUp:true,investAmount:0,isProcessed:false,hideSymbol:false,init:function(){var c=this;var d=$(c.element).attr("data-hideSymbol");c.hideSymbol=(d=="true"?true:false);if(typeof($(c.element).attr("data-defaultvalueload"))!="undefined"&&$(c.element).attr("data-defaultvalueload")=="false"){isUp=null}$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>");$(c.elements).show();var b=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var a=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");$(window).on(widgets.events.expireDropDownChange,function(g,e,f){if(f!=c.link){return}c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.buttonAlphaClick,function(f,e){var g=$(e).data("widget").split("_")[1];if(g!=c.link){return}c.isUp=true;c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.buttonBetaClick,function(f,e){var g=$(e).data("widget").split("_")[1];if(g!=c.link){return}c.isUp=false;c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.changeDynamicPayout,function(h,e,g){if(c.link!=g||!widgets.links[c.link].option||!widgets.links[c.link].payout){return}var f=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");if(f){f=f.val()}else{f=$("[data-widget="+c.game+"_"+c.link+"_investDropDown]").val()}if(parseFloat(f)){c.calculatePNL(f)}else{if(c.isUp){$(c.elements).html('<span class="percentage">('+helper.formatPayout(c.getProfit())+")</span>")}else{$(c.elements).html('<span class="percentage">('+helper.formatPayout(c.getLoss()-100)+")</span>")}}});$(window).on(widgets.events.updateTurboExpire,function(){var e=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var f=e.val();c.calculatePNL(f)});$(window).on(widgets.events.investAmountKeyup+" "+widgets.events.changeInvestAmountDropDown,function(h,g,i){if(!c.isProcessed&&c.game=="turboBinary"&&i!=c.link){c.isProcessed=true;return}if(i!=c.link){return}var e=$(g);var f=e.val();c.calculatePNL(f)});$(window).on(widgets.events.linkOptionUpdated+" "+widgets.events.tradeIsCompleted,function(e){if(!widgets.links[c.link].option){return}if(typeof($(c.element).attr("data-defaultvalueload"))!="undefined"&&$(c.element).attr("data-defaultvalueload")=="false"){c.isUp=null;$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>")}else{if(!c.isProcessed&&c.game=="turboBinary"){$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>")}}})},getProfit:function(){var d=this;if(widgets.links[d.link].option==undefined){return}if(widgets.links[d.link].payout!=undefined){return widgets.links[d.link].payout.profit}else{if(widgets.links[d.link].option.payout!=undefined){return widgets.links[d.link].option.payout}else{var a=widgets.links[d.link].option;var b=$("[data-widget="+d.game+"_"+d.link+"_expireTurbo] .activeRule").attr("data-ruleId");var c=false;$.each(a.rules,function(e,f){if(f.id==b){c=f;return true}});if(c){return c.payout}else{if(a.rules&&a.rules[0]&&a.rules[0].payout){return a.rules[0].payout}}}}},getLoss:function(){var b=this;if(widgets.links[b.link].option==undefined){return}if(widgets.links[b.link].payout!=undefined){return widgets.links[b.link].payout.loss}else{if(widgets.links[b.link].option.returnOnLoss!=undefined){return widgets.links[b.link].option.returnOnLoss}else{var a=widgets.all["turboBinary_"+b.link+"_expireTurbo"];return a.rule.returnOnLoss}}},calculatePNL:function(c){var e=this;var b=(e.getProfit()+100)*c/100;var d=e.getLoss()*c/100;var a=(e.hideSymbol?"":helper.getCurrencySymbol());if(typeof($(e.element).attr("data-defaultvalueload"))!="undefined"&&$(e.element).attr("data-defaultvalueload")=="false"&&e.isUp==null){$(e.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>");return}if(e.isUp){$(e.elements).html('<span class="value">'+helper.formatCurrency(a,b)+'</span> <span class="percentage">('+helper.formatPayout(e.getProfit())+")</span>")}else{$(e.elements).html('<span class="value">'+helper.formatCurrency(a,d)+'</span> <span class="percentage">('+helper.formatPayout(e.getLoss()-100)+")</span>")}},getInvestAmount:function(){var c=this;var b=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var a=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");if(b.length==0){if(isNaN(parseInt(a.val()))){return 0}else{return a.val()}}else{return b.find("option:selected").val()}}};
var amountBetaWidget={isUp:true,investAmount:0,hideSymbol:false,init:function(){var c=this;var d=$(c.element).attr("data-hideSymbol");c.hideSymbol=(d=="true"?true:false);if(typeof($(c.element).attr("data-defaultvalueload"))!="undefined"&&$(c.element).attr("data-defaultvalueload")=="false"){isUp=null}$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>");$(c.elements).show();var b=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var a=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");$(window).on(widgets.events.expireDropDownChange,function(g,e,f){if(f!=c.link){return}c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.buttonBetaClick,function(f,e){var g=$(e).data("widget").split("_")[1];if(g!=c.link){return}c.isUp=false;c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.buttonAlphaClick,function(f,e){var g=$(e).data("widget").split("_")[1];if(g!=c.link){return}c.isUp=true;c.investAmount=c.getInvestAmount();c.calculatePNL(c.investAmount)});$(window).on(widgets.events.changeDynamicPayout,function(h,e,g){if(c.link!=g||!widgets.links[c.link].option||!widgets.links[c.link].payout){return}var f=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");if(f){f=f.val()}else{f=$("[data-widget="+c.game+"_"+c.link+"_investDropDown]").val()}if(parseFloat(f)){c.calculatePNL(f)}else{if(c.isUp){$(c.elements).html('<span class="percentage">('+helper.formatPayout(c.getLoss()-100)+")</span>")}else{$(c.elements).html('<span class="percentage">('+helper.formatPayout(c.getProfit())+")</span>")}}});$(window).on(widgets.events.updateTurboExpire,function(){var e=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var f=e.val();c.calculatePNL(f)});$(window).on(widgets.events.investAmountKeyup+" "+widgets.events.changeInvestAmountDropDown,function(h,g,i){if(!c.isProcessed&&c.game=="turboBinary"&&i!=c.link){c.isProcessed=true;return}if(i!=c.link){return}var e=$(g);var f=e.val();c.calculatePNL(f)});$(window).on(widgets.events.linkOptionUpdated+" "+widgets.events.tradeIsCompleted,function(e){if(!widgets.links[c.link].option){return}if(typeof($(c.element).attr("data-defaultvalueload"))!="undefined"&&$(c.element).attr("data-defaultvalueload")=="false"){c.isUp=null;$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>")}else{if(!c.isProcessed&&c.game=="turboBinary"){$(c.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>")}}})},getProfit:function(){var d=this;if(widgets.links[d.link].option==undefined){return}if(widgets.links[d.link].payout!=undefined){return widgets.links[d.link].payout.profit}else{if(widgets.links[d.link].option.payout!=undefined){return widgets.links[d.link].option.payout}else{var a=widgets.links[d.link].option;var b=$("[data-widget="+d.game+"_"+d.link+"_expireTurbo] .activeRule").attr("data-ruleId");var c=false;$.each(a.rules,function(e,f){if(f.id==b){c=f;return true}});if(c){return c.payout}else{if(a.rules&&a.rules[0]&&a.rules[0].payout){return a.rules[0].payout}}}}},getLoss:function(){var b=this;if(widgets.links[b.link].option==undefined){return}if(widgets.links[b.link].payout!=undefined){return widgets.links[b.link].payout.loss}else{if(widgets.links[b.link].option.returnOnLoss!=undefined){return widgets.links[b.link].option.returnOnLoss}else{var a=widgets.all["turboBinary_"+b.link+"_expireTurbo"];return a.rule.returnOnLoss}}},calculatePNL:function(c){var e=this;var b=(e.getProfit()+100)*c/100;var d=e.getLoss()*c/100;var a=(e.hideSymbol?"":helper.getCurrencySymbol());if(typeof($(e.element).attr("data-defaultvalueload"))!="undefined"&&$(e.element).attr("data-defaultvalueload")=="false"&&e.isUp==null){$(e.elements).html('<span class="percentage">('+helper.formatPayout(-100)+")</span>");return}if(e.isUp){$(e.elements).html('<span class="value">'+helper.formatCurrency(a,d)+'</span> <span class="percentage">('+helper.formatPayout(e.getLoss()-100)+")</span>")}else{$(e.elements).html('<span class="value">'+helper.formatCurrency(a,b)+'</span> <span class="percentage">('+helper.formatPayout(e.getProfit())+")</span>")}},getInvestAmount:function(){var c=this;var b=$("[data-widget=turboBinary_"+c.link+"_investDropDown]");var a=$("[data-widget="+c.game+"_"+c.link+"_investAmount]");if(b.length==0){if(isNaN(parseInt(a.val()))){return 0}else{return a.val()}}else{return b.find("option:selected").val()}}};
var assetCarouselWidget={isProcessed:false,numOptions:0,lastSelectedOptions:{},optionsContainer:[],assetIdPrefix:"ac_asset_",viewportElementId:"ac_viewport",previousElementId:"ac_previous",nextElementId:"ac_next",paginationElementId:"ac_pagination",message_alphaDigital:"call",message_betaDigital:"put",message_alphaTouch:"touchUp",message_betaTouch:"touchDown",message_alphaRange:"in",message_betaRange:"out",message_alphaTurbo:"above",message_betaTurbo:"below",message_expiry:"expiry",message_payout:"payout",pagesize:4,options:{},carousel:[],optionsVisible:{},settings:{prevnext:true,paging:false,},init:function(){var c=this;widgets.isTraderoom=true;if(c.isProcessed){return}c.isProcessed=true;for(var b in c.settings){if(typeof $(c.element).data(b)=="boolean"){c.settings[b]=$(c.element).data(b)}}var a='<div class="option_carousel_outer"><div id="'+c.viewportElementId+'" class="wrapper"><ul class="options_container"></ul></div>';if(c.settings.prevnext){a+='<a href="#" id="'+c.previousElementId+'" class="arrow back">&lsaquo;</a><a href="#" id="'+c.nextElementId+'" class="arrow forward">&rsaquo;</a>'}if(c.settings.paging){a+='<div id="'+c.paginationElementId+'" class="ac_pagination"></div>'}$(c.element).append(a);c.optionsContainer=$(c.element).find(".options_container");$(window).on(widgets.events.optionsUpdated,function(f,e,d){switch(e){case"add":$.each(d,function(g,h){c.addOption(h)});break;case"del":$.each(d,function(g,h){c.delOptionId(h.id)});break}c.postProcess();assetCarouselWidget.initCarouselPlugin();$(window).trigger(widgets.events.assetCarouselOptionsUpdated)});$(window).on(widgets.events.linkOptionUpdated,function(e,d){if(!widgets.links[c.link]||!widgets.links[c.link].option||!widgets.options[widgets.links[c.link].option.id]){return}c.updateActiveOption(d)});if(c.game!="turboBinary"){$(window).on(widgets.events.optionPricesUpdated,function(e,d){$.each(d,function(f,g){if(typeof c.options[g.id]=="object"){c.updateOption(g,true)}})})}if(c.game=="turboBinary"){$(window).on(widgets.events.assetPricesUpdated,function(e,d){$.each(d,function(f,g){if(typeof c.options[g.id]=="object"){c.updateOption(g,false)}})})}$(window).trigger(widgets.events.assetCarouselInit)},addOption:function(f){var e=this;if(e.limit>0&&e.numOptions>=e.limit){return}e.numOptions++;var i="";if(f.id==widgets.links[e.link].option.id){i=" active"}var h=f.payout;var b=helper.formatExpiration(widgets.getDate(f.expirationTimestamp));if(e.game=="touch"){var g=e.message_alphaTouch;var a=e.message_betaTouch;var c='	<div class="rateAlpha upperPrice"></div>	<div class="rate">0.0000</div>	<div class="rateBeta lowerPrice"></div>'}else{if(e.game=="range"){var g=e.message_alphaRange;var a=e.message_betaRange;var c='	<div class="rateAlpha upperPrice" style="display:none"></div>	<div class="rateBeta upperPrice"" style="display:none"></div>	<div class="rate">0.0000</div>	<div class="rateAlpha lowerPrice"" style="display:none"></div>	<div class="rateBeta lowerPrice"" style="display:none"></div>'}else{if(e.game=="turboBinary"){if(typeof f.tradableAssetId=="undefined"){f.tradableAssetId=f.id}var g=e.message_alphaTurbo;var a=e.message_betaTurbo;var c='	<div class="rate"><span>0.0000</span></div>';b=f.rules[0].interval+"m";h=f.rules[0].payout}else{var g=e.message_alphaDigital;var a=e.message_betaDigital;var c='	<div class="rate"><span>0.0000</span></div>'}}}var d='<li id="'+e.assetIdPrefix+f.id+'" class="option_block'+i+" "+e.game+'" data-id="'+f.id+'" data-taid="'+f.tradableAssetId+'" data-expirationtimestamp="'+f.expirationTimestamp+'"><div class="option_block_wrapper"><div class="asset_name"><span>'+f.name+'</span></div><div class="expiry_container">'+c+'	<div class="expiry"><span class="name" data-translate="'+e.message_expiry+'">Expiry</span> <span class="time">'+b+'</span></div></div><div class="buttons button_call" data-isup="true">	<div class="action_name"><span data-translate="'+g+'">Call</span></div>	<div class="payout_container">		<span class="payout_value">'+helper.formatPayout(h)+'</span>		<span class="payout_text" data-translate="'+e.message_payout+'">Payout</span>	</div></div><div class="buttons button_put" data-isup="false">	<div class="action_name"><span data-translate="'+a+'">Put</span></div>	<div class="payout_container">		<span class="payout_value">'+helper.formatPayout(h)+'</span>		<div class="payout_text"><span>Payout</span></div>	</div></div></div></li>';e.options[f.id]=$(d);$(e.optionsContainer).append(e.options[f.id]);e.options[f.id].on("select",function(k){var j=$(this);$(e.optionsContainer).find("li").removeClass("active").removeClass("selected-alpha").removeClass("selected-beta");j.addClass("active");if(typeof e.optionsVisible.is=="function"&&e.optionsVisible.is(j)===false){e.carousel.scroll(j)}$(".widgetTradeboxInitial").hide();$(".widgetTradeboxOpen").show()}).on("click",".asset_name",function(j){$(this).parent().parent().trigger("select");widgets.setLinkOption(e.link,f.id)}).on("click",".buttons",function(k){var j=$(this).parent().parent();j.trigger("select");widgets.setLinkOption(e.link,f.id);if($(this).data("isup")==true){widgets.links[e.link].isAlpha=true;j.addClass("selected-alpha");if(e.game=="range"){$(e.optionsContainer).find(".rateAlpha, .rateBeta").hide();j.find(".rateAlpha").show();j.find(".rateBeta").hide()}$(window).trigger(widgets.events.buttonAlphaClick,e.element)}else{if($(this).data("isup")==false){widgets.links[e.link].isAlpha=false;j.addClass("selected-beta");if(e.game=="range"){$(e.optionsContainer).find(".rateAlpha, .rateBeta").hide();j.find(".rateAlpha").hide();j.find(".rateBeta").show()}$(window).trigger(widgets.events.buttonBetaClick,e.element)}}})},updateOption:function(a){var c=this;var b=$(c.options[a.id]);if(typeof c.optionsVisible.is=="function"&&c.optionsVisible.is(b)===false){return true}b.find(".rate").html(a.rate);if(c.game=="digital"&&a.type=="Binary"){}else{if(c.game=="turboBinary"&&a.type=="private"){b.find(".rate").html(a.rate)}else{if(c.game=="touch"&&a.type=="Touch"){b.find(".upperPrice").html(widgets.prices[a.id].rateAlpha);b.find(".lowerPrice").html(widgets.prices[a.id].rateBeta)}else{if(c.game=="range"&&a.type=="Range"){b.find(".rateAlpha.upperPrice").html(widgets.prices[a.id].rateAlpha.upperPrice);b.find(".rateAlpha.lowerPrice").html(widgets.prices[a.id].rateAlpha.lowerPrice);b.find(".rateBeta.upperPrice").html(widgets.prices[a.id].rateBeta.upperPrice);b.find(".rateBeta.lowerPrice").html(widgets.prices[a.id].rateBeta.lowerPrice)}}}}},delOptionId:function(b){var a=this;a.numOptions--;$(a.element).find("[data-id="+b+"]").remove()},postProcess:function(){var a=this;a.lastSelectedOptions[a.link]=widgets.links[a.link].option.id;a.numOptions=a.optionsContainer.children().length;widgets.translate(a.optionsContainer);$(a.element).show()},initCarouselPlugin:function(){var a=this;if(typeof a.carousel.reload=="function"){a.carousel.reload();a.optionsVisible=a.carousel.visible()}else{$("#"+a.viewportElementId).on("jcarousel:createend jcarousel:scrollend",function(b,c){a.optionsVisible=c.visible();a.optionsVisible.each(function(){var d=$(this).data("id");if(typeof widgets.prices[d]=="object"){a.updateOption(widgets.prices[d])}})});a.carousel=$("#"+a.viewportElementId).jcarousel({wrap:"both"}).data("jcarousel");if(a.carousel.visible().size()>0){a.pagesize=a.carousel.visible().size()}$("#"+a.previousElementId).on("jcarouselcontrol:active",function(){$(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("inactive")}).jcarouselControl({target:"-="+a.pagesize});$("#"+a.nextElementId).on("jcarouselcontrol:active",function(){$(this).removeClass("inactive")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("inactive")}).jcarouselControl({target:"+="+a.pagesize});$("#"+a.paginationElementId).on("jcarouselpagination:active","a",function(){$(this).addClass("active")}).on("jcarouselpagination:inactive","a",function(){$(this).removeClass("active")}).jcarouselPagination()}},updateActiveOption:function(a){var b=this;if(b.link!==a){return}b.options[widgets.links[a].option.id].trigger("select")},};
var assetFilterWidget={filter:null,isProcessed:false,init:function(){var a=this;a.element.addClass("divAsstFilterMain");a.initFilter();$(window).on(widgets.events.populateMarketAssets,function(b,c){a.element.children().removeClass("selected");a.element.find("."+c).addClass("selected")})},initFilter:function(){var f=this;var c="";var e=typeof widgetMessage.filterAll!="undefined"?widgetMessage.filterAll:"All";var b=typeof widgetMessage.filterCurrencies!="undefined"?widgetMessage.filterCurrencies:"Currencies";var d=typeof widgetMessage.filterIndices!="undefined"?widgetMessage.filterIndices:"Indices";var a=typeof widgetMessage.filterStocks!="undefined"?widgetMessage.filterStocks:"Stocks";var g=typeof widgetMessage.filterCommodities!="undefined"?widgetMessage.filterCommodities:"Commodities";c+='<div data-type="all" class="childAsstFilterMarket all '+(widgets.selectedAssetFilter=="all"?"selected":"")+'">'+e+"</div>";$.each(widgets.filterByAssetType,function(i,h){switch(h.toLowerCase()){case"currencies":c+='<div data-type="currencies" class="childAsstFilterMarket currencies'+(widgets.selectedAssetFilter=="currencies"?" selected":"")+'">'+b+"</div>";break;case"indices":c+='<div data-type="indices" class="childAsstFilterMarket indices'+(widgets.selectedAssetFilter=="indices"?" selected":"")+'">'+d+"</div>";break;case"commodities":c+='<div data-type="commodities" class="childAsstFilterMarket commodities'+(widgets.selectedAssetFilter=="commodities"?" selected":"")+'">'+g+"</div>";break;case"stocks":c+='<div data-type="stocks" class="childAsstFilterMarket stocks'+(widgets.selectedAssetFilter=="stocks"?" selected":"")+'">'+a+"</div>";break}});f.element.append(c);f.element.on("click","div.childAsstFilterMarket",function(){var h=$(this).data("type");$(window).trigger(widgets.events.populateMarketAssets,h)})},applyResourceFilter:function(b){var a=this;if(widgets.selectedAssetFilter!="all"){b.filterByTradableAssetType=widgets.selectedAssetFilter}return b}};
var assetFilterCustomWidget={data:{assetTypes:{},assetsPerType:{},hotAssets:[]},elementTemplate:{popup:'<form class="assetFilterCustomPopup" style="display:none" />'},elementCache:{$popup:null,$select:undefined,$selectPlaceholder:undefined,$assetTypeFilter:undefined},toggleDuration:null,storageName:"assetFilter-"+window.location.host,storageNameCustom:"assetFilterCustom-"+window.location.host,isProcessed:false,updateInterval:10*1000*60,updateOnlyWhenHidden:true,init:function(){var a=this;a.elementCache.$assetTypeFilter=a.elements.filter('[data-type="assetTypeFilter"]');a.elementCache.$selectPlaceholder=a.elements.filter('[data-type="customFilter"]');a.elementCache.$assetTypeFilter.after(a.elementCache.$popup=$(a.elementTemplate.popup));a.elementCache.$assetTypeFilter.on("click",function(){a.elementCache.$popup.toggle(a.toggleDuration)});a.elementCache.$popup.on("change","legend input",function(){var b=$(this).val();if($(this).is(":checked")){a.actionSelectType(b);$(this).attr("class","selectAll")}else{a.actionClearType(b);$(this).attr("class","")}}).on("change","fieldset input",function(){var d=$(this).data("type");var b=$("#assetFilterCustom_type_"+d);var c=$("#assetFilterCustom_fieldset_"+d+" input");var e=c.filter(":checked").length;if(e==0){b.prop("checked",false).attr("class","")}else{if(e==c.length){b.prop("checked",true).attr("class","selectAll")}else{b.prop("checked",false).attr("class","selectPartial")}}}).on("click","button[type=reset]",function(){a.actionCancel()}).on("click","button[type=submit]",function(c){c.preventDefault();var b=a.getSelectedAssets();a.actionSave(b)});clearInterval(widgets.timers.assetFilterCustom);widgets.timers.assetFilterCustom=setInterval(function(){if(!a.updateOnlyWhenHidden||(a.updateOnlyWhenHidden&&!a.elementCache.$popup.is(":visible"))){a.updateDataAndPopup()}},a.updateInterval);a.updateDataAndPopup();a.elementCache.$assetTypeFilter.show()},updateDataAndPopup:function(){var a=this;a.loadingStart();widgets.api.getAvailableTradableAssets(function(b){if(b!=null&&b.code!=200){return}a.updateData(b);a.populatePopup();if(!a.isProcessed){a.isProcessed=true}})},updateData:function(a){var b=this;$.each(a.data,function(c,d){b.data.assetTypes[d.type]=d.typeName;if(!b.data.assetsPerType[d.type]){b.data.assetsPerType[d.type]={}}b.data.assetsPerType[d.type][d.id]=d})},populatePopup:function(){var b=this;var c=new String();var e=new String();var a=b.getFilteredAssets();c+='<div class="columnsContainer">';$.each(b.data.assetTypes,function(h,f){var g=(a&&a.type&&a.type.indexOf(parseInt(h))>-1?true:false);c+='<section class="columns">                <legend>                    <input id="assetFilterCustom_type_'+h+'" name="assetFilterCustom_type_'+h+'" type="checkbox" value="'+h+'" data-type="'+h+'" '+(g?'checked="checked"':"")+'>                    <label for="assetFilterCustom_type_'+h+'">'+f+"</label>                </legend>";c+='<fieldset id="assetFilterCustom_fieldset_'+h+'">';$.each(b.data.assetsPerType[h],function(k,j){if(j.isHot===true){b.data.hotAssets.push(j)}var i=(a&&a.asset&&a.asset.indexOf(parseInt(k))>-1?true:false);c+='<div class="row">                        <input id="assetFilterCustom_asset_'+k+'" name="assetFilterCustom_asset_'+k+'" type="checkbox" value="'+k+'" data-asset="'+k+'" data-type="'+h+'" '+(i?'checked="checked"':"")+' data-isHot ="'+((j.isHot===true)?true:false)+'">                        <label for="assetFilterCustom_asset_'+k+'">'+j.description+"</label>                    </div>"});c+="</fieldset>                </section>"});c+="</div>";$buttons=$('<section class="buttons">                <button id="assetFilterCustom_Cancel" type="reset" data-translate="cancel"></button>                <button id="assetFilterCustom_Confirm" type="submit" data-translate="confirm" accesskey="c"></button>            </section>');widgets.translate($buttons);if(!b.isProcessed){b.elementCache.$popup.append(c,$buttons)}else{b.elementCache.$popup.find(".columnsContainer").replaceWith($(c))}b.loadingEnd();var d=b.getDropDownValue(a);b.addSelectCustomFilter(d)},getFilteredAssets:function(){var a=this;if(localStorage.getItem(a.storageName)){return JSON.parse(localStorage.getItem(a.storageName))}return false},setFilteredAssets:function(a){var c=this;if(typeof a!="object"){return false}var b=JSON.stringify(a);localStorage.setItem(c.storageName,b)},actionSelectType:function(a){$("#assetFilterCustom_fieldset_"+a).find("input").prop("checked",true)},actionClearType:function(a){$("#assetFilterCustom_fieldset_"+a).find("input").prop("checked",false)},actionCancel:function(){var a=this;a.closePopup()},getSelectedAssets:function(){var c=this;var a={type:[],asset:[]};var b=c.elementCache.$popup.find("legend input");b.each(function(){if($(this).prop("checked")){a.type.push($(this).data("type"))}});var b=c.elementCache.$popup.find("fieldset input");b.each(function(){if($(this).prop("checked")){a.asset.push($(this).data("asset"))}});return a},actionSave:function(a){var b=this;b.setFilteredAssets(a);$(window).trigger(widgets.events.assetFilterChanged,a.asset);b.closePopup();var c=b.getDropDownValue(a);b.elementCache.$select.changeSelectedOption(c)},closePopup:function(){var a=this;a.elementCache.$popup.hide(a.toggleDuration)},applyResourceFilter:function(d){var c=this;var a=c.getFilteredAssets();if(a&&a.asset&&a.asset.length>0){var b=a.asset.join();d.filterByTradableAssetId=b}return d},loadingStart:function(){var a=this;a.elementCache.$popup.addClass("loading")},loadingEnd:function(){var a=this;a.elementCache.$popup.removeClass("loading")},getDropDownValue:function(c){var e=this,h,b=Object.keys(e.data.assetTypes).length;if(c!==false){if(c.type.length===1){for(var d=0,g=c.asset.length;d<g;d++){var f=false;$.each(e.data.assetsPerType[c.type[0]],function(i,k){if(c.asset[d]===k.id){f=true}});if(f===false){d=g;h="custom"}}if(h===undefined){h=c.type[0].toString()}}else{if(c.type.length===0){h="";if(c.asset.length!==0){if(c.asset.length>e.data.hotAssets.length){h="custom"}else{h="hotAssets";for(var j=0,a=e.data.hotAssets.length;j<a;j++){if(c.asset.indexOf(e.data.hotAssets[j].id)<0){h="custom"}}}}}else{if(c.type.length===b){h=""}else{h="custom"}}}}else{h=""}if(h==="custom"){e.saveTheCustomFilter(c);if(e.elementCache.$select!==undefined){e.elementCache.$select.find('li[data-value="custom"]').show()}}return h},addSelectCustomFilter:function(a){var b=this,c=[{itemText:"All",data:{value:""}}];if(b.elementCache.$select!==undefined){b.elementCache.$select.remove();b.elementCache.$select=undefined}$.each(b.data.assetTypes,function(e,d){c.push({itemText:d,data:{value:e}})});c.push({itemText:"Custom",data:{value:"custom"}},{itemText:"Hot Assets",data:{value:"hotAssets"}});b.elementCache.$select=helper.selectGenerator(c,a.toString());b.elementCache.$selectPlaceholder.append(b.elementCache.$select).show();if(b.data.hotAssets.length>0){b.elementCache.$select.find('li[data-value="hotAssets"]').show()}else{b.elementCache.$select.find('li[data-value="hotAssets"]').hide()}b.attachEventsForSelect(b.elementCache.$select)},attachEventsForSelect:function(a){var b=this;if(localStorage.hasOwnProperty(b.storageNameCustom)!==true){b.elementCache.$select.find('li[data-value="custom"]').hide()}a.off("change").on("change",function(g){b.elementCache.$popup.find("input").prop("checked",false);if(this.value!=="custom"&&this.value!=="hotAssets"){if(this.value!==""){$("#assetFilterCustom_type_"+this.value).trigger("click")}}else{if(this.value==="hotAssets"){$.each(b.data.assetsPerType,function(e,i){$.each(i,function(j,l){if(l.isHot===true){$("#assetFilterCustom_asset_"+l.id).trigger("click")}})})}else{var f=b.getTheCustomFilter(),c=[];for(var d=0,h=f.asset.length;d<h;d++){c.push($("#assetFilterCustom_asset_"+f.asset[d]))}$(c).trigger("click")}}b.applySelectChange(this.value)});a.off("selectIsOpen").on("selectIsOpen",function(){if(b.elementCache.$popup.is(":visible")){b.closePopup()}});$(window).off(widgets.events.noOptions).on(widgets.events.noOptions,function(){if(b.elementCache.$select[0].attributes.value.value==="custom"){b.elementCache.$popup.find("input").prop("checked",false);b.elementCache.$select.changeSelectedOption(0);b.applySelectChange();b.elementCache.$select.find('li[data-value="custom"]').hide();alert("There are not options for selected asset right now etc.")}})},applySelectChange:function(){var b=this,a=b.getSelectedAssets();b.setFilteredAssets(a);$(window).trigger(widgets.events.assetFilterChanged,a.asset)},saveTheCustomFilter:function(b){var a=this;localStorage.setItem(a.storageNameCustom,JSON.stringify(b))},getTheCustomFilter:function(){var a=this;return JSON.parse(localStorage.getItem(a.storageNameCustom))}};
var assetNameWidget={init:function(){var a=this;$(a.element).show();$(window).on(widgets.events.linkOptionUpdated,function(d,c){var b=widgets.links[c].option.name;$(a.elements).html(b)})},};
var assetPerformanceWidget={init:function(){var a=this;widgets.callbacks.optionDropDownReady=function(){widgets.api.getAsstPerfData($(".widgetOptionDropDown option:selected").attr("data-assetId"),a.buildAsstPerfGrid)};$(".widgetOptionDropDown").change(function(){widgets.api.getAsstPerfData($("option:selected",this).attr("data-assetId"),a.buildAsstPerfGrid)})},buildAsstPerfGrid:function(a){var b=$("[data-widget=assetPerformance]");b.html("");var d=$('<div class="rowAsstPerfMain"></div>');$(d).append('<div class="rowTitleWrap"><div class="rowTitleDiv">Date & Time</div><div class="rowTitleDiv">Rate Change</div><div class="rowTitleDiv last">Traders Trend</div></div>');if(a.data.length>0){var c=a.data;$.each(c,function(f,j){var e=widgets.formatDate(new Date(j.timestamp));var g="";if(j.isHigher==true){g="positive"}var h=(10000-j.winPercent*100)/100;$(d).append('<div class="rowAsstPerf"><div class="rowAsstDate">'+e+'</div><div class="rowAsstRate '+g+'">'+j.rate+'<div class="asstPerImgRate '+g+'"></div></div><div class="rowAsstTrend"><div class="asstPerImgWin"></div><div class="asstPerWin">Win '+j.winPercent.toFixed(2)+'%</div><div class="asstPerImgLoss"></div><div class="asstPerLoss">Loss '+h.toFixed(2)+"% </div></div></div>");if(f%2!=0){$(d).find(".rowAsstPerf").last().addClass("odd")}})}b.append(d)}};
var assetsGroupsWidget={groups:[{name:"US Forex",filter:"^USD",assets:{}},{name:"EU Forex",filter:"^EUR|^GBP",assets:{}},{name:"Japan Forex",filter:"^JPY",assets:{}},{name:"Canada Forex",filter:"^CAD",assets:{}},{name:"Oceania Forex",filter:"^AUD|^NZD",assets:{}},{name:"Digital Forex",filter:"^Bitcoin|^Litecoin|^BTC|^LTC",assets:{}},{name:"Other Forex",filter:"^(?!(USD|EUR|JPY|CAD|AUD|NZD|GBP|Bitcoin|Litecoin|BTC|LTC))",assets:{}},{name:"Commodities",filter:false,assets:{}},{name:"US Stocks",filter:"^3M|^Aflac|^Alcoa|^amazon|^american|^aon|^apple|^AT&T|^BAIDU|^Bank Of America|^BB&T|^Best|^Blackrock|^Boeing|^Capital|^Caterpillar|^Chevron|^cisco|^Citigroup|^CME|^Coca Cola Co$|^Colgate|^dell|^disney|^ebay|^Electronic Arts|^Eli Lilly|^Exxon|^Facebook|^fedex|^google|^ibm|^ing|^intel|^iShares|^JPMorgan|^Market Vectors|^Marks|^Mastercard|^McDonald|^Merck|^Morgan|^Nike|^NYSE|^Petro|^Powershares|^sandisk|^spdr|^tesla|^time warner|^PepsiCo|^twitter|^US Steel|^visa|^xerox|^yahoo|^home depot",assets:{}},{name:"EU Stocks",filter:"^A.S. Roma|^ABB|^Aetna|^AFC|^Allianz|^aryzta|^AstraZeneca|^Aviva|^axa|^banca|^Barclays|^Bayer|^BHP Billiton$|^BMW|^Borussia|^BP|^British|^Carnival|^Carrefour|^Celtic|^Commerzbank|^Danone|^Deutsche|^E\\.ON|^EADS|^Electrolux|^Enel|^Eni|^Ericsson^F\\.C\\. Porto|^fiat|^Finmeccanica|^General Electric|^GlaxoSmithKline|^Glencore|^Hennes|^HSBC|^IAG|^Juventus|^L.Oreal|^Lufthansa|^LVMH|^Manchester|^Luxottica|^Metro|^Michelin|^nokia|^Nestle|^Nordea|^NOVARTIS|^Orange|^Olympiques|^Pernod|^Philips|^RBS|^Renault|^Repsol|^ROCHE|^Rolls Royce|^Ryanair|^Sanofi|^Scania|^Siemens|^Telefonica|^Tesco|^Total|^Tottenham|^UBS|^UniCredit|^Vivendi|^Vodafone|^Volkswagen|^Volvo",assets:{}},{name:"Asia Stocks",filter:"^Acer|^Air Arabia|^Akbank|^Al Ahsa|^Al rajhi|^al-salam|^Aldar|^alinma|^anhui|^arabtec|^Bank Leumi|^Bezeq|^bharti|^Bridgestone|^CELLTRION|^China|^citic|^coal|^coca cola$|^dar al|^deyaar|^dlf|^drake|^emaar|^Etisalat|^Fenerbahce|^Galatasaray|^gazprom|^GRANDHOPE|^gree|^gulf|^honda|^htc|^hyundai|^idfc|^industrial bank|^Infosys|^ISBank|^kec|^kia|^kingdom|^konami|^korea|^Kweichow|^Lukoil|^Luzhou|^mazda|^Microsoft|^Mitsubishi|^MTN|^mts|^Nomura|^norilsk|^ping an|^Reliance|^Rosneft|^rostelekom|^Rusgidro|^sabic|^saic|^samsung|^saudi|^sberbank|^severstal|^shanxi|^shenzhen|^shuaa|^Softbank|^sony|^state bank of india|^Sumitomo|^Surguneftegaz|^tata|^toshiba|^toyota|^transneft|^turkcell|^turkish|^unitech|^vtb|^Wuliangye|^Zte",assets:{}},{name:"Oceania Stocks",filter:"^AMP|^BHP Billiton Ltd|^Brambles|^Commonwealth|^CSL|^Macquarie|^National Au|^Newcrest|^Origin Energy|^qbe|^rio tinto|^santos|^suncorp|^telstra|^Wesfarmers|^Westfield|^Westpac|^Woodside|^Woolworths",assets:{}},{name:"South America Stocks",filter:"^all america|^aluar|^ambev|^anglo|^arca|^banco|^banregio|^BR Malls|^Cetip|^Comercial|^Cyrela|^gruma|^grupo|^Industrias|^Kimberly|^kumba|^lojas|^Mexichem|^Natura Cosmeticos|^Ohl Mexico|^Pampa|^pan african|^petrobras|^pyo|^remgro|^rmb holdings|^royal bafokeng|^santander|^sanlam|^Soriana|^sorouh|^souza|^telecom argentina|^ultrapar|^vale|^wal mart|^YPF",assets:{}},{name:"Other Stocks",filter:"",assets:{}},{name:"US Indices",filter:"^Dow|^Nasdaq|^S&P|^USs|^VIX|^T-Note",assets:{}},{name:"EU Indices",filter:"^AEX|^BEL|^Bund|^CAC|^DAX|^EGX|^Euro|^FTSE Future|^FTSE MIB|^IBEX|^OMXS|^RTS|^SMI|^sotox|^Swiss|^WIG",assets:{}},{name:"Asia Indices",filter:"^Abu|^BSE|^CNX|^Dubai|^FTSE Malaysia|^Hang|^ISE|^KOSPI|^LQ45|^Malaysia|^Manila|^MSCI|^Muscat|^Nifty|^Nikkei|^SET|^Shanghai|^Tadawul|^taiex|^topix|^Vns",assets:{}},{name:"Oceania Indices",filter:"^ASX|^SPI",assets:{}},{name:"South America Indices",filter:"^Bovespa|^Burcap|^Colombo|^Merval",assets:{}},{name:"Other Indices",filter:"",assets:{}}],isProcessed:false,init:function(){var b=this;widgets.isTraderoom=true;var a=0;$(window).on(widgets.events.optionsUpdated,function(f,e,d){var c=[];if(e=="del"){$.each(widgets.options,function(g,h){if(c.indexOf(h.tradableAssetId)==-1){c.push(h.tradableAssetId)}})}$.each(d,function(g,h){switch(e){case"add":b.addOption(h);break;case"del":if(c.indexOf(h.tradableAssetId)==-1){b.delOption(h)}break}});b.process()});$(window).on(widgets.events.tableIsLoaded,function(){if(!b.isProcessed){b.isProcessed=true;b.selectDefaultAsset()}})},process:function(){var a=this;$(a.element).html("");$.each(a.groups,function(b,c){if(Object.keys(c.assets).length>0){a.addAssetsGroup(c)}})},selectDefaultAsset:function(){var c=this;var a=$(c.element).find(".groupbody .selected");if(a.length==0){var b=$(c.element).find(".groupbody").first().children().first();b.click()}},addAssetsGroup:function(d){var c=this;var e=d.name.replace(/\s+/g,"").toLowerCase();var a='<div class="groupheader expanded" data-group='+e+">"+d.name+"</div>";var b="";$.each(d.assets,function(f,g){b+="<div data-taid="+f+">"+g+"</div>"});b='<div class="groupbody" data-group='+e+">"+b+"</div>";$(c.element).append(a+b);$("[data-group="+e+"]:first").click(function(){$("[data-group="+e+"]:last").toggle({duration:200});$(this).toggleClass("expanded");$(this).toggleClass("collapsed")});$("[data-group="+e+"]:last").click(function(h){var g=$(h.target);$(c.element).find("div").removeClass("selected");g.addClass("selected");$("[data-group="+e+"]:first").addClass("selected");var i=g.attr("data-taid");var f=g.text();$(window).trigger(widgets.events.filterOptionsByTAId,[i,f])})},addOption:function(b){var c=this;var a=false;if(b.assetName.toLowerCase()=="currencies"){$.each(c.groups,function(e,g){if(g.name.indexOf("Forex")>-1){var f=new RegExp(g.filter,"i");if(f.test(b.name)==true&&Object.keys(g.assets).indexOf(b.tradableAssetId.toString())==-1){g.assets[b.tradableAssetId]=b.name;return false}}})}else{if(b.assetName.toLowerCase()=="commodities"){var d=$.grep(c.groups,function(f){return f.name=="Commodities"})[0];if(Object.keys(d.assets).indexOf(b.tradableAssetId.toString())==-1){d.assets[b.tradableAssetId]=b.name}}else{if(b.assetName.toLowerCase()=="stocks"){$.each(c.groups,function(e,g){if(g.name.indexOf("Stocks")>-1&&g.name!="Other Stocks"){var f=new RegExp(g.filter,"i");var h=f.test(b.name)==true;if(h){a=true}if(h&&Object.keys(g.assets).indexOf(b.tradableAssetId.toString())==-1){g.assets[b.tradableAssetId]=b.name;return false}}});if(!a){var d=$.grep(c.groups,function(f){return f.name=="Other Stocks"})[0];if(Object.keys(d.assets).indexOf(b.tradableAssetId.toString())==-1){d.assets[b.tradableAssetId]=b.name}}}else{if(b.assetName.toLowerCase()=="indices"){$.each(c.groups,function(e,g){if(g.name.indexOf("Indices")>-1&&g.name!="Other Indices"){var f=new RegExp(g.filter,"i");var h=f.test(b.name)==true;if(h){a=true}if(h&&Object.keys(g.assets).indexOf(b.tradableAssetId.toString())==-1){g.assets[b.tradableAssetId]=b.name;return false}}});if(!a){var d=$.grep(c.groups,function(f){return f.name=="Other Indices"})[0];if(Object.keys(d.assets).indexOf(b.tradableAssetId.toString())==-1){d.assets[b.tradableAssetId]=b.name}}}}}}},delOption:function(a){var b=this;if(a.assetName.toLowerCase()=="currencies"){$.each(b.groups,function(d,e){if(e.name.indexOf("Forex")>-1){if(Object.keys(e.assets).indexOf(a.tradableAssetId.toString())>-1){delete e.assets[a.tradableAssetId];return false}}})}else{if(a.assetName.toLowerCase()=="commodities"){var c=$.grep(widgets.groups,function(d){return d.name=="Commodities"})[0];if(Object.keys(c.assets).indexOf(a.tradableAssetId.toString())>-1){delete c.assets[a.tradableAssetId]}}else{if(a.assetName.toLowerCase()=="stocks"){$.each(b.groups,function(d,e){if(e.name.indexOf("Stocks")>-1){if(Object.keys(e.assets).indexOf(a.tradableAssetId.toString())>-1){delete e.assets[a.tradableAssetId];return false}}})}else{if(a.assetName.toLowerCase()=="indices"){$.each(b.groups,function(d,e){if(e.name.indexOf("Indices")>-1){if(Object.keys(e.assets).indexOf(a.tradableAssetId.toString())>-1){delete e.assets[a.tradableAssetId];return false}}})}}}}}};
var assetsIndexWidget={assets:[],widgetName:"assetsIndex",popUp:"click",init:function(){var a=this;$(document).click(function(){if(a.popUp!="slideToggle"){$(".assetDetails").remove()}});widgets.api.getTradableAssetsIndex(function(b){a.processResponse(b)})},processResponse:function(response){$("[data-widget=assetsIndex][data-type=container]").show();var widget=this;var data=eval(response);widget.assets=data.data;widget.initCommodities();widget.initCurrencies();widget.initIndices();widget.initStocks()},initCommodities:function(){var c=this;var b=$("[data-widget=assetsIndex][data-type=commodities]");var a=$("[data-widget=assetsIndex][data-type=commodities]").attr("data-popup-details");if(a==undefined){a="click"}c.popUp=a;if(!b.length){return}$(c.assets).map(function(){var d=this;if(d.type==4){c.assetDetails(d,b,a)}})},initCurrencies:function(){var c=this;var b=$("[data-widget=assetsIndex][data-type=currencies]");var a=$("[data-widget=assetsIndex][data-type=currencies]").attr("data-popup-details");if(a==undefined){a="click"}c.popUp=a;if(!b.length){return}$(c.assets).map(function(){var d=this;if(d.type==1){c.assetDetails(d,b,a)}})},initIndices:function(){var b=this;var c=$("[data-widget=assetsIndex][data-type=indices]");var a=$("[data-widget=assetsIndex][data-type=indices]").attr("data-popup-details");if(a==undefined){a="click"}b.popUp=a;if(!c.length){return}$(b.assets).map(function(){var d=this;if(d.type==2){b.assetDetails(d,c,a)}})},initStocks:function(){var b=this;var c=$("[data-widget=assetsIndex][data-type=stocks]");var a=$("[data-widget=assetsIndex][data-type=stocks]").attr("data-popup-details");if(a==undefined){a="click"}b.popUp=a;if(!c.length){return}$(b.assets).map(function(){var d=this;if(d.type==3){b.assetDetails(d,c,a)}})},assetDetails:function(b,g,a){var d=this;var f="asset"+b.id;$("#"+f).remove();var c=$('<div class="assetDiv" id="'+f+'">'+b.name+"</div>");g.append(c);if(a=="click"||a=="slideToggle"){$(c).click(function(){widgets.api.getTradeTimesForCalendar(b.calendarId,function(h){d.processAssetDetails(h,b.id)})})}else{var e=false;$(c).hover(function(){e=true;setTimeout(function(){if(e){widgets.api.getTradeTimesForCalendar(b.calendarId,function(h){d.processAssetDetails(h,b.id)})}},500)},function(){e=false;$(".assetDetails").remove()})}},processAssetDetails:function(b,j){var g=this;if(b.message!="OK"||b.data==null){return}if(g.popUp=="slideToggle"){var c=$("#asset"+j);if(c.find(".assetDetails").length==0){var d=$.grep(g.assets,function(i){return i.id==j})[0];var h="asset"+j+"details";var a='<div id="'+h+'" class="assetDetails" style="display:none"><div class="name">'+d.name+"</div>";if(d.symbol&&d.symbol!=d.name){a+='<div class="symbol">('+d.symbol+")</div>"}if(d.description){a+='<div class="description">'+d.description+"</div>"}if(b.data.length>0){a+='<h3 class="titleCalendar">Trading Hours:</h3>';for(var e=0;e<b.data.length;e++){value=b.data[e];a+=g.resolveWeekdays(value.StartDayOfWeek)+": "+value.StartTimeOfDay+" - "+value.EndTimeOfDay+"<br/>"}}a+="</div>";c.append(a)}var f=c.find(".assetDetails");$(".assetDetails").not(f).slideUp(300);f.slideToggle(300);$(".assetDetails").not(f).parent().removeClass("active");c.toggleClass("active")}else{$(".assetDetails").remove();var c=$("#asset"+j);var d=$.grep(g.assets,function(i){return i.id==j})[0];var h="asset"+j+"details";var a='<div id="'+h+'" class="assetDetails"><div class="name">'+d.name+"</div>";if(d.symbol&&d.symbol!=d.name){a+='<div class="symbol">('+d.symbol+")</div>"}if(d.description){a+='<div class="description">'+d.description+"</div>"}if(b.data.length>0){a+='<h3 class="titleCalendar">Trading Hours:</h3>';for(var e=0;e<b.data.length;e++){value=b.data[e];a+=g.resolveWeekdays(value.StartDayOfWeek)+": "+value.StartTimeOfDay+" - "+value.EndTimeOfDay+"<br/>"}}a+="</div>";c.append(a)}},resolveWeekdays:function(a){switch(a){case 1:return"Sunday";case 2:return"Monday";case 3:return"Tuesday";case 4:return"Wednesday";case 5:return"Thursday";case 6:return"Friday";case 0:return"Saturday"}}};
var balanceWidget={numberwithcommas:false,init:function(){var a=this;if(a.element.attr("data-numberwithcommas")=="true"){a.numberwithcommas=true}$(window).on(widgets.events.userLogin,function(b){if(widgets.user!=null&&widgets.user.balance!=null){a.processBalance()}});$(window).on(widgets.events.loginIsCompleted+" "+widgets.events.registrationCompleted+" "+widgets.events.tradeIsCompleted+" "+widgets.events.afterWagerBonusWon+" "+widgets.events.openTradesTradeOrderExecuted,function(b){widgets.api.getUserDataFilter("balance",function(c){a.processBalance(c)})})},processBalance:function(b){var e=this;if(b!=null&&b.code==401){return}var c=balanceWidget.element;var d=b!=undefined&&b.data!=null?b.data.balance:widgets.user.balance;widgets.user.balance=d;var a=helper.getCurrencySymbol();c.html(helper.formatCurrency(a,d,e.numberwithcommas));$(window).trigger(widgets.events.balanceUpdated,helper.formatCurrency(a,d,e.numberwithcommas))}};
var bugsense;(function(a,b){if(typeof define==="function"&&define.amd){define(function(){return(a.Bugsense=b())})}else{a.Bugsense=b()}}(this,function(){var w=function w(C,B){return Object.keys(B).forEach(function(D){C[D]=B[D]})};var o=encodeURIComponent;var g=function g(B){return B instanceof Object};var h=function h(B){return B instanceof Array};var f=function f(B){return(typeof(B)=="string"||typeof(B)=="number"||typeof(B)=="boolean")};var s=function s(C,B){Array.prototype.forEach.call(Object.keys(C),function(D){B(D,C[D])})};var n=function n(E,D,C,B){var F=h(D);s(D,function(G,H){if(B){G=C?B:B+"["+(F?"":G)+"]"}if(!B&&F){E.add(H.name,H.value)}else{if(C?h(H):g(H)){n(E,H,C,G)}else{E.add(G,H)}}})};var e=function e(C,B){var D=[];D.add=function(F,E){this.push(o(F)+"="+o(E))};n(D,C,B);return D.join("&").replace(/%20/g,"+")};var q=function l(){var B=function(){return Math.floor(Math.random()*65536).toString(16)};return(B()+B()+"-"+B()+"-"+B()+"-"+B()+"-"+B()+B()+B())};var x=function(C){w(this.config,C);this.config.winjs=typeof(WinJS)!=="undefined";this.extraData={};this.breadcrumbs=[];bugsense=this;if(typeof(this.config.context.onerror)!=="undefined"&&!this.config.disableOnError){this.config.context.onerror=bugsense.onerror}if(this.config.winjs){WinJS.Promise.onerror=bugsense.onpremiseerror;var E=Windows.ApplicationModel.Package.current.id.version;this.config.appversion=[E.major,E.minor,E.build,E.revision].join(".");this.send_cached_report_if_any();var D=Windows.Storage.ApplicationData.current.localSettings;var B=D.guid;if(!B){B=q();D.guid=B}this.config.guid=B}return this};x.prototype.config={apiKey:"FOOBAR",url:"https://www.bugsense.com/api/errors",pingUrl:"http://ticks2.bugsense.com/api/ticks",appversion:null,popup:false,callback:null,context:window,winjs:null,message:null};x.prototype.addExtraData=function v(B,C){if(f(B)&&f(C)){this.extraData[B]=C}};x.prototype.removeExtraData=function p(B){delete this.extraData[B]};x.prototype.clearExtraData=function j(){this.extraData={}};x.prototype.leaveBreadcrumb=function t(B){if(f(B)){if(this.breadcrumbs.length+1==16){this.breadcrumbs=this.breadcrumbs.slice(1)}this.breadcrumbs.push(B)}};x.prototype.clearBreadcrumbs=function c(){this.breadcrumbs=[]};x.prototype._die=function y(){throw"BugSense exited"};x.prototype.successHandler=function k(G){function B(){throw"BugSense exited"}if(G.target&&G.target.readyState!=4){return}if(G.target&&G.target.status!=200&&bugsense.config.winjs){return false}if("console" in window){console.log("logged 1 error to Bugsense, status: "+G.target.responseText)}if(bugsense.config.winjs){if(G.target.responseText!==undefined&&G.target.responseText.indexOf("url")>0){var F=JSON.parse(G.target.responseText);var I=new Windows.UI.Popups.MessageDialog(F.data.tickerText);var J,D=["Update","Cancel"];var E;for(var H=0;H<D.length;H++){E=new Windows.UI.Popups.UICommand();E.label=D[H];E.invoked=function(K){J=K.label};I.commands.append(E)}I.showAsync().then(function(L){if(L.label=="Update"){var K=Windows.Foundation.Uri(F.data.url);Windows.System.Launcher.launchUriAsync(K)}return L.label}).done(function C(){window.bugsense._die()})}else{if(G.target.responseText.length>0&&G.target.responseText.indexOf("url")<0){if(window.bugsense.config.message!==null){var I=new Windows.UI.Popups.MessageDialog(window.bugsense.config.message);var J,D=["OK"];var E;for(var H=0;H<D.length;H++){E=new Windows.UI.Popups.UICommand();E.label=D[H];E.invoked=function(K){J=K.label};I.commands.append(E)}I.showAsync().then(function(K){return K.label}).done(function C(){window.bugsense._die()})}else{window.bugsense._die()}}}}};x.prototype.getPostURL=function u(){return x.prototype.config.url+"?cacheBuster="+(new Date()).getTime()};x.prototype.parseError=function A(B){var F={};if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){F={message:B.message,url:window.location.href,line:B.lineNumber,stack:B.stack,type:B.name}}else{if(this.config.winjs===true&&typeof(B.stack)==="undefined"){F={message:B.detail.errorMessage,url:B.detail.errorUrl,line:B.detail.errorLine,stack:(B.detail.stack===undefined)?B.detail.errorMessage:B.detail.stack,type:B.detail.errorCode}}else{if(this.config.winjs===true&&typeof(B.stack)!=="undefined"){var D=B.stack;var C=D.substr(D.indexOf("(")+1,D.indexOf(")")-D.indexOf("(")-1).split(":");F={message:B.message,url:C[0]+":"+C[1],line:C[2],stack:B.stack,type:B.stack.split(":")[0],handled:true}}else{try{var E=B.stack.split("\n").slice(1)[0].match(/\s+at\s.*(\/.*\..*|<anonymous>:\d*:\d*)/)}catch(B){B.stack=B.message}F={message:[B.name,B.message].join(": "),url:E?E[1].split(":")[0].replace("/",""):"",line:E?E[1].split(":")[1]:"",stack:B.stack,type:B.name}}}}if(F.stack==null||(typeof(F.stack)=="string"&&F.stack.length==0)){F.stack=F.message}return F};x.prototype.generateExceptionData=function d(H,B,J,F,G){if(typeof(H)!="string"){H=H.toString()}var I=window.navigator.userAgent;var E="unknown";if(this.config.winjs){try{E=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().profileName}catch(C){E="Offline"}}else{if(typeof window.navigator.network!=="undefined"){E=window.navigator.network.connection.type}}var D={client:{name:"bugsense-js",version:"1.1"},request:{custom_data:G},exception:{message:H,where:[B,J].join(":"),klass:H.split(":")[0],backtrace:(typeof(F)==="undefined")?H:F,breadcrumbs:this.breadcrumbs},application_environment:{phone:window.navigator.platform,appver:(this.config.appversion||"unknown"),appname:(this.config.appname||"unknown"),osver:(typeof window.device!=="undefined")?window.device.version:I.substr(I.indexOf("; ")+2,I.length).replace(")",";").split(";")[0]||"unknown",connection_type:E,user_agent:window.navigator.userAgent,cordova:(typeof window.device!=="undefined")?window.device.cordova:"unknown",device_name:(typeof window.device!=="undefined")?window.device.name:"unknown",log_data:this.extraData}};if(this.config.winjs){D.application_environment.cpuClass=window.navigator.cpuClass;D.application_environment.osver=window.navigator.userAgent.split(";")[2];D.application_environment.languages=window.navigator.systemLanguage;D.application_environment.locale=window.navigator.userLanguage;D.application_environment.is_trial=Windows.ApplicationModel.Store.CurrentApp.licenseInformation.isTrial;D.application_environment.is_active=Windows.ApplicationModel.Store.CurrentApp.licenseInformation.isActive;D.application_environment.uid=this.config.guid;if(typeof(G)!=="undefined"){if(typeof(G.handled)!=="undefined"){D.exception.handled=0}}}return D};x.prototype.testException=function m(B){if(this.config.winjs===true&&typeof(B.detail)!=="undefined"){return B.type==="error"}return Object.prototype.toString.call(B)==="[object Error]"};x.prototype.isBugsenseException=function a(B){return this.config.winjs&&this.testException(B)&&B.detail.errorMessage==="BugSense exited"};x.prototype.notify=function r(E,C,J,F,I){var H;if(typeof(F)==="object"){I=F}if(window.console&&window.console.error){console.error(E,C+":"+J)}if(typeof(C)==="object"&&this.testException(E)){I=C;C=undefined}if(this.testException(E)){var B=this.parseError(E);message=[B.type,B.message].join(":");C=B.url;J=B.line;H=B.stack;if(typeof(B.handled)!=="undefined"){if(typeof(I)!=="object"){I={}}I.handled=0}}else{message=E}var G=this.generateExceptionData(message,C,J,H,I);var D=new XMLHttpRequest();D.open("POST",this.getPostURL(),true);D.setRequestHeader("X-BugSense-Api-Key",this.config.apiKey);D.setRequestHeader("Content-Type","application/x-www-form-urlencoded");D.onerror=function(L){if(bugsense.config.winjs){WinJS.Application.local.writeText("CachedCrashReport",JSON.stringify(G)).done(function K(){console.log("written");window.bugsense._die()})}};if(!(I instanceof Object&&I.handled==0)){D.onreadystatechange=this.successHandler}D.send(e({data:JSON.stringify(G)}));return true};x.prototype.send_cached_report_if_any=function z(){var B=WinJS.Application.local;B.exists("CachedCrashReport").then(function(C){if(C){B.readText("CachedCrashReport").then(function(D){var F=JSON.parse(D);var E=new XMLHttpRequest();E.open("POST",window.bugsense.getPostURL(),true);E.setRequestHeader("X-BugSense-Api-Key",window.bugsense.config.apiKey);E.setRequestHeader("Content-Type","application/x-www-form-urlencoded");E.onreadystatechange=function(G){if(G.target&&G.target.readyState==4){WinJS.Application.local.remove("CachedCrashReport");return}};E.send(e({data:JSON.stringify(F)}))}).done()}}).done()};x.prototype.onerror=function b(D,C,B,E,F){if(window.bugsense.isBugsenseException(D)){return false}return window.bugsense.notify(D,C,B,E,F)};x.prototype.onpromiseerror=function i(B){if(window.bugsense.isBugsenseException(exception)){return false}return window.bugsense.notify(B.detail.exception,B.detail.promise)};return x}));
var buttonAlphaWidget={lastOptionName:null,init:function(){var b=this;widgets.isTraderoom=true;$(b.element).addClass("widgetButtonAlpha");var a=widgets.links[b.link].option;$(b.element).on("click touchend",function(){b.clickButton();$(window).trigger(widgets.events.buttonAlphaClick,$(b.element))});$(b.element).mouseover(function(){b.mouseover();var c={element:$(b.element),link:b.link};widgets.links[b.link].isAlphaOver=true;$(window).trigger(widgets.events.mouseOver,c)});$(b.element).mouseout(function(){b.mouseout();var c={element:$(b.element),link:b.link};widgets.links[b.link].isAlphaOver=null;$(window).trigger(widgets.events.mouseOut,c)});$(window).on(widgets.events.linkOptionUpdated,function(d,c){if(!widgets.links[b.link].option){return}if(b.lastOptionName&&widgets.links[b.link].option.name!=b.lastOptionName){widgets.links[b.link].isAlpha=null}b.lastOptionName=widgets.links[b.link].option.name});$(this.element).show()},mouseover:function(){var b=this;var e=widgets.all[b.game+"_"+b.link+"_chart"];if(typeof e=="undefined"||!e.container){return false}e.container.resetDirection();var d=parseFloat($("[data-widget="+b.game+"_"+b.link+"_rate]").html());var a=parseFloat($("[data-widget="+b.game+"_"+b.link+"_rateBeta]").html());if(isNaN(a)){rateAdvanced=null}var i=b.game.toLowerCase();var h=true;if(i=="touch"||i=="range"||i=="onetouch"){if(i=="range"){var c=widgets.links[b.link].option;var g=$("[data-widget="+b.game+"_"+b.link+"_rateAlpha]").find('[data-type="buttonAlpha"]');var f=$("[data-widget="+b.game+"_"+b.link+"_rateBeta]").find('[data-type="buttonAlpha"]');g.html(widgets.prices[c.id].rateAlpha.upperPrice);f.html(widgets.prices[c.id].rateAlpha.lowerPrice);d=parseFloat(g.html());rateAdvanced=parseFloat(f.html())}else{if(i=="touch"){d=widgets.links[b.link].price.rateBeta;rateAdvanced=null}else{if(i=="onetouch"){var c=widgets.links[b.link].option;$("[data-widget="+b.game+"_"+b.link+"_rateBeta]").html(widgets.prices[c.id].rateAlpha);d=parseFloat($("[data-widget="+b.game+"_"+b.link+"_rateAlpha]").find(".targetLblContent.price").html());rateAdvanced=null;if(!c.isUp){h=false}}else{d=a;rateAdvanced=null}}}}if(typeof e!="undefined"){e.setDirection(h,d,rateAdvanced)}},mouseout:function(){var d=this;var b=widgets.all[d.game+"_"+d.link+"_chart"];if(typeof b=="undefined"||!b.container){return false}b.container.resetDirection();if(widgets.links[d.link].isAlpha===false){var c=widgets.all[d.game+"_"+d.link+"_buttonBeta"];c.mouseover(d)}else{if(widgets.links[d.link].isAlpha===true){var a=widgets.all[d.game+"_"+d.link+"_buttonAlpha"];a.mouseover(d)}}},clickButton:function(){var f=this;widgets.links[f.link].isAlpha=true;$(window).trigger(widgets.events.click,f.element);if(f.element.attr("data-custom")){return}var g=widgets.links[f.link].option;var c=true;var h=0;var j=true;var i=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rate]").html());if(f.game=="range"){var b=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateAlpha]").find('[data-type="buttonAlpha"]').html());var d=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateBeta]").find('[data-type="buttonAlpha"]').html())}else{var b=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateAlpha]").html());var d=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateBeta]").html())}var a=$(".widgetTradeboxOpen [data-widget="+f.game+"_"+f.link+"_contracts]");var l=$(a).is(":visible")?parseInt($(a).val()):0;var k=widgets.links[f.link].payout!=undefined?widgets.links[f.link].payout.profit:0;var e=widgets.links[f.link].payout!=undefined?widgets.links[f.link].payout.loss:0;if($(".widgetTradeboxOpen").is(":hidden")){$(".widgetTradebox").find(".widgetTradeboxInitial").fadeOut("fast",function(){$(".widgetTradebox").find(".widgetTradeboxOpen").slideDown();$(".widgetTradeActions [data-widget="+f.game+"_"+f.link+"_buttonAlpha]").show();$(".widgetTradeActions [data-widget="+f.game+"_"+f.link+"_buttonBeta]").hide()});j=false}if(j){h=$("[data-widget="+f.game+"_"+f.link+"_investAmount]").val();if(typeof(h)==="undefined"){h=$("[data-widget="+f.game+"_"+f.link+"_investDropDown]").val()}if(h.indexOf(widgetMessage.amount)!==-1){return}switch(f.game){case"digital":widgets.api.addBinaryTradeOrder_v2(g.id,c,i,h,k,e,l,[widgets.processPayment,widgets.api.setTradeCompleted]);break;case"range":widgets.api.addRangeTradeOrder(g.id,c,d,b,h,[widgets.processPayment,widgets.api.setTradeCompleted]);break;case"touch":widgets.api.addTouchTradeOrder(g.id,c,d,h,[widgets.processPayment,widgets.api.setTradeCompleted]);break}}}};
var buttonBetaWidget={lastOptionName:null,init:function(){var b=this;$(b.element).addClass("widgetButtonBeta");var a=widgets.links[b.link].option;$(b.element).on("click touchend",function(){b.clickButton();$(window).trigger(widgets.events.buttonBetaClick,$(b.element))});$(b.element).mouseover(function(){b.mouseover();var c={element:$(b.element),link:b.link};widgets.links[b.link].isAlphaOver=false;$(window).trigger(widgets.events.mouseOver,c)});$(b.element).mouseout(function(){b.mouseout();var c={element:$(b.element),link:b.link};widgets.links[b.link].isAlphaOver=null;$(window).trigger(widgets.events.mouseOut,c)});$(window).on(widgets.events.linkOptionUpdated,function(d,c){if(!widgets.links[b.link].option){return}if(b.lastOptionName&&widgets.links[b.link].option.name!=b.lastOptionName){widgets.links[b.link].isAlpha=null}b.lastOptionName=widgets.links[b.link].option.name});$(this.element).show()},mouseover:function(){var d=this;var i=widgets.all[d.game+"_"+d.link+"_chart"];if(typeof i=="undefined"||!i.container){return false}i.container.resetDirection();var f=parseFloat($("[data-widget="+d.game+"_"+d.link+"_rate]").html());var e=parseFloat($("[data-widget="+d.game+"_"+d.link+"_rateAlpha]").html());var a=null;var g=null;if(isNaN(e)){e=null}var k=d.game.toLowerCase();var j=false;if(k=="touch"||k=="range"||k=="onetouch"){if(k=="range"){var c=widgets.links[d.link].option;var h=$("[data-widget="+d.game+"_"+d.link+"_rateAlpha]").find('[data-type="buttonBeta"]');var b=$("[data-widget="+d.game+"_"+d.link+"_rateBeta]").find('[data-type="buttonBeta"]');h.html(widgets.prices[c.id].rateBeta.upperPrice);b.html(widgets.prices[c.id].rateBeta.lowerPrice);f=parseFloat(h.html());e=parseFloat(b.html())}else{if(k=="touch"){f=widgets.links[d.link].price.rateAlpha;e=null}else{if(k=="onetouch"){var c=widgets.links[d.link].option;$("[data-widget="+d.game+"_"+d.link+"_rateAlpha]").find(".targetLblContent.price").html(widgets.prices[c.id].rateAlpha);f=parseFloat($("[data-widget="+d.game+"_"+d.link+"_rateAlpha]").find(".targetLblContent.price").html());e=null;if(!c.isUp){j=true}}else{f=e;e=null}}}}if(typeof i!="undefined"){i.setDirection(j,f,e)}},mouseout:function(){var d=this;var b=widgets.all[d.game+"_"+d.link+"_chart"];if(typeof b=="undefined"||!b.container){return false}b.container.resetDirection();if(widgets.links[d.link].isAlpha===false){var c=widgets.all[d.game+"_"+d.link+"_buttonBeta"];c.mouseover(d)}else{if(widgets.links[d.link].isAlpha===true){var a=widgets.all[d.game+"_"+d.link+"_buttonAlpha"];a.mouseover(d)}}},clickButton:function(){var f=this;widgets.links[f.link].isAlpha=false;$(window).trigger(widgets.events.click,f.element);if(f.element.attr("data-custom")){return}var g=widgets.links[f.link].option;var c=false;var h=0;var j=true;var i=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rate]").html());if(f.game=="range"){var b=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateAlpha]").find('[data-type="buttonBeta"]').html());var d=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateBeta]").find('[data-type="buttonBeta"]').html())}else{var b=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateAlpha]").html());var d=parseFloat($("[data-widget="+f.game+"_"+f.link+"_rateBeta]").html())}var a=$(".widgetTradeboxOpen [data-widget="+f.game+"_"+f.link+"_contracts]");var l=$(a).is(":visible")?parseInt($(a).val()):0;var k=widgets.links[f.link].payout!=undefined?widgets.links[f.link].payout.profit:0;var e=widgets.links[f.link].payout!=undefined?widgets.links[f.link].payout.loss:0;if($(".widgetTradeboxOpen").is(":hidden")){$(".widgetTradebox").find(".widgetTradeboxInitial").fadeOut("fast",function(){$(".widgetTradebox").find(".widgetTradeboxOpen").slideDown();$(".widgetTradeActions [data-widget="+f.game+"_"+f.link+"_buttonAlpha]").hide();$(".widgetTradeActions [data-widget="+f.game+"_"+f.link+"_buttonBeta]").show()});j=false}if(j){h=$("[data-widget="+f.game+"_"+f.link+"_investAmount]").val();if(typeof(h)==="undefined"){h=$("[data-widget="+f.game+"_"+f.link+"_investDropDown]").val()}if(h.indexOf(widgetMessage.amount)!==-1){return}switch(f.game){case"digital":widgets.api.addBinaryTradeOrder_v2(g.id,c,i,h,k,e,l,[widgets.processPayment,widgets.api.setTradeCompleted]);break;case"range":widgets.api.addRangeTradeOrder(g.id,c,d,b,h,[widgets.processPayment,widgets.api.setTradeCompleted]);break;case"touch":widgets.api.addTouchTradeOrder(g.id,c,b,h,[widgets.processPayment,widgets.api.setTradeCompleted]);break}}}};
var buttonBuyWidget={selectedOption:null,init:function(){var a=this;$(a.element).mouseover(function(){$(window).trigger(widgets.events.mouseOver,$(a.element))});$(a.element).mouseout(function(){$(window).trigger(widgets.events.mouseOut,$(a.element))});$(window).on(widgets.events.btnOverClicked,function(c,b){a.selectedOption=b});$(window).on(widgets.events.btnUnderClicked,function(c,b){a.selectedOption=b});$(a.element).show();$(a.element).on("click touchend",function(b){if(b.currentTarget!=undefined){b.currentTarget.blur()}a.clickButton()})},clickButton:function(){var g=this;if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var k=widgets.links[g.link];var q=k.option;var x=$("[data-widget="+g.game+"_"+g.link+"_buttonAlpha]").hasClass("isClicked");var p=$("[data-widget="+g.game+"_"+g.link+"_buttonBeta]").hasClass("isClicked");var o=$("[data-widget="+g.game+"_"+g.link+"_buttonAlpha]").hasClass("isClicked");var c;var b=$("[data-widget="+g.game+"_"+g.link+"_contracts]");if(b.length==0){c=0}else{if($("[data-widget="+g.game+"_"+g.link+"_contracts]").attr("value")=="-"){c=0}else{c=$("[data-widget="+g.game+"_"+g.link+"_contracts]").attr("value")}}var y=1;if(!x&&!p&&!widgets.isLadderBased(widgets.game)&&!(widgets.game=="overUnder")){return}var f=($("[data-widget="+g.game+"_"+g.link+"_payoutDynamic]").length==0)?false:true;if(g.game.toLowerCase()=="turbobinary"){var B=$("[data-widget="+g.game+"_"+g.link+"_expireTurbo] .activeRule").attr("data-ruleId");var u=false;$.each(q.rules,function(F,G){if(G.id==B){u=G;return true}})}var i=(typeof(q.isPayoutManagement)=="undefined")?u.isPayoutManagement:q.isPayoutManagement;var B=$("[data-widget="+g.game+"_"+g.link+"_expireTurbo] .activeRule").attr("data-ruleId");var r=$("[data-widget="+g.game+"_"+g.link+"_expireTurbo] .activeRule").attr("value");var n=k.price?k.price.riskPrice:null;var E=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rate]").html());var s;var z;var a=null;if(typeof(n)!=="undefined"&&n!==null&&n.modified===true){if(typeof(n.PPDRuleID)!=="undefined"){a=n.PPDRuleID}switch(g.game.toLowerCase()){case"digital":E=n.rate;break;case"range":s=x===true?n.rateAlpha.upperPrice:n.rateBeta.upperPrice;z=x===true?n.rateAlpha.lowerPrice:n.rateBeta.lowerPrice;break;case"onetouch":s=n.rateAlpha;break;case"touch":s=n.rateBeta;z=n.rateAlpha;break}}else{if(g.game=="range"&&x){s=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateAlpha]").find('[data-type="buttonAlpha"]').html());z=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateBeta]").find('[data-type="buttonAlpha"]').html())}else{if(g.game=="range"&&p){s=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateAlpha]").find('[data-type="buttonBeta"]').html());z=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateBeta]").find('[data-type="buttonBeta"]').html())}else{if(g.game=="oneTouch"){s=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateAlpha]").find(".targetLblContent.price").html())}else{s=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateAlpha]").html());z=parseFloat($("[data-widget="+g.game+"_"+g.link+"_rateBeta]").html())}}}}var j=$("[data-widget="+g.game+"_"+g.link+"_investDropDown]").val();if(!j){j=$("[data-widget="+g.game+"_"+g.link+"_investAmount]").val()}var d=0;var t=0;var e=0;var v=widgets.links[g.link].payout!=undefined?widgets.links[g.link].payout.profit:widgets.links[g.link].option.payout;var m=widgets.links[g.link].payout!=undefined?widgets.links[g.link].payout.loss:0;var D=widgets.game.toLowerCase();if(widgets.isLadderBased(widgets.game)){var w="";if(D=="ladder"||D=="binary100"){w="callButtonClicked"}else{if(D=="laddertouch"){w="touchButtonClicked"}}x=$("[data-widget="+g.game+"_"+g.link+"_table]").find(".strikeContentTable.activeRow ."+w+"").length>0;t=parseFloat($(".activeRow .widgetStrike").html());var C=x?"call":"put";if(widgets.game.toLowerCase()=="laddertouch"){C=x?"touch":"noTouch"}j=parseFloat($(".activeRow ."+C+"ButtonClicked").parent().find(".investAmount").html().replace(/[^0-9-.]/g,""));y=parseInt($(".widgetInvestAmount").val());d=$("[data-id="+q.id+"]").find(".ticketId").html();E=$("[data-id="+q.id+"]").find(".widgetTradeRate").html();e=$("#widgetsTicketSell").html().replace(/[^0-9-.]/g,"");v=Math.round(parseFloat($("#widgetsTicketMultiple").html())*widgets.payoutTotalUSD)}if(widgets.game=="overUnder"){var A=g.selectedOption.optionId;x=g.selectedOption.direction;l=g.selectedOption.strike;m=widgets.options[A].returnOnLoss;E=widgets.prices[A].rate;if(x){v=widgets.prices[A].payouts[l].CallPayout}else{v=widgets.prices[A].payouts[l].PutPayout}}helper.setLastExecutedTrade(B,q,C,s,z,E,t,j,y,g.game,d,e,x,r);switch(g.game.toLowerCase()){case"turbobinary":var l=null;if(typeof(k.price)!=="undefined"&&k.price!==null){if(typeof(k.price.marketrate)!=="undefined"){l=k.price.marketrate}if(typeof(k.price.PPDRuleID)!=="undefined"){a=k.price.PPDRuleID}}widgets.api.addTurboBinaryTradeOrder(q.id,B,x,E,j,f,i,l,a,widgets.api.setTradeCompleted);break;case"digital":widgets.api.addBinaryTradeOrder_v2(q.id,x,E,j,v,m,c,f,i,a,widgets.api.setTradeCompleted);break;case"range":widgets.api.addRangeTradeOrder(q.id,x,E,s,z,j,f,i,widgets.api.setTradeCompleted);break;case"touch":var h=x?s:z;widgets.api.addTouchTradeOrder(q.id,x,E,h,j,f,i,widgets.api.setTradeCompleted);break;case"onetouch":var h=s;widgets.api.addOneTouchTradeOrder(q.id,o,E,h,j,f,i,widgets.api.setTradeCompleted);break;case"ladder":widgets.api.addLadderTradeOrder(q.id,x,E,j,y,v,t,m,f,i,widgets.api.setTradeCompleted);break;case"laddertouch":widgets.api.addLadderTouchTradeOrder(q.id,x,E,j,y,v,t,m,f,i,widgets.api.setTradeCompleted);break;case"binary100":widgets.api.addBinary100TradeOrder(q.id,x,E,j,y,v,t,m,f,i,widgets.api.setTradeCompleted);break;case"overunder":widgets.api.addOverUnderTradeOrder(A,x,E,l,j,v,m,widgets.api.setTradeCompleted);break}if(typeof chartWidget=="object"){chartWidget.clearDirection()}}};
var cashBackWidget={init:function(){var a=this;$(window).on(widgets.events.userLogin,function(b){if(widgets.user!=null&&widgets.user.cashBackData!=null){a.processCashBack()}});$(window).on(widgets.events.loginIsCompleted+" "+widgets.events.registrationCompleted+" "+widgets.events.tradeIsCompleted+" "+widgets.events.openTradesTradeOrderExecuted,function(b){widgets.api.getUserDataFilter("cashBackData",function(c){a.processCashBack(c)})});a.elements.filter("[data-type=container]").hide()},processCashBack:function(e){var g=this;if(e!=null&&e.code==401){return}var a=(e&&(e.data.cashBackData||e.data.cashBackData==null))?e.data.cashBackData:widgets.user.cashBackData;var k=g.elements.filter("[data-type=maxTrades]");var d=g.elements.filter("[data-type=leftTrades]");var l=g.elements.filter("[data-type=leftAmount]");var b=g.elements.filter("[data-type=maxAmountPerTrade]");var n=g.elements.filter("[data-type=tradesProgressBar]");var h=g.elements.filter("[data-type=amountProgressBar]");var f=g.elements.filter("[data-type=container]").find(".cashBackHeader");var i=g.elements.filter("[data-type=container]").find(".cashBackCell");if(!a){if(f.length!=0){f.hide()}if(i.length!=0){i.hide()}g.elements.filter("[data-type=container]").hide();return}var j=helper.getCurrencySymbol();k.html(a.maxTrades);d.html(a.maxTrades-a.currentTrades);l.html(helper.formatCurrency(j,a.maxAmount-a.currentAmount));b.html(helper.formatCurrency(j,a.maxAmountPerTrade));var m=(a.currentTrades/a.maxTrades)*100;var c=(a.currentAmount/a.maxAmount)*100;n.html('<div style="width:'+m+'%;"></div>');h.html('<div style="width:'+c+'%;"></div>');if(f.length!=0){f.show()}if(i.length!=0){i.show()}g.elements.filter("[data-type=container]").show()}};
var cashierBonusHistoryWidget={widgetName:"cashierBonusHistory",data:null,page:1,tableDateFormat:null,code:{OK:200,NotAcceptable:406,BadRequest:400},isPostBack:false,limit:parseInt($("[data-widget=cashierBonusHistory][data-type=paging]").attr("data-pagingLimit"))||5,init:function(){var a=this;a.tableDateFormat=$("[data-widget=cashierBonusHistory][data-type=bonusTable]").attr("data-date-format")||helper.dateFormats.masks.normalDateTime;if(!a.isPostBack){a.isPostBack=true;a.initTable();var b={};b.limit=a.limit;b.offset=0;$(".bonusHistoryCancelBtn").live("click",function(c){var d=$(c.target).attr("data-bonusid");if(confirm(widgetMessage.cashierCancelBonusConfirm)){$(window).trigger(widgets.events.cashierLoading);widgets.api.cancelBonus(d,function(e){a.processBonusCancellation(e)})}});$(".bonusHistoryActivateBtn").live("click",function(c){var d=$(c.target).attr("data-bonusid");if(confirm(widgetMessage.cashierActivateBonusConfirm)){if($(c.target).attr("data-pendingwithdrawal")=="true"){alert(widgetMessage.cashierHasPendingWithdraw)}else{$(window).trigger(widgets.events.cashierLoading);widgets.api.activateBonus(d,function(e){a.processBonusActivation(e)})}}});$(".bonusHistoryDescriptionBtn").live("click",function(c){var d=$(c.target).attr("data-descriptionid");widgets.api.getBonusDescription(d,function(e){a.processBonusDescription(e)})});widgets.api.getBonusHistory(b,function(c){a.processBonusHistory(b,c)});$(a.element).show()}},initTable:function(){$(window).trigger(widgets.events.cashierLoading);var a=$("<tbody></tbody>");$("[data-widget=cashierBonusHistory][data-type=bonusTable]").append(a)},processBonusCancellation:function(a){var b=this;var c={};c.limit=b.limit;c.offset=0;switch(a.code){case b.code.OK:$(window).trigger(widgets.events.cashierCancelBonusSuccessful);break;case b.code.NotAcceptable:$(window).trigger(widgets.events.cashierCancelBonusUnsuccessful);break;case b.code.BadRequest:$(window).trigger(widgets.events.cashierBonusHistoryError,widgetMessage.cashierBonusCancellationError);break}b.page=1;widgets.api.getBonusHistory(c,function(d){b.processBonusHistory(c,d)})},processBonusActivation:function(a){var b=this;var c={};c.limit=b.limit;c.offset=0;switch(a.code){case b.code.OK:$(window).trigger(widgets.events.cashierActivateBonusSuccessful);break;case b.code.NotAcceptable:$(window).trigger(widgets.events.cashierActivateBonusUnsuccessful);break;case b.code.BadRequest:$(window).trigger(widgets.events.cashierBonusHistoryError,widgetMessage.cashierBonusActivationError);break}b.page=1;widgets.api.getBonusHistory(c,function(d){b.processBonusHistory(c,d)})},processBonusDescription:function(a){var b=this;switch(a.code){case b.code.OK:$(window).trigger(widgets.events.cashierProcessBonusDescription,a);break;case b.code.NotAcceptable:$(window).trigger(widgets.events.cashierBonusHistoryError,widgetMessage.cashierBonusDescriptionNotFound);break;case b.code.BadRequest:$(window).trigger(widgets.events.cashierBonusHistoryError,widgetMessage.cashierBonusDescriptionError);break}},processBonusHistory:function(f,c){if(c.message=="BadRequest"){if(c.data.type=="NoContent"){$("[data-widget=cashierBonusHistory][data-type=paging]").html("");$("[data-widget=cashierBonusHistory][data-type=bonusTable] tbody tr").remove();alert(c.data.text)}}if(c.message!="OK"){$(window).trigger(widgets.events.cashierLoaded);return}var b=c.data.results;if(!b){$(window).trigger(widgets.events.cashierLoaded);return}var d=cashierBonusHistoryWidget;var e=b[b.length-1];d.data=c.data;d.doUpdate(f);$("[data-widget=cashierBonusHistory][data-type=bonusTable] tbody tr").remove();var a=$("[data-widget=cashierBonusHistory][data-type=bonusTable] tbody");var g="";$.each(b,function(j,k){var h="";$.each($("[data-widget=cashierBonusHistory][data-type=bonusTable]").find("thead tr th"),function(l,m){switch($(m).attr("data-column")){case"dateTime":if(k.dateTime!=null){h+="<td>"+helper.formatDate(k.bonusReceivedTS,d.tableDateFormat)+"</td>"}else{h+="<td></td>"}break;case"amount":h+="<td>"+k.amount+"</td>";break;case"bonus":h+='<td><a href="#" data-descriptionid='+k.descriptionPhId+' class="bonusHistoryDescriptionBtn">'+k.bonus+"</a></td>";break;case"tradingRequirements":h+="<td>"+k.tradingRequirements+"</td>";break;case"remaining":h+="<td>"+k.remaining+"</td>";break;case"status":h+="<td>"+d.getStatusText(k.status)+"</td>";break;case"bonusType":h+="<td>"+d.getTypeText(k.bonusType)+"</td>";break;case"action":if(k.isActivatable&&k.isCancelable){h+='<td><a href="#" data-bonusid='+k.id+' data-pendingWithdrawal= "'+k.hasPendingWithdrawal+'" class="bonusHistoryActivateBtn">Activate</a><br/><a href="#" data-bonusid='+k.id+'" class="bonusHistoryCancelBtn">Cancel</a><br/></td>'}else{if(k.isActivatable){h+='<td><a href="#" data-bonusid='+k.id+' data-pendingWithdrawal= "'+k.hasPendingWithdrawal+'" class="bonusHistoryActivateBtn">Activate</a></td>'}else{if(k.isCancelable){h+='<td><a href="#" data-bonusid='+k.id+' data-pendingWithdrawal= "'+k.hasPendingWithdrawal+'" class="bonusHistoryCancelBtn">Cancel</a></td>'}else{h+="<td></td>"}}}break}});g+="<tr>"+h+"</tr>"});$(a).html(g);$(window).trigger(widgets.events.cashierLoaded)},getTypeText:function(a){switch(a){case"1":return widgetMessage.cashierRedeemByRequirementBonusType;break;case"2":return widgetMessage.cashierNeverRedeemBonusType;break;case"3":return widgetMessage.cashierCashBonusType;break;case"4":return widgetMessage.cashierAfterWagerBonusType;break;case"5":return widgetMessage.cashierTraderDepositBonusBonusType;break;case"6":return widgetMessage.cashierAgentDepositBonusBonusType;break;default:return""}},getStatusText:function(a){switch(a){case"1":return widgetMessage.cashierBonusStatusActive;break;case"2":return widgetMessage.cashierBonusStatusCancelled;break;case"3":return widgetMessage.cashierBonusStatusExpired;break;case"4":return widgetMessage.cashierBonusStatusAchieved;break;case"5":return widgetMessage.cashierBonusStatusCash;break;case"6":return widgetMessage.cashierBonusStatusPending;break;case"7":return widgetMessage.cashierBonusStatusAvailabeUntilWithdraw;break;case"8":return widgetMessage.cashierBonusStatusSuspended;break;case"9":return widgetMessage.cashierBonusStatusEarned;break;default:return""}},doUpdate:function(a){if(!cashierBonusHistoryWidget.data){$("[data-widget=cashierBonusHistory][data-type=paging]").html("");return}if(a.offset>0){}else{$("[data-widget=cashierBonusHistory][data-type=paging]").html("");this.getNextPage(0,a.offset)}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=cashierBonusHistory][data-type=paging]");var b=cashierBonusHistoryWidget.data.total;var d=Math.ceil(b/e.limit);c.html("");var a='<div class="myPaging">';if(f>=e.limit){a+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){a+='<a class="pageLink';if(i==cashierBonusHistoryWidget.page){a+=" activePage"}a+='" href="javascript:;">'+i+"</a> "}if(d>i){a+='<a class="nextPage" href="javascript:;">...</a>'}a+="</div>";c.html(a);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=cashierBonusHistory][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j={};j.limit=e.limit;if(e.page==1){j.offset=0}else{j.offset=(e.limit*e.page)-e.limit}$(window).trigger(widgets.events.cashierLoading);widgets.api.getBonusHistory(j,function(k){e.processBonusHistory(j,k)})})}};
var cashierCardDepositWidget={widgetName:"cashierCardDeposit",code:{OK:200,NotAcceptable:406,BadRequest:400},param:{currencyId:null,amount:null,promoCode:null,firstName:null,lastName:null,wrongPromoCode:false},init:function(){var b=this;b=$.extend({},validationWidget,cashierCardDepositWidget);b.load();var a=$("[data-widget=cashierCardDeposit][data-type=submit]");a.click(function(c){b.submit(c)})},load:function(){var a=this;widgets.api.getCashierCardsShortElements(function(b){a.processLoad(b)})},processLoad:function(c){var d=this;if(c.code===d.code.NotAcceptable){switch(c.data.type){case"cashierUserSuspended":$(window).trigger(widgets.events.cashierUserSuspended);return;default:$(window).trigger(widgets.events.cashierWidgetDisabled,[d.widgetName,c.data.type,c]);return}}if(c.code!=d.code.OK){return}$(d.elements).show();$("[data-widget=cashierCardDeposit][data-type=error]").hide();$("[data-widget=cashierCardDeposit][data-type=success]").hide();var b=URL.unserialize(window.location.search);d.param.currencyId=b.currencyId;d.param.amount=b.amount;if(b.promocode!=null&&b.promocode!="undefined"){d.param.promoCode=b.promocode;d.param.wrongPromoCode=b.wrongpromocode}else{d.param.promoCode="";d.param.wrongPromoCode=b.wrongpromocode}d.param.firstName=b.firstName;d.param.lastName=b.lastName;if(!d.isStringEmpty(d.param.firstName)&&!d.isStringEmpty(d.param.lastName)){$("[data-widget=cashierCardDeposit][data-type=nameOnCard]").val(d.param.firstName+" "+d.param.lastName)}var a=$.grep(widgetMessage.cashierCurrencySymbol,function(f){return f.key==d.param.currencyId});$("[data-widget=cashierCardDeposit][data-type=amount]").text(helper.formatCurrency(a[0].value,d.param.amount));d.initDate()},isStringEmpty:function(a){return(!a||0===a.length)},initDate:function(){var c=$("[data-widget=cashierCardDeposit][data-type=expirationMonth]");var a=$("[data-widget=cashierCardDeposit][data-type=expirationYear]");var b=(new Date()).getFullYear();var d="";for(i=b;i<b+20;i++){d+='<option value="'+i+'">'+i+"</option>"}a.append(d);d="";$.each(widgetMessage.cashierMonthNames,function(e,f){d+='<option value="'+(e+1)+'">'+f+"</option>"});c.append(d)},processNewCreditCardDeposit:function(a){var b=this;$(b.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing);if(a.code===b.code.OK){$(window).trigger(widgets.events.cashierDepositSuccessful,a)}else{if(a.code===b.code.NotAcceptable){if(a.data.type==="cashierDepositLimitationFail"){$(window).trigger(widgets.events.cashierDepositLimitationFail,a)}$(window).trigger(widgets.events.cashierDepositUnsuccessful,a)}else{$(window).trigger(widgets.events.cashierWidgetError,[b.widgetName,a.data.type,a]);return}}},customValidation:function(){var k=this;var m;var o;var p;var l=0;var r="";var g=1;var n=$("[data-widget=cashierCardDeposit][data-type=number]");var a=n.val().replace(/\-|\ /gi,"");var f;for(i=a.length-1;i>=0;i--){f=Number(a.charAt(i))*g;if(f>9){l=l+1;f=f-10}l=l+f;if(g==1){g=2}else{g=1}}if(l%10!=0){k.addError(n.attr("data-type"),widgetMessage.cashierInvalidCardNumber);m=false}else{m=true}var q=$("[data-widget=cashierCardDeposit][data-type=cvv]");var d=q.val();if(/^3[4,7]\d{13}$/.test(a)){o=/^[0-9]{4}$/.test(d)}else{o=/^[0-9]{3}$/.test(d)}if(!o){k.addError(q.attr("data-type"),widgetMessage.cashierInvalidSecurityCode)}var h=$("[data-widget=cashierCardDeposit][data-type=expirationYear]");var e=$("[data-widget=cashierCardDeposit][data-type=expirationMonth]").val();var c=h.val();var b=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());if(c>b.getFullYear()||(b.getFullYear()==c&&e>b.getMonth())){p=true}else{k.addError(h.attr("data-type"),widgetMessage.cashierInvalidExpiryDate);p=false}if(m==true&&o==true&&p==true){return true}else{return false}},submit:function(b){var c=this;if(!c.validate()){return false}$(c.elements).attr("disabled","disabled");$(window).trigger(widgets.events.cashierStartDepositProcessing);var a={};$.each($("[data-widget=cashierCardDeposit]"),function(d,e){if($(e).attr("data-type")==="number"){a[$(e).attr("data-type")]=$(e).val().replace(/\-|\ /gi,"")}else{a[$(e).attr("data-type")]=$(e).val()}});a.currencyId=c.param.currencyId;a.amount=c.param.amount;a.promoCode=c.param.promoCode;a.device=7;a.wrongPromoCode=(c.param.wrongPromoCode==="true");widgets.api.payNewCreditCardDepositShort(a,function(d){c.processNewCreditCardDeposit(d)})}};
var cashierCardDepositQuickWidget={widgetName:"cashierCardDepositQuick",code:{OK:200,NotAcceptable:406,BadRequest:400},promoCodeAnswer:{OK:"OK",EnterPromoCode:"EnterPromoCode"},currencyId:null,init:function(){var d=this;d=$.extend({},validationWidget,cashierCardDepositQuickWidget);d.load();var c=$("[data-widget=cashierDeposit][data-type=activeCreditCards]");var b=$("[data-widget=cashierCardDepositQuick][data-type=submit]");var a=$("[data-widget=cashierCardDepositQuick][data-type=tryagain]");c.change(function(){d.changeCvvVisibility(c.attr("supplier"))});b.click(function(e){d.submit(e)});a.click(function(e){d.tryAgainClick(e)});$("[data-translate=cashierHavePromoCode]").click(function(){$("[data-translate=cashierHavePromoCode]").hide();$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").show();$("[data-translate=cashierLabelPromoCode]").show()})},changeCvvVisibility:function(d){var b=this;var c=$("[data-widget=cashierCardDepositQuick][data-type=cardCvv]");var a=$("[data-translate=cashierLabelCardCvv]");c.hide();a.hide();return;switch(d){case 14:case 28:c.show();a.show();break;default:c.hide();a.hide();break}},load:function(){var a=this;widgets.api.getCashierQuickDepositElements(function(b){a.processLoad(b)})},processLoad:function(f){var g=this;if(f.code===g.code.NotAcceptable){switch(f.data.type){case"cashierUserSuspended":$(window).trigger(widgets.events.cashierUserSuspended);return;default:$(window).trigger(widgets.events.cashierWidgetDisabled,[g.widgetName,f.data.type,f]);return}}if(f.code!=g.code.OK){return}g.currencyId=f.data.currencyId;var a=$("[data-widget=cashierCardDepositQuick][data-type=amount]");var i=$("[data-widget=cashierCardDepositQuick][data-type=activeCreditCards]");var h=$("[data-translate=cashierLabelActiveCC]");var e=$("[data-widget=cashierCardDepositQuick][data-type=submit]");var l=$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]");var b=$("[data-translate=cashierLabelPromoCode]");var k=$("[data-translate=cashierHavePromoCode]");var j=$("[data-widget=cashierCardDepositQuick][data-type=cardCvv]");var d=$("[data-translate=cashierLabelCardCvv]");l.hide();b.hide();k.show();if(f.data.activeCreditCards!==null&&f.data.activeCreditCards.length!=0){var c="";$.each(f.data.activeCreditCards,function(m,n){c+='<option value="'+n.id+'" supplier="'+n.supplier+'">'+widgetMessage.cashierExistsCC+n.name+"</option>"});i.append(c);if(f.data.defaultAmount!=null&&f.data.defaultAmount>0){a.val(f.data.defaultAmount)}a.show();h.show();i.show();g.changeCvvVisibility(i.find(":selected").attr("supplier"));e.show()}else{if(f.data.isDCashierAvailable){a.show();h.hide();i.hide();j.hide();d.hide();e.show()}else{$(g.elements).hide()}}},submit:function(c){var e=this;if(!e.validate()){return false}var g=$("[data-widget=cashierCardDepositQuick][data-type=cardCvv]");var d=$("[data-widget=cashierCardDepositQuick][data-type=amount]");var a=$("[data-widget=cashierCardDepositQuick][data-type=activeCreditCards]");var f=$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").val();$(e.elements).attr("disabled","disabled");var h={result:null,widgetName:cashierCardDepositQuickWidget.widgetName};$(window).trigger(widgets.events.cashierStartDepositProcessing,h);if(a.is(":visible")){var b={};b.currencyId=e.currencyId;b.amount=d.val();b.creditCardId=a.val();b.wrongPromoCode=false;b.promoCode=f;if(g.is(":visible")){b.cvv=g.val()}b.device=20;if(f!=""){widgets.api.getPromoCodeValidation(f,function(i){if(i.code===e.code.OK){widgets.api.payWithExistingCredit(b,function(j){e.processPayment(j)})}else{if(i.code===e.code.NotAcceptable){e.confirmPromoCode().then(function(k){var j=k.toString();if(j===e.promoCodeAnswer.OK){b.promoCode="";b.wrongPromoCode=true;widgets.api.payWithExistingCredit(b,function(l){e.processPayment(l)})}else{$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").removeAttr("disabled");$("[data-widget=cashierCardDepositQuick][data-type=submit]").removeAttr("disabled");$(window).trigger(widgets.events.cashierPromocodeEnter)}})}}})}else{widgets.api.payWithExistingCredit(b,function(i){e.processPayment(i)})}}else{var b={};b.methodID=132;b.amount=d.val();b.currencyId=e.currencyId;b.promoCode=f;b.device=20;b.wrongPromoCode=false;if(f!=""){widgets.api.getPromoCodeValidation(f,function(i){if(i.code===e.code.OK){widgets.api.payWithWallet(b,function(j){e.processWalletPayment(j)})}else{if(i.code===e.code.NotAcceptable){e.confirmPromoCode().then(function(k){var j=k.toString();if(j===e.promoCodeAnswer.OK){b.promoCode="";b.wrongPromoCode=true;widgets.api.payWithWallet(b,function(l){e.processWalletPayment(l)})}else{$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").removeAttr("disabled");$("[data-widget=cashierCardDepositQuick][data-type=submit]").removeAttr("disabled");$(window).trigger(widgets.events.cashierPromocodeEnter)}})}}})}else{widgets.api.payWithWallet(b,function(i){e.processWalletPayment(i)})}}},processPayment:function(a){var b=this;var c={result:a,widgetName:cashierCardDepositQuickWidget.widgetName};$(b.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing,c);if(a.code===b.code.NotAcceptable){switch(a.data.type){case"cashierDepositLimitationFail":$(window).trigger(widgets.events.cashierDepositQuickLimitationFail,c);return;case"cashierDepositUnsuccessful":$(window).trigger(widgets.events.cashierDepositUnsuccessful,c);return;case"cashierBalanceTypeChangeNotAllowed":$(window).trigger(widgets.events.cashierWidgetDisabled,[b.widgetName,a.data.type,a]);return}}if(a.code===b.code.OK){$(window).trigger(widgets.events.cashierDepositSuccessful,c);return}else{if(a.code===b.code.NotAcceptable){$(b.elements).hide();$("[data-widget=cashierCardDepositQuick][data-type=tryagain]").show();$("[data-widget=cashierCardDepositQuick][data-translate=cashierLabelTryAgain]").show();$(window).trigger(widgets.events.cashierDepositUnsuccessful,c)}else{$(window).trigger(widgets.events.cashierWidgetError,[b.widgetName,a.data.type,a]);return}}},processWalletPayment:function(b){var d=this;var e={result:b,widgetName:cashierCardDepositQuickWidget.widgetName};$(d.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing,e);if(b.code===d.code.NotAcceptable){switch(b.data.type){case"cashierDepositLimitationFail":$(window).trigger(widgets.events.cashierDepositQuickLimitationFail,e);return;case"cashierDepositUnsuccessful":$(window).trigger(widgets.events.cashierDepositUnsuccessful,e);return;case"cashierBalanceTypeChangeNotAllowed":$(window).trigger(widgets.events.cashierWidgetDisabled,[d.widgetName,b.data.type,b]);return}}$(d.elements).hide();var a=$("[data-widget=cashierDeposit][data-type=redirectToGateway]");if(b.code===d.code.OK){switch(b.data.OpenIn){case 1:case 2:case 3:case 4:case 9:var c=d.createDefaultFrame();c.setAttribute("src",b.data.Message);break;case 5:case 6:case 7:case 10:var c=d.createDefaultFrame();c.contentDocument.write(b.data.Message);c.contentDocument.forms.formPayment.submit();break}return}else{if(b.code===d.code.NotAcceptable){$(d.elements).hide();$("[data-widget=cashierCardDepositQuick][data-type=tryagain]").show();$("[data-widget=cashierCardDepositQuick][data-translate=cashierLabelTryAgain]").show();$(window).trigger(widgets.events.cashierDepositUnsuccessful,e)}else{$(window).trigger(widgets.events.cashierWidgetError,[d.widgetName,b.data.type,b]);return}}},tryAgainClick:function(a){var c=this;var b=$("[data-widget=cashierDeposit][data-type=activeCreditCards]");$(c.elements).show();$("[data-widget=cashierCardDepositQuick][data-type=tryagain]").hide();$("[data-widget=cashierCardDepositQuick][data-translate=cashierLabelTryAgain]").hide();c.changeCvvVisibility(b.attr("supplier"))},confirmPromoCode:function(){$(window).trigger(widgets.events.cashierPromocodePopupOpen);var d=$.Deferred();var b={};var a=widgetMessage.cashierBtnOK;var c=widgetMessage.cashierBtnEnterPromoCode;b[a]=function(){d.resolve("OK");$(this).dialog("close")};b[c]=function(){d.resolve("EnterPromoCode");$(this).dialog("close");$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").focus()};$("[data-widget=cashierCardDepositQuick][data-type=promoCodeValidation]").dialog({height:300,width:800,modal:true,buttons:b,close:function(){d.resolve("EnterPromoCode");$(this).dialog("close");$("[data-widget=cashierCardDepositQuick][data-type=promotionalCode]").focus()}});return d.promise()},createDefaultFrame:function(){var a=this;return a.createFrame("iframeDeposit")},createFrame:function(c){var a='<iframe src="" id="'+c+'" width="300px" height="300px" align="left" marginheight="0" marginwidth="0" frameborder="0"></iframe>';var b=$("[data-widget=cashierCardDepositQuick][data-type=iframeHolder]");$(b).append(a);b.show();$(window).trigger(widgets.events.cashierDepositLoadIframe);return document.getElementById(c)},customValidation:function(){var c=this;var b=$("[data-widget=cashierCardDepositQuick][data-type=amount]");var d=true;var a=/^[1-9]\d*$/;if(b.is(":visible")){if(c.isEmpty(b)){c.addError(b.attr("data-type"),widgetMessage.requiredField);d=false}else{if(!b.val().match(a)){c.addError(b.attr("data-type"),b.attr("data-regexpMessage")?b.attr("data-regexpMessage"):widgetMessage.invalidSyntax);d=false}}}return d},};
var cashierCollectionWidget={widgetName:"cashierCollection",data:null,page:1,code:{OK:200,NotAcceptable:406},isPostBack:false,limit:parseInt($("[data-widget=cashierCollection][data-type=paging]").attr("data-pagingLimit"))||5,init:function(){var a=this;if(!a.isPostBack){a.isPostBack=true;a.initTable();var b={};b.limit=a.limit;b.offset=0;widgets.api.getCollectionData(b,function(c){a.processCollectionData(b,c)});$(a.element).show()}},initTable:function(){$(window).trigger(widgets.events.cashierLoading);var a=$("<tbody></tbody>");$("[data-widget=cashierCollection][data-type=depositTable]").append(a)},processCollectionData:function(e,f){var h=this;if(f.code!=h.code.OK){return}var k=f.data.results;if(!k){return}var h=cashierCollectionWidget;var b=k[k.length-1];h.data=f.data;h.doUpdate(e);var a=$("[data-widget=cashierCollection][data-translate=cashierCollectionTotalDueAmount]");var c=$("[data-widget=cashierCollection][data-translate=cashierCollectionTotalCollected]");var d=$("[data-widget=cashierCollection][data-translate=cashierCollectionTotalOutstanding]");a.append(f.data.totalDueAmount);c.append(f.data.totalCollected);d.append(f.data.totalOutstanding);a.show();c.show();d.show();$("[data-widget=cashierCollection][data-type=depositTable] tbody tr").remove();var j=$("[data-widget=cashierCollection][data-type=depositTable] tbody");var g="";$.each(k,function(m,n){var l="";$.each($("[data-widget=cashierCollection][data-type=depositTable]").find("thead tr th"),function(o,p){switch($(p).attr("data-column")){case"startDate":l+="<td>"+helper.formatDate(n.startDate,helper.dateFormats.masks.normalDateTime)+"</td>";break;case"endDate":l+="<td>"+helper.formatDate(n.endDate,helper.dateFormats.masks.normalDateTime)+"</td>";break;case"credit":l+="<td>"+n.credit+"</td>";break;case"dueAmount":l+="<td>"+n.dueAmount+"</td>";break;case"collected":l+="<td>"+n.collected+"</td>";break;case"outstanding":l+="<td>"+n.outstanding+"</td>";break}});g+="<tr>"+l+"</tr>"});$(j).html(g);$(window).trigger(widgets.events.cashierLoaded)},doUpdate:function(a){if(!cashierCollectionWidget.data){$("[data-widget=cashierCollection][data-type=paging]").html("");return}if(a.offset>0){}else{$("[data-widget=cashierCollection][data-type=paging]").html("");this.getNextPage(0,a.offset)}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=cashierCollection][data-type=paging]");var b=cashierCollectionWidget.data.total;var d=Math.ceil(b/e.limit);c.html("");var a='<div class="myPaging">';if(f>=e.limit){a+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){a+='<a class="pageLink';if(i==cashierCollectionWidget.page){a+=" activePage"}a+='" href="javascript:;">'+i+"</a> "}if(d>i){a+='<a class="nextPage" href="javascript:;">...</a>'}a+="</div>";c.html(a);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=cashierCollection][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j={};j.limit=e.limit;if(e.page==1){j.offset=0}else{j.offset=(e.limit*e.page)-e.limit}$(window).trigger(widgets.events.cashierLoading);widgets.api.getCollectionData(j,function(k){e.processCollectionData(j,k)})})}};
var cashierCreditCardDepositWidget={widgetName:"cashierCreditCardDeposit",code:{OK:200,NotAcceptable:406,BadRequest:400},loaded:{countries:false,cardTypes:false},currencyId:null,amount:null,promoCode:null,wrongPromoCode:"false",init:function(){var e=this;e=$.extend({},validationWidget,cashierCreditCardDepositWidget);$(e.elements).show();$("[data-widget=cashierCreditCardDeposit][data-type=error]").hide();$("[data-widget=cashierCreditCardDeposit][data-type=success]").hide();var f=$("[data-widget=cashierCreditCardDeposit][data-type=country]");var c=$("[data-widget=cashierCreditCardDeposit][data-type=cardType]");var d=$("[data-widget=cashierCreditCardDeposit][data-type=submit]");var b=URL.unserialize(window.location.search);e.currencyId=b.currencyId;e.amount=b.amount;if(b.promocode!=null&&b.promocode!="undefined"){e.promoCode=b.promocode;e.wrongPromoCode=false}else{e.promoCode="";e.wrongPromoCode=b.wrongpromocode}var a=$.grep(widgetMessage.cashierCurrencySymbol,function(g){return g.key==e.currencyId});$("[data-widget=cashierCreditCardDeposit][data-type=amount]").text(helper.formatCurrency(a[0].value,e.amount));e.initDate();e.initCountries();e.initCardTypes();f.change(function(){e.initProvinces()});c.change(function(){e.initCVVLength();e.initCardRegex()});d.click(function(g){e.submit(g)})},initCVVLength:function(){var a=$("[data-widget=cashierCreditCardDeposit][data-type=cardType]");var b=$("[data-widget=cashierCreditCardDeposit][data-type=cvv]");if(a.val()=="64"){b.attr("maxlength",4)}else{b.attr("maxlength",3)}},initCardRegex:function(){var a=$("[data-widget=cashierCreditCardDeposit][data-type=cardType]");var b=$("[data-widget=cashierCreditCardDeposit][data-type=number]");b.attr("data-regexp",a.find(":selected").attr("data-regexp"))},initProvinces:function(){var c=this;var d=$("[data-widget=cashierCreditCardDeposit][data-type=country]");var a=$("[data-widget=cashierCreditCardDeposit][data-type=province]");var b=$("[data-translate=cashierLabelProvince]");switch(d.val().toLowerCase()){case"us":case"ca":case"jp":case"au":c.initProvincesValues(a,d.val().toLowerCase());a.show();b.show();$(window).trigger(widgets.events.cashierCCDepositProvinceShow);break;default:a.hide();b.hide();$(window).trigger(widgets.events.cashierCCDepositProvinceHide)}},initCountries:function(){var a=this;widgets.api.getCountries(function(b){a.processCountries(b)})},processCountries:function(a){var c=this;if(a.code!=c.code.OK){return}var d=$("[data-widget=cashierCreditCardDeposit][data-type=country]");var b='<option value="0">'+widgetMessage.choose+"</option>";$.each(a.data,function(e,f){if(f.selected){b+='<option value="'+f.countryCode+'" selected>'+f.name+"</option>"}else{b+='<option value="'+f.countryCode+'">'+f.name+"</option>"}});d.append(b);c.initProvinces();c.loaded.countries=true;if(c.loaded.countries&&c.loaded.cardTypes){$(window).trigger(widgets.events.cashierLoaded)}},initDate:function(){var d=$("[data-widget=cashierCreditCardDeposit][data-type=expirationMonth]");var b=$("[data-widget=cashierCreditCardDeposit][data-type=expirationYear]");var c=(new Date()).getFullYear();var e="";for(i=c;i<c+20;i++){e+='<option value="'+i+'">'+i+"</option>"}b.append(e);e="";$.each(widgetMessage.cashierMonthNames,function(g,h){e+='<option value="'+(g+1)+'">'+h+"</option>"});d.append(e);var a=new Date();var f=a.getMonth()+1;d.find("option").filter(function(){return $(this).val()==f}).attr("selected",true)},initCardTypes:function(){var a=this;$(window).trigger(widgets.events.cashierLoading);widgets.api.getCreditCardTypes(a.currencyId,function(b){a.processCreditCardTypes(b)})},processCreditCardTypes:function(c){var d=this;if(c.code===d.code.NotAcceptable){$(window).trigger(widgets.events.cashierWidgetDisabled,[d.widgetName,c.data.type,c]);return}else{if(c.code===d.code.BadRequest){return}}var b=$("[data-widget=cashierCreditCardDeposit][data-type=cardType]");var j=$("[data-widget=cashierCreditCardDeposit][data-type=number]");var h=$("[data-widget=cashierCreditCardDeposit][data-type=cvv]");var e="";$.each(c.data.creditCardMethods,function(o,p){e+='<option value="'+p.id+'" data-regexp="'+p.regEx.substring(0,p.regEx.length-1).substring(1)+'">'+p.name+"</option>";if(b.val()=="64"){h.attr("maxlength",4)}else{h.attr("maxlength",3)}});b.append(e);if(c.data.prefilledCCDetails){var f=$("[data-widget=cashierCreditCardDeposit][data-type=firstName]");var g=$("[data-widget=cashierCreditCardDeposit][data-type=lastName]");var n=$("[data-widget=cashierCreditCardDeposit][data-type=address1]");var m=$("[data-widget=cashierCreditCardDeposit][data-type=address2]");var a=$("[data-widget=cashierCreditCardDeposit][data-type=city]");var l=$("[data-widget=cashierCreditCardDeposit][data-type=zip]");var k=$("[data-widget=cashierCreditCardDeposit][data-type=country]");f.val(c.data.prefilledUser.firstName);g.val(c.data.prefilledUser.lastName);n.val(c.data.prefilledUser.address1);m.val(c.data.prefilledUser.address2);a.val(c.data.prefilledUser.city);l.val(c.data.prefilledUser.postalCode);k.val(c.data.prefilledUser.country)}j.attr("data-regexp",b.find(":selected").attr("data-regexp"));j.attr("data-regexpMessage",widgetMessage.cashierInvalidCardNumber);d.loaded.cardTypes=true;if(d.loaded.countries&&d.loaded.cardTypes){$(window).trigger(widgets.events.cashierLoaded)}},processNewCreditCardDeposit:function(a){var b=this;$(b.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing);if(a.code===b.code.NotAcceptable){if(a.data.type==="cashierDepositLimitationFail"){$(window).trigger(widgets.events.cashierDepositLimitationFail,a);return}if(a.data.type==="cashierDepositUnsuccessful"){$(window).trigger(widgets.events.cashierDepositUnsuccessful,a);return}if(a.data.type==="cashierOpenTradesForCreditBalance"||a.data.type==="cashierPendingWithdrawalForCreditBalance"||a.data.type==="cashierBalanceTypeChangeNotAllowed"){$(window).trigger(widgets.events.cashierWidgetDisabled,[b.widgetName,a.data.type,a]);return}}if(a.code===b.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[b.widgetName,a.data.type,a]);return}if(a.code===b.code.OK){$(window).trigger(widgets.events.cashierDepositSuccessful,a);return}},customValidation:function(){var h=this;var f;var m;var t;var o;var l=0;var w="";var r=1;var g=$("[data-widget=cashierCreditCardDeposit][data-type=number]");var v=g.val();var b;for(i=v.length-1;i>=0;i--){b=Number(v.charAt(i))*r;if(b>9){l=l+1;b=b-10}l=l+b;if(r==1){r=2}else{r=1}}if(l%10!=0){h.addError(g.attr("data-type"),widgetMessage.cashierInvalidCardNumber);f=false}else{f=true}var p=$("[data-widget=cashierCreditCardDeposit][data-type=expirationYear]");var n=$("[data-widget=cashierCreditCardDeposit][data-type=expirationMonth]").val();var a=p.val();var c=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());if(a>c.getFullYear()||(c.getFullYear()==a&&n>c.getMonth())){o=true}else{h.addError(p.attr("data-type"),widgetMessage.cashierInvalidExpiryDate);o=false}var u=$("[data-widget=cashierCreditCardDeposit][data-type=cardType]").val();var x;if(u=="64"){x=4}else{x=3}var q=/^[0-9]{3,4}$/;var e=$("[data-widget=cashierCreditCardDeposit][data-type=cvv]");var k=e.val();if(k.length==x&&q.test(k)){m=true}else{h.addError(e.attr("data-type"),widgetMessage.cashierInvalidSecurityCode);m=false}var s=$("[data-widget=cashierCreditCardDeposit][data-type=country]");var d=$("[data-widget=cashierCreditCardDeposit][data-type=province]");t=true;if(s.val().toLowerCase()=="us"&&d.val()=="0"){h.addError(d.attr("data-type"),widgetMessage.cashierSelectState);t=false}if((s.val().toLowerCase()=="jp"||s.val().toLowerCase()=="au"||s.val().toLowerCase()=="ca")&&d.val()=="0"){h.addError(d.attr("data-type"),widgetMessage.cashierSelectProvince);t=false}if(f==true&&m==true&&o==true&&t==true){return true}else{return false}},initProvincesValues:function(e,a){var c={};var b;switch(a){case"au":b=widgetMessage.cashierAUProvinces;break;case"us":b=widgetMessage.cashierUSStates;break;case"jp":b=widgetMessage.cashierJPProvinces;break;case"ca":b=widgetMessage.cashierCAProvinces;break}e.empty();var d='<option value="'+0+'" selected>'+widgetMessage.choose+"</option>";for(i=0;i<b.length;i++){d+='<option value="'+b[i].code+'">'+b[i].name+"</option>"}e.append(d);e.val("0")},submit:function(b){var c=this;if(!c.validate()){return false}$(c.elements).attr("disabled","disabled");$(window).trigger(widgets.events.cashierStartDepositProcessing);var a={};$.each($("[data-widget=cashierCreditCardDeposit]"),function(d,e){a[$(e).attr("data-type")]=$(e).val()});a.currencyId=c.currencyId;a.amount=c.amount;a.promoCode=c.promoCode;a.wrongPromoCode=(c.wrongPromoCode==="true");a.device=7;widgets.api.payNewCreditCardDeposit(a,function(d){c.processNewCreditCardDeposit(d)})}};
var cashierDepositWidget={widgetName:"cashierDeposit",code:{OK:200,NotAcceptable:406,BadRequest:400},promoCodeAnswer:{OK:"OK",EnterPromoCode:"EnterPromoCode"},redirectUrl:"",promoCodeClicked:false,init:function(){var a=this;a=$.extend({},validationWidget,cashierDepositWidget);a.load();$("[data-widget=cashierDeposit][data-type=submit]").click(function(){var b=$("[data-widget=cashierDeposit][data-type=methods] :selected").attr("data-redirect");if(b=="wire"){widgets.api.getCashierWireTransfer(function(c){a.processWireTransfer(c)})}else{if(b=="cms"){widgets.api.getCashierWireTransferCms(function(c){a.processWireTransfer(c)})}else{a.submit()}}});$("[data-translate=cashierHavePromoCode]").click(function(){$("[data-translate=cashierHavePromoCode]").hide();$("[data-widget=cashierDeposit][data-type=promotionalCode]").show();$("[data-translate=cashierLabelPromoCode]").show();a.promoCodeClicked=true});$("[data-widget=cashierDeposit][data-type=currencies]").change(function(){a.initMethods($("[data-widget=cashierDeposit][data-type=currencies]").val())})},processWireTransfer:function(a){var c=this;if(a.code!=c.code.OK){return}if(a.data.showDetails){if(a.data.isCms){var b=$("[data-widget=cashierDeposit][data-type=methods] :selected").val();$(window).trigger(widgets.events.cashierWireTransferCMSRedirect,b)}else{$(window).trigger(widgets.events.cashierWireTransferRedirect,a)}}else{$(window).trigger(widgets.events.cashierWireTransferDetailsRequest,a)}},load:function(){var a=this;widgets.api.getCashierElements(function(b){a.processLoad(b)})},createDefaultFrame:function(){var a=this;return a.createFrame("iframeDeposit")},createModalFrame:function(){var a=this;var b=a.createFrame("modalIframeDeposit");return b},createFrame:function(c){var a='<iframe src="" id="'+c+'" width="100%" height="100%" align="left" marginheight="0" marginwidth="0" frameborder="0"></iframe>';var b=$("[data-widget=cashierDeposit][data-type=iframeHolder]");$(b).append(a);b.show();$(window).trigger(widgets.events.cashierDepositLoadIframe);return document.getElementById(c)},customValidation:function(){var d=this;var f=$("[data-widget=cashierDeposit][data-type=currencies]");var g=$("[data-widget=cashierDeposit][data-type=methods]");var b=$("[data-widget=cashierDeposit][data-type=userId]");var e=$("[data-widget=cashierDeposit][data-type=password]");var a=$("[data-widget=cashierDeposit][data-type=amount]");var h=$("[data-widget=cashierDeposit][data-type=activeCreditCards]");var i=$("[data-widget=cashierDeposit][data-type=promotionalCode]");var j=true;var c=/^[1-9]\d*$/;if(a.is(":visible")){if(d.isEmpty(a)){d.addError(a.attr("data-type"),widgetMessage.requiredField);j=false}else{if(!a.val().match(c)){d.addError(a.attr("data-type"),a.attr("data-regexpMessage")?a.attr("data-regexpMessage"):widgetMessage.invalidSyntax);j=false}}}if(b.is(":visible")&&d.isEmpty(b)){d.addError(b.attr("data-type"),widgetMessage.requiredField);j=false}if(e.is(":visible")&&d.isEmpty(e)){d.addError(e.attr("data-type"),widgetMessage.requiredField);j=false}return j},processElementsVisibility:function(h){var b=this;var f=$("[data-widget=cashierDeposit][data-type=methods]");var d=$("[data-translate=cashierLabelChooseMethod]");var n=$("[data-translate=cashierNoMethods]");var c=$("[data-widget=cashierDeposit][data-type=activeCreditCards]");var p=$("[data-translate=cashierLabelActiveCC]");var q=$("[data-widget=cashierDeposit][data-type=submit]");var k=c.find("option");if(f.val()==="-1"&&k.size()>0){c.show();p.show()}else{c.hide();p.hide()}if(f.children("option").length<1){f.hide();d.hide();q.hide();n.show();$(window).trigger(widgets.events.cashierNoPaymentMethods)}else{if(f.children("option").length==1){f.hide();d.hide();q.show();n.hide()}else{f.show();d.show();q.show();n.hide()}}var e=$("[data-widget=cashierDeposit][data-type=userId]");var g=$("[data-widget=cashierDeposit][data-type=password]");var l=$("[data-translate=cashierLabelUserId]");var o=$("[data-translate=cashierLabelPassword]");switch(f.val()){case"73":e.show();g.show();l.show();o.show();l.html(widgetMessage.cashierLabelUserId);o.html(widgetMessage.cashierLabelPassword);break;case"109":e.show();g.show();l.show();o.show();l.html(widgetMessage.cashierLabelAccountID);o.html(widgetMessage.cashierLabelPassword1);break;case"125":e.show();g.show();l.show();o.show();l.html(widgetMessage.cashierLabelCardNumber);o.html(widgetMessage.cashierLabelAccessCode);break;case"127":e.show();g.show();l.show();o.show();l.html(widgetMessage.cashierLabelBaroPaySender);o.html(widgetMessage.cashierLabelBaroPayMobile);break;default:e.hide();g.hide();l.hide();o.hide();break}var j=$("[data-widget=cashierDeposit][data-type=amount]");var i=$("[data-translate=cashierLabelChooseAmount]");var r=$("[data-widget=cashierDeposit][data-type=promotionalCode]");var a=$("[data-translate=cashierLabelPromoCode]");var m=$("[data-translate=cashierHavePromoCode]");switch(f.val()){case"55":case"60":case"76":case"107":case null:j.hide();i.hide();r.hide();a.hide();m.hide();break;default:j.show();i.show();if(h){m.show();r.hide();a.hide();r.val("");b.promoCodeClicked=false}else{if(!b.promoCodeClicked){m.show();r.hide();a.hide()}else{m.hide();r.show();a.show()}}break}},processLoad:function(e){var f=this;if(e.code===f.code.NotAcceptable){switch(e.data.type){case"cashierUserSuspended":$(window).trigger(widgets.events.cashierUserSuspended);return;case"cashierOpenTradesForCreditBalance":case"cashierPendingWithdrawalForCreditBalance":case"cashierCountryNotAllowed":case"cashierIPNotAllowed":$(window).trigger(widgets.events.cashierWidgetDisabled,[f.widgetName,e.data.type,e]);return}}if(e.code!=f.code.OK){return}var o=$("[data-translate=cashierLabelAdditionalData]");var h=$("[data-widget=cashierDeposit][data-type=currencies]");var j=$("[data-widget=cashierDeposit][data-type=methods]");var d=$("[data-widget=cashierDeposit][data-type=userId]");var g=$("[data-widget=cashierDeposit][data-type=password]");var b=$("[data-widget=cashierDeposit][data-type=amount]");var k=$("[data-widget=cashierDeposit][data-type=activeCreditCards]");var i=$("[data-translate=cashierLabelActiveCC]");var m=$("[data-widget=cashierDeposit][data-type=promotionalCode]");var a=$("[data-translate=cashierLabelPromoCode]");var l=$("[data-translate=cashierHavePromoCode]");l.show();$("[data-widget=cashierDeposit][data-type=formPlaceholder]").hide();if(e.data.isFromBOAgentSystem){o.html(widgetMessage.cashierIsFromBOAgentSystem);o.show()}var n="";$.each(e.data.currency,function(p,r){var q="";if(r.selected){q="selected"}if(widgetMessage["cashierCurrency"+r.id]==null){n+='<option value="'+r.id+'"'+q+">"+r.name+"</option>"}else{n+='<option value="'+r.id+'"'+q+">"+widgetMessage["cashierCurrency"+r.id]+"</option>"}});h.append(n);h.show();f.initMethods(h.val());j.show();if(e.data.activeCreditCards!==null&&e.data.activeCreditCards.length!=0){var c='<option value="-1">'+widgetMessage.cashierNewCC+"</option>";$.each(e.data.activeCreditCards,function(p,q){c+='<option value="'+q.id+'">'+widgetMessage.cashierExistsCC+q.name+"</option>"});k.append(c);i.show();k.show()}else{i.hide();k.hide()}m.hide();a.hide();$("[data-widget=cashierDeposit][data-type=submit]").show()},initMethods:function(a){var b=this;$(window).trigger(widgets.events.cashierLoading);var c=$("[data-widget=cashierDeposit][data-type=methods]");c.find("option").remove();c.change(function(){b.processElementsVisibility(false)});widgets.api.getCachierDepositMethods(a,function(d){b.processMethods(d)})},processMethods:function(b){var e=this;if(b.code!=e.code.OK){return}var f=$("[data-widget=cashierDeposit][data-type=methods]");var d=$("[data-widget=cashierDeposit][data-type=amount]");var c="";$.each(b.data,function(g,h){if(widgetMessage["cashier"+h.name]!=null&&widgetMessage["cashier"+h.name]!=""){c+='<option value="'+h.id+'" data-redirect="'+h.redirect+'">'+widgetMessage["cashier"+h.name]+"</option>"}else{c+='<option value="'+h.id+'" data-redirect="'+h.redirect+'">'+h.displayName+"</option>"}});f.append(c);var a=b.data.length;if(b.data.length>0&&b.data[0].depositMinAmount>0&&b.data[0].prefillMinAmount){d.val(b.data[0].depositMinAmount)}else{d.val("")}e.processElementsVisibility(true);$(window).trigger(widgets.events.cashierCurrencyChanged,a);$(window).trigger(widgets.events.cashierLoaded)},submit:function(){var c=this;if(!c.validate()){return false}var j=$("[data-widget=cashierDeposit][data-type=currencies]").val();var d=$("[data-widget=cashierDeposit][data-type=amount]").val();var b=$("[data-widget=cashierDeposit][data-type=promotionalCode]").val();var l=$("[data-widget=cashierDeposit][data-type=methods] :selected");var h=$("[data-widget=cashierDeposit][data-type=userId]").val();var f=$("[data-widget=cashierDeposit][data-type=password]").val();var i=$("[data-widget=cashierDeposit][data-type=activeCreditCards]").val();var a=$("[data-widget=cashierDeposit][data-type=promoCodeValidation]");$(c.elements).attr("disabled","disabled");$(window).trigger(widgets.events.cashierStartDepositProcessing);var m=false;if(l.val()==="-1"){if(i==="-1"||i==null){var k={};var j=$("[data-widget=cashierDeposit][data-type=currencies]").val();var e=l.val();if(b!=""){widgets.api.getPromoCodeValidation(b,function(n){if(n.code===c.code.OK){widgets.api.validateDepositLimits(d,j,e,function(o){c.processCCLimitsResponse(o,j,d,b,"false")})}else{if(n.code===c.code.NotAcceptable){c.confirmPromoCode().then(function(p){var o=p.toString();if(o===c.promoCodeAnswer.OK){widgets.api.validateDepositLimits(d,j,e,function(q){c.processCCLimitsResponse(q,j,d,"","true")})}else{$("[data-widget=cashierDeposit][data-type=promotionalCode]").removeAttr("disabled");$("[data-widget=cashierDeposit][data-type=submit]").removeAttr("disabled");$(window).trigger(widgets.events.cashierPromocodeEnter)}})}}})}else{widgets.api.validateDepositLimits(d,j,e,function(n){c.processCCLimitsResponse(n,j,d,b,"false")})}}else{var g={};g.currencyId=j;g.amount=d;g.creditCardId=i;g.promoCode=b;g.device=7;g.wrongPromoCode=false;if(b!=""){widgets.api.getPromoCodeValidation(b,function(n){if(n.code===c.code.OK){widgets.api.payWithExistingCredit(g,function(o){c.processPayment(o)})}else{if(n.code===c.code.NotAcceptable){c.confirmPromoCode().then(function(p){var o=p.toString();if(o===c.promoCodeAnswer.OK){g.promoCode="";g.wrongPromoCode=true;widgets.api.payWithExistingCredit(g,function(q){c.processPayment(q)})}else{$("[data-widget=cashierDeposit][data-type=promotionalCode]").removeAttr("disabled");$("[data-widget=cashierDeposit][data-type=submit]").removeAttr("disabled");$(window).trigger(widgets.events.cashierPromocodeEnter)}})}}})}else{widgets.api.payWithExistingCredit(g,function(n){c.processPayment(n)})}}}else{var g={};g.methodID=l.val();g.amount=d;g.currencyId=j;g.promoCode=b;g.walletAccountID=h;g.walletSecureID=f;g.device=7;g.wrongPromoCode=false;if(b!=""){widgets.api.getPromoCodeValidation(b,function(n){if(n.code===c.code.OK){widgets.api.payWithWallet(g,function(o){c.processWalletPayment(o)})}else{if(n.code===c.code.NotAcceptable){c.confirmPromoCode().then(function(p){var o=p.toString();if(o===c.promoCodeAnswer.OK){g.promoCode="";g.wrongPromoCode=true;widgets.api.payWithWallet(g,function(q){c.processWalletPayment(q)})}else{$("[data-widget=cashierDeposit][data-type=promotionalCode]").removeAttr("disabled");$("[data-widget=cashierDeposit][data-type=submit]").removeAttr("disabled");$(window).trigger(widgets.events.cashierPromocodeEnter)}})}}})}else{widgets.api.payWithWallet(g,function(n){c.processWalletPayment(n)})}}},confirmPromoCode:function(){$(window).trigger(widgets.events.cashierPromocodePopupOpen);var d=$.Deferred();var b={};var a=widgetMessage.cashierBtnOK;var c=widgetMessage.cashierBtnEnterPromoCode;b[a]=function(){d.resolve("OK");$(this).dialog("close")};b[c]=function(){d.resolve("EnterPromoCode");$(this).dialog("close");$("[data-widget=cashierDeposit][data-type=promotionalCode]").focus()};$("[data-widget=cashierDeposit][data-type=promoCodeValidation]").dialog({height:300,width:800,modal:true,buttons:b,close:function(){d.resolve("EnterPromoCode");$(this).dialog("close");$("[data-widget=cashierDeposit][data-type=promotionalCode]").focus()}});return d.promise()},processCCLimitsResponse:function(a,f,d,b,e){var c=this;var i=$("[data-widget=cashierDeposit][data-type=methods] :selected");var g="";var h="";if(a.data.parameters.prefilledCCDetails){g=a.data.parameters.userFirstName;h=a.data.parameters.userLastName}$(c.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing);if(a.code===c.code.OK){$(window).trigger(widgets.events.cashierSubmitDeposit,{redirect:i.data("redirect"),currency:f,amount:d,promocode:b,firstName:g,lastName:h,wrongpromocode:e})}else{$(window).trigger(widgets.events.cashierDepositLimitationFail,a)}},processPayment:function(a){var b=this;$(b.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing);if(a.code===b.code.NotAcceptable){if(a.data.type==="cashierDepositLimitationFail"){$(window).trigger(widgets.events.cashierDepositLimitationFail,a);return}if(a.data.type==="cashierDepositUnsuccessful"){$(window).trigger(widgets.events.cashierDepositUnsuccessful,a);return}if(a.data.type==="cashierBalanceTypeChangeNotAllowed"){$(window).trigger(widgets.events.cashierWidgetDisabled,[b.widgetName,a.data.type,a]);return}}if(a.code==b.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[b.widgetName,a.data.type,a]);return}if(a.code===b.code.OK){$(window).trigger(widgets.events.cashierDepositSuccessful,a);return}},redirectToProvider:function(a){window.open(a,"_newtab")},postToProvider:function(a){var b=$("[data-widget=cashierDeposit][data-type=formPlaceholder]");b.html(a);$("[name=formPayment]").submit()},processWalletPayment:function(b){var e=this;$(e.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndDepositProcessing);if(b.code===e.code.NotAcceptable){if(b.data.type==="cashierDepositLimitationFail"){$(window).trigger(widgets.events.cashierDepositLimitationFail,b);return}if(b.data.type==="cashierDepositUnsuccessful"){$(window).trigger(widgets.events.cashierDepositUnsuccessful,b);return}if(b.data.type==="cashierBalanceTypeChangeNotAllowed"){$(window).trigger(widgets.events.cashierWidgetDisabled,[e.widgetName,b.data.type,b]);return}}if(b.code===e.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[e.widgetName,b.data.type,b]);return}$(e.elements).hide();var a=$("[data-widget=cashierDeposit][data-type=redirectToGateway]");switch(b.data.OpenIn){case 1:window.open(b.data.Message,"_newtab");break;case 2:window.parent.location.href=b.data.Message;break;case 3:a.show();$("[data-translate=cashierRedirectText]").show();a.click(function(){e.redirectToProvider(b.data.Message)});break;case 4:var c=e.createDefaultFrame();c.setAttribute("src",b.data.Message);break;case 5:var d=window.open();d.document.write(b.data.Message);if(d.document.forms.formPayment!=null){d.document.forms.formPayment.submit()}break;case 6:window.document.write(b.data.Message);if(window.document.forms.formPayment!=null){window.document.forms.formPayment.submit()}break;case 7:a.show();$("[data-translate=cashierRedirectText]").show();a.click(function(){e.postToProvider(b.data.Message)});break;case 8:var c=e.createDefaultFrame();c.contentDocument.write(b.data.Message);if(c.contentDocument.forms.formPayment!=null){c.contentDocument.forms.formPayment.submit()}break;case 9:var c=e.createModalFrame();$(window).trigger(widgets.events.cashierModalWindowStart);c.setAttribute("src",b.data.Message);$("#modalIframeDeposit").load(function(){$(window).trigger(widgets.events.cashierModalWindowReady)});break;case 10:var c=e.createModalFrame();$(window).trigger(widgets.events.cashierModalWindowStart);c.contentDocument.write(b.data.Message);if(c.contentDocument.forms.formPayment!=null){c.contentDocument.forms.formPayment.submit()}$("#modalIframeDeposit").load(function(){$(window).trigger(widgets.events.cashierModalWindowReady)});break}}};
var cashierTraderTransferWidget={widgetName:"cashierTraderTransfer",code:{OK:200,NotAcceptable:406,BadRequest:400},data:null,page:1,isPostBack:false,limit:parseInt($("[data-widget=cashierCollection][data-type=paging]").attr("data-pagingLimit"))||5,initTable:function(){var a=$("<tbody></tbody>");$("[data-widget=cashierTraderTransfer][data-type=bonusTable]").append(a)},init:function(){var a=this;a.load();$("[data-widget=cashierTraderTransfer][data-type=check]").click(function(){a.loadTraderUserInfo()});$("[data-widget=cashierTraderTransfer][data-type=process]").click(function(){a.validateTransferData()});$("[data-widget=cashierTraderTransfer][data-type=cancelProcess]").click(function(){var c=$("[data-widget=cashierTraderTransfer][data-type=transferBaseHolder]");var b=$("[data-widget=cashierTraderTransfer][data-type=transferFinalHolder]");b.hide();c.show()});$("[data-widget=cashierTraderTransfer][data-type=submitProcess]").click(function(){a.finalizeTransferData()});$(".cashierTraderTransferCancelBonusBtn").live("click",function(b){if(confirm(widgetMessage.cashierTraderTransferCancelBonusConfirm)){var c=$(b.target).attr("cancelid");widgets.api.cancelTraderTransferBonus(c,function(d){a.processCancelBonusTransfer(d)})}})},processCancelBonusTransfer:function(a){var c=this;var b=$("[data-widget=cashierTraderTransfer][data-translate=cashierTraderTransferBonusError]");b.hide();if(a.code===c.code.NotAcceptable){c.showError(a,b)}else{if(a.code===c.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[c.widgetName,a.data.type,a]);return}else{if(a.code===c.code.OK){c.validateTransferData()}}}},finalizeTransferData:function(){var d=this;var a=$("[data-widget=cashierTraderTransfer][data-type=email]");var c=$("[data-widget=cashierTraderTransfer][data-type=amount]");var b={};b.email=a.val();b.amount=c.val();widgets.api.finalizeTransferData(b,function(e){d.finalizeTransferResult(e)})},finalizeTransferResult:function(a){var c=this;var b=$("[data-widget=cashierTraderTransfer][data-translate=cashierTraderTransferFinalError]");b.hide();if(a.code===c.code.NotAcceptable){c.showError(a,b);return}else{if(a.code===c.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[c.widgetName,a.data.type,a]);return}}$(window).trigger(widgets.events.cashierTraderTransferCompleted)},validateTransferData:function(){var d=this;var a=$("[data-widget=cashierTraderTransfer][data-type=email]");var c=$("[data-widget=cashierTraderTransfer][data-type=amount]");var b={};b.email=a.val();b.amount=c.val();widgets.api.validateTransferData(b,function(e){d.validateTransferResult(e)})},validateTransferResult:function(b){var e=this;if(b.code!=e.code.OK&&b.code!=e.code.NotAcceptable){return}var d=$("[data-widget=cashierTraderTransfer][data-translate=cashierTraderTransferError]");d.hide();if(b.code===e.code.NotAcceptable){e.showError(b,d)}else{if(b.code===e.code.BadRequest){$(window).trigger(widgets.events.cashierWidgetError,[e.widgetName,b.data.type,b]);return}else{if(b.code===e.code.OK){var f=$("[data-widget=cashierTraderTransfer][data-type=transferBaseHolder]");var c=$("[data-widget=cashierTraderTransfer][data-type=transferBonusHolder]");var a=$("[data-widget=cashierTraderTransfer][data-type=transferFinalHolder]");if(b.data.type=="cashierTraderTransferAmountBlocked"){f.hide();c.show();e.fillAccountInfo();e.fillBonusTable()}else{if(b.data.type=="cashierTraderTransferProcessToConfirm"){f.hide();c.hide();a.show();e.fillAccountInfo()}}}}}},showError:function(a,b){if(a.data.type=="cashierTraderTransferOutOfLimit"){b.html(widgetMessage[a.data.type].replace("{SumMin}",a.data.parameters.sumMin).replace("{SumMax}",a.data.parameters.sumMax))}else{b.html(widgetMessage[a.data.type])}b.show()},fillBonusTable:function(){var a=this;if(!a.isPostBack){a.isPostBack=true;a.initTable();var b={};b.limit=a.limit;b.offset=0;widgets.api.getTraderTransferBonusData(b,function(c){a.processTraderTransferBonusData(b,c)})}},processTraderTransferBonusData:function(f,c){var d=this;if(c.code!=d.code.OK){return}var b=c.data.results;if(!b){return}var d=cashierTraderTransferWidget;var e=b[b.length-1];d.data=c.data;d.doUpdate(f);$("[data-widget=cashierTraderTransfer][data-type=bonusTable] tbody tr").remove();var a=$("[data-widget=cashierTraderTransfer][data-type=bonusTable] tbody");var g="";$.each(b,function(j,k){var h="";$.each($("[data-widget=cashierTraderTransfer][data-type=bonusTable]").find("thead tr th"),function(l,m){switch($(m).attr("data-column")){case"date":h+="<td>"+helper.formatDate(k.date,helper.dateFormats.masks.normalDateTime)+"</td>";break;case"amount":h+="<td>"+k.amount+"</td>";break;case"depositAmount":h+="<td>"+k.depositAmount+"</td>";break;case"tradingVolume":h+="<td>"+k.tradingVolume+"</td>";break;case"status":h+="<td>"+k.status+"</td>";break;case"cancel":if(k.isCancelVisible){h+='<td><a href="#" cancelid="'+k.id+'" class="cashierTraderTransferCancelBonusBtn">Cancel</a></td>'}else{h+="<td></td>"}break}});g+='<tr data-itemId="'+k.id+'">'+h+"</tr>"});$(a).html(g)},fillAccountInfo:function(){var c=this;var d=$("[data-widget=cashierTraderTransfer][data-type=email]");var j=$("[data-widget=cashierTraderTransfer][data-type=amount]");var m=$("[data-widget=cashierTraderTransfer][data-type=amountLimitLabel]");var r=$("[data-widget=cashierTraderTransfer][data-type=firstName]");var t=$("[data-widget=cashierTraderTransfer][data-type=lastName]");var b=$("[data-widget=cashierTraderTransfer][data-type=country]");var n=d.val();var e=j.val();var g=m.val();var a=r.val();var l=t.val();var p=b.val();var f=$("[data-widget=cashierTraderTransfer][data-type=emailLabel]");var h=$("[data-widget=cashierTraderTransfer][data-type=amountLabel]");var o=$("[data-widget=cashierTraderTransfer][data-type=maxAmountLabel]");var s=$("[data-widget=cashierTraderTransfer][data-type=firstNameLabel]");var q=$("[data-widget=cashierTraderTransfer][data-type=lastNameLabel]");var k=$("[data-widget=cashierTraderTransfer][data-type=countryLabel]");f.html(n);h.html(e);m.html(g);s.html(a);q.html(l);k.html(p)},loadTraderUserInfo:function(){var b=this;var a=$("[data-widget=cashierTraderTransfer][data-type=email]");widgets.api.getCashierTraderTransferUserInfo(a.val(),function(c){b.processTraderUserInfo(c)})},processTraderUserInfo:function(c){var f=this;var e=$("[data-widget=cashierTraderTransfer][data-translate=cashierTraderTransferError]");e.hide();if(c.code!=f.code.OK){f.showError(c,e);return}var a=$("[data-widget=cashierTraderTransfer][data-type=firstName]");var b=$("[data-widget=cashierTraderTransfer][data-type=lastName]");var d=$("[data-widget=cashierTraderTransfer][data-type=country]");a.val(c.data.firstName);b.val(c.data.lastName);d.val(c.data.country)},load:function(){$(window).trigger(widgets.events.cashierLoading);var a=this;widgets.api.getCashierTraderTransferElements(function(b){a.processLoad(b)})},processLoad:function(b){var g=this;var e=$("[data-widget=cashierTraderTransfer][data-translate=cashierTraderTransferError]");e.hide();if(b.code!=g.code.OK){g.showError(b,e);if(b.code===g.code.NotAcceptable){$(window).trigger(widgets.events.cashierWidgetDisabled,[g.widgetName,b.data.type,b])}$(window).trigger(widgets.events.cashierLoaded);return}var d=$("[data-widget=cashierTraderTransfer][data-type=amountLimitLabel]");var f=$("[data-widget=cashierTraderTransfer][data-type=cashierTransferCurrencyLabel]");d.html(b.data.maxAmount);f.html(b.data.currencySymbol);d.show();f.show();$("[data-widget=cashierTraderTransfer]").show();var c=$("[data-widget=cashierTraderTransfer][data-type=transferBonusHolder]");var a=$("[data-widget=cashierTraderTransfer][data-type=transferFinalHolder]");c.hide();a.hide();$(window).trigger(widgets.events.cashierLoaded)},doUpdate:function(a){if(!cashierTraderTransferWidget.data){$("[data-widget=cashierTraderTransfer][data-type=paging]").html("");return}if(a.offset>0){}else{$("[data-widget=cashierTraderTransfer][data-type=paging]").html("");this.getNextPage(0,a.offset)}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=cashierTraderTransfer][data-type=paging]");var b=cashierTraderTransferWidget.data.total;var d=Math.ceil(b/e.limit);c.html("");var a='<div class="myPaging">';if(f>=e.limit){a+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){a+='<a class="pageLink';if(i==cashierTraderTransferWidget.page){a+=" activePage"}a+='" href="javascript:;">'+i+"</a> "}if(d>i){a+='<a class="nextPage" href="javascript:;">...</a>'}a+="</div>";c.html(a);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=cashierTraderTransfer][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j={};j.limit=e.limit;if(e.page==1){j.offset=0}else{j.offset=(e.limit*e.page)-e.limit}$(window).trigger(widgets.events.cashierLoading);widgets.api.getTraderTransferBonusData(j,function(k){e.processTraderTransferBonusData(j,k);$(window).trigger(widgets.events.cashierLoaded)})})}};
var cashierTransactionHistoryWidget={widgetName:"cashierTransactionHistory",code:{OK:200,NotAcceptable:406},data:null,page:1,tableDateFormat:null,isPostBack:false,limit:parseInt($("[data-widget=cashierTransactionHistory][data-type=paging]").attr("data-pagingLimit"))||5,init:function(){var a=this;a.tableDateFormat=$("[data-widget=cashierTransactionHistory][data-type=depositTable]").attr("data-date-format")||helper.dateFormats.masks.normalDateTime;if(!a.isPostBack){a.isPostBack=true;a.initTable();var b={};b.limit=a.limit;b.offset=0;widgets.api.getTransactionHistory(b,function(c){a.processTransactionHistory(b,c)});$(a.element).show()}},initTable:function(){$(window).trigger(widgets.events.cashierLoading);var a=$("<tbody></tbody>");$("[data-widget=cashierTransactionHistory][data-type=depositTable]").append(a)},processTransactionHistory:function(f,c){var d=this;if(c.code!=d.code.OK){$(window).trigger(widgets.events.cashierLoaded);return}var b=c.data.results;if(!b){$(window).trigger(widgets.events.cashierLoaded);return}var e=b[b.length-1];d.data=c.data;d.doUpdate(f);$("[data-widget=cashierTransactionHistory][data-type=depositTable] tbody tr").remove();var a=$("[data-widget=cashierTransactionHistory][data-type=depositTable] tbody");var g="";$.each(b,function(j,k){var h="";$.each($("[data-widget=cashierTransactionHistory][data-type=depositTable]").find("thead tr th"),function(l,m){switch($(m).attr("data-column")){case"dateTime":h+="<td>"+helper.formatDate(k.dateTimeTs,d.tableDateFormat)+"</td>";break;case"amount":h+="<td>"+k.amount+"</td>";break;case"method":h+="<td>"+k.method+"</td>";break;case"description":h+="<td>"+k.description+"</td>";break}});g+="<tr>"+h+"</tr>"});$(a).html(g);$(window).trigger(widgets.events.cashierLoaded)},doUpdate:function(a){if(!cashierTransactionHistoryWidget.data){$("[data-widget=cashierTransactionHistory][data-type=paging]").html("");return}if(a.offset>0){}else{$("[data-widget=cashierTransactionHistory][data-type=paging]").html("");this.getNextPage(0,a.offset)}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=cashierTransactionHistory][data-type=paging]");var b=cashierTransactionHistoryWidget.data.total;var d=Math.ceil(b/e.limit);c.html("");var a='<div class="myPaging">';if(f>=e.limit){a+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){a+='<a class="pageLink';if(i==cashierTransactionHistoryWidget.page){a+=" activePage"}a+='" href="javascript:;">'+i+"</a> "}if(d>i){a+='<a class="nextPage" href="javascript:;">...</a>'}a+="</div>";c.html(a);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=cashierTransactionHistory][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j={};j.limit=e.limit;if(e.page==1){j.offset=0}else{j.offset=(e.limit*e.page)-e.limit}$(window).trigger(widgets.events.cashierLoading);widgets.api.getTransactionHistory(j,function(k){e.processTransactionHistory(j,k)})})}};
var cashierWithdrawWidget={widgetName:"cashierWithdraw",code:{OK:200,NotAcceptable:406,BadRequest:400},init:function(){var e=this;e=$.extend({},validationWidget,cashierWithdrawWidget);var d=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");var f=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");d.hide();f.hide();$("[data-widget=cashierWithdraw][data-type=error]").hide();$("[data-widget=cashierWithdraw][data-type=success]").hide();var b=$("[data-widget=cashierWithdraw][data-type=method]");var c=$("[data-widget=cashierWithdraw][data-type=submit]");var a=$("[data-widget=cashierWithdraw][data-type=cancel]");e.startUp();e.initMethods();b.change(function(){e.initControls()});a.prop("value",widgetMessage.cashierWithdrawCancel);a.unbind("click");a.click(function(g){$(window).trigger(widgets.events.cashierWithdrawCancelled)});c.prop("value",widgetMessage.cashierWithdrawWithdraw);c.unbind("click");c.click(function(g){e.submit(g)})},initControls:function(){var p=$("[data-widget=cashierWithdraw][data-type=method]");var i=$("[data-widget=cashierWithdraw][data-translate=cashierLabelPreferredPaymentMethod]");var e=$("[data-widget=cashierWithdraw][data-type=method] :selected");var z=$("[data-widget=cashierWithdraw][data-type=account]");var n=$("[data-widget=cashierWithdraw][data-translate=cashierLabelAccount]");var h=$("[data-widget=cashierWithdraw][data-translate=cashierLabelCannotBeMoreThan]");var r=$("[data-widget=cashierWithdraw][data-translate=cashierLabelChooseAmount]");var t=$("[data-widget=cashierWithdraw][data-type=amount]");var F=$("[data-widget=cashierWithdraw][data-translate=cashierLabelComment]");var v=$("[data-widget=cashierWithdraw][data-type=comment]");var D=$("[data-widget=cashierWithdraw][data-type=submit]");var A=$("[data-widget=cashierWithdraw][data-type=cancel]");D.show();A.show();$(".validationError").hide();var o=$("[data-widget=cashierWithdraw][data-translate=cashierLabelCustomerName]");var E=$("[data-widget=cashierWithdraw][data-translate=cashierLabelBankName]");var j=$("[data-widget=cashierWithdraw][data-translate=cashierLabelBankCode]");var f=$("[data-widget=cashierWithdraw][data-translate=cashierLabelBranchAddress]");var w=$("[data-widget=cashierWithdraw][data-translate=cashierLabelBranchCode]");var C=$("[data-widget=cashierWithdraw][data-translate=cashierLabelAccountNumber]");var u=$("[data-widget=cashierWithdraw][data-translate=cashierLabelIBAN]");var d=$("[data-widget=cashierWithdraw][data-translate=cashierLabelSwift]");var l=$("[data-widget=cashierWithdraw][data-translate=cashierLabelCurrency]");var s=$("[data-widget=cashierWithdraw][data-type=customerName]");var k=$("[data-widget=cashierWithdraw][data-type=bankName]");var m=$("[data-widget=cashierWithdraw][data-type=bankCode]");var b=$("[data-widget=cashierWithdraw][data-type=branchAddress]");var q=$("[data-widget=cashierWithdraw][data-type=branchCode]");var a=$("[data-widget=cashierWithdraw][data-type=accountNumber]");var B=$("[data-widget=cashierWithdraw][data-type=iban]");var x=$("[data-widget=cashierWithdraw][data-type=swift]");var c=$("[data-widget=cashierWithdraw][data-type=currency]");var g=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");var y=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");g.hide();y.hide();if(e.attr("data-theme")!="bank"){switch(e.val()){case"1":z.hide();n.hide();v.show();F.show();t.show();r.show();p.show();i.show();o.hide();s.hide();E.hide();k.hide();j.hide();m.hide();f.hide();b.hide();w.hide();q.hide();C.hide();a.hide();u.hide();B.hide();d.hide();x.hide();l.hide();c.hide();z.removeAttr("data-isrequired");s.removeAttr("data-isrequired");k.removeAttr("data-isrequired");m.removeAttr("data-isrequired");b.removeAttr("data-isrequired");q.removeAttr("data-isrequired");a.removeAttr("data-isrequired");B.removeAttr("data-isrequired");x.removeAttr("data-isrequired");c.removeAttr("data-isrequired");v.removeAttr("data-isrequired");break;case"2":z.show();n.show();n.html(widgetMessage.cashierLabelAccount.replace("{Account}",e.html()));t.show();r.show();v.show();F.show();p.show();i.show();o.show();s.show();E.show();k.show();j.show();m.show();f.show();b.show();w.show();q.show();C.show();a.show();u.show();B.show();d.show();x.show();l.show();c.show();z.removeAttr("data-isrequired");s.attr("data-isrequired","true");k.attr("data-isrequired","true");m.attr("data-isrequired","true");b.attr("data-isrequired","true");q.attr("data-isrequired","true");a.attr("data-isrequired","true");B.attr("data-isrequired","true");x.attr("data-isrequired","true");c.attr("data-isrequired","true");v.removeAttr("data-isrequired");break;default:z.show();n.show();n.html(widgetMessage.cashierLabelAccount.replace("{Account}",e.html()));t.show();r.show();v.show();F.show();p.show();i.show();o.hide();s.hide();E.hide();k.hide();j.hide();m.hide();f.hide();b.hide();w.hide();q.hide();C.hide();a.hide();u.hide();B.hide();d.hide();x.hide();l.hide();c.hide();z.attr("data-isrequired","true");s.removeAttr("data-isrequired");k.removeAttr("data-isrequired");m.removeAttr("data-isrequired");b.removeAttr("data-isrequired");q.removeAttr("data-isrequired");a.removeAttr("data-isrequired");B.removeAttr("data-isrequired");x.removeAttr("data-isrequired");c.removeAttr("data-isrequired");if(e.val()!="7"){v.removeAttr("data-isrequired")}else{v.attr("data-isrequired","true")}break}}else{z.hide();n.hide();t.show();r.show();p.hide();i.hide();v.show();F.show();n.html(widgetMessage.cashierLabelAccount.replace("{Account}",e.html()));o.hide();s.hide();E.hide();k.hide();j.hide();m.hide();f.hide();b.hide();w.hide();q.hide();C.hide();a.hide();u.hide();B.hide();d.hide();x.hide();l.hide();c.hide();v.removeAttr("data-isrequired");z.removeAttr("data-isrequired");s.removeAttr("data-isrequired");k.removeAttr("data-isrequired");m.removeAttr("data-isrequired");b.removeAttr("data-isrequired");q.removeAttr("data-isrequired");a.removeAttr("data-isrequired");B.removeAttr("data-isrequired");x.removeAttr("data-isrequired");c.removeAttr("data-isrequired")}h.show();h.html(widgetMessage.cashierLabelCannotBeMoreThan.replace("{Amount}",e.attr("data-limitMax")))},initMethods:function(){var a=this;widgets.api.getWithdrawMethods(function(b){a.processWithdrawMethods(b)})},startUp:function(){$(window).trigger(widgets.events.cashierLoading);var a=this;widgets.api.getStartUpData(function(b){a.processStartUpData(b)})},processStartUpData:function(a){var d=this;var e=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");var c=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");if(a.code===d.code.OK&&a.data.length>0){if($.inArray("cashierWithdrawalBlocked",a.data)>-1){var b=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawInfo]");b.show();b.html(widgetMessage.cashierCancelTraderDepositBonus);$(window).trigger(widgets.events.cashierWithdrawalBlocked)}if($.inArray("cashierWithdrawBonusTRNotMet",a.data)>-1){$(window).trigger(widgets.events.cashierWithdrawBonusTRNotMet)}if($.inArray("cashierWithdrawBonusTRMet",a.data)>-1){$(window).trigger(widgets.events.cashierWithdrawBonusTRMet)}}else{if(a.code===d.code.NotAcceptable){switch(a.data.type){case"cashierUserSuspended":$(window).trigger(widgets.events.cashierUserSuspended);return;default:$(window).trigger(widgets.events.cashierWidgetDisabled,[d.widgetName,a.data.type,a]);return}}if(a.code===d.code.BadRequest){c.html(widgetMessage.cashierWithdrawError);c.show();e.hide();return}}},processWithdrawMethods:function(a){var f=this;var h=$("[data-widget=cashierWithdraw][data-type=method]");var d=$("[data-widget=cashierWithdraw][data-translate=cashierLabelAccount]");var g=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");var e=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");if(a.code===f.code.OK){h.find("option").remove();var c="";$.each(a.data,function(j,k){var i="cashierWithdrawMethod"+k.name.replace(" ","");if(widgetMessage[i]!=null){c+='<option value="'+k.id+'" data-theme="'+k.theme+'" data-limitMin="'+k.limitMin+'" data-limitMax="'+k.limitMax+'">'+widgetMessage[i]+"</option>"}else{c+='<option value="'+k.id+'" data-theme="'+k.theme+'" data-limitMin="'+k.limitMin+'" data-limitMax="'+k.limitMax+'">'+k.name+"</option>"}});h.append(c);var b=$("[data-widget=cashierWithdraw][data-type=method] :selected");d.html(widgetMessage.cashierLabelAccount.replace("{Account}",b.html()));f.initControls();$(window).trigger(widgets.events.cashierLoaded)}else{if(a.code===f.code.NotAcceptable){if(a.data.type==="cashierPendingWithdrawal"){$(window).trigger(widgets.events.cashierPendingWithdrawal,a)}else{$(window).trigger(widgets.events.cashierWidgetDisabled,[f.widgetName,a.data.type,a])}$(window).trigger(widgets.events.cashierLoaded);return}else{if(a.code===f.code.BadRequest){e.html(widgetMessage.cashierWithdrawError);e.show();g.hide();$(window).trigger(widgets.events.cashierLoaded);return}}}},customValidation:function(){var c=this;var b=$("[data-widget=cashierWithdraw][data-type=amount]");var d=true;var a=/^\d+(?:\.\d{0,2})?$/;if(c.isEmpty(b)){c.addError(b.attr("data-type"),widgetMessage.requiredField);d=false}else{if(!b.val().match(a)){c.addError(b.attr("data-type"),b.attr("data-regexpMessage")?b.attr("data-regexpMessage"):widgetMessage.invalidSyntax);d=false}}return d},submit:function(e){var f=this;if(!f.validate()){return false}var g=$("[data-widget=cashierWithdraw][data-type=method] :selected").attr("data-theme");$(window).trigger(widgets.events.cashierStartWithdrawProcessing);$(f.elements).attr("disabled","disabled");var c={};var a=$("[data-widget=cashierWithdraw][data-type=method]").val();var b=$("[data-widget=cashierWithdraw][data-type=method] :selected").text();var d=$("[data-widget=cashierWithdraw][data-type=amount]").val();if(g!="bank"){widgets.api.checkWithdrawLimits(a,b,d,function(h){f.processLimitsResponse(h)})}else{widgets.api.checkWithdrawLimits(2,b,d,function(h){f.processLimitsResponse(h)})}},processLimitsResponse:function(c){var e=this;var a=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");var i=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");var h=$("[data-widget=cashierWithdraw][data-type=account]").val();if(h==""){h=$("[data-widget=cashierWithdraw][data-type=accountNumber]").val()}var j=$("[data-widget=cashierWithdraw][data-type=method] :selected").html();var f=$("[data-widget=cashierWithdraw][data-type=amount]").val();var b=$("[data-widget=cashierWithdraw][data-type=submit]");var d=$("[data-widget=cashierWithdraw][data-type=cancel]");var g=$("[data-widget=cashierWithdraw][data-translate=cashierLabelWithdraw]");$(e.elements).removeAttr("disabled");$(window).trigger(widgets.events.cashierEndWithdrawProcessing);switch(c.code){case e.code.OK:$(e.elements).hide();a.html(widgetMessage[c.data.type].replace("{Amount}",c.data.text).replace("{Account}",h).replace("{Method}",j));g.show();a.show();b.show();d.show();b.prop("value",widgetMessage.cashierWithdrawConfirm);b.unbind("click");b.click(function(k){e.startWithdrawRequest(k)});$(window).trigger(widgets.events.cashierWithdrawLimitationResult,e.code.OK);break;case e.code.NotAcceptable:if(c.data.type!="cashierUserSuspended"){if(c.data.type=="cashierWithdrawPeriod"){i.html(widgetMessage[c.data.type].replace("{Period}",c.data.parameters.periodType).replace("{Amount}",c.data.parameters.periodLimitation));i.show();a.hide()}else{if(c.data.type=="cashierFirstDepositProcessing"){i.html(widgetMessage[c.data.type]);i.show();a.hide()}else{i.html(widgetMessage[c.data.type].replace("{Amount}",c.data.text).replace("{Days}",c.data.text).replace("{Account}",h));i.show();a.hide()}}$(window).trigger(widgets.events.cashierWithdrawLimitationResult,e.code.NotAcceptable)}else{$(window).trigger(widgets.events.cashierUserSuspended);return}break;case e.code.BadRequest:i.html(widgetMessage.cashierWithdrawError);i.show();a.hide();$(window).trigger(widgets.events.cashierWidgetError,[e.widgetName,c.data.type,c]);break}},startWithdrawRequest:function(a){var b=this;var c={};$(window).trigger(widgets.events.cashierStartWithdrawProcessing);$(b.elements).attr("disabled","disabled");c.methodId=$("[data-widget=cashierWithdraw][data-type=method] :selected").val();c.methodName=$("[data-widget=cashierWithdraw][data-type=method] :selected").text();c.amount=$("[data-widget=cashierWithdraw][data-type=amount]").val();c.account=$("[data-widget=cashierWithdraw][data-type=account]").val();c.comment=$("[data-widget=cashierWithdraw][data-type=comment]").val();c.customerName=$("[data-widget=cashierWithdraw][data-type=customerName]").val();c.bankName=$("[data-widget=cashierWithdraw][data-type=bankName]").val();c.bankCode=$("[data-widget=cashierWithdraw][data-type=bankCode]").val();c.branchAddress=$("[data-widget=cashierWithdraw][data-type=branchAddress]").val();c.branchCode=$("[data-widget=cashierWithdraw][data-type=branchCode]").val();c.accountNumber=$("[data-widget=cashierWithdraw][data-type=accountNumber]").val();c.iban=$("[data-widget=cashierWithdraw][data-type=iban]").val();c.swift=$("[data-widget=cashierWithdraw][data-type=swift]").val();c.currency=$("[data-widget=cashierWithdraw][data-type=currency]").val();widgets.api.startWithdrawRequest(c,function(d){b.processWithdrawResponse(d)})},processWithdrawResponse:function(b){var e=this;var f=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawOK]");var d=$("[data-widget=cashierWithdraw][data-translate=cashierWithdrawErrorCC]");$(window).trigger(widgets.events.cashierEndWithdrawProcessing);$(e.elements).removeAttr("disabled");var c=$("[data-widget=cashierWithdraw][data-type=submit]");var a=$("[data-widget=cashierWithdraw][data-type=cancel]");if(b.code===e.code.NotAcceptable){if(b.data.type==="cashierWithdrawalUnsuccessful"||b.data.type==="cashierInvalidWithdrawAmount"||b.data.type==="cashierWithdrawalNotAvailableCreditBalance"||b.data.type==="cashierWithdrawDemoUser"){$(window).trigger(widgets.events.cashierWithdrawalUnsuccessful,b);return}if(b.data.type==="cashierUserSuspended"){$(window).trigger(widgets.events.cashierUserSuspended);return}if(b.data.type==="cashierPendingWithdrawal"){$(window).trigger(widgets.events.cashierPendingWithdrawal,b);return}}if(b.code===e.code.BadRequest){d.html(widgetMessage.cashierWithdrawError);d.show();f.hide();$(window).trigger(widgets.events.cashierWidgetError,[e.widgetName,b.data.type,b]);return}if(b.code===e.code.OK){c.hide();a.hide();$(window).trigger(widgets.events.cashierWithdrawalSuccessful,b);return}}};
var cashierWithdrawalHistoryWidget={widgetName:"cashierWithdrawalHistory",data:null,page:1,tableDateFormat:null,code:{OK:200,NotAcceptable:406,BadRequest:400},isPostBack:false,limit:parseInt($("[data-widget=cashierWithdrawalHistory][data-type=paging]").attr("data-pagingLimit"))||5,init:function(){var a=this;a.tableDateFormat=$("[data-widget=cashierWithdrawalHistory][data-type=withdrawalTable]").attr("data-date-format")||helper.dateFormats.masks.normalDateTime;if(!a.isPostBack){a.isPostBack=true;a.initTable();var b={};b.limit=a.limit;b.offset=0;widgets.api.getWithdrawalHistory(b,function(c){a.processWithdrawHistory(b,c)});$(".withdrawalHistoryCancelBtn").live("click",function(c){var e=$(c.target).attr("cancelid");var d={};d.id=e;d.params=b;d.confirmText=widgetMessage.cashierCancelWithdrawalConfirm;d.widget=a;$(window).trigger(widgets.events.cashierCancelWithdrawalRequest,d)});$(a.element).show()}},initTable:function(){$(window).trigger(widgets.events.cashierLoading);var a=$("<tbody></tbody>");$("[data-widget=cashierWithdrawalHistory][data-type=withdrawalTable]").append(a)},processWithdrawHistory:function(f,c){var d=this;if(c.code!=d.code.OK){$(window).trigger(widgets.events.cashierLoaded);return}var b=c.data.results;if(!b){$(window).trigger(widgets.events.cashierLoaded);return}var e=b[b.length-1];d.data=c.data;d.doUpdate(f);$("[data-widget=cashierWithdrawalHistory][data-type=withdrawalTable] tbody tr").remove();var a=$("[data-widget=cashierWithdrawalHistory][data-type=withdrawalTable] tbody");var g="";$.each(b,function(j,k){var h="";$.each($("[data-widget=cashierWithdrawalHistory][data-type=withdrawalTable]").find("thead tr th"),function(l,m){switch($(m).attr("data-column")){case"dateTime":h+="<td>"+helper.formatDate(k.reqTS,d.tableDateFormat)+"</td>";break;case"amount":h+="<td>"+k.amount+"</td>";break;case"status":h+="<td>"+d.getStatusText(k.status)+"</td>";break;case"cancel":if(k.isCancelVisible){h+='<td><a href="#" cancelid='+k.id+' class="withdrawalHistoryCancelBtn">'+widgetMessage.cashierWithdrawCancel+"</a></td>"}else{h+="<td></td>"}break}});g+='<tr data-itemId="'+k.Id+'">'+h+"</tr>"});$(a).html(g);$(window).trigger(widgets.events.cashierLoaded)},getStatusText:function(a){switch(a){case 1:return widgetMessage.withdrawStatusLabelPending;case 2:return widgetMessage.withdrawStatusLabelInProcess;case 3:return widgetMessage.withdrawStatusLabelApproved;case 4:return widgetMessage.withdrawStatusLabelRejected;case 5:return widgetMessage.withdrawStatusLabelRequestDoc;case 6:return widgetMessage.withdrawStatusLabelAutoApproved;case 7:return widgetMessage.withdrawStatusLabelAutoRejected;case 8:return widgetMessage.withdrawStatusLabelMoneyRequestSent;case 9:return widgetMessage.withdrawStatusLabelMoneyRequestDeclined;case 10:return widgetMessage.withdrawStatusLabelMoneyTransferredToUser;case 11:return widgetMessage.withdrawStatusLabelSplit;case 20:return widgetMessage.withdrawStatusLabelInsufficientBalance;case 30:return widgetMessage.withdrawStatusLabelUserCancelled;default:return""}},doUpdate:function(a){if(!cashierWithdrawalHistoryWidget.data){$("[data-widget=cashierWithdrawalHistory][data-type=paging]").html("");return}if(a.offset>0){}else{$("[data-widget=cashierWithdrawalHistory][data-type=paging]").html("");this.getNextPage(0,a.offset)}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=cashierWithdrawalHistory][data-type=paging]");var b=cashierWithdrawalHistoryWidget.data.total;var d=Math.ceil(b/e.limit);c.html("");var a='<div class="myPaging">';if(f>=e.limit){a+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){a+='<a class="pageLink';if(i==cashierWithdrawalHistoryWidget.page){a+=" activePage"}a+='" href="javascript:;">'+i+"</a> "}if(d>i){a+='<a class="nextPage" href="javascript:;">...</a>'}a+="</div>";c.html(a);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=cashierWithdrawalHistory][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j={};j.limit=e.limit;if(e.page==1){j.offset=0}else{j.offset=(e.limit*e.page)-e.limit}$(window).trigger(widgets.events.cashierLoading);widgets.api.getWithdrawalHistory(j,function(k){e.processWithdrawHistory(j,k)})})}};
var cashierWithdrawKioskWidget={widgetName:"cashierWithdrawKiosk",code:{OK:200,NotAcceptable:406,BadRequest:400},balance:null,init:function(){var b=this;b=$.extend({},validationWidget,cashierWithdrawKioskWidget);b.load();var a=$("[data-widget=cashierWithdrawKiosk][data-type=submit]");a.click(function(c){b.submit(c)})},load:function(){var a=this;widgets.api.getCashierWithdrawKioskElements(function(b){a.processLoad(b)})},processLoad:function(a){var d=this;if(a.code===d.code.NotAcceptable){switch(a.data.type){case"cashierUserSuspended":$(window).trigger(widgets.events.cashierUserSuspended);return;default:$(window).trigger(widgets.events.cashierWidgetDisabled,[d.widgetName,a.data.type,a]);return}}if(a.code!=d.code.OK){return}$(d.elements).show();var c=$("[data-widget=cashierWithdrawKiosk][data-type=terminalName]");var e=$("[data-widget=cashierWithdrawKiosk][data-type=shopName]");var b=$("[data-widget=cashierWithdrawKiosk][data-type=balance]");c.text(a.data.terminalName);e.text(a.data.shopName);b.val(a.data.balance);d.balance=a.data.balance},submit:function(a){var c=this;if(!c.validate()){return false}$(c.elements).attr("disabled","disabled");var b=$("[data-widget=cashierWithdrawKiosk][data-type=amount]");widgets.api.addPendingKioskWithdrawRequest(b.val(),function(d){c.processWithdraw(d)})},customValidation:function(){var c=this;var b=$("[data-widget=cashierWithdrawKiosk][data-type=amount]");var a=b.val();if(a!=null&&a>c.balance){c.addError(b.attr("data-type"),widgetMessage.cashierWithdrawKioskInvalidAmount);return false}return true},processWithdraw:function(a){var b=this;if(a.code===b.code.OK){$(window).trigger(widgets.events.cashierKioskWithdrawSuccessful,a)}else{if(a.code===b.code.NotAcceptable){$(window).trigger(widgets.events.cashierKioskWithdrawUnsuccessful,a)}else{$(window).trigger(widgets.events.cashierWidgetError,[b.widgetName,a.data.type,a]);return}}}};
var changePasswordWidget={widgetName:"changePassword",btnClicked:false,init:function(){var a=this;a=$.extend({},validationWidget,changePasswordWidget);a.elements.filter("[data-type=submit]").click(function(b){if(!a.btnClicked){a.btnClicked=true;a.submit()}});a.addPasswordStrengh()},addPasswordStrengh:function(){var b=this;var a=b.elements.filter('[data-type="newPassword"]');strengthMeterWidget.init();a.keydown(function(){strengthMeterWidget.validate(a.val())})},submit:function(){var e=this;var a=e.elements.filter("[data-type=error]");var b=e.elements.filter("[data-type=currentPassword]");var c=e.elements.filter("[data-type=newPassword]");var d=e.elements.filter("[data-type=confirmPassword]");if(!e.validate()){e.btnClicked=false;return false}else{if(c.val()!=d.val()){$(window).trigger(widgets.events.passwordMissmatch);e.btnClicked=false;return false}}a.hide();widgets.api.updatePassword(widgets.token.sessionId,b.val(),c.val(),function(f){e.processChangePassword(f)})},processChangePassword:function(a){var b=this;b.btnClicked=false;$(window).trigger(widgets.events.changePassword,a)}};
var initial=0;var chartWidget={hasHistory:false,init:function(){var b=this;var a=widgets.links[b.link].option;this.element.show();widgets.isTraderoom=true;$(window).on(widgets.events.settingsLoaded,function(f){if($(b.element).attr("data-chartPlus")=="true"){var c=(widgets.settings!=null&&widgets.settings.application.ShowChartPlusArrows.Value=="true")?'<a href="javascript:;" class="chartPlusAlpha"></a><a href="javascript:;" class="chartPlusBeta"></a>':"";var g=$('<div class="chartPlus">'+c+"</div>");$(g).insertAfter($(b.element));$(g).hide();if(widgets.settings.application.ShowChartPlusArrows.Value=="true"){var e=$("[data-widget="+b.game+"_"+b.link+"_chart]").next('div[class*="chartPlus"]').find(".chartPlusAlpha");var d=$("[data-widget="+b.game+"_"+b.link+"_chart]").next('div[class*="chartPlus"]').find(".chartPlusBeta");e.mouseover(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonAlpha"];h.mouseover(b)});e.click(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonAlpha"];h.clickButton(b)});d.click(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonBeta"];h.clickButton(b)});e.mouseout(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonAlpha"];h.mouseout(b)});e.click(function(){$(".widgetTradebox").find(".widgetTradeboxInitial").fadeOut("fast",function(){$(".widgetTradebox").find(".widgetTradeboxOpen").slideDown();$(".widgetTradeActions [data-widget="+b.game+"_"+b.name+"_buttonAlpha]").show();$(".widgetTradeActions [data-widget="+b.game+"_"+b.name+"_buttonBeta]").hide()})});d.mouseover(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonBeta"];h.mouseover(b)});d.mouseout(function(){var h=widgets.all[b.game+"_"+b.link+"_buttonBeta"];h.mouseout(b)});d.click(function(){$(".widgetTradebox").find(".widgetTradeboxInitial").fadeOut("fast",function(){$(".widgetTradebox").find(".widgetTradeboxOpen").slideDown();$(".widgetTradeActions [data-widget="+b.game+"_"+b.name+"_buttonAlpha]").hide();$(".widgetTradeActions [data-widget="+b.game+"_"+b.name+"_buttonBeta]").show()})})}}});$(window).on(widgets.events.linkOptionUpdated,function(d,c){if(b.link!=c||!widgets.links[b.link].option){return}switch(widgets.game){case"turboBinary":widgets.api.getAssetPriceHistory(widgets.links[b.link].option.id,function(e){b.updateHistory(e)});break;default:widgets.api.getOptionPriceHistory(widgets.links[b.link].option.id,function(e){b.updateHistory(e)});break}});if(b.game=="turboBinary"){$(window).on(widgets.events.assetPricesUpdated,function(e,c){var d=Object.keys(widgets.links).indexOf(b.link)*200;clearTimeout(b.link.updateTimout);b.link.updateTimout=setTimeout(function(){b.updateOption(widgets.links[b.link].price)},d)})}else{$(window).on(widgets.events.optionPricesUpdated,function(e,c){var d=Object.keys(widgets.links).indexOf(b.link)*200;clearTimeout(b.link.updateTimout);b.link.updateTimout=setTimeout(function(){b.updateOption(widgets.links[b.link].price)},d)})}$(window).on(widgets.events.clickedStrikeButton,function(d,c){var e=c.strikeLevel;var f=c.direction;b.container.updateChartSeries(widgets.game.toLowerCase(),e,f,"strike")});$(window).on(widgets.events.btnOverClicked+" "+widgets.events.btnUnderClicked,function(d,c){var e=c.strike;var f=c.direction;b.container.updateChartSeries(widgets.game.toLowerCase(),e,f,"strike")});$(window).on(widgets.events.tradeIsCompleted,function(e,d){if(d.code==200){var c=widgets.game.toLowerCase();var g=(c!="overunder")?false:widgets.all[widgets.game+"_"+b.link+"_buttonBuy"].selectedOption.direction;var f=(c!="overunder")?$(".activeRow").find("span.widgetStrike").html():widgets.all[widgets.game+"_"+b.link+"_buttonBuy"].selectedOption.strike;if(widgets.isLadderBased(widgets.game)||c=="overunder"){if($(".activeRow .callButtonClicked").length||$(".activeRow .touchButtonClicked").length){g=true}b.container.updateChartSeries(widgets.game.toLowerCase(),f,g,"trade")}}});$(window).on(widgets.events.sellCompleted,function(e,d){if(d.code==200){openTradesWidget.updateOpenTradesCollectionAfterSell();$(".sellTools").remove();$(".actionButton.clicked").removeClass("clicked");var h=($(".activeRow .callButtonClicked").length||$(".activeRow .touchButtonClicked").length)?true:false;var g;if($(".expandedLadderTD .callButtonClicked").length>0){g=$(".expandedLadderTD .callButtonClicked")}else{if($(".expandedLadderTD .touchButtonClicked").length>0){g=$(".expandedLadderTD .touchButtonClicked")}else{if($(".expandedLadderTD .putButtonClicked").length>0){g=$(".expandedLadderTD .putButtonClicked")}else{if($(".expandedLadderTD .noTouchButtonClicked").length>0){g=$(".expandedLadderTD .noTouchButtonClicked")}}}}var c=g&&g.length>0&&g.offset().top!=0&&g.offset().left!=0?true:false;var f=$(".activeRow").find("span.widgetStrike").html();if(widgets.isLadderBased(widgets.game)){b.container.updateChartSeries(widgets.game.toLowerCase(),f,h,"strike",c)}}});$(window).on(widgets.events.resetWidget,function(){var c=this;c.container=$.extend({},iChart);c.container.destroyChart()});$(window).on(widgets.events.userLogout,function(d,c){var f=$(".activeRow .callButtonClicked").length?true:false;var e=$(".activeRow").find("span.widgetStrike").html();if(widgets.isLadderBased(widgets.game)||(widgets.game=="overUnder")){if(Object.keys(widgets.options).length!=0&&e!=null&&e!=undefined){b.container.updateChartSeries(widgets.game.toLowerCase(),e,f,"strike")}}});$(window).on(widgets.events.strikeLevelTouched,function(f,d){var c=$("[data-widget="+b.game+"_"+b.link+"_chart]");var e=d.strikeLevel;var g=d.direction;b.container.updateChartSeries(widgets.game.toLowerCase(),e,g,"none");b.container.resetDirection();resetTradeBox()})},updateHistory:function(f){if(!f||!f.data||!f.data.date){return}f=f.data;var g=this;var g=widgets.all[g.game+"_"+g.link+"_chart"];g.hasHistory=true;var h=widgets.links[g.link].option;f.OptionName=h.name;f.clientUTCTimeDiff=widgets.timeDiff;f=helper.updateHistoryPricesOffset(f);g.container=$.extend({},iChart);if(g.game=="turboBinary"){g.container=$.extend(g.container,turboAdapter)}g.container.setDirection=g.setDirection;g.container.UpdateTradePanelPosition=g.updateTradePanelPosition;var j=$(g.element).attr("data-hideprice")!=undefined?$(g.element).attr("data-hideprice"):"false",b=function(){if(g.element.height()>0){return g.element.height()}else{if(g.container.chartHeight>0&&g.container.chartHeight!==undefined){return g.container.chartHeight}}},e=function(){if(g.element.width()>0){return g.element.width()}else{if(g.container.chartWidth>0&&g.container.chartWidth!==undefined){return g.container.chartWidth}}};g.container.init({Index:g.name,baseUrl:widgets.baseUrl,enableChartGaps:true,hidePrice:j,chartHeight:b(),chartWidth:e()});g.container.placeholder=g.element.get(0);var a=widgets.options[h.id];var i=f.date.to.timestamp-f.date.from.timestamp;var c,d;if(widgets.game=="turboBinary"){c=f.date.to.timestamp;d=null}else{c=f.date.to.timestamp+(i*5/100);d=f.date.to.timestamp}var k={optionHistoryPrice:f.history,highPrice:f.price.to,lowPrice:f.price.from,startOptionHistoryTime:f.date.from.timestamp,endOptionHistoryTime:c,AssetsAccuracy:f.accuracy,clientUTCTimeDiff:0,OptionID:h.id,OptionName:h.name,expiryTime:d,disableInvestTime:a.disableInvestTimeInSeconds,optionActiveAt:h.activeAtTimestamp,optionStrikeDistance:a.strikeDistance};Highcharts.setOptions({global:{useUTC:false}});g.container.buildChart(k);$(window).resize(function(){if($("#tbContainer").length>0){var l=$(window).width()-$("#tbContainer").width()-50;g.container.chart.setSize(l,$(window).height()-150,false);initial=0;g.updateTradeFromChart()}});$(window).trigger("resize");$(window).trigger(widgets.events.initChart)},updateOption:function(c){var e=this;if(!c||typeof e.container=="undefined"){return}var b=widgets.all[e.game+"_"+e.link+"_chart"];c.timestamp=widgets.getDate(c.timestamp).getTime();e.container.setNewData(parseFloat(c.rate),c.timestamp);e.updateTradeFromChart();if(widgets.links[e.link].isAlpha===false&&widgets.links[e.link].isAlphaOver==null){var d=widgets.all[e.game+"_"+e.link+"_buttonBeta"];d.mouseover(e)}else{if(widgets.links[e.link].isAlpha===true&&widgets.links[e.link].isAlphaOver==null){var a=widgets.all[e.game+"_"+e.link+"_buttonAlpha"];a.mouseover(e)}else{if(widgets.links[e.link].isAlphaOver==true){var a=widgets.all[e.game+"_"+e.link+"_buttonAlpha"];a.mouseover(e)}else{if(widgets.links[e.link].isAlphaOver==false){var d=widgets.all[e.game+"_"+e.link+"_buttonBeta"];d.mouseover(e)}}}}},setDirection:function(a,g,f){var e=this;if(widgets.isLadderBased(widgets.game)||widgets.game.toLowerCase()=="overunder"){f=(typeof f==="undefined")?null:f;e.updateYAxis();var c=(a)?e.highPrice*10:0;if(widgets.game.toLowerCase()=="laddertouch"){if(a){c=(e.lastPrice<g)?e.highPrice*10:0}else{c=(e.lastPrice>g)?e.highPrice*10:0}}e.setIndicator("bandArea1",true,g,c)}else{var h=e.container;f=(typeof f==="undefined")?null:f;if(f==null){if(e.game=="digital"||e.game=="turboBinary"){g=h.lastPrice}h.updateYAxis();var c=(a)?h.highPrice*10:0;h.setIndicator("bandArea1",true,g,c)}else{var d=Math.min(g,f);var i=Math.max(g,f);if(a){h.setIndicator("bandArea1",true,g,f)}else{var j=0;var b=h.highPrice*10;h.setIndicator("bandArea1",true,j,d);h.setIndicator("bandArea2",true,i,b)}}}},clearDirection:function(){var a=this;widgets.links[a.link].isAlpha=null;if(typeof a.container!="undefined"){a.container.resetDirection()}},updateTradeFromChart:function(){var c=this;var b=$(c.element).offset();if($(c.element).attr("data-chartPlus")!="true"||typeof c.container.getSeriesPoint(0)=="undefined"||typeof b=="undefined"){return}if(widgets.settings.application.ShowChartPlusArrows.Value=="true"){var d=$(c.element).next().get(0);$(d).show();var a=(parseFloat($(c.element).width())-c.container.getSeriesPoint(0).plotX-b.left)>50;if(a==true){$(d).css("left",c.container.getSeriesPoint(0).plotX);$(d).css("top",c.container.getSeriesPoint(0).plotY+b.top-($(d).height()/3))}else{$(d).css("left",c.container.getSeriesPoint(0).plotX);$(d).css("top",c.container.getSeriesPoint(0).plotY+b.top-($(d).height()/3))}}},clear:function(){var a=this;initial=0;var b=$(a.element).next().get(0);if(!$(b).hasClass("chartPlus")){return false}$(b).hide()}};
var chartv2Widget={settings:{},chartv2ref:null,init:function(){Highcharts.setOptions({global:{useUTC:false}});var a=this;chartv2ref=a.createChart($(a.element),a.link);chartv2ref.init()},createChart:function(a,c){var b=this;this.link=c,this.elementCache={},this.candles=[],this.lines=[],this.chart=null,this.options={};b.settings=$(b.element).data("settings")||{};this.defaultOptions={pointUpdateTime:60000,baseColor:b.settings.baseColor||"#4572a7",upColor:"#f00",downColor:"#090",negativeColor:"#f00",negativeSplitValue:null,chartType:"line",backgroundColor:b.settings.backgroundColor||"transparent",tickColor:"#4572a7",assetName:"",gradientTopColor:b.settings.gradientTopColor||"#ffffff",gradientBottomColor:b.settings.gradientBottomColor||"#4572a7",enableTick:false,marginRight:b.settings.marginRight||75,lineColor:"white",tooltipBackGroundColor:"white",attachToTradeLinkSignal:true,disableXAxisInFiture:true,visibleScroll:false,navHeight:b.settings.navHeight||40,navMaskFill:b.settings.navMaskFill||"rgba(128, 179, 236, 0.3)",navMargin:b.settings.navMargin||25,navOutlineWidth:b.settings.navOutlineWidth||0,navHandlesBackground:b.settings.navHandlesBackground||"#ebe7e8",navHandlesBorder:b.settings.navHandlesBorder||"#b2b1b6",navBottom:b.settings.navBottom||0,xLineWidth:b.settings.xLineWidth||0,xTickWidth:b.settings.xTickWidth||0,xLabelsY:b.settings.xLabelsY||null,enableNavigatorLabel:true,yAxisLabelInterval:18},this.selectors={oldChart:"#oldChartContainer",chart:"#chartContainer",navigation:"#navigationContainer",chartTypeArea:"#chartTypeArea",chartTypeCandle:"#chartTypeCandle",chartTypeLine:"#chartTypeLine",chartTypeStandard:"#chartTypeSandard"};this.tradableAssetId=null;this.optionName=null;this.selectedTypeBtn=null;this.selectedZoomBtn=null;this.accuracy=0;this.verticalLines=[];this.enabled=true;this.visibleCandle=true;this.visibleArea=true;this.visibleZoom=true;this.placeholder=a;this.MinTimeFrame=3600000;this.navigationButtons=new Array({selector:"#btn1Hour",group:"1",groupHours:1},{selector:"#btn4Hours",group:"1",groupHours:4},{selector:"#btn12Hours",group:"15",groupHours:12},{selector:"#btn1Day",group:"15",groupHours:24},{selector:"#btn1Week",group:"90",groupHours:168},{selector:"#btn1Month",group:"90",groupHours:720});this.getGlobalSetting=function(d){if(widgets&&widgets.settings&&widgets.settings.application){var e=widgets.settings.application[d];if(e&&e.Value){return e.Value.toString().toLowerCase()=="true"}}return false};this.init=function(){var f=this;var g=$.extend({},f.defaultOptions);f.options=$.extend(g,f.options);var e=$(f.placeholder).data("enablenavigatorlabel");if(typeof e!="undefined"){if(e==true||e==false){f.options.enableNavigatorLabel=e}}var d=$(f.placeholder).data("yaxislabelinterval");if(typeof d!="undefined"){f.options.yAxisLabelInterval=d}$(f.placeholder.find(f.selectors.chart)).hide();$(f.placeholder.find(f.selectors.oldChart)).show();f.elementCache.chartContainer=$(f.placeholder.find(f.selectors.chart));f.elementCache.btns=$(f.placeholder.find(f.selectors.navigation));f.buildChartTypeBtns(true);f.buldNavigationBtns();$(window).on(widgets.events.settingsLoaded,function(){f.enabled=f.getGlobalSetting("EnableNewCharts");f.visibleArea=f.getGlobalSetting("EnableAreaChart");f.visibleCandle=f.getGlobalSetting("EnableCandlesticksChart");f.visibleZoom=f.getGlobalSetting("EnableZoomChart");f.options.enableTick=f.getGlobalSetting("EnablePriceTicker");f.buildChartTypeBtns()});if(f.options.attachToTradeLinkSignal){$(window).on(widgets.events.linkOptionUpdated,function(k,j){if(f.link!=j||!widgets.links[f.link].option){return}var h=widgets.links[f.link];var l=h.option.id;f.optionName=h.option.name;if(h.option.tradableAssetId!=undefined){l=h.option.tradableAssetId;f.optionName=h.option.name}f.tradableAssetId=l;if(f.chart!=null){f.updateTradableAsset(l,h.option.name)}});$(window).on(widgets.events.assetPricesUpdated,function(k,h){var j=widgets.links[f.link];if(!j.price){return}var l=j.option.id;f.optionName=j.option.name;if(j.option.tradableAssetId!=undefined){l=j.option.tradableAssetId;f.optionName=j.option.name}f.tradableAssetId=l;f.updateTradableAssetPrice(j.price.timestamp,j.price.rate,l)});$(window).on(widgets.events.noOptions,function(h,j){if(f.chart!=null){f.chart.destroy();f.chart=null}})}f.selectChartTypeButton(f.elementCache.standardChart)};this.buildChartTypeBtns=function(g){var j=this;var f=j.placeholder.find(j.selectors.chartTypeStandard);var d=j.placeholder.find(j.selectors.chartTypeLine);var e=j.placeholder.find(j.selectors.chartTypeCandle);var h=j.placeholder.find(j.selectors.chartTypeArea);if(g){f.off("click").click(function(){j.selectChartTypeButton(this);j.elementCache.btns.hide();$(j.placeholder.find(j.selectors.chart)).hide();$(j.placeholder.find(j.selectors.oldChart)).show()});d.off("click").click(function(){j.chartTypeClick("line",this)});e.off("click").click(function(){j.chartTypeClick("candlestick",this)});h.off("click").click(function(){j.chartTypeClick("area",this)})}if(j.enabled==false){f.hide();d.hide()}if(j.visibleArea==false||j.enabled==false){h.hide()}if(j.visibleCandle==false||j.enabled==false){e.hide()}};this.selectChartTypeButton=function(d){var e=this;if(e.selectedTypeBtn!=null){e.selectedTypeBtn.removeAttr("disabled")}e.selectedTypeBtn=$(d);e.selectedTypeBtn.attr("disabled","true")};this.chartTypeClick=function(f,d){var g=this;g.selectChartTypeButton(d);$(g.placeholder.find(g.selectors.oldChart)).hide();$(g.placeholder.find(g.selectors.chart)).show();var e=g.elementCache.btns.find(":disabled");e.removeAttr("disabled");g.elementCache.btns.show();$(g.elementCache.chartContainer).removeClass(g.options.chartType);g.options.chartType=f;$(g.elementCache.chartContainer).addClass(g.options.chartType);if($(g.selectedZoomBtn).data("group")!="1"){g.updateTradableAsset(g.tradableAssetId,g.optionName)}else{g.createChart()}};this.buldNavigationBtns=function(){var f=this;for(var e=0;e<f.navigationButtons.length;e++){var d=f.navigationButtons[e];f.placeholder.find(d.selector).data("group",d.group).data("group-split",d.groupHours).click(function(){f.updateSeries(this)})}};this.createChart=function(){var e=this;e.elementCache.btns.find(":disabled").removeAttr("disabled");$(e.elementCache.chartContainer).removeClass(e.options.chartType);$(e.elementCache.chartContainer).addClass(e.options.chartType);$(e.elementCache.chartContainer).removeClass(e.options.chartType);$(e.elementCache.chartContainer).addClass(e.options.chartType);e.chart=e.elementCache.chartContainer.highcharts("StockChart",{navigator:{enabled:e.visibleZoom,height:e.options.navHeight,maskFill:e.options.navMaskFill,margin:e.options.navMargin,outlineWidth:e.options.navOutlineWidth,handles:{backgroundColor:e.options.navHandlesBackground,borderColor:e.options.navHandlesBorder},bottom:e.options.navBottom,xAxis:{labels:{enabled:e.options.enableNavigatorLabel}}},scrollbar:{enabled:e.options.visibleScroll},chart:{marginRight:e.options.marginRight,className:"chartv2",backgroundColor:e.options.backgroundColor,animation:false},plotOptions:{candlestick:{lineColor:e.options.downColor,upLineColor:e.options.upColor,upColor:e.options.upColor,color:e.options.downColor,dataGrouping:{enabled:false,},tooltip:{pointFormat:'<span style="color:{series.color}">\u25CF</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},},line:{dataGrouping:{enabled:false,}},area:{dataGrouping:{enabled:false,}}},tooltip:{backgroundColor:e.options.tooltipBackGroundColor,borderColor:e.options.tooltipBackGroundColor,pointFormat:'<span style="color:{series.color}">\u25CF</span> {series.name}: <b>{point.y}</b><br/>'},rangeSelector:{enabled:false},exporting:{enabled:false},credits:{enabled:false},series:[{type:e.options.chartType,data:e.options.chartType=="candlestick"?e.candles:e.lines,threshold:e.options.negativeSplitValue,negativeColor:e.options.negativeSplitValue!=null?e.options.negativeColor:null,name:e.options.assetName,color:e.options.chartType=="candlestick"?e.options.downColor:e.options.baseColor,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,e.options.gradientTopColor],[1,e.options.gradientBottomColor]]}}],yAxis:[{lineWidth:0,labels:{align:"left",x:5,formatter:function(){return this.value.toFixed(e.accuracy)}},opposite:true,lastPriceIndicator:{lineColor:e.options.tickColor,backgroundColor:e.options.tickColor,borderColor:e.options.tickColor,enabled:e.options.enableTick,boxOffsetLeft:-5,formatter:function(){return this.toFixed(e.accuracy)}},endOnTick:false,maxPadding:0.02,minPadding:0.02,startOnTick:false,tickPixelInterval:e.options.yAxisLabelInterval}],xAxis:{ordinal:e.options.disableXAxisInFiture}});e.chart=e.elementCache.chartContainer.highcharts();if(e.navigationButtons&&e.navigationButtons.length>1){var d=e.placeholder.find(e.navigationButtons[1].selector);d.attr("disabled","true");e.options.pointUpdateTime=parseInt($(d).data("group"))*60000}};this.processRawData=function(e){if(typeof e!="undefined"){var d=this;d.clearData();for(i=0;i<e.length;i++){var f=d.parseFloatAccurate(e[i][4]);d.candles.push([e[i][0],d.parseFloatAccurate(e[i][1]),d.parseFloatAccurate(e[i][2]),d.parseFloatAccurate(e[i][3]),f]);d.lines.push([e[i][0],f])}}};this.clearData=function(){var d=this;d.candles=[];d.lines=[]};this.parseFloatAccurate=function(e){var d=this;return parseFloat(e.toFixed(d.accuracy))};this.updateTradableAsset=function(f,d){var e=this;if(f!=null){e.tradableAssetId=f;e.clearData();widgets.api.getAssetPriceHistoryv2(f,1,function(g){e.accuracy=g.data.accuracy;e.processRawData(g.data.history);e.options.assetName=d;e.elementCache.btns.find(":disabled").removeAttr("disabled");if(e.elementCache.chartContainer.is(":visible")){e.createChart()}})}};this.updateTradableAssetPrice=function(e,d,g){var f=this;if(f.chart!=null){if(f.tradableAssetId==g||typeof g=="undefined"){f.updatePoint(e,d)}}};this.updatePoint=function(k,j){var g=this;if(g.chart){j=parseFloat(j);var f=g.chart.series[0];var m=f.data[f.data.length-1];var n=parseInt(k/g.options.pointUpdateTime)*g.options.pointUpdateTime;var h=parseInt(m.x/g.options.pointUpdateTime)*g.options.pointUpdateTime;var e=h>=n;if(g.options.chartType=="candlestick"){if(e){var d=m.high<j?j:m.high;var l=m.low>j?j:m.low;m.update({high:d,low:l,close:j})}else{f.addPoint([n,j,j,j,j])}}else{if(e){m.update(j)}else{f.addPoint([n,j])}}}};this.updateSeries=function(e){var g=this;var f=g.elementCache.btns.find(":disabled");var d=$(e).data("group");g.selectedZoomBtn=d;g.options.pointUpdateTime=parseInt(d)*60000;if(g.tradableAssetId!=null){if(d!=f.data("group")){g.clearData();widgets.api.getAssetPriceHistoryv2(g.tradableAssetId,d,function(h){if(h.data.history!=undefined){g.processRawData(h.data.history);if(g.chart){g.chart.series[0].setData(g.options.chartType=="candlestick"?g.candles:g.lines,true,false)}g.updateNavigation(e,f)}})}else{g.updateNavigation(e,f)}}};this.updateNavigation=function(f,h){var j=this;if(j.chart){var e=0;var k=0;if($(f).data("group-split")){var g=j.chart.series[0].xData[j.chart.series[0].xData.length-1];var d=j.chart.series[0].xData[0];e=g;k=g-(parseInt($(f).data("group-split"))*j.MinTimeFrame);if(k<d){k=d}}j.chart.xAxis[0].setExtremes(k,e)}h.removeAttr("disabled");$(f).attr("disabled","true")};return this}};
var cmsContentWidget={init:function(){var b=$("[data-widget=cmsContent]");var a=this;var c=b.attr("data-cmsId");widgets.api.getCMScontent(c,a.processContent)},processContent:function(a){var b=$("[data-widget=cmsContent]");if(a.code!=400&&a.code!=401){b.html(a.data)}}};
var contactUsWidget={widgetName:"contactUs",expressions:{email:/\S+@\S+\.\S+/,phone:/^[0-9]+$/},btnClicked:false,init:function(){var a=this;a=$.extend({},validationWidget,a);a.elements.filter("[data-type=submit]").unbind("click");a.elements.filter("[data-type=submit]").click(function(b){if(!a.btnClicked){a.btnClicked=true;a.submit()}});a.elements.filter("[data-type=container]").show();a.elements.filter("[data-type=container]").each(function(){a.elements.filter("[data-widget=contactUs]").find("input").keypress(function(b){if(b.which==10||b.which==13){if($(b.target).data("widget").toLowerCase()=="contactus"||$(b.srcElement).data("widget").toLowerCase()=="contactus"){a.elements.filter("[data-type=submit]").click()}}})})},submit:function(){var f=this;if(!f.validate()){f.btnClicked=false;return false}var h=f.elements.filter("[data-type=contactName]").val();var a=f.elements.filter("[data-type=phone]").val();var c=f.elements.filter("[data-type=email]").val();var d=f.elements.filter("[data-type=subject]").val();var e=f.elements.filter("[data-type=contactMessage]").val();var g={name:h,phone:a,email:c,subject:d,message:e};if($.cookie("TLAffiliateID")){var b=URL.unserialize($.cookie("TLAffiliateID"));g.affiliateInfo={};g.affiliateInfo["affiliateId"]=b.AffiliateID;g.affiliateInfo["bannerId"]=b.ClickBannerID;g.affiliateInfo["subAffiliateId"]=b.SubAffiliateID;g.affiliateInfo["clickDateTime"]=b.ClickDateTime;if(b.AffDealID){g.affiliateInfo["dealId"]=b.AffDealID}}widgets.api.postContactUsMessage(g,function(i){f.processContactUs(i)})},processContactUs:function(a){var b=this;b.btnClicked=false;$(window).trigger(widgets.events.contactUsSubmited,[a])}};
var contractsWidget={init:function(){var c=this;$(c.element).show();var d=widgetMessage.autotrades1?widgetMessage.autotrades1:"-";var b='<option value="-">'+d+"</option>";for(i=2;i<=5;i++){var a=widgetMessage["autotrades"+i]?widgetMessage["autotrades"+i]:i;b+='<option value="'+i+'">'+a+"</option>"}$(c.element).append(b)}};
var contractsTradeDdlWidget={init:function(){var a=this;$(this.element).show();$(window).on(widgets.events.loadingIsCompleted,function(b){a.buildDdl();$(a.element).spinner({stop:function(d,j){$(window).trigger(widgets.events.changeLadderContracts);var p="";var n=widgets.game.toLowerCase();if(n=="ladder"||n=="binary100"){p="callButtonClicked"}else{if(n=="laddertouch"){p="touchButtonClicked"}}var l=$(this).spinner("value");var e=$("[data-widget="+widgets.game+"_"+a.link+"_table]").find(".strikeContentTable.activeRow ."+p+"").length>0;var g=e?"call":"put";var m=e?"Call":"Put";if(n=="laddertouch"){g=e?"touch":"noTouch"}var c=parseFloat($(".activeRow ."+g+"ButtonClicked").parent().find(".investAmount").html().replace(/[^0-9-.]/g,""));var i=parseFloat($(".activeRow").find("span[id*=strike"+m+"Sell]").html().replace(/[^0-9-.]/g,""));var h=helper.getCurrencySymbol();var o=(widgets.isLogged())?widgets.user.currencyFactor:parseFloat(widgets.settings.environment.CurrencyFactor);var f=widgets.payoutTotalUSD*o;$("#widgetsTicketPrice").html(helper.formatCurrency(h,c*l));$("#widgetsTicketMultiple").html(((f*l)/(c*l)).toFixed(2));$("#widgetsTicketSell").html(helper.formatCurrency(h,i*l));var k=(widgets.settings.application.MaxContractsPerTrade.Value==null)?10:widgets.settings.application.MaxContractsPerTrade.Value;if($(this).spinner("value")>parseInt(k)){$(this).spinner("value",k)}}}).on("input",function(){var e=$(a.element).val(),c=$(a.element).spinner("option","max"),d=$(a.element).spinner("option","min");if(e==""){e=d.toString()}if(!e.match(/^\d+$/)){e=parseInt(e)}if(!parseInt(e)){e=d.toString()}e=e>c?c:e<d?d:e;$(a.element).val(e)})})},buildDdl:function(){var b=this;var a=(widgets.settings.application.MaxContractsPerTrade.Value==null)?10:widgets.settings.application.MaxContractsPerTrade.Value;if(b.game.toLowerCase()=="binary100"&&widgets.isLogged()){widgets.api.getLimitation("MaxNumberOfContractsForTradeBinary100",function(c){b.processgetMaxNumberOfContractsForTradeBinary100(c,a)})}else{b.fillSpinner(a)}},processgetMaxNumberOfContractsForTradeBinary100:function(b,f){var a=f;var e=this;if(b.code!=400&&b.code!=401){var c=b.data.Value;var d=(a<c)?a:c;e.fillSpinner(d)}},fillSpinner:function(b){var a=this;$(document).ready(function(){var c=$(a.element).spinner();c.spinner({min:1});c.spinner({max:parseInt(b)})})}};
var currentDateTimeWidget={formatDate:"dd mmm yyyy",formatTime:"HH:MM:ss",formatTimeUTC:"HH:MM",autoUpdateDate:false,autoUpdateTime:true,autoUpdateTimeUTC:true,elementDate:[],elementTime:[],elementTimeUTC:[],init:function(){var b=this;b.elementDate=$(b.elements).filter("[data-type=date]");b.elementTime=$(b.elements).filter("[data-type=time]");b.elementTimeUTC=$(b.elements).filter("[data-type=timeUTC]");var a=b.elementDate.attr("data-format");if(a){b.formatDate=a}if(b.elementDate.attr("data-autoupdate")=="true"){b.autoUpdateDate=true}var d=b.elementTime.attr("data-format");if(d){b.formatTime=d}var c=b.elementTimeUTC.attr("data-format");if(c){b.formatTimeUTC=c}if(b.elementTime.attr("data-autoupdate")=="false"){b.autoUpdateTime=false;b.autoUpdateTimeUTC=false}b.updateDate();b.updateTime();if(b.autoUpdateDate||b.autoUpdateTime){widgets.timers.currentDateTime=setInterval(function(){b.updateDate();b.updateTime()},1000)}},updateDate:function(){var c=this;var a=widgets.serverDateTime.timestamp;var b=widgets.getDate(a,c.formatDate);c.elementDate.text(b)},updateTime:function(){var e=this;var b=widgets.serverDateTime.timestamp;var d=widgets.getDate(b,e.formatTime);e.elementTime.text(d);if(e.elementTimeUTC){var a=new Date(widgets.serverDateTime.timestamp).toISOString();var c=helper.formatDate(a,e.formatTimeUTC,(typeof $.browser.webkit!="undefined"?true:false));e.elementTimeUTC.text(c)}else{$(e.elementTimeUTC).hide()}}};
var dateDiff={inHours:function(d,c){var a=c.getTime();var b=d.getTime();return parseInt((a-b)/(24*3600))},inDays:function(d,c){var a=c.getTime();var b=d.getTime();return parseInt((a-b)/(24*3600*1000))},inWeeks:function(d,c){var a=c.getTime();var b=d.getTime();return parseInt((a-b)/(24*3600*1000*7))},inMonths:function(f,d){var a=f.getFullYear();var c=d.getFullYear();var b=f.getMonth();var e=d.getMonth();return(e+12*c)-(b+12*a)},inYears:function(b,a){return a.getFullYear()-b.getFullYear()},getDate:function(d){if(d<=0){return"00:00"}var a=0;var b=Math.ceil(d/1000/60);var e=Math.ceil(60-(b*60-(d/1000)));b--;if(b<0){b=0}if(b/60>=1){a=Math.floor(b/60);b=b-(a*60)}if(e==60){e=0;b++;if(b<=0){b=0}}if(a<10){a="0"+a}if(b<10){b="0"+b}if(e<10){e="0"+e}var c=b+":"+e;if(a>0){c=a+":"+c}return c}};
var docsNotSentPopUpWidget={init:function(){var c=$("[data-widget=docsNotSentPopUp]");var a=widgetMessage.docsNotSentText;var d=widgetMessage.docsNotSentText2;var b=a+"<br/>"+d+"<br/>";c.html(b)}};
var expireDisplayWidget={init:function(){var a=this;$(a.element).show();$(window).on(widgets.events.linkOptionUpdated,function(){var c=widgets.links[a.link].option;var b=widgets.getDate(c.expirationTimestamp);$(a.element).html(helper.formatExpiration(b))})}};
var expireDropDownWidget={init:function(){var a=this;$(a.elements).show();$(a.elements).change(function(){widgets.setLinkOption(a.link,$(this).val());$(window).trigger(widgets.events.expireDropDownChange,[$(a.element),a.link])});$(window).on(widgets.events.linkOptionUpdated,function(c,b){a.updateDropDown(b);if(widgets.links[a.link].option){$(a.elements).val(widgets.links[a.link].option.id)}});$(window).on(widgets.events.optionsUpdated,function(d,c,b){a.updateDropDown(a.link)})},updateDropDown:function(a){var b=this;if(b.link!==a){return}$(b.elements).empty();$.each(widgets.options,function(c,d){if(widgets.links[b.link].option.name==d.name){b.addOption(d)}});b.sort()},sort:function(){var a=this;$(a.element).html($(a.element).find("option").sort(function(d,c){return($(d).data("expires")==$(c).data("expires")?0:($(d).data("expires")<$(c).data("expires")?-1:1))}));if(widgets.links[a.link].option){$(a.elements).val(widgets.links[a.link].option.id)}},addOption:function(a){var c=this;var b=$("<option />");b.val(a.id);b.text(helper.formatExpiration(widgets.getDate(a.expirationTimestamp)));b.attr("data-assetId",a.tradableAssetId);b.attr("data-expires",a.expirationTimestamp);$(c.elements).append(b)},delOptionId:function(c){var b=this;var a=$(b.elements).find('option[value="'+c+'"]');a.remove();if($(a).parent().find("option").length==0){$(a).parent().hide()}}};
var expireTurboWidget={rule:null,init:function(){var a=this;a.$widgetElement=$(a.element),a.settings=a.$widgetElement.data("settings");a.isSelect=(a.settings!==undefined&&a.settings.isSelect!==undefined)?a.settings.isSelect:false;a.extraClass=(a.settings!==undefined&&a.settings.extraClass!==undefined)?a.settings.extraClass:"";a.$widgetElement.show();$(window).on(widgets.events.linkOptionUpdated,function(c,b){a.option=widgets.links[a.link].option;if(a.link==b&&a.option){a.prepareData()}})},prepareData:function(){var d=this;d.$widgetElement.empty();d.rule=null;widgets.links[d.link].option.rules.sort(function(f,e){return f.interval-e.interval});var a,c,b=[];$.each(widgets.links[d.link].option.rules,function(e,f){a="";if(f.interval<1&&widgets.settings.application.EnableSuperTurbo.Value.toString().toLowerCase()==="true"){switch(f.interval.toString()){case"0.25":a="15";break;case"0.5":a="30";break;case"0.75":a="45";break;default:}a+="s";a=widgetMessage["turboRule"+a]?widgetMessage["turboRule"+a]:a}else{if(f.interval>=1){a+=f.interval+"m";a=widgetMessage["turboRule"+a]?widgetMessage["turboRule"+a]:a}}if(d.isSelect!==true){c=$('<input type="button" data-ruleId="'+f.id+'" class="expireTurboRuleInterval" value="'+a+'">');d.attacheEventsForButtons(c,e)}else{c=$('<option class="expireTurboRuleInterval" value="'+f.id+'">'+a+"</option>")}if(d.rule===null){d.rule=f;if(d.isSelect!==true){c.addClass("activeRule")}else{c.attr("selected","selected")}}b.push(c[0])});if(d.isSelect!==true){d.$widgetElement.append(b)}else{b=$("<select class='activeRule "+d.extraClass+"' data-ruleId='"+widgets.links[d.link].option.rules[0].id+"'></select>").append(b);d.$widgetElement.append(b);d.attacheEventsForSelect(b)}},attacheEventsForButtons:function(c,d){var f=this,e=c.attr("data-ruleId"),b=f.option.rules[d].interval,a=f.option.rules[d].payout,g={ruleId:e,interval:b,payout:a,taId:f.option.id};c.off("click").on("click",function(){f.$widgetElement.find(".expireTurboRuleInterval").removeClass("activeRule");$(this).addClass("activeRule");$(window).trigger(widgets.events.updateTurboExpire,g)})},attacheEventsForSelect:function(a){var c=this,b;a.off("change").on("change",function(){for(var g=0,d=this.childNodes.length;g<d;g++){if(this.childNodes[g].value===this.value){b=g;$(this).attr("data-ruleId",this.value)}}var h=this.value,f=c.option.rules[b].interval,e=c.option.rules[b].payout,j={ruleId:h,interval:f,payout:e,taId:c.option.id};$(window).trigger(widgets.events.updateTurboExpire,j)})}};
(function(){function bh(q,p){var r;q||(q={});for(r in p){q[r]=p[r]}return q}function bd(){var q,p=arguments,t,s={},r=function(v,u){var z,x;typeof v!=="object"&&(v={});for(x in u){u.hasOwnProperty(x)&&(z=u[x],v[x]=z&&typeof z==="object"&&Object.prototype.toString.call(z)!=="[object Array]"&&x!=="renderTo"&&typeof z.nodeType!=="number"?r(v[x]||{},z):u[x])}return v};p[0]===!0&&(s=p[1],p=Array.prototype.slice.call(p,2));t=p.length;for(q=0;q<t;q++){s=r(s,p[q])}return s}function bO(q,p){return parseInt(q,p||10)}function ad(p){return typeof p==="string"}function aD(p){return p&&typeof p==="object"}function m(p){return Object.prototype.toString.call(p)==="[object Array]"}function cg(p){return typeof p==="number"}function bZ(p){return bw.log(p)/bw.LN10}function aS(p){return bw.pow(10,p)}function aH(q,p){for(var r=q.length;r--;){if(q[r]===p){q.splice(r,1);break}}}function bg(p){return p!==bi&&p!==null}function bv(q,p,t){var s,r;if(ad(p)){bg(t)?q.setAttribute(p,t):q&&q.getAttribute&&(r=q.getAttribute(p))}else{if(bg(p)&&aD(p)){for(s in p){q.setAttribute(s,p[s])}}}return r}function b1(p){return m(p)?p:[p]}function bk(){var q=arguments,p,s,r=q.length;for(p=0;p<r;p++){if(s=q[p],s!==bi&&s!==null){return s}}}function bJ(q,p){if(br&&!a4&&p&&p.opacity!==bi){p.filter="alpha(opacity="+p.opacity*100+")"}bh(q.style,p)}function b8(q,p,t,s,r){q=bS.createElement(q);p&&bh(q,p);r&&bJ(q,{padding:0,border:b9,margin:0});t&&bJ(q,t);s&&s.appendChild(q);return q}function au(q,p){var r=function(){return bi};r.prototype=new q;bh(r.prototype,p);return r}function a6(q,p,v,u){var t=bQ.lang,q=+q||0,s=p===-1?(q.toString().split(".")[1]||"").length:isNaN(p=bF(p))?2:p,p=v===void 0?t.decimalPoint:v,u=u===void 0?t.thousandsSep:u,t=q<0?"-":"",v=String(bO(q=bF(q).toFixed(s))),r=v.length>3?v.length%3:0;return t+(r?v.substr(0,r)+u:"")+v.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+u)+(s?p+bF(q-v).toFixed(s).slice(2):"")}function d(q,p){return Array((p||2)+1-String(q).length).join(0)+q}function bH(q,p,s){var r=q[p];q[p]=function(){var t=Array.prototype.slice.call(arguments);t.unshift(r);return s.apply(this,t)}}function aZ(A,z){for(var x="{",v=!1,u,t,s,r,q,p=[];(x=A.indexOf(x))!==-1;){u=A.slice(0,x);if(v){t=u.split(":");s=t.shift().split(".");q=s.length;u=z;for(r=0;r<q;r++){u=u[s[r]]}if(t.length){t=t.join(":"),s=/\.([0-9])/,r=bQ.lang,q=void 0,/f$/.test(t)?(q=(q=t.match(s))?q[1]:-1,u!==null&&(u=a6(u,q,r.decimalPoint,t.indexOf(",")>-1?r.thousandsSep:""))):u=o(t,u)}}p.push(u);A=A.slice(x+1);x=(v=!v)?"}":"{"}p.push(A);return p.join("")}function an(p){return bw.pow(10,by(bw.log(p)/bw.LN10))}function ae(q,p,t,s){var r,t=bk(t,1);r=q/t;p||(p=[1,2,2.5,5,10],s&&s.allowDecimals===!1&&(t===1?p=[1,2,5,10]:t<=0.1&&(p=[1/t])));for(s=0;s<p.length;s++){if(q=p[s],r<=(p[s]+(p[s+1]||p[s]))/2){break}}q*=t;return q}function n(q,p){var t=q.length,s,r;for(r=0;r<t;r++){q[r].ss_i=r}q.sort(function(u,v){s=p(u,v);return s===0?u.ss_i-v.ss_i:s});for(r=0;r<t;r++){delete q[r].ss_i}}function ch(q){for(var p=q.length,r=q[0];p--;){q[p]<r&&(r=q[p])}return r}function ah(q){for(var p=q.length,r=q[0];p--;){q[p]>r&&(r=q[p])}return r}function aQ(q,p){for(var r in q){q[r]&&q[r]!==p&&q[r].destroy&&q[r].destroy(),delete q[r]}}function b3(p){I||(I=b8(bD));p&&I.appendChild(p);I.innerHTML=""}function ak(p){return parseFloat(p.toPrecision(14))}function bW(q,p){y=bk(q,p.animation)}function aY(){var q=bQ.global.useUTC,p=q?"getUTC":"get",r=q?"setUTC":"set";aF=(q&&bQ.global.timezoneOffset||0)*60000;j=q?Date.UTC:function(t,s,z,x,v,u){return(new Date(t,s,bk(z,1),bk(x,0),bk(v,0),bk(u,0))).getTime()};e=p+"Minutes";ci=p+"Hours";b4=p+"Day";bl=p+"Date";a=p+"Month";cf=p+"FullYear";aP=r+"Minutes";aE=r+"Hours";aK=r+"Date";av=r+"Month";al=r+"FullYear"}function bu(){}function b7(q,p,s,r){this.axis=q;this.pos=p;this.type=s||"";this.isNew=!0;!s&&!r&&this.addLabel()}function bK(){this.init.apply(this,arguments)}function f(){this.init.apply(this,arguments)}function R(q,p,u,t,s){var r=q.chart.inverted;this.axis=q;this.isNegative=u;this.options=p;this.x=t;this.total=null;this.points={};this.stack=s;this.alignOptions={align:p.align||(r?u?"left":"right":"center"),verticalAlign:p.verticalAlign||(r?"middle":u?"bottom":"top"),y:bk(p.y,r?4:u?14:-6),x:bk(p.x,r?u?-6:6:0)};this.textAlign=p.textAlign||(r?u?"right":"left":"center")}function az(q){var p=q.options,v=p.navigator,u=v.enabled,p=p.scrollbar,t=p.enabled,s=u?v.height:0,r=t?p.height:0;this.handles=[];this.scrollbarButtons=[];this.elementsToDestroy=[];this.chart=q;this.setBaseSeries();this.height=s;this.scrollbarHeight=r;this.scrollbarEnabled=t;this.navigatorEnabled=u;this.navigatorOptions=v;this.scrollbarOptions=p;this.outlineHeight=s+r;this.init()}function ap(p){this.init(p)}var bi,bS=document,bB=window,bw=Math,bf=bw.round,by=bw.floor,a2=bw.ceil,be=bw.max,bU=bw.min,bF=bw.abs,aX=bw.cos,O=bw.sin,ay=bw.PI,aw=ay*2/360,h=navigator.userAgent,l=bB.opera,br=/msie/i.test(h)&&!l,b0=bS.documentMode===8,ag=/AppleWebKit/.test(h),bN=/Firefox/.test(h),aW=/(Mobile|Android|Windows Phone)/.test(h),cl="http://www.w3.org/2000/svg",a4=!!bS.createElementNS&&!!bS.createElementNS(cl,"svg").createSVGRect,a1=bN&&parseInt(h.split("Firefox/")[1],10)<4,k=!a4&&!br&&!!bS.createElement("canvas").getContext,aU,bo,c={},w=0,I,bQ,o,y,g,bM,bt,a9=function(){return bi},bP=[],aN=0,bD="div",b9="none",aT=/^[0-9]+$/,aI="stroke-width",j,aF,e,ci,b4,bl,a,cf,aP,aE,aK,av,al,bT={},bE;bB.Highcharts?bt(16,!0):bE=bB.Highcharts={};o=function(D,B,A){if(!bg(B)||isNaN(B)){return"Invalid date"}var D=bk(D,"%Y-%m-%d %H:%M:%S"),z=new Date(B-aF),x,v=z[ci](),u=z[b4](),t=z[bl](),s=z[a](),r=z[cf](),q=bQ.lang,p=q.weekdays,z=bh({a:p[u].substr(0,3),A:p[u],d:d(t),e:t,b:q.shortMonths[s],B:q.months[s],m:d(s+1),y:r.toString().substr(2,2),Y:r,H:d(v),I:d(v%12||12),l:v%12||12,M:d(z[e]()),p:v<12?"AM":"PM",P:v<12?"am":"pm",S:d(z.getSeconds()),L:d(bf(B%1000),3)},bE.dateFormats);for(x in z){for(;D.indexOf("%"+x)!==-1;){D=D.replace("%"+x,typeof z[x]==="function"?z[x](B):z[x])}}return A?D.substr(0,1).toUpperCase()+D.substr(1):D};bt=function(q,p){var r="Highcharts error #"+q+": www.highcharts.com/errors/"+q;if(p){throw r}bB.console&&console.log(r)};bM={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000,month:2678400000,year:31556952000};g={init:function(A,z,x){var z=z||"",v=A.shift,u=z.indexOf("C")>-1,t=u?7:3,s,z=z.split(" "),x=[].concat(x),r,q,p=function(B){for(s=B.length;s--;){B[s]==="M"&&B.splice(s+1,0,B[s+1],B[s+2],B[s+1],B[s+2])}};u&&(p(z),p(x));A.isArea&&(r=z.splice(z.length-6,6),q=x.splice(x.length-6,6));if(v<=x.length/t&&z.length===x.length){for(;v--;){x=[].concat(x).splice(0,t).concat(x)}}A.shift=0;if(z.length){for(A=x.length;z.length<A;){v=[].concat(z).splice(z.length-t,t),u&&(v[t-6]=v[t-2],v[t-5]=v[t-1]),z=z.concat(v)}}r&&(z=z.concat(r),x=x.concat(q));return[z,x]},step:function(q,p,u,t){var s=[],r=q.length;if(u===1){s=t}else{if(r===p.length&&u<1){for(;r--;){t=parseFloat(q[r]),s[r]=isNaN(t)?q[r]:u*parseFloat(p[r]-t)+t}}else{s=p}}return s}};(function(p){bB.HighchartsAdapter=bB.HighchartsAdapter||p&&{init:function(q){var v=p.fx,u=v.step,t,s=p.Tween,r=s&&s.propHooks;t=p.cssHooks.opacity;p.extend(p.easing,{easeOutQuad:function(z,x,D,B,A){return -B*(x/=A)*(x-2)+D}});p.each(["cur","_default","width","height","opacity"],function(z,x){var B=u,A;x==="cur"?B=v.prototype:x==="_default"&&s&&(B=r[x],x="set");(A=B[x])&&(B[x]=function(E){var D,E=z?E:this;if(E.prop!=="align"){return D=E.elem,D.attr?D.attr(E.prop,x==="cur"?bi:E.now):A.apply(this,arguments)}})});bH(t,"get",function(z,x,A){return x.attr?x.opacity||0:z.call(this,x,A)});t=function(x){var A=x.elem,z;if(!x.started){z=q.init(A,A.d,A.toD),x.start=z[0],x.end=z[1],x.started=!0}A.attr("d",q.step(x.start,x.end,x.pos,A.toD))};s?r.d={set:t}:u.d=t;this.each=Array.prototype.forEach?function(z,x){return Array.prototype.forEach.call(z,x)}:function(z,x){var B,A=z.length;for(B=0;B<A;B++){if(x.call(z[B],z[B],B,z)===!1){return B}}};p.fn.highcharts=function(){var z="Chart",x=arguments,B,A;if(this[0]){ad(x[0])&&(z=x[0],x=Array.prototype.slice.call(x,1));B=x[0];if(B!==bi){B.chart=B.chart||{},B.chart.renderTo=this[0],new bE[z](B,x[1]),A=this}B===bi&&(A=bP[bv(this[0],"data-highcharts-chart")])}return A}},getScript:p.getScript,inArray:p.inArray,adapterRun:function(q,r){return p(q)[r]()},grep:p.grep,map:function(q,u){for(var t=[],s=0,r=q.length;s<r;s++){t[s]=u.call(q[s],q[s],s,q)}return t},offset:function(q){return p(q).offset()},addEvent:function(q,s,r){p(q).bind(s,r)},removeEvent:function(q,t,s){var r=bS.removeEventListener?"removeEventListener":"detachEvent";bS[r]&&q&&!q[r]&&(q[r]=function(){});p(q).unbind(t,s)},fireEvent:function(q,x,v,u){var t=p.Event(x),s="detached"+x,r;!br&&v&&(delete v.layerX,delete v.layerY,delete v.returnValue);bh(t,v);q[x]&&(q[s]=q[x],q[x]=null);p.each(["preventDefault","stopPropagation"],function(A,z){var B=t[z];t[z]=function(){try{B.call(t)}catch(D){z==="preventDefault"&&(r=!0)}}});p(q).trigger(t);q[s]&&(q[x]=q[s],q[s]=null);u&&!t.isDefaultPrevented()&&!r&&u(t)},washMouseEvent:function(q){var r=q.originalEvent||q;if(r.pageX===bi){r.pageX=q.pageX,r.pageY=q.pageY}return r},animate:function(q,t,s){var r=p(q);if(!q.style){q.style={}}if(t.d){q.toD=t.d,t.d=1}r.stop();t.opacity!==bi&&q.attr&&(t.opacity+="px");r.animate(t,s)},stop:function(q){p(q).stop()}}})(bB.jQuery);var bR=bB.HighchartsAdapter,bA=bR||{};bR&&bR.init.call(bR,g);var bs=bA.adapterRun,bV=bA.getScript,cj=bA.inArray,bm=bA.each,a7=bA.grep,b6=bA.offset,b5=bA.map,a8=bA.addEvent,bz=bA.removeEvent,bG=bA.fireEvent,bL=bA.washMouseEvent,a0=bA.animate,aC=bA.stop,bA={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};bQ={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.0.3/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.0.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:bd(bA,{align:"center",enabled:!1,formatter:function(){return this.y===null?"":a6(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1000}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:a4,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">в—Џ</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:aW?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var bx=bQ.plotOptions,bR=bx.line;aY();var bn=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,a3=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,aV=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ce=function(q){var p=[],s,r;(function(t){t&&t.stops?r=b5(t.stops,function(u){return ce(u[1])}):(s=bn.exec(t))?p=[bO(s[1]),bO(s[2]),bO(s[3]),parseFloat(s[4],10)]:(s=a3.exec(t))?p=[bO(s[1],16),bO(s[2],16),bO(s[3],16),1]:(s=aV.exec(t))&&(p=[bO(s[1]),bO(s[2]),bO(s[3]),1])})(q);return{get:function(u){var t;r?(t=bd(q),t.stops=[].concat(t.stops),bm(r,function(x,v){t.stops[v]=[t.stops[v][0],x.get(u)]})):t=p&&!isNaN(p[0])?u==="rgb"?"rgb("+p[0]+","+p[1]+","+p[2]+")":u==="a"?p[3]:"rgba("+p.join(",")+")":q;return t},brighten:function(t){if(r){bm(r,function(v){v.brighten(t)})}else{if(cg(t)&&t!==0){var u;for(u=0;u<3;u++){p[u]+=bO(t*255),p[u]<0&&(p[u]=0),p[u]>255&&(p[u]=255)}}}return this},rgba:p,setOpacity:function(t){p[3]=t;return this}}};bu.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(q,p){this.element=p==="span"?b8(p):bS.createElementNS(cl,p);this.renderer=q},animate:function(q,p,r){p=bk(p,y,!0);aC(this);if(p){p=bd(p,{});if(r){p.complete=r}a0(this,q,p)}else{this.attr(q),r&&r()}return this},colorGradient:function(G,F,E){var D=this.renderer,B,A,z,x,v,u,t,s,r,q,p=[];G.linearGradient?A="linearGradient":G.radialGradient&&(A="radialGradient");if(A){z=G[A];x=D.gradients;u=G.stops;r=E.radialReference;m(z)&&(G[A]=z={x1:z[0],y1:z[1],x2:z[2],y2:z[3],gradientUnits:"userSpaceOnUse"});A==="radialGradient"&&r&&!bg(z.gradientUnits)&&(z=bd(z,{cx:r[0]-r[2]/2+z.cx*r[2],cy:r[1]-r[2]/2+z.cy*r[2],r:z.r*r[2],gradientUnits:"userSpaceOnUse"}));for(q in z){q!=="id"&&p.push(q,z[q])}for(q in u){p.push(u[q])}p=p.join(",");x[p]?G=x[p].attr("id"):(z.id=G="highcharts-"+w++,x[p]=v=D.createElement(A).attr(z).add(D.defs),v.stops=[],bm(u,function(H){H[1].indexOf("rgba")===0?(B=ce(H[1]),t=B.get("rgb"),s=B.get("a")):(t=H[1],s=1);H=D.createElement("stop").attr({offset:H[0],"stop-color":t,"stop-opacity":s}).add(v);v.stops.push(H)}));E.setAttribute(F,"url("+D.url+"#"+G+")")}},attr:function(q,p){var x,v,u=this.element,t,s=this,r;typeof q==="string"&&p!==bi&&(x=q,q={},q[x]=p);if(typeof q==="string"){s=(this[q+"Getter"]||this._defaultGetter).call(this,q,u)}else{for(x in q){v=q[x];r=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(x)&&(t||(this.symbolAttr(q),t=!0),r=!0);if(this.rotation&&(x==="x"||x==="y")){this.doTransform=!0}r||(this[x+"Setter"]||this._defaultSetter).call(this,v,x,u);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(x)&&this.updateShadows(x,v)}if(this.doTransform){this.updateTransform(),this.doTransform=!1}}return s},updateShadows:function(q,p){for(var s=this.shadows,r=s.length;r--;){s[r].setAttribute(q,q==="height"?be(p-(s[r].cutHeight||0),0):q==="d"?this.d:p)}},addClass:function(q){var p=this.element,r=bv(p,"class")||"";r.indexOf(q)===-1&&bv(p,"class",r+" "+q);return this},symbolAttr:function(q){var p=this;bm("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(r){p[r]=bk(q[r],p[r])});p.attr({d:p.renderer.symbols[p.symbolName](p.x,p.y,p.width,p.height,p)})},clip:function(p){return this.attr("clip-path",p?"url("+this.renderer.url+"#"+p.id+")":b9)},crisp:function(q){var p,t={},s,r=q.strokeWidth||this.strokeWidth||0;s=bf(r)%2/2;q.x=by(q.x||this.x||0)+s;q.y=by(q.y||this.y||0)+s;q.width=by((q.width||this.width||0)-2*s);q.height=by((q.height||this.height||0)-2*s);q.strokeWidth=r;for(p in q){this[p]!==q[p]&&(this[p]=t[p]=q[p])}return t},css:function(q){var p=this.styles,v={},u=this.element,t,s,r="";t=!p;if(q&&q.color){q.fill=q.color}if(p){for(s in q){q[s]!==p[s]&&(v[s]=q[s],t=!0)}}if(t){t=this.textWidth=q&&q.width&&u.nodeName.toLowerCase()==="text"&&bO(q.width);p&&(q=bh(p,v));this.styles=q;t&&(k||!a4&&this.renderer.forExport)&&delete q.width;if(br&&!a4){bJ(this.element,q)}else{p=function(z,x){return"-"+x.toLowerCase()};for(s in q){r+=s.replace(/([A-Z])/g,p)+":"+q[s]+";"}bv(u,"style",r)}t&&this.added&&this.renderer.buildText(this)}return this},on:function(q,p){var s=this,r=s.element;bo&&q==="click"?(r.ontouchstart=function(t){s.touchEventFired=Date.now();t.preventDefault();p.call(r,t)},r.onclick=function(t){(h.indexOf("Android")===-1||Date.now()-(s.touchEventFired||0)>1100)&&p.call(r,t)}):r["on"+q]=p;return this},setRadialReference:function(p){this.element.radialReference=p;return this},translate:function(q,p){return this.attr({translateX:q,translateY:p})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var q=this.translateX||0,p=this.translateY||0,v=this.scaleX,u=this.scaleY,t=this.inverted,s=this.rotation,r=this.element;t&&(q+=this.attr("width"),p+=this.attr("height"));q=["translate("+q+","+p+")"];t?q.push("rotate(90) scale(-1,1)"):s&&q.push("rotate("+s+" "+(r.getAttribute("x")||0)+" "+(r.getAttribute("y")||0)+")");(bg(v)||bg(u))&&q.push("scale("+bk(v,1)+" "+bk(u,1)+")");q.length&&r.setAttribute("transform",q.join(" "))},toFront:function(){var p=this.element;p.parentNode.appendChild(p);return this},align:function(q,p,x){var v,u,t,s,r={};u=this.renderer;t=u.alignedObjects;if(q){if(this.alignOptions=q,this.alignByTranslate=p,!x||ad(x)){this.alignTo=v=x||"renderer",aH(t,this),t.push(this),x=null}}else{q=this.alignOptions,p=this.alignByTranslate,v=this.alignTo}x=bk(x,u[v],u);v=q.align;u=q.verticalAlign;t=(x.x||0)+(q.x||0);s=(x.y||0)+(q.y||0);if(v==="right"||v==="center"){t+=(x.width-(q.width||0))/{right:1,center:2}[v]}r[p?"translateX":"x"]=bf(t);if(u==="bottom"||u==="middle"){s+=(x.height-(q.height||0))/({bottom:1,middle:2}[u]||1)}r[p?"translateY":"y"]=bf(s);this[this.placed?"animate":"attr"](r);this.placed=!0;this.alignAttr=r;return this},getBBox:function(){var z=this.bBox,x=this.renderer,v,u,t=this.rotation;v=this.element;var s=this.styles,r=t*aw;u=this.textStr;var q;if(u===""||aT.test(u)){q="num."+u.toString().length+(s?"|"+s.fontSize+"|"+s.fontFamily:"")}q&&(z=x.cache[q]);if(!z){if(v.namespaceURI===cl||x.forExport){try{z=v.getBBox?bh({},v.getBBox()):{width:v.offsetWidth,height:v.offsetHeight}}catch(p){}if(!z||z.width<0){z={width:0,height:0}}}else{z=this.htmlGetBBox()}if(x.isSVG){v=z.width;u=z.height;if(br&&s&&s.fontSize==="11px"&&u.toPrecision(3)==="16.9"){z.height=u=14}if(t){z.width=bF(u*O(r))+bF(v*aX(r)),z.height=bF(u*aX(r))+bF(v*O(r))}}this.bBox=z;q&&(x.cache[q]=z)}return z},show:function(p){return p&&this.element.namespaceURI===cl?(this.element.removeAttribute("visibility"),this):this.attr({visibility:p?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(q){var p=this;p.animate({opacity:0},{duration:q||150,complete:function(){p.hide()}})},add:function(q){var p=this.renderer,x=q||p,v=x.element||p.box,u=this.element,t=this.zIndex,s,r;if(q){this.parentGroup=q}this.parentInverted=q&&q.inverted;this.textStr!==void 0&&p.buildText(this);if(t){x.handleZ=!0,t=bO(t)}if(x.handleZ){q=v.childNodes;for(s=0;s<q.length;s++){if(p=q[s],x=bv(p,"zIndex"),p!==u&&(bO(x)>t||!bg(t)&&bg(x))){v.insertBefore(u,p);r=!0;break}}}r||v.appendChild(u);this.added=!0;if(this.onAdd){this.onAdd()}return this},safeRemoveChild:function(q){var p=q.parentNode;p&&p.removeChild(q)},destroy:function(){var q=this,p=q.element||{},u=q.shadows,t=q.renderer.isSVG&&p.nodeName==="SPAN"&&q.parentGroup,s,r;p.onclick=p.onmouseout=p.onmouseover=p.onmousemove=p.point=null;aC(q);if(q.clipPath){q.clipPath=q.clipPath.destroy()}if(q.stops){for(r=0;r<q.stops.length;r++){q.stops[r]=q.stops[r].destroy()}q.stops=null}q.safeRemoveChild(p);for(u&&bm(u,function(v){q.safeRemoveChild(v)});t&&t.div&&t.div.childNodes.length===0;){p=t.parentGroup,q.safeRemoveChild(t.div),delete t.div,t=p}q.alignTo&&aH(q.renderer.alignedObjects,q);for(s in q){delete q[s]}return null},shadow:function(B,A,z){var x=[],v,u,t=this.element,s,r,q,p;if(B){r=bk(B.width,3);q=(B.opacity||0.15)/r;p=this.parentInverted?"(-1,-1)":"("+bk(B.offsetX,1)+", "+bk(B.offsetY,1)+")";for(v=1;v<=r;v++){u=t.cloneNode(0);s=r*2+1-2*v;bv(u,{isShadow:"true",stroke:B.color||"black","stroke-opacity":q*v,"stroke-width":s,transform:"translate"+p,fill:b9});if(z){bv(u,"height",be(bv(u,"height")-s,0)),u.cutHeight=s}A?A.element.appendChild(u):t.parentNode.insertBefore(u,t);x.push(u)}this.shadows=x}return this},xGetter:function(p){this.element.nodeName==="circle"&&(p={x:"cx",y:"cy"}[p]||p);return this._defaultGetter(p)},_defaultGetter:function(p){p=bk(this[p],this.element?this.element.getAttribute(p):null,0);/^[\-0-9\.]+$/.test(p)&&(p=parseFloat(p));return p},dSetter:function(q,p,r){q&&q.join&&(q=q.join(" "));/(NaN| {2}|^$)/.test(q)&&(q="M 0 0");r.setAttribute(p,q);this[p]=q},dashstyleSetter:function(q){var p;if(q=q&&q.toLowerCase()){q=q.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").replace("solid",1).split(",");for(p=q.length;p--;){q[p]=bO(q[p])*this["stroke-width"]}q=q.join(",");this.element.setAttribute("stroke-dasharray",q)}},alignSetter:function(p){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[p])},opacitySetter:function(q,p,r){this[p]=q;r.setAttribute(p,q)},titleSetter:function(q){var p=this.element.getElementsByTagName("title")[0];p||(p=bS.createElementNS(cl,"title"),this.element.appendChild(p));p.textContent=q},textSetter:function(p){if(p!==this.textStr){delete this.bBox,this.textStr=p,this.added&&this.renderer.buildText(this)}},fillSetter:function(q,p,r){typeof q==="string"?r.setAttribute(p,q):q&&this.colorGradient(q,p,r)},zIndexSetter:function(q,p,r){r.setAttribute(p,q);this[p]=q},_defaultSetter:function(q,p,r){r.setAttribute(p,q)}};bu.prototype.yGetter=bu.prototype.xGetter;bu.prototype.translateXSetter=bu.prototype.translateYSetter=bu.prototype.rotationSetter=bu.prototype.verticalAlignSetter=bu.prototype.scaleXSetter=bu.prototype.scaleYSetter=function(q,p){this[p]=q;this.doTransform=!0};bu.prototype["stroke-widthSetter"]=bu.prototype.strokeSetter=function(q,p,r){this[p]=q;if(this.stroke&&this["stroke-width"]){this.strokeWidth=this["stroke-width"],bu.prototype.fillSetter.call(this,this.stroke,"stroke",r),r.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0}else{if(p==="stroke-width"&&q===0&&this.hasStroke){r.removeAttribute("stroke"),this.hasStroke=!1}}};var b=function(){this.init.apply(this,arguments)};b.prototype={Element:bu,init:function(q,p,x,v,u){var t=location,s,v=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(v));s=v.element;q.appendChild(s);q.innerHTML.indexOf("xmlns")===-1&&bv(s,"xmlns",cl);this.isSVG=!0;this.box=s;this.boxWrapper=v;this.alignedObjects=[];this.url=(bN||ag)&&bS.getElementsByTagName("base").length?t.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(bS.createTextNode("Created with Highstock 2.0.3"));this.defs=this.createElement("defs").add();this.forExport=u;this.gradients={};this.cache={};this.setSize(p,x,!1);var r;if(bN&&q.getBoundingClientRect){this.subPixelFix=p=function(){bJ(q,{left:0,top:0});r=q.getBoundingClientRect();bJ(q,{left:a2(r.left)-r.left+"px",top:a2(r.top)-r.top+"px"})},p(),a8(bB,"resize",p)}},getStyle:function(p){return this.style=bh({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},p)},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var p=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();aQ(this.gradients||{});this.gradients=null;if(p){this.defs=p.destroy()}this.subPixelFix&&bz(bB,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(q){var p=new this.Element;p.init(this,q);return p},draw:function(){},buildText:function(H){for(var G=H.element,E=this,D=E.forExport,B=bk(H.textStr,"").toString(),A=B.indexOf("<")!==-1,z=G.childNodes,x,v,u=bv(G,"x"),t=H.styles,s=H.textWidth,r=t&&t.lineHeight,q=t&&t.HcTextStroke,p=z.length,F=function(J){return r?bO(r):E.fontMetrics(/(px|em)$/.test(J&&J.style.fontSize)?J.style.fontSize:t&&t.fontSize||E.style.fontSize||12,J).h};p--;){G.removeChild(z[p])}!A&&!q&&B.indexOf(" ")===-1?G.appendChild(bS.createTextNode(B)):(x=/<.*style="([^"]+)".*>/,v=/<.*href="(http[^"]+)".*>/,s&&!H.added&&this.box.appendChild(G),B=A?B.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[B],B[B.length-1]===""&&B.pop(),bm(B,function(M,L){var K,J=0,M=M.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");K=M.split("|||");bm(K,function(V){if(V!==""||K.length===1){var T={},S=bS.createElementNS(cl,"tspan"),W;x.test(V)&&(W=V.match(x)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),bv(S,"style",W));v.test(V)&&!D&&(bv(S,"onclick",'location.href="'+V.match(v)[1]+'"'),bJ(S,{cursor:"pointer"}));V=(V.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(V!==" "){S.appendChild(bS.createTextNode(V));if(J){T.dx=0}else{if(L&&u!==null){T.x=u}}bv(S,T);G.appendChild(S);!J&&L&&(!a4&&D&&bJ(S,{display:"block"}),bv(S,"dy",F(S)));if(s){for(var V=V.replace(/([^\^])-/g,"$1- ").split(" "),T=K.length>1||V.length>1&&t.whiteSpace!=="nowrap",P,Q,N=t.HcHeight,X=[],Y=F(S),U=1;T&&(V.length||X.length);){delete H.bBox,P=H.getBBox(),Q=P.width,!a4&&E.forExport&&(Q=E.measureSpanWidth(S.firstChild.data,H.styles)),P=Q>s,!P||V.length===1?(V=X,X=[],V.length&&(U++,N&&U*Y>N?(V=["..."],H.attr("title",H.textStr)):(S=bS.createElementNS(cl,"tspan"),bv(S,{dy:Y,x:u}),W&&bv(S,"style",W),G.appendChild(S))),Q>s&&(s=Q)):(S.removeChild(S.firstChild),X.unshift(V.pop())),V.length&&S.appendChild(bS.createTextNode(V.join(" ").replace(/- /g,"-")))}}J++}}})}))},button:function(H,G,E,D,B,A,z,x,v){var u=this.label(H,G,E,v,null,null,null,null,"button"),t=0,s,r,q,p,F,J,H={x1:0,y1:0,x2:0,y2:1},B=bd({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:H,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},B);q=B.style;delete B.style;A=bd(B,{stroke:"#68A",fill:{linearGradient:H,stops:[[0,"#FFF"],[1,"#ACF"]]}},A);p=A.style;delete A.style;z=bd(B,{stroke:"#68A",fill:{linearGradient:H,stops:[[0,"#9BD"],[1,"#CDF"]]}},z);F=z.style;delete z.style;x=bd(B,{style:{color:"#CCC"}},x);J=x.style;delete x.style;a8(u.element,br?"mouseover":"mouseenter",function(){t!==3&&u.attr(A).css(p)});a8(u.element,br?"mouseout":"mouseleave",function(){t!==3&&(s=[B,A,z][t],r=[q,p,F][t],u.attr(s).css(r))});u.setState=function(K){(u.state=t=K)?K===2?u.attr(z).css(F):K===3&&u.attr(x).css(J):u.attr(B).css(q)};return u.on("click",function(){t!==3&&D.call(u)}).attr(B).css(bh({cursor:"default"},q))},crispLine:function(q,p){q[1]===q[4]&&(q[1]=q[4]=bf(q[1])-p%2/2);q[2]===q[5]&&(q[2]=q[5]=bf(q[2])+p%2/2);return q},path:function(q){var p={fill:b9};m(q)?p.d=q:aD(q)&&bh(p,q);return this.createElement("path").attr(p)},circle:function(q,p,r){q=aD(q)?q:{x:q,y:p,r:r};p=this.createElement("circle");p.xSetter=function(s){this.element.setAttribute("cx",s)};p.ySetter=function(s){this.element.setAttribute("cy",s)};return p.attr(q)},arc:function(q,p,u,t,s,r){if(aD(q)){p=q.y,u=q.r,t=q.innerR,s=q.start,r=q.end,q=q.x}q=this.symbol("arc",q||0,p||0,u||0,u||0,{innerR:t||0,start:s||0,end:r||0});q.r=u;return q},rect:function(q,p,v,u,t,s){var t=aD(q)?q.r:t,r=this.createElement("rect"),q=aD(q)?q:q===bi?{}:{x:q,y:p,width:be(v,0),height:be(u,0)};if(s!==bi){q.strokeWidth=s,q=r.crisp(q)}if(t){q.r=t}r.rSetter=function(x){bv(this.element,{rx:x,ry:x})};return r.attr(q)},setSize:function(q,p,t){var s=this.alignedObjects,r=s.length;this.width=q;this.height=p;for(this.boxWrapper[bk(t,!0)?"animate":"attr"]({width:q,height:p});r--;){s[r].align()}},g:function(q){var p=this.createElement("g");return bg(q)?p.attr({"class":"highcharts-"+q}):p},image:function(q,p,u,t,s){var r={preserveAspectRatio:b9};arguments.length>1&&bh(r,{x:p,y:u,width:t,height:s});r=this.createElement("image").attr(r);r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",q):r.element.setAttribute("hc-svg-href",q);return r},symbol:function(B,A,z,x,v,u){var t,s=this.symbols[B],s=s&&s(bf(A),bf(z),x,v,u),r=/^url\((.*?)\)$/,q,p;if(s){t=this.path(s),bh(t,{symbolName:B,x:A,y:z,width:x,height:v}),u&&bh(t,u)}else{if(r.test(B)){p=function(E,D){E.element&&(E.attr({width:D[0],height:D[1]}),E.alignByTranslate||E.translate(bf((x-D[0])/2),bf((v-D[1])/2)))},q=B.match(r)[1],B=c[q],t=this.image(q).attr({x:A,y:z}),t.isImg=!0,B?p(t,B):(t.attr({width:0,height:0}),b8("img",{onload:function(){p(t,c[q]=[this.width,this.height])},src:q}))}}return t},symbols:{circle:function(q,p,t,s){var r=0.166*t;return["M",q+t/2,p,"C",q+t+r,p,q+t+r,p+s,q+t/2,p+s,"C",q-r,p+s,q-r,p,q+t/2,p,"Z"]},square:function(q,p,s,r){return["M",q,p,"L",q+s,p,q+s,p+r,q,p+r,"Z"]},triangle:function(q,p,s,r){return["M",q+s/2,p,"L",q+s,p+r,q,p+r,"Z"]},"triangle-down":function(q,p,s,r){return["M",q,p,"L",q+s,p,q+s/2,p+r,"Z"]},diamond:function(q,p,s,r){return["M",q+s/2,p,"L",q+s,p+r/2,q+s/2,p+r,q,p+r/2,"Z"]},arc:function(B,A,z,x,v){var u=v.start,z=v.r||z||x,t=v.end-0.001,x=v.innerR,s=v.open,r=aX(u),q=O(u),p=aX(t),t=O(t),v=v.end-u<ay?0:1;return["M",B+z*r,A+z*q,"A",z,z,0,v,1,B+z*p,A+z*t,s?"M":"L",B+x*p,A+x*t,"A",x,x,0,v,0,B+x*r,A+x*q,s?"":"Z"]},callout:function(z,x,v,u,t){var s=bU(t&&t.r||0,v,u),r=s+6,q=t&&t.anchorX,p=t&&t.anchorY,t=bf(t.strokeWidth||0)%2/2;z+=t;x+=t;t=["M",z+s,x,"L",z+v-s,x,"C",z+v,x,z+v,x,z+v,x+s,"L",z+v,x+u-s,"C",z+v,x+u,z+v,x+u,z+v-s,x+u,"L",z+s,x+u,"C",z,x+u,z,x+u,z,x+u-s,"L",z,x+s,"C",z,x,z,x,z+s,x];q&&q>v&&p>x+r&&p<x+u-r?t.splice(13,3,"L",z+v,p-6,z+v+6,p,z+v,p+6,z+v,x+u-s):q&&q<0&&p>x+r&&p<x+u-r?t.splice(33,3,"L",z,p+6,z-6,p,z,p-6,z,x+s):p&&p>u&&q>z+r&&q<z+v-r?t.splice(23,3,"L",q+6,x+u,q,x+u+6,q-6,x+u,z+s,x+u):p&&p<0&&q>z+r&&q<z+v-r&&t.splice(3,3,"L",q-6,x,q,x-6,q+6,x,v-s,x);return t}},clipRect:function(q,p,u,t){var s="highcharts-"+w++,r=this.createElement("clipPath").attr({id:s}).add(this.defs),q=this.rect(q,p,u,t,0).add(r);q.id=s;q.clipPath=r;return q},text:function(q,p,u,t){var s=k||!a4&&this.forExport,r={};if(t&&!this.forExport){return this.html(q,p,u)}r.x=Math.round(p||0);if(u){r.y=Math.round(u)}if(q||q===0){r.text=q}q=this.createElement("text").attr(r);s&&q.css({position:"absolute"});if(!t){q.xSetter=function(z,x,E){var D=E.getElementsByTagName("tspan"),B,A=E.getAttribute(x),v;for(v=0;v<D.length;v++){B=D[v],B.getAttribute(x)===A&&B.setAttribute(x,z)}E.setAttribute(x,z)}}return q},fontMetrics:function(q,p){q=q||this.style.fontSize;if(p&&bB.getComputedStyle){p=p.element||p,q=bB.getComputedStyle(p,"").fontSize}var q=/px/.test(q)?bO(q):/em/.test(q)?parseFloat(q)*12:12,s=q<24?q+4:bf(q*1.2),r=bf(s*0.8);return{h:s,b:r,f:q}},label:function(ab,aa,Z,Y,X,W,V,U,T){function S(){var v,q;v=L.element.style;B=(F===void 0||p===void 0||M.styles.textAlign)&&L.textStr&&L.getBBox();M.width=(F||B.width||0)+2*E+ac;M.height=(p||B.height||0)+2*E;r=E+N.fontMetrics(v&&v.fontSize,L).b;if(t){if(!x){v=bf(-J*E),q=U?-r:0,M.box=x=Y?N.symbol(Y,v,q,M.width,M.height,H):N.rect(v,q,M.width,M.height,0,H[aI]),x.attr("fill",b9).add(M)}x.isImg||x.attr(bh({width:bf(M.width),height:bf(M.height)},H));H=null}}function Q(){var v=M.styles,v=v&&v.textAlign,q=ac+E*(1-J),z;z=U?0:r;if(bg(F)&&B&&(v==="center"||v==="right")){q+={center:0.5,right:1}[v]*(F-B.width)}if(q!==L.x||z!==L.y){L.attr("x",q),z!==bi&&L.attr("y",z)}L.x=q;L.y=z}function P(v,q){x?x.attr(v,q):H[v]=q}var N=this,M=N.g(T),L=N.text("",0,0,V).attr({zIndex:1}),x,B,J=0,E=3,ac=0,F,p,s,u,K=0,H={},r,t;M.onAdd=function(){L.add(M);M.attr({text:ab||"",x:aa,y:Z});x&&bg(X)&&M.attr({anchorX:X,anchorY:W})};M.widthSetter=function(q){F=q};M.heightSetter=function(q){p=q};M.paddingSetter=function(q){bg(q)&&q!==E&&(E=q,Q())};M.paddingLeftSetter=function(q){bg(q)&&q!==ac&&(ac=q,Q())};M.alignSetter=function(q){J={left:0,center:0.5,right:1}[q]};M.textSetter=function(q){q!==bi&&L.textSetter(q);S();Q()};M["stroke-widthSetter"]=function(v,q){v&&(t=!0);K=v%2/2;P(q,v)};M.strokeSetter=M.fillSetter=M.rSetter=function(v,q){q==="fill"&&v&&(t=!0);P(q,v)};M.anchorXSetter=function(v,q){X=v;P(q,v+K-s)};M.anchorYSetter=function(v,q){W=v;P(q,v-u)};M.xSetter=function(q){M.x=q;J&&(q-=J*((F||B.width)+E));s=bf(q);M.attr("translateX",s)};M.ySetter=function(q){u=M.y=bf(q);M.attr("translateY",u)};var G=M.css;return bh(M,{css:function(v){if(v){var q={},v=bd(v);bm(M.textProps,function(z){v[z]!==bi&&(q[z]=v[z],delete v[z])});L.css(q)}return G.call(M,v)},getBBox:function(){return{width:B.width+2*E,height:B.height+2*E,x:B.x-E,y:B.y-E}},shadow:function(q){x&&x.shadow(q);return M},destroy:function(){bz(M.element,"mouseenter");bz(M.element,"mouseleave");L&&(L=L.destroy());x&&(x=x.destroy());bu.prototype.destroy.call(M);M=N=S=Q=P=null}})}};aU=b;bh(bu.prototype,{htmlCss:function(q){var p=this.element;if(p=q&&p.tagName==="SPAN"&&q.width){delete q.width,this.textWidth=p,this.updateTransform()}this.styles=bh(this.styles,q);bJ(this.element,q);return this},htmlGetBBox:function(){var q=this.element,p=this.bBox;if(!p){if(q.nodeName==="text"){q.style.position="absolute"}p=this.bBox={x:q.offsetLeft,y:q.offsetTop,width:q.offsetWidth,height:q.offsetHeight}}return p},htmlUpdateTransform:function(){if(this.added){var E=this.renderer,D=this.element,B=this.translateX||0,A=this.translateY||0,z=this.x||0,x=this.y||0,v=this.textAlign||"left",u={left:0,center:0.5,right:1}[v],t=this.shadows;bJ(D,{marginLeft:B,marginTop:A});t&&bm(t,function(F){bJ(F,{marginLeft:B+1,marginTop:A+1})});this.inverted&&bm(D.childNodes,function(F){E.invertChild(F,D)});if(D.tagName==="SPAN"){var s=this.rotation,r,q=bO(this.textWidth),p=[s,v,D.innerHTML,this.textWidth].join(",");if(p!==this.cTT){r=E.fontMetrics(D.style.fontSize).b;bg(s)&&this.setSpanRotation(s,u,r);t=bk(this.elemWidth,D.offsetWidth);if(t>q&&/[ \-]/.test(D.textContent||D.innerText)){bJ(D,{width:q+"px",display:"block",whiteSpace:"normal"}),t=q}this.getSpanCorrection(t,r,u,s,v)}bJ(D,{left:z+(this.xCorr||0)+"px",top:x+(this.yCorr||0)+"px"});if(ag){r=D.offsetHeight}this.cTT=p}}else{this.alignOnAdd=!0}},setSpanRotation:function(q,p,t){var s={},r=br?"-ms-transform":ag?"-webkit-transform":bN?"MozTransform":l?"-o-transform":"";s[r]=s.transform="rotate("+q+"deg)";s[r+(bN?"Origin":"-origin")]=s.transformOrigin=p*100+"% "+t+"px";bJ(this.element,s)},getSpanCorrection:function(q,p,r){this.xCorr=-q*r;this.yCorr=-p}});bh(b.prototype,{html:function(q,p,u){var t=this.createElement("span"),s=t.element,r=t.renderer;t.textSetter=function(v){v!==s.innerHTML&&delete this.bBox;s.innerHTML=this.textStr=v};t.xSetter=t.ySetter=t.alignSetter=t.rotationSetter=function(x,v){v==="align"&&(v="textAlign");t[v]=x;t.htmlUpdateTransform()};t.attr({text:q,x:bf(p),y:bf(u)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});t.css=t.htmlCss;if(r.isSVG){t.add=function(x){var v,A=r.box.parentNode,z=[];if(this.parentGroup=x){if(v=x.div,!v){for(;x;){z.push(x),x=x.parentGroup}bm(z.reverse(),function(B){var D;v=B.div=B.div||b8(bD,{className:bv(B.element,"class")},{position:"absolute",left:(B.translateX||0)+"px",top:(B.translateY||0)+"px"},v||A);D=v.style;bh(B,{translateXSetter:function(E,F){D.left=E+"px";B[F]=E;B.doTransform=!0},translateYSetter:function(E,F){D.top=E+"px";B[F]=E;B.doTransform=!0},visibilitySetter:function(F,E){D[E]=F}})})}}else{v=A}v.appendChild(s);t.added=!0;t.alignOnAdd&&t.htmlUpdateTransform();return t}}return t}});var at,aO;if(!a4&&!k){aO={init:function(q,p){var t=["<",p,' filled="f" stroked="f"'],s=["position: ","absolute",";"],r=p===bD;(p==="shape"||r)&&s.push("left:0;top:0;width:1px;height:1px;");s.push("visibility: ",r?"hidden":"visible");t.push(' style="',s.join(""),'"/>');if(p){t=r||p==="span"||p==="img"?t.join(""):q.prepVML(t),this.element=b8(t)}this.renderer=q},add:function(q){var p=this.renderer,s=this.element,r=p.box,r=q?q.element||q:r;q&&q.inverted&&p.invertChild(s,r);r.appendChild(s);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd){this.onAdd()}return this},updateTransform:bu.prototype.htmlUpdateTransform,setSpanRotation:function(){var q=this.rotation,p=aX(q*aw),r=O(q*aw);bJ(this.element,{filter:q?["progid:DXImageTransform.Microsoft.Matrix(M11=",p,", M12=",-r,", M21=",r,", M22=",p,", sizingMethod='auto expand')"].join(""):b9})},getSpanCorrection:function(z,x,v,u,t){var s=u?aX(u*aw):1,r=u?O(u*aw):0,q=bk(this.elemHeight,this.element.offsetHeight),p;this.xCorr=s<0&&-z;this.yCorr=r<0&&-q;p=s*r<0;this.xCorr+=r*x*(p?1-v:v);this.yCorr-=s*x*(u?p?v:1-v:1);t&&t!=="left"&&(this.xCorr-=z*v*(s<0?-1:1),u&&(this.yCorr-=q*v*(r<0?-1:1)),bJ(this.element,{textAlign:t}))},pathToVML:function(q){for(var p=q.length,r=[];p--;){if(cg(q[p])){r[p]=bf(q[p]*10)-5}else{if(q[p]==="Z"){r[p]="x"}else{if(r[p]=q[p],q.isArc&&(q[p]==="wa"||q[p]==="at")){r[p+5]===r[p+7]&&(r[p+7]+=q[p+7]>q[p+5]?1:-1),r[p+6]===r[p+8]&&(r[p+8]+=q[p+8]>q[p+6]?1:-1)}}}}return r.join(" ")||"x"},clip:function(q){var p=this,r;q?(r=q.members,aH(r,p),r.push(p),p.destroyClip=function(){aH(r,p)},q=q.getCSS(p)):(p.destroyClip&&p.destroyClip(),q={clip:b0?"inherit":"rect(auto)"});return p.css(q)},css:bu.prototype.htmlCss,safeRemoveChild:function(p){p.parentNode&&b3(p)},destroy:function(){this.destroyClip&&this.destroyClip();return bu.prototype.destroy.apply(this)},on:function(q,p){this.element["on"+q]=function(){var r=bB.event;r.target=r.srcElement;p(r)};return this},cutOffPath:function(q,p){var r,q=q.split(/[ ,]/);r=q.length;if(r===9||r===11){q[r-4]=q[r-2]=bO(q[r-2])-10*p}return q.join(" ")},shadow:function(G,F,E){var D=[],B,A=this.element,z=this.renderer,x,v=A.style,u,t=A.path,s,r,q,p;t&&typeof t.value!=="string"&&(t="x");r=t;if(G){q=bk(G.width,3);p=(G.opacity||0.15)/q;for(B=1;B<=3;B++){s=q*2+1-2*B;E&&(r=this.cutOffPath(t.value,s+0.5));u=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',r,'" coordsize="10 10" style="',A.style.cssText,'" />'];x=b8(z.prepVML(u),null,{left:bO(v.left)+bk(G.offsetX,1),top:bO(v.top)+bk(G.offsetY,1)});if(E){x.cutOff=s+1}u=['<stroke color="',G.color||"black",'" opacity="',p*B,'"/>'];b8(z.prepVML(u),null,null,x);F?F.element.appendChild(x):A.parentNode.insertBefore(x,A);D.push(x)}this.shadows=D}return this},updateShadows:a9,setAttr:function(q,p){b0?this.element[q]=p:this.element.setAttribute(q,p)},classSetter:function(p){this.element.className=p},dashstyleSetter:function(q,p,r){(r.getElementsByTagName("stroke")[0]||b8(this.renderer.prepVML(["<stroke/>"]),null,null,r))[p]=q||"solid";this[p]=q},dSetter:function(q,p,s){var r=this.shadows,q=q||[];this.d=q.join&&q.join(" ");s.path=q=this.pathToVML(q);if(r){for(s=r.length;s--;){r[s].path=r[s].cutOff?this.cutOffPath(q,r[s].cutOff):q}}this.setAttr(p,q)},fillSetter:function(q,p,s){var r=s.nodeName;if(r==="SPAN"){s.style.color=q}else{if(r!=="IMG"){s.filled=q!==b9,this.setAttr("fillcolor",this.renderer.color(q,s,p,this))}}},opacitySetter:a9,rotationSetter:function(q,p,r){r=r.style;this[p]=r[p]=q;r.left=-bf(O(q*aw)+1)+"px";r.top=bf(aX(q*aw))+"px"},strokeSetter:function(q,p,r){this.setAttr("strokecolor",this.renderer.color(q,r,p))},"stroke-widthSetter":function(q,p,r){r.stroked=!!q;this[p]=q;cg(q)&&(q+="px");this.setAttr("strokeweight",q)},titleSetter:function(q,p){this.setAttr(p,q)},visibilitySetter:function(q,p,r){q==="inherit"&&(q="visible");this.shadows&&bm(this.shadows,function(s){s.style[p]=q});r.nodeName==="DIV"&&(q=q==="hidden"?"-999em":0,b0||(r.style[p]=q?"visible":"hidden"),p="top");r.style[p]=q},xSetter:function(q,p,r){this[p]=q;p==="x"?p="left":p==="y"&&(p="top");this.updateClipping?(this[p]=q,this.updateClipping()):r.style[p]=q},zIndexSetter:function(q,p,r){r.style[p]=q}},bE.VMLElement=aO=au(bu,aO),aO.prototype.ySetter=aO.prototype.widthSetter=aO.prototype.heightSetter=aO.prototype.xSetter,aO={Element:aO,isIE8:h.indexOf("MSIE 8.0")>-1,init:function(q,p,u,t){var s;this.alignedObjects=[];t=this.createElement(bD).css(bh(this.getStyle(t),{position:"relative"}));s=t.element;q.appendChild(t.element);this.isVML=!0;this.box=s;this.boxWrapper=t;this.cache={};this.setSize(p,u,!1);if(!bS.namespaces.hcv){bS.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{bS.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(r){bS.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return !this.box.offsetWidth},clipRect:function(q,p,u,t){var s=this.createElement(),r=aD(q);return bh(s,{members:[],left:(r?q.x:q)+1,top:(r?q.y:p)+1,width:(r?q.width:u)-1,height:(r?q.height:t)-1,getCSS:function(x){var v=x.element,D=v.nodeName,x=x.inverted,B=this.top-(D==="shape"?v.offsetTop:0),A=this.left,v=A+this.width,z=B+this.height,B={clip:"rect("+bf(x?A:B)+"px,"+bf(x?z:v)+"px,"+bf(x?v:z)+"px,"+bf(x?B:A)+"px)"};!x&&b0&&D==="DIV"&&bh(B,{width:v+"px",height:z+"px"});return B},updateClipping:function(){bm(s.members,function(v){v.element&&v.css(s.getCSS(v))})}})},color:function(bb,ba,ac,ab){var aa=this,Z,Y=/^rgba/,X,W,V=b9;bb&&bb.linearGradient?W="gradient":bb&&bb.radialGradient&&(W="pattern");if(W){var U,T,S=bb.linearGradient||bb.radialGradient,Q,P,z,D,M,E="",bb=bb.stops,L,G=[],F=function(){X=['<fill colors="'+G.join(",")+'" opacity="',z,'" o:opacity2="',P,'" type="',W,'" ',E,'focus="100%" method="any" />'];b8(aa.prepVML(X),null,null,ba)};Q=bb[0];L=bb[bb.length-1];Q[0]>0&&bb.unshift([0,Q[1]]);L[0]<1&&bb.push([1,L[1]]);bm(bb,function(r,q){Y.test(r[1])?(Z=ce(r[1]),U=Z.get("rgb"),T=Z.get("a")):(U=r[1],T=1);G.push(r[0]*100+"% "+U);q?(z=T,D=U):(P=T,M=U)});if(ac==="fill"){if(W==="gradient"){ac=S.x1||S[0]||0,bb=S.y1||S[1]||0,Q=S.x2||S[2]||0,S=S.y2||S[3]||0,E='angle="'+(90-bw.atan((S-bb)/(Q-ac))*180/ay)+'"',F()}else{var V=S.r,H=V*2,J=V*2,B=S.cx,K=S.cy,p=ba.radialReference,N,V=function(){p&&(N=ab.getBBox(),B+=(p[0]-N.x)/N.width-0.5,K+=(p[1]-N.y)/N.height-0.5,H*=p[2]/N.width,J*=p[2]/N.height);E='src="'+bQ.global.VMLRadialGradientURL+'" size="'+H+","+J+'" origin="0.5,0.5" position="'+B+","+K+'" color2="'+M+'" ';F()};ab.added?V():ab.onAdd=V;V=D}}else{V=U}}else{if(Y.test(bb)&&ba.tagName!=="IMG"){Z=ce(bb),X=["<",ac,' opacity="',Z.get("a"),'"/>'],b8(this.prepVML(X),null,null,ba),V=Z.get("rgb")}else{V=ba.getElementsByTagName(ac);if(V.length){V[0].opacity=1,V[0].type="solid"}V=bb}}return V},prepVML:function(q){var p=this.isIE8,q=q.join("");p?(q=q.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),q=q.indexOf('style="')===-1?q.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):q.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):q=q.replace("<","<hcv:");return q},text:b.prototype.html,path:function(q){var p={coordsize:"10 10"};m(q)?p.d=q:aD(q)&&bh(p,q);return this.createElement("shape").attr(p)},circle:function(q,p,s){var r=this.symbol("circle");if(aD(q)){s=q.r,p=q.y,q=q.x}r.isCircle=!0;r.r=s;return r.attr({x:q,y:p})},g:function(q){var p;q&&(p={className:"highcharts-"+q,"class":"highcharts-"+q});return this.createElement(bD).attr(p)},image:function(q,p,u,t,s){var r=this.createElement("img").attr({src:q});arguments.length>1&&r.attr({x:p,y:u,width:t,height:s});return r},createElement:function(p){return p==="rect"?this.symbol(p):b.prototype.createElement.call(this,p)},invertChild:function(q,p){var t=this,s=p.style,r=q.tagName==="IMG"&&q.style;bJ(q,{flip:"x",left:bO(s.width)-(r?bO(r.top):1),top:bO(s.height)-(r?bO(r.left):1),rotation:-90});bm(q.childNodes,function(u){t.invertChild(u,q)})},symbols:{arc:function(B,A,z,x,v){var u=v.start,t=v.end,s=v.r||z||x,z=v.innerR,x=aX(u),r=O(u),q=aX(t),p=O(t);if(t-u===0){return["x"]}u=["wa",B-s,A-s,B+s,A+s,B+s*x,A+s*r,B+s*q,A+s*p];v.open&&!z&&u.push("e","M",B,A);u.push("at",B-z,A-z,B+z,A+z,B+z*q,A+z*p,B+z*x,A+z*r,"x","e");u.isArc=!0;return u},circle:function(q,p,t,s,r){r&&(t=s=2*r.r);r&&r.isCircle&&(q-=t/2,p-=s/2);return["wa",q,p,q+t,p+s,q+t,p+s/2,q+t,p+s/2,"e"]},rect:function(q,p,t,s,r){return b.prototype.symbols[!bg(r)||!r.r?"square":"callout"].call(0,q,p,t,s,r)}}},bE.VMLRenderer=at=function(){this.init.apply(this,arguments)},at.prototype=bd(b.prototype,aO),aU=at}b.prototype.measureSpanWidth=function(q,p){var s=bS.createElement("span"),r;r=bS.createTextNode(q);s.appendChild(r);bJ(s,p);this.box.appendChild(s);r=s.offsetWidth;b3(s);return r};var b2;if(k){bE.CanVGRenderer=aO=function(){cl="http://www.w3.org/1999/xhtml"},aO.prototype.symbols={},b2=function(){function q(){var r=p.length,s;for(s=0;s<r;s++){p[s]()}p=[]}var p=[];return{push:function(s,r){p.length===0&&bV(r,q);p.push(s)}}}(),aU=aO}b7.prototype={addLabel:function(){var F=this.axis,E=F.options,D=F.chart,B=F.horiz,A=F.categories,z=F.names,x=this.pos,v=E.labels,u=v.rotation,t=F.tickPositions,B=B&&A&&!v.step&&!v.staggerLines&&!v.rotation&&D.plotWidth/t.length||!B&&(D.margin[3]||D.chartWidth*0.33),s=x===t[0],r=x===t[t.length-1],q,z=A?bk(A[x],z[x],x):x,A=this.label,p=t.info;F.isDatetimeAxis&&p&&(q=E.dateTimeLabelFormats[p.higherRanks[x]||p.unitName]);this.isFirst=s;this.isLast=r;E=F.labelFormatter.call({axis:F,chart:D,isFirst:s,isLast:r,dateTimeLabelFormat:q,value:F.isLog?ak(aS(z)):z});x=B&&{width:be(1,bf(B-2*(v.padding||10)))+"px"};x=bh(x,v.style);if(bg(A)){A&&A.attr({text:E}).css(x)}else{q={align:F.labelAlign};if(cg(u)){q.rotation=u}if(B&&v.ellipsis){x.HcHeight=F.len/t.length}this.label=A=bg(E)&&v.enabled?D.renderer.text(E,0,0,v.useHTML).attr(q).css(x).add(F.labelGroup):null;F.tickBaseline=D.renderer.fontMetrics(v.style.fontSize,A).b;u&&F.side===2&&(F.tickBaseline*=aX(u*aw))}this.yOffset=A?bk(v.y,F.tickBaseline+(F.side===2?8:-(A.getBBox().height/2))):0},getLabelSize:function(){var q=this.label,p=this.axis;return q?q.getBBox()[p.horiz?"height":"width"]:0},getLabelSides:function(){var q=this.label.getBBox(),p=this.axis,s=p.horiz,r=p.options.labels,q=s?q.width:q.height,p=s?r.x-q*{left:0,center:0.5,right:1}[p.labelAlign]:0;return[p,s?q+p:q]},handleOverflow:function(G,F){var E=!0,D=this.axis,B=this.isFirst,A=this.isLast,z=D.horiz?F.x:F.y,x=D.reversed,v=D.tickPositions,u=this.getLabelSides(),t=u[0],u=u[1],s,r,q,p=this.label.line||0;s=D.labelEdge;r=D.justifyLabels&&(B||A);s[p]===bi||z+t>s[p]?s[p]=z+u:r||(E=!1);if(r){s=(r=D.justifyToPlot)?D.pos:0;r=r?s+D.len:D.chart.chartWidth;do{G+=B?1:-1,q=D.ticks[v[G]]}while(v[G]&&(!q||!q.label||q.label.line!==p));D=q&&q.label.xy&&q.label.xy.x+q.getLabelSides()[B?0:1];B&&!x||A&&x?z+t<s&&(z=s-t,q&&z+u>D&&(E=!1)):z+u>r&&(z=r-u,q&&z+t<D&&(E=!1));F.x=z}return E},getPosition:function(q,p,v,u){var t=this.axis,s=t.chart,r=u&&s.oldChartHeight||s.chartHeight;return{x:q?t.translate(p+v,null,null,u)+t.transB:t.left+t.offset+(t.opposite?(u&&s.oldChartWidth||s.chartWidth)-t.right-t.left:0),y:q?r-t.bottom+t.offset-(t.opposite?t.height:0):r-t.translate(p+v,null,null,u)-t.transB}},getLabelPosition:function(D,B,A,z,x,v,u,t){var s=this.axis,r=s.transA,q=s.reversed,p=s.staggerLines,D=D+x.x-(v&&z?v*r*(q?-1:1):0),B=B+this.yOffset-(v&&!z?v*r*(q?1:-1):0);if(p){A.line=u/(t||1)%p,B+=A.line*(s.labelOffset/p)}return{x:D,y:B}},getMarkPath:function(q,p,u,t,s,r){return r.crispLine(["M",q,p,"L",q+(s?0:-u),p+(s?u:0)],t)},render:function(Z,Y,X){var W=this.axis,V=W.options,U=W.chart.renderer,T=W.horiz,S=this.type,Q=this.label,P=this.pos,N=V.labels,M=this.gridLine,L=S?S+"Grid":"grid",K=S?S+"Tick":"tick",J=V[L+"LineWidth"],q=V[L+"LineColor"],z=V[L+"LineDashStyle"],H=V[K+"Length"],L=V[K+"Width"]||0,A=V[K+"Color"],aa=V[K+"Position"],K=this.mark,D=N.step,B=!0,E=W.tickmarkOffset,F=this.getPosition(T,P,E,Y),r=F.x,F=F.y,G=T&&r===W.pos+W.len||!T&&F===W.pos?-1:1,X=bk(X,1);this.isActive=!0;if(J){P=W.getPlotLinePath(P+E,J*G,Y,!0);if(M===bi){M={stroke:q,"stroke-width":J};if(z){M.dashstyle=z}if(!S){M.zIndex=1}if(Y){M.opacity=0}this.gridLine=M=J?U.path(P).attr(M).add(W.gridGroup):null}if(!Y&&M&&P){M[this.isNew?"attr":"animate"]({d:P,opacity:X})}}if(L&&H){aa==="inside"&&(H=-H),W.opposite&&(H=-H),S=this.getMarkPath(r,F,H,L*G,T,U),K?K.animate({d:S,opacity:X}):this.mark=U.path(S).attr({stroke:A,"stroke-width":L,opacity:X}).add(W.axisGroup)}if(Q&&!isNaN(r)){Q.xy=F=this.getLabelPosition(r,F,Q,T,N,E,Z,D),this.isFirst&&!this.isLast&&!bk(V.showFirstLabel,1)||this.isLast&&!this.isFirst&&!bk(V.showLastLabel,1)?B=!1:!W.isRadial&&!N.step&&!N.rotation&&!Y&&X!==0&&(B=this.handleOverflow(Z,F)),D&&Z%D&&(B=!1),B&&!isNaN(F.y)?(F.opacity=X,Q[this.isNew?"attr":"animate"](F),this.isNew=!1):Q.attr("y",-9999)}},destroy:function(){aQ(this,this.axis)}};bE.PlotLineOrBand=function(q,p){this.axis=q;if(p){this.options=p,this.id=p.id}};bE.PlotLineOrBand.prototype={render:function(){var T=this,S=T.axis,Q=S.horiz,P=(S.pointRange||0)/2,N=T.options,M=N.label,L=T.label,K=N.width,J=N.to,H=N.from,G=bg(H)&&bg(J),F=N.value,E=N.dashStyle,D=T.svgElem,B=[],s,z=N.color,A=N.zIndex,t=N.events,x={},v=S.chart.renderer;S.isLog&&(H=bZ(H),J=bZ(J),F=bZ(F));if(K){if(B=S.getPlotLinePath(F,K),x={stroke:z,"stroke-width":K},E){x.dashstyle=E}}else{if(G){H=be(H,S.min-P);J=bU(J,S.max+P);B=S.getPlotBandPath(H,J,N);if(z){x.fill=z}if(N.borderWidth){x.stroke=N.borderColor,x["stroke-width"]=N.borderWidth}}else{return}}if(bg(A)){x.zIndex=A}if(D){if(B){D.animate({d:B},null,D.onGetPath)}else{if(D.hide(),D.onGetPath=function(){D.show()},L){T.label=L=L.destroy()}}}else{if(B&&B.length&&(T.svgElem=D=v.path(B).attr(x).add(),t)){for(s in P=function(p){D.on(p,function(q){t[p].apply(T,[q])})},t){P(s)}}}if(M&&bg(M.text)&&B&&B.length&&S.width>0&&S.height>0){M=bd({align:Q&&G&&"center",x:Q?!G&&4:10,verticalAlign:!Q&&G&&"middle",y:Q?G?16:10:G?6:-4,rotation:Q&&!G&&90},M);if(!L){x={align:M.textAlign||M.align,rotation:M.rotation};if(bg(A)){x.zIndex=A}T.label=L=v.text(M.text,0,0,M.useHTML).attr(x).css(M.style).add()}S=[B[1],B[4],G?B[6]:B[1]];G=[B[2],B[5],G?B[7]:B[2]];B=ch(S);Q=ch(G);L.align(M,!1,{x:B,y:Q,width:ah(S)-B,height:ah(G)-Q});L.show()}else{L&&L.hide()}return T},destroy:function(){aH(this.axis.plotLinesAndBands,this);delete this.axis;aQ(this)}};bK.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:bA,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return a6(this.total,-1)},style:bA.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(q,p){var u=p.isX;this.horiz=q.inverted?!u:u;this.coll=(this.isXAxis=u)?"xAxis":"yAxis";this.opposite=p.opposite;this.side=p.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(p);var t=this.options,s=t.type;this.labelFormatter=t.labels.formatter||this.defaultLabelFormatter;this.userOptions=p;this.minPixelPadding=0;this.chart=q;this.reversed=t.reversed;this.zoomEnabled=t.zoomEnabled!==!1;this.categories=t.categories||s==="category";this.names=[];this.isLog=s==="logarithmic";this.isDatetimeAxis=s==="datetime";this.isLinked=bg(t.linkedTo);this.tickmarkOffset=this.categories&&t.tickmarkPlacement==="between"?0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=t.minRange||t.maxZoom;this.range=t.range;this.offset=t.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=bk(t.crosshair,b1(q.options.tooltip.crosshairs)[u?0:1],!1);var r,t=this.options.events;cj(this,q.axes)===-1&&(u&&!this.isColorAxis?q.axes.splice(q.xAxis.length,0,this):q.axes.push(this),q[this.coll].push(this));this.series=this.series||[];if(q.inverted&&u&&this.reversed===bi){this.reversed=!0}this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(r in t){a8(this,r,t[r])}if(this.isLog){this.val2lin=bZ,this.lin2val=aS}},setOptions:function(p){this.options=bd(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],bd(bQ[this.coll],p))},defaultLabelFormatter:function(){var q=this.axis,p=this.value,x=q.categories,v=this.dateTimeLabelFormat,u=bQ.lang.numericSymbols,t=u&&u.length,s,r=q.options.labels.format,q=q.isLog?p:q.tickInterval;if(r){s=aZ(r,this)}else{if(x){s=p}else{if(v){s=o(v,p)}else{if(t&&q>=1000){for(;t--&&s===bi;){x=Math.pow(1000,t+1),q>=x&&u[t]!==null&&(s=a6(p/x,-1)+u[t])}}}}}s===bi&&(s=bF(p)>=10000?a6(p,0):a6(p,-1,bi,""));return s},getSeriesExtremes:function(){var q=this,p=q.chart;q.hasVisibleSeries=!1;q.dataMin=q.dataMax=null;q.buildStacks&&q.buildStacks();bm(q.series,function(t){if(t.visible||!p.options.chart.ignoreHiddenSeries){var s;s=t.options.threshold;var r;q.hasVisibleSeries=!0;q.isLog&&s<=0&&(s=null);if(q.isXAxis){if(s=t.xData,s.length){q.dataMin=bU(bk(q.dataMin,s[0]),ch(s)),q.dataMax=be(bk(q.dataMax,s[0]),ah(s))}}else{t.getExtremes();r=t.dataMax;t=t.dataMin;if(bg(t)&&bg(r)){q.dataMin=bU(bk(q.dataMin,t),t),q.dataMax=be(bk(q.dataMax,r),r)}if(bg(s)){if(q.dataMin>=s){q.dataMin=s,q.ignoreMinPadding=!0}else{if(q.dataMax<s){q.dataMax=s,q.ignoreMaxPadding=!0}}}}}})},translate:function(A,z,x,v,u,t){var s=1,r=0,q=v?this.oldTransA:this.transA,v=v?this.oldMin:this.min,p=this.minPixelPadding,u=(this.options.ordinal||this.isLog&&u)&&this.lin2val;if(!q){q=this.transA}if(x){s*=-1,r=this.len}this.reversed&&(s*=-1,r-=s*(this.sector||this.len));z?(A=A*s+r,A-=p,A=A/q+v,u&&(A=this.lin2val(A))):(u&&(A=this.val2lin(A)),t==="between"&&(t=0.5),A=s*(A-v)*q+r+s*p+(cg(t)?q*t*this.pointRange:0));return A},toPixels:function(q,p){return this.translate(q,!1,!this.horiz,null,!0)+(p?0:this.pos)},toValue:function(q,p){return this.translate(q-(p?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(E,D,B,A,z){var x=this.chart,v=this.left,u=this.top,t,s,r=B&&x.oldChartHeight||x.chartHeight,q=B&&x.oldChartWidth||x.chartWidth,p;t=this.transB;z=bk(z,this.translate(E,null,null,B));E=B=bf(z+t);t=s=bf(r-z-t);if(isNaN(z)){p=!0}else{if(this.horiz){if(t=u,s=r-this.bottom,E<v||E>v+this.width){p=!0}}else{if(E=v,B=q-this.right,t<u||t>u+this.height){p=!0}}}return p&&!A?null:x.renderer.crispLine(["M",E,t,"L",B,s],D||1)},getLinearTickPositions:function(q,p,v){var u,t=ak(by(p/q)*q),s=ak(a2(v/q)*q),r=[];if(p===v&&cg(p)){return[p]}for(p=t;p<=s;){r.push(p);p=ak(p+q);if(p===u){break}u=p}return r},getMinorTickPositions:function(){var q=this.options,p=this.tickPositions,t=this.minorTickInterval,s=[],r;if(this.isLog){r=p.length;for(q=1;q<r;q++){s=s.concat(this.getLogTickPositions(t,p[q-1],p[q],!0))}}else{if(this.isDatetimeAxis&&q.minorTickInterval==="auto"){s=s.concat(this.getTimeTicks(this.normalizeTimeTickInterval(t),this.min,this.max,q.startOfWeek)),s[0]<this.min&&s.shift()}else{for(p=this.min+(p[0]-this.min)%t;p<=this.max;p+=t){s.push(p)}}}return s},adjustForMinRange:function(){var B=this.options,A=this.min,z=this.max,x,v=this.dataMax-this.dataMin>=this.minRange,u,t,s,r,q;if(this.isXAxis&&this.minRange===bi&&!this.isLog){bg(B.min)||bg(B.max)?this.minRange=null:(bm(this.series,function(D){r=D.xData;for(t=q=D.xIncrement?1:r.length-1;t>0;t--){if(s=r[t]-r[t-1],u===bi||s<u){u=s}}}),this.minRange=bU(u*5,this.dataMax-this.dataMin))}if(z-A<this.minRange){var p=this.minRange;x=(p-z+A)/2;x=[A-x,bk(B.min,A-x)];if(v){x[2]=this.dataMin}A=ah(x);z=[A+p,bk(B.max,A+p)];if(v){z[2]=this.dataMax}z=ch(z);z-A<p&&(x[0]=z-p,x[1]=bk(B.min,z-p),A=ah(x))}this.min=A;this.max=z},setAxisTranslation:function(A){var z=this,x=z.max-z.min,v=z.axisPointRange||0,u,t=0,s=0,r=z.linkedParent,q=!!z.categories,p=z.transA;if(z.isXAxis||q||v){r?(t=r.minPointOffset,s=r.pointRangePadding):bm(z.series,function(B){var E=q?1:z.isXAxis?B.pointRange:z.axisPointRange||0,D=B.options.pointPlacement,F=B.closestPointRange;E>x&&(E=0);v=be(v,E);t=be(t,ad(D)?0:E/2);s=be(s,D==="on"?0:E);!B.noSharedTooltip&&bg(F)&&(u=bg(u)?bU(u,F):F)}),r=z.ordinalSlope&&u?z.ordinalSlope/u:1,z.minPointOffset=t*=r,z.pointRangePadding=s*=r,z.pointRange=bU(v,x),z.closestPointRange=u}if(A){z.oldTransA=p}z.translationSlope=z.transA=p=z.len/(x+s||1);z.transB=z.horiz?z.left:z.bottom;z.minPixelPadding=p*t},setTickPositions:function(K){var J=this,H=J.chart,G=J.options,F=G.startOnTick,E=G.endOnTick,D=J.isLog,B=J.isDatetimeAxis,A=J.isXAxis,z=J.isLinked,x=J.options.tickPositioner,v=G.maxPadding,u=G.minPadding,t=G.tickInterval,s=G.minTickInterval,q=G.tickPixelInterval,r,p=J.categories;z?(J.linkedParent=H[J.coll][G.linkedTo],H=J.linkedParent.getExtremes(),J.min=bk(H.min,H.dataMin),J.max=bk(H.max,H.dataMax),G.type!==J.linkedParent.options.type&&bt(11,1)):(J.min=bk(J.userMin,G.min,J.dataMin),J.max=bk(J.userMax,G.max,J.dataMax));if(D){!K&&bU(J.min,bk(J.dataMin,J.min))<=0&&bt(10,1),J.min=ak(bZ(J.min)),J.max=ak(bZ(J.max))}if(J.range&&bg(J.max)){J.userMin=J.min=be(J.min,J.max-J.range),J.userMax=J.max,J.range=null}J.beforePadding&&J.beforePadding();J.adjustForMinRange();if(!p&&!J.axisPointRange&&!J.usePercentage&&!z&&bg(J.min)&&bg(J.max)&&(H=J.max-J.min)){if(!bg(G.min)&&!bg(J.userMin)&&u&&(J.dataMin<0||!J.ignoreMinPadding)){J.min-=H*u}if(!bg(G.max)&&!bg(J.userMax)&&v&&(J.dataMax>0||!J.ignoreMaxPadding)){J.max+=H*v}}if(cg(G.floor)){J.min=be(J.min,G.floor)}if(cg(G.ceiling)){J.max=bU(J.max,G.ceiling)}J.min===J.max||J.min===void 0||J.max===void 0?J.tickInterval=1:z&&!t&&q===J.linkedParent.options.tickPixelInterval?J.tickInterval=J.linkedParent.tickInterval:(J.tickInterval=bk(t,p?1:(J.max-J.min)*q/be(J.len,q)),!bg(t)&&J.len<q&&!this.isRadial&&!this.isLog&&!p&&F&&E&&(r=!0,J.tickInterval/=4));A&&!K&&bm(J.series,function(L){L.processData(J.min!==J.oldMin||J.max!==J.oldMax)});J.setAxisTranslation(!0);J.beforeSetTickPositions&&J.beforeSetTickPositions();if(J.postProcessTickInterval){J.tickInterval=J.postProcessTickInterval(J.tickInterval)}if(J.pointRange){J.tickInterval=be(J.pointRange,J.tickInterval)}if(!t&&J.tickInterval<s){J.tickInterval=s}if(!B&&!D&&!t){J.tickInterval=ae(J.tickInterval,null,an(J.tickInterval),G)}J.minorTickInterval=G.minorTickInterval==="auto"&&J.tickInterval?J.tickInterval/5:G.minorTickInterval;J.tickPositions=K=G.tickPositions?[].concat(G.tickPositions):x&&x.apply(J,[J.min,J.max]);if(!K){!J.ordinalPositions&&(J.max-J.min)/J.tickInterval>be(2*J.len,200)&&bt(19,!0),K=B?J.getTimeTicks(J.normalizeTimeTickInterval(J.tickInterval,G.units),J.min,J.max,G.startOfWeek,J.ordinalPositions,J.closestPointRange,!0):D?J.getLogTickPositions(J.tickInterval,J.min,J.max):J.getLinearTickPositions(J.tickInterval,J.min,J.max),r&&K.splice(1,K.length-2),J.tickPositions=K}if(!z){G=K[0],D=K[K.length-1],B=J.minPointOffset||0,!F&&!E&&!p&&K.length===2&&K.splice(1,0,(D+G)/2),F?J.min=G:J.min-B>G&&K.shift(),E?J.max=D:J.max+B<D&&K.pop(),K.length===1&&(F=bF(J.max)>10000000000000?1:0.001,J.min-=F,J.max+=F)}},setMaxTicks:function(){var q=this.chart,p=q.maxTicks||{},s=this.tickPositions,r=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&!this.isDatetimeAxis&&s&&s.length>(p[r]||0)&&this.options.alignTicks!==!1){p[r]=s.length}q.maxTicks=p},adjustTickAmount:function(){var q=this._maxTicksKey,p=this.tickPositions,t=this.chart.maxTicks;if(t&&t[q]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==bi){var s=this.tickAmount,r=p.length;this.tickAmount=q=t[q];if(r<q){for(;p.length<q;){p.push(ak(p[p.length-1]+this.tickInterval))}this.transA*=(r-1)/(q-1);this.max=p[p.length-1]}if(bg(s)&&q!==s){this.isDirty=!0}}},setScale:function(){var q=this.stacks,p,t,s,r;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();r=this.len!==this.oldAxisLength;bm(this.series,function(u){if(u.isDirtyData||u.isDirty||u.xAxis.isDirty){s=!0}});if(r||s||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis){for(p in q){for(t in q[p]){q[p][t].total=null,q[p][t].cum=0}}}this.forceRedraw=!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;if(!this.isDirty){this.isDirty=r||this.min!==this.oldMin||this.max!==this.oldMax}}else{if(!this.isXAxis){if(this.oldStacks){q=this.stacks=this.oldStacks}for(p in q){for(t in q[p]){q[p][t].cum=q[p][t].total}}}}this.setMaxTicks()},setExtremes:function(q,p,v,u,t){var s=this,r=s.chart,v=bk(v,!0),t=bh(t,{min:q,max:p});bG(s,"setExtremes",t,function(){s.userMin=q;s.userMax=p;s.eventArgs=t;s.isDirtyExtremes=!0;v&&r.redraw(u)})},zoom:function(q,p){var t=this.dataMin,s=this.dataMax,r=this.options;this.allowZoomOutside||(bg(t)&&q<=bU(t,bk(r.min,t))&&(q=bi),bg(s)&&p>=be(s,bk(r.max,s))&&(p=bi));this.displayBtn=q!==bi||p!==bi;this.setExtremes(q,p,!1,bi,{trigger:"zoom"});return !0},setAxisSize:function(){var q=this.chart,p=this.options,v=p.offsetLeft||0,u=this.horiz,t=bk(p.width,q.plotWidth-v+(p.offsetRight||0)),s=bk(p.height,q.plotHeight),r=bk(p.top,q.plotTop),p=bk(p.left,q.plotLeft+v),v=/%$/;v.test(s)&&(s=parseInt(s,10)/100*q.plotHeight);v.test(r)&&(r=parseInt(r,10)/100*q.plotHeight+q.plotTop);this.left=p;this.top=r;this.width=t;this.height=s;this.bottom=q.chartHeight-s-r;this.right=q.chartWidth-t-p;this.len=be(u?t:s,0);this.pos=u?p:r},getExtremes:function(){var p=this.isLog;return{min:p?ak(aS(this.min)):this.min,max:p?ak(aS(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(q){var p=this.isLog,r=p?aS(this.min):this.min,p=p?aS(this.max):this.max;r>q||q===null?q=r:p<q&&(q=p);return this.translate(q,0,1,0,1)},autoLabelAlign:function(p){p=(bk(p,0)-this.side*90+720)%360;return p>15&&p<165?"right":p>195&&p<345?"left":"center"},getOffset:function(){var aa=this,Z=aa.chart,Y=Z.renderer,X=aa.options,W=aa.tickPositions,V=aa.ticks,U=aa.horiz,T=aa.side,S=Z.inverted?[1,0,3,2][T]:T,Q,P,N=0,M,L=0,K=X.title,v=X.labels,D=0,t=Z.axisOffset,Z=Z.clipOffset,E=[-1,1,1,-1][T],F,G=1,B=bk(v.maxStaggerLines,5),q,J,r,H,p;aa.hasData=Q=aa.hasVisibleSeries||bg(aa.min)&&bg(aa.max)&&!!W;aa.showAxis=P=Q||bk(X.showEmpty,!0);aa.staggerLines=aa.horiz&&v.staggerLines;if(!aa.axisGroup){aa.gridGroup=Y.g("grid").attr({zIndex:X.gridZIndex||1}).add(),aa.axisGroup=Y.g("axis").attr({zIndex:X.zIndex||2}).add(),aa.labelGroup=Y.g("axis-labels").attr({zIndex:v.zIndex||7}).addClass("highcharts-"+aa.coll.toLowerCase()+"-labels").add()}if(Q||aa.isLinked){aa.labelAlign=bk(v.align||aa.autoLabelAlign(v.rotation));bm(W,function(s){V[s]?V[s].addLabel():V[s]=new b7(aa,s)});if(aa.horiz&&!aa.staggerLines&&B&&!v.rotation){for(Q=aa.reversed?[].concat(W).reverse():W;G<B;){q=[];J=!1;for(F=0;F<Q.length;F++){r=Q[F],H=(H=V[r].label&&V[r].label.getBBox())?H.width:0,p=F%G,H&&(r=aa.translate(r),q[p]!==bi&&r<q[p]&&(J=!0),q[p]=r+H)}if(J){G++}else{break}}if(G>1){aa.staggerLines=G}}bm(W,function(s){if(T===0||T===2||{1:"left",3:"right"}[T]===aa.labelAlign){D=be(V[s].getLabelSize(),D)}});if(aa.staggerLines){D*=aa.staggerLines,aa.labelOffset=D}}else{for(F in V){V[F].destroy(),delete V[F]}}if(K&&K.text&&K.enabled!==!1){if(!aa.axisTitle){aa.axisTitle=Y.text(K.text,0,0,K.useHTML).attr({zIndex:7,rotation:K.rotation||0,align:K.textAlign||{low:"left",middle:"center",high:"right"}[K.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(K.style).add(aa.axisGroup),aa.axisTitle.isNew=!0}if(P){N=aa.axisTitle.getBBox()[U?"height":"width"],M=K.offset,L=bg(M)?0:bk(K.margin,U?5:10)}aa.axisTitle[P?"show":"hide"]()}aa.offset=E*bk(X.offset,t[T]);Y=T===2?aa.tickBaseline:0;U=D+L+(D&&E*(U?bk(v.y,aa.tickBaseline+8):v.x)-Y);aa.axisTitleMargin=bk(M,U);t[T]=be(t[T],aa.axisTitleMargin+N+E*aa.offset,U);Z[S]=be(Z[S],by(X.lineWidth/2)*2)},getLinePath:function(q){var p=this.chart,u=this.opposite,t=this.offset,s=this.horiz,r=this.left+(u?this.width:0)+t,t=p.chartHeight-this.bottom-(u?this.height:0)+t;u&&(q*=-1);return p.renderer.crispLine(["M",s?this.left:r,s?t:this.top,"L",s?p.chartWidth-this.right:r,s?t:p.chartHeight-this.bottom],q)},getTitlePosition:function(){var z=this.horiz,x=this.left,v=this.top,u=this.len,t=this.options.title,s=z?x:v,r=this.opposite,q=this.offset,p=bO(t.style.fontSize||12),u={low:s+(z?0:u),middle:s+u/2,high:s+(z?u:0)}[t.align],x=(z?v+this.height:x)+(z?1:-1)*(r?-1:1)*this.axisTitleMargin+(this.side===2?p:0);return{x:z?u:x+(r?this.width:0)+q+(t.x||0),y:z?x-(r?this.height:0)+q:u+(t.y||0)}},render:function(){var aa=this,Z=aa.horiz,Y=aa.reversed,X=aa.chart,W=X.renderer,V=aa.options,U=aa.isLog,T=aa.isLinked,S=aa.tickPositions,Q,P=aa.axisTitle,N=aa.ticks,M=aa.minorTicks,L=aa.alternateBands,K=V.stackLabels,t=V.alternateGridColor,H=aa.tickmarkOffset,r=V.lineWidth,D=X.hasRendered&&bg(aa.oldMin)&&!isNaN(aa.oldMin),F=aa.hasData,E=aa.showAxis,G,B=V.labels.overflow,J=aa.justifyLabels=Z&&B!==!1,p;aa.labelEdge.length=0;aa.justifyToPlot=B==="justify";bm([N,M,L],function(s){for(var q in s){s[q].isActive=!1}});if(F||T){if(aa.minorTickInterval&&!aa.categories&&bm(aa.getMinorTickPositions(),function(q){M[q]||(M[q]=new b7(aa,q,"minor"));D&&M[q].isNew&&M[q].render(null,!0);M[q].render(null,!1,1)}),S.length&&(Q=S.slice(),(Z&&Y||!Z&&!Y)&&Q.reverse(),J&&(Q=Q.slice(1).concat([Q[0]])),bm(Q,function(q,s){J&&(s=s===Q.length-1?0:s+1);if(!T||q>=aa.min&&q<=aa.max){N[q]||(N[q]=new b7(aa,q)),D&&N[q].isNew&&N[q].render(s,!0,0.1),N[q].render(s)}}),H&&aa.min===0&&(N[-1]||(N[-1]=new b7(aa,-1,null,!0)),N[-1].render(-1))),t&&bm(S,function(q,s){if(s%2===0&&q<aa.max){L[q]||(L[q]=new bE.PlotLineOrBand(aa)),G=q+H,p=S[s+1]!==bi?S[s+1]+H:aa.max,L[q].options={from:U?aS(G):G,to:U?aS(p):p,color:t},L[q].render(),L[q].isActive=!0}}),!aa._addedPlotLB){bm((V.plotLines||[]).concat(V.plotBands||[]),function(q){aa.addPlotBandOrLine(q)}),aa._addedPlotLB=!0}}bm([N,M,L],function(s){var q,z,x=[],v=y?y.duration||500:0,u=function(){for(z=x.length;z--;){s[x[z]]&&!s[x[z]].isActive&&(s[x[z]].destroy(),delete s[x[z]])}};for(q in s){if(!s[q].isActive){s[q].render(q,!1,0),s[q].isActive=!1,x.push(q)}}s===L||!X.hasRendered||!v?u():v&&setTimeout(u,v)});if(r){Z=aa.getLinePath(r),aa.axisLine?aa.axisLine.animate({d:Z}):aa.axisLine=W.path(Z).attr({stroke:V.lineColor,"stroke-width":r,zIndex:7}).add(aa.axisGroup),aa.axisLine[E?"show":"hide"]()}if(P&&E){P[P.isNew?"attr":"animate"](aa.getTitlePosition()),P.isNew=!1}K&&K.enabled&&aa.renderStackTotals();aa.isDirty=!1},redraw:function(){this.render();bm(this.plotLinesAndBands,function(p){p.render()});bm(this.series,function(p){p.isDirty=!0})},destroy:function(q){var p=this,t=p.stacks,s,r=p.plotLinesAndBands;q||bz(p);for(s in t){aQ(t[s]),t[s]=null}bm([p.ticks,p.minorTicks,p.alternateBands],function(u){aQ(u)});for(q=r.length;q--;){r[q].destroy()}bm("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(u){p[u]&&(p[u]=p[u].destroy())});this.cross&&this.cross.destroy()},drawCrosshair:function(q,p){if(this.crosshair){if((bg(p)||!bk(this.crosshair.snap,!0))===!1){this.hideCrosshair()}else{var t,s=this.crosshair,r=s.animation;bk(s.snap,!0)?bg(p)&&(t=this.chart.inverted!=this.horiz?p.plotX:this.len-p.plotY):t=this.horiz?q.chartX-this.pos:this.len-q.chartY+this.pos;t=this.isRadial?this.getPlotLinePath(this.isXAxis?p.x:bk(p.stackY,p.y)):this.getPlotLinePath(null,null,null,null,t);if(t===null){this.hideCrosshair()}else{if(this.cross){this.cross.attr({visibility:"visible"})[r?"animate":"attr"]({d:t},r)}else{r={"stroke-width":s.width||1,stroke:s.color||"#C0C0C0",zIndex:s.zIndex||2};if(s.dashStyle){r.dashstyle=s.dashStyle}this.cross=this.chart.renderer.path(t).attr(r).add()}}}}},hideCrosshair:function(){this.cross&&this.cross.hide()}};bh(bK.prototype,{getPlotBandPath:function(q,p){var s=this.getPlotLinePath(p),r=this.getPlotLinePath(q);r&&s?r.push(s[4],s[5],s[1],s[2]):r=null;return r},addPlotBand:function(p){return this.addPlotBandOrLine(p,"plotBands")},addPlotLine:function(p){return this.addPlotBandOrLine(p,"plotLines")},addPlotBandOrLine:function(q,p){var s=(new bE.PlotLineOrBand(this,q)).render(),r=this.userOptions;s&&(p&&(r[p]=r[p]||[],r[p].push(q)),this.plotLinesAndBands.push(s));return s},removePlotBandOrLine:function(q){for(var p=this.plotLinesAndBands,t=this.options,s=this.userOptions,r=p.length;r--;){p[r].id===q&&p[r].destroy()}bm([t.plotLines||[],s.plotLines||[],t.plotBands||[],s.plotBands||[]],function(u){for(r=u.length;r--;){u[r].id===q&&aH(u,u[r])}})}});bK.prototype.getTimeTicks=function(F,E,D,B){var A=[],z={},x=bQ.global.useUTC,v,u=new Date(E-aF),t=F.unitRange,s=F.count;if(bg(E)){t>=bM.second&&(u.setMilliseconds(0),u.setSeconds(t>=bM.minute?0:s*by(u.getSeconds()/s)));if(t>=bM.minute){u[aP](t>=bM.hour?0:s*by(u[e]()/s))}if(t>=bM.hour){u[aE](t>=bM.day?0:s*by(u[ci]()/s))}if(t>=bM.day){u[aK](t>=bM.month?1:s*by(u[bl]()/s))}t>=bM.month&&(u[av](t>=bM.year?0:s*by(u[a]()/s)),v=u[cf]());t>=bM.year&&(v-=v%s,u[al](v));if(t===bM.week){u[aK](u[bl]()-u[b4]()+bk(B,1))}E=1;aF&&(u=new Date(u.getTime()+aF));v=u[cf]();for(var B=u.getTime(),r=u[a](),q=u[bl](),p=x?aF:(86400000+u.getTimezoneOffset()*60000)%86400000;B<D;){A.push(B),t===bM.year?B=j(v+E*s,0):t===bM.month?B=j(v,r+E*s):!x&&(t===bM.day||t===bM.week)?B=j(v,r,q+E*s*(t===bM.day?1:7)):B+=t*s,E++}A.push(B);bm(a7(A,function(G){return t<=bM.hour&&G%bM.day===p}),function(G){z[G]="day"})}A.info=bh(F,{higherRanks:z,totalRange:t*s});return A};bK.prototype.normalizeTimeTickInterval=function(q,p){var v=p||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],u=v[v.length-1],t=bM[u[0]],s=u[1],r;for(r=0;r<v.length;r++){if(u=v[r],t=bM[u[0]],s=u[1],v[r+1]&&q<=(t*s[s.length-1]+bM[v[r+1][0]])/2){break}}t===bM.year&&q<5*t&&(s=[1,2,5]);v=ae(q/t,s,u[0]==="year"?be(an(q/t),1):1);return{unitRange:t,count:v,unitName:u[0]}};bK.prototype.getLogTickPositions=function(D,B,A,z){var x=this.options,v=this.len,u=[];if(!z){this._minorAutoInterval=null}if(D>=0.5){D=bf(D),u=this.getLinearTickPositions(D,B,A)}else{if(D>=0.08){for(var v=by(B),t,s,r,q,p,x=D>0.3?[1,2,4]:D>0.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];v<A+1&&!p;v++){s=x.length;for(t=0;t<s&&!p;t++){r=bZ(aS(v)*x[t]),r>B&&(!z||q<=A)&&q!==bi&&u.push(q),q>A&&(p=!0),q=r}}}else{if(B=aS(B),A=aS(A),D=x[z?"minorTickInterval":"tickInterval"],D=bk(D==="auto"?null:D,this._minorAutoInterval,(A-B)*(x.tickPixelInterval/(z?5:1))/((z?v/this.tickPositions.length:v)||1)),D=ae(D,null,an(D)),u=b5(this.getLinearTickPositions(D,B,A),bZ),!z){this._minorAutoInterval=D/5}}}if(!z){this.tickInterval=D}return u};var bX=bE.Tooltip=function(){this.init.apply(this,arguments)};bX.prototype={init:function(q,p){var t=p.borderWidth,s=p.style,r=bO(s.padding);this.chart=q;this.options=p;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=q.renderer.label("",0,0,p.shape||"callout",null,null,p.useHTML,null,"tooltip").attr({padding:r,fill:p.backgroundColor,"stroke-width":t,r:p.borderRadius,zIndex:8}).css(s).css({padding:0}).add().attr({y:-9999});k||this.label.shadow(p.shadow);this.shared=p.shared},destroy:function(){if(this.label){this.label=this.label.destroy()}clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(q,p,x,v){var u=this,t=u.now,s=u.options.animation!==!1&&!u.isHidden&&(bF(q-t.x)>1||bF(p-t.y)>1),r=u.followPointer||u.len>1;bh(t,{x:s?(2*t.x+q)/3:q,y:s?(t.y+p)/2:p,anchorX:r?bi:s?(2*t.anchorX+x)/3:x,anchorY:r?bi:s?(t.anchorY+v)/2:v});u.label.attr(t);if(s){clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){u&&u.move(q,p,x,v)},32)}},hide:function(){var q=this,p;clearTimeout(this.hideTimer);if(!this.isHidden){p=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){q.label.fadeOut();q.isHidden=!0},bk(this.options.hideDelay,500)),p&&bm(p,function(r){r.setState()}),this.chart.hoverPoints=null}},getAnchor:function(z,x){var v,u=this.chart,t=u.inverted,s=u.plotTop,r=0,q=0,p,z=b1(z);v=z[0].tooltipPos;this.followPointer&&x&&(x.chartX===bi&&(x=u.pointer.normalize(x)),v=[x.chartX-u.plotLeft,x.chartY-s]);v||(bm(z,function(A){p=A.series.yAxis;r+=A.plotX;q+=(A.plotLow?(A.plotLow+A.plotHigh)/2:A.plotY)+(!t&&p?p.top-s:0)}),r/=z.length,q/=z.length,v=[t?u.plotWidth-q:r,this.shared&&!t&&z.length>1&&x?x.chartY-s:t?u.plotHeight-r:q]);return b5(v,bf)},getPosition:function(F,E,D){var B=this.chart,A=this.distance,z={},x,v=["y",B.chartHeight,E,D.plotY+B.plotTop],u=["x",B.chartWidth,F,D.plotX+B.plotLeft],t=D.ttBelow||B.inverted&&!D.negative||!B.inverted&&D.negative,s=function(H,G,L,K){var J=L<K-A,G=K+A+L<G,L=K-A-L;K+=A;if(t&&G){z[H]=K}else{if(!t&&J){z[H]=L}else{if(J){z[H]=L}else{if(G){z[H]=K}else{return !1}}}}},r=function(H,G,K,J){if(J<A||J>G-A){return !1}else{z[H]=J<K/2?1:J>G-K/2?G-K-2:J-K/2}},q=function(H){var G=v;v=u;u=G;x=H},p=function(){s.apply(0,v)!==!1?r.apply(0,u)===!1&&!x&&(q(!0),p()):x?z.x=z.y=0:(q(!0),p())};(B.inverted||this.len>1)&&q();p();return z},defaultFormatter:function(q){var p=this.points||b1(this),s=p[0].series,r;r=[q.tooltipHeaderFormatter(p[0])];bm(p,function(t){s=t.series;r.push(s.tooltipFormatter&&s.tooltipFormatter(t)||t.point.tooltipFormatter(s.tooltipOptions.pointFormat))});r.push(q.options.footerFormat||"");return r.join("")},refresh:function(D,B){var A=this.chart,z=this.label,x=this.options,v,u,t={},s,r=[];s=x.formatter||this.defaultFormatter;var t=A.hoverPoints,q,p=this.shared;clearTimeout(this.hideTimer);this.followPointer=b1(D)[0].series.tooltipOptions.followPointer;u=this.getAnchor(D,B);v=u[0];u=u[1];p&&(!D.series||!D.series.noSharedTooltip)?(A.hoverPoints=D,t&&bm(t,function(E){E.setState()}),bm(D,function(E){E.setState("hover");r.push(E.getLabelConfig())}),t={x:D[0].category,y:D[0].y},t.points=r,this.len=r.length,D=D[0]):t=D.getLabelConfig();s=s.call(t,this);t=D.series;this.distance=bk(t.tooltipOptions.distance,16);s===!1?this.hide():(this.isHidden&&(aC(z),z.attr("opacity",1).show()),z.attr({text:s}),q=x.borderColor||D.color||t.color||"#606060",z.attr({stroke:q}),this.updatePosition({plotX:v,plotY:u,negative:D.negative,ttBelow:D.ttBelow}),this.isHidden=!1);bG(A,"tooltipRefresh",{text:s,x:v+A.plotLeft,y:u+A.plotTop,borderColor:q})},updatePosition:function(q){var p=this.chart,r=this.label,r=(this.options.positioner||this.getPosition).call(this,r.width,r.height,q);this.move(bf(r.x),bf(r.y),q.plotX+p.plotLeft,q.plotY+p.plotTop)},tooltipHeaderFormatter:function(q){var p=q.series,x=p.tooltipOptions,v=x.dateTimeLabelFormats,u=x.xDateFormat,t=p.xAxis,s=t&&t.options.type==="datetime"&&cg(q.key),x=x.headerFormat,t=t&&t.closestPointRange,r;if(s&&!u){if(t){for(r in bM){if(bM[r]>=t||bM[r]<=bM.day&&q.key%bM[r]>0){u=v[r];break}}}else{u=v.day}u=u||v.year}s&&u&&(x=x.replace("{point.key}","{point.key:"+u+"}"));return aZ(x,{point:q,series:p})}};var ao;bo=bS.documentElement.ontouchstart!==bi;var aJ=bE.Pointer=function(q,p){this.init(q,p)};aJ.prototype={init:function(q,p){var u=p.chart,t=u.events,s=k?"":u.zoomType,u=q.inverted,r;this.options=p;this.chart=q;this.zoomX=r=/x/.test(s);this.zoomY=s=/y/.test(s);this.zoomHor=r&&!u||s&&u;this.zoomVert=s&&!u||r&&u;this.hasZoom=r||s;this.runChartClick=t&&!!t.click;this.pinchDown=[];this.lastValidTouch={};if(bE.Tooltip&&p.tooltip.enabled){q.tooltip=new bX(q,p.tooltip),this.followTouchMove=p.tooltip.followTouchMove}this.setDOMEvents()},normalize:function(q,p){var s,r,q=q||window.event,q=bL(q);if(!q.target){q.target=q.srcElement}r=q.touches?q.touches.length?q.touches.item(0):q.changedTouches[0]:q;if(!p){this.chartPosition=p=b6(this.chart.container)}r.pageX===bi?(s=be(q.x,q.clientX-p.left),r=q.y):(s=r.pageX-p.left,r=r.pageY-p.top);return bh(q,{chartX:bf(s),chartY:bf(r)})},getCoordinates:function(q){var p={xAxis:[],yAxis:[]};bm(this.chart.axes,function(r){p[r.isXAxis?"xAxis":"yAxis"].push({axis:r,value:r.toValue(q[r.horiz?"chartX":"chartY"])})});return p},getIndex:function(q){var p=this.chart;return p.inverted?p.plotHeight+p.plotTop-q.chartY:q.chartX-p.plotLeft},runPointActions:function(D){var B=this.chart,A=B.series,z=B.tooltip,x,v,u=B.hoverPoint,t=B.hoverSeries,s,r,q=B.chartWidth,p=this.getIndex(D);if(z&&this.options.tooltip.shared&&(!t||!t.noSharedTooltip)){v=[];s=A.length;for(r=0;r<s;r++){if(A[r].visible&&A[r].options.enableMouseTracking!==!1&&!A[r].noSharedTooltip&&A[r].singularTooltips!==!0&&A[r].tooltipPoints.length&&(x=A[r].tooltipPoints[p])&&x.series){x._dist=bF(p-x.clientX),q=bU(q,x._dist),v.push(x)}}for(s=v.length;s--;){v[s]._dist>q&&v.splice(s,1)}if(v.length&&v[0].clientX!==this.hoverX){z.refresh(v,D),this.hoverX=v[0].clientX}}A=t&&t.tooltipOptions.followPointer;if(t&&t.tracker&&!A){if((x=t.tooltipPoints[p])&&x!==u){x.onMouseOver(D)}}else{z&&A&&!z.isHidden&&(t=z.getAnchor([{}],D),z.updatePosition({plotX:t[0],plotY:t[1]}))}if(z&&!this._onDocumentMouseMove){this._onDocumentMouseMove=function(E){if(bP[ao]){bP[ao].pointer.onDocumentMouseMove(E)}},a8(bS,"mousemove",this._onDocumentMouseMove)}bm(B.axes,function(E){E.drawCrosshair(D,bk(x,u))})},reset:function(q){var p=this.chart,u=p.hoverSeries,t=p.hoverPoint,s=p.tooltip,r=s&&s.shared?p.hoverPoints:t;(q=q&&s&&r)&&b1(r)[0].plotX===bi&&(q=!1);if(q){s.refresh(r),t&&t.setState(t.state,!0)}else{if(t){t.onMouseOut()}if(u){u.onMouseOut()}s&&s.hide();if(this._onDocumentMouseMove){bz(bS,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null}bm(p.axes,function(v){v.hideCrosshair()});this.hoverX=null}},scaleGroups:function(q,p){var s=this.chart,r;bm(s.series,function(t){r=q||t.getPlotBox();t.xAxis&&t.xAxis.zoomEnabled&&(t.group.attr(r),t.markerGroup&&(t.markerGroup.attr(r),t.markerGroup.clip(p?s.clipRect:null)),t.dataLabelsGroup&&t.dataLabelsGroup.attr(r))});s.clipRect.attr(p||s.clipBox)},dragStart:function(q){var p=this.chart;p.mouseIsDown=q.type;p.cancelClick=!1;p.mouseDownX=this.mouseDownX=q.chartX;p.mouseDownY=this.mouseDownY=q.chartY},drag:function(G){var F=this.chart,E=F.options.chart,D=G.chartX,B=G.chartY,A=this.zoomHor,z=this.zoomVert,x=F.plotLeft,v=F.plotTop,u=F.plotWidth,t=F.plotHeight,s,r=this.mouseDownX,q=this.mouseDownY,p=E.panKey&&G[E.panKey+"Key"];D<x?D=x:D>x+u&&(D=x+u);B<v?B=v:B>v+t&&(B=v+t);this.hasDragged=Math.sqrt(Math.pow(r-D,2)+Math.pow(q-B,2));if(this.hasDragged>10){s=F.isInsidePlot(r-x,q-v);if(F.hasCartesianSeries&&(this.zoomX||this.zoomY)&&s&&!p&&!this.selectionMarker){this.selectionMarker=F.renderer.rect(x,v,A?1:u,z?1:t,0).attr({fill:E.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()}this.selectionMarker&&A&&(D-=r,this.selectionMarker.attr({width:bF(D),x:(D>0?0:D)+r}));this.selectionMarker&&z&&(D=B-q,this.selectionMarker.attr({height:bF(D),y:(D>0?0:D)+q}));s&&!this.selectionMarker&&E.panning&&F.pan(G,E.panning)}},drop:function(A){var z=this.chart,x=this.hasPinched;if(this.selectionMarker){var v={xAxis:[],yAxis:[],originalEvent:A.originalEvent||A},u=this.selectionMarker,t=u.attr?u.attr("x"):u.x,s=u.attr?u.attr("y"):u.y,r=u.attr?u.attr("width"):u.width,q=u.attr?u.attr("height"):u.height,p;if(this.hasDragged||x){bm(z.axes,function(B){if(B.zoomEnabled){var F=B.horiz,D=A.type==="touchend"?B.minPixelPadding:0,E=B.toValue((F?t:s)+D),F=B.toValue((F?t+r:s+q)-D);!isNaN(E)&&!isNaN(F)&&(v[B.coll].push({axis:B,min:bU(E,F),max:be(E,F)}),p=!0)}}),p&&bG(z,"selection",v,function(B){z.zoom(bh(B,x?{animation:!1}:null))})}this.selectionMarker=this.selectionMarker.destroy();x&&this.scaleGroups()}if(z){bJ(z.container,{cursor:z._cursor}),z.cancelClick=this.hasDragged>10,z.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[]}},onContainerMouseDown:function(p){p=this.normalize(p);p.preventDefault&&p.preventDefault();this.dragStart(p)},onDocumentMouseUp:function(p){bP[ao]&&bP[ao].pointer.drop(p)},onDocumentMouseMove:function(q){var p=this.chart,s=this.chartPosition,r=p.hoverSeries,q=this.normalize(q,s);s&&r&&!this.inClass(q.target,"highcharts-tracker")&&!p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop)&&this.reset()},onContainerMouseLeave:function(){var p=bP[ao];if(p){p.pointer.reset(),p.pointer.chartPosition=null}},onContainerMouseMove:function(q){var p=this.chart;ao=p.index;q=this.normalize(q);q.returnValue=!1;p.mouseIsDown==="mousedown"&&this.drag(q);(this.inClass(q.target,"highcharts-tracker")||p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop))&&!p.openMenu&&this.runPointActions(q)},inClass:function(q,p){for(var r;q;){if(r=bv(q,"class")){if(r.indexOf(p)!==-1){return !0}else{if(r.indexOf("highcharts-container")!==-1){return !1}}}q=q.parentNode}},onTrackerMouseOut:function(q){var p=this.chart.hoverSeries,r=(q=q.relatedTarget||q.toElement)&&q.point&&q.point.series;if(p&&!p.options.stickyTracking&&!this.inClass(q,"highcharts-tooltip")&&r!==p){p.onMouseOut()}},onContainerClick:function(q){var p=this.chart,t=p.hoverPoint,s=p.plotLeft,r=p.plotTop,q=this.normalize(q);q.cancelBubble=!0;p.cancelClick||(t&&this.inClass(q.target,"highcharts-tracker")?(bG(t.series,"click",bh(q,{point:t})),p.hoverPoint&&t.firePointEvent("click",q)):(bh(q,this.getCoordinates(q)),p.isInsidePlot(q.chartX-s,q.chartY-r)&&bG(p,"click",q)))},setDOMEvents:function(){var q=this,p=q.chart.container;p.onmousedown=function(r){q.onContainerMouseDown(r)};p.onmousemove=function(r){q.onContainerMouseMove(r)};p.onclick=function(r){q.onContainerClick(r)};a8(p,"mouseleave",q.onContainerMouseLeave);aN===1&&a8(bS,"mouseup",q.onDocumentMouseUp);if(bo){p.ontouchstart=function(r){q.onContainerTouchStart(r)},p.ontouchmove=function(r){q.onContainerTouchMove(r)},aN===1&&a8(bS,"touchend",q.onDocumentTouchEnd)}},destroy:function(){var p;bz(this.chart.container,"mouseleave",this.onContainerMouseLeave);aN||(bz(bS,"mouseup",this.onDocumentMouseUp),bz(bS,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(p in this){this[p]=null}}};bh(bE.Pointer.prototype,{pinchTranslate:function(q,p,u,t,s,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,q,p,u,t,s,r);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,q,p,u,t,s,r)},pinchTranslateDirection:function(ab,aa,Z,Y,X,W,V,U){var T=this.chart,S=ab?"x":"y",Q=ab?"X":"Y",P="chart"+Q,N=ab?"width":"height",M=T["plot"+(ab?"Left":"Top")],L,z,J=U||1,K=T.inverted,B=T.bounds[ab?"h":"v"],H=aa.length===1,E=aa[0][P],G=Z[0][P],D=!H&&aa[1][P],F=!H&&Z[1][P],A,Z=function(){!H&&bF(E-D)>20&&(J=U||bF(G-F)/bF(E-D));z=(M-G)/J+E;L=T["plot"+(ab?"Width":"Height")]/J};Z();aa=z;aa<B.min?(aa=B.min,A=!0):aa+L>B.max&&(aa=B.max-L,A=!0);A?(G-=0.8*(G-V[S][0]),H||(F-=0.8*(F-V[S][1])),Z()):V[S]=[G,F];K||(W[S]=z-M,W[N]=L);W=K?1/J:J;X[N]=L;X[S]=aa;Y[K?ab?"scaleY":"scaleX":"scale"+Q]=J;Y["translate"+Q]=W*M+(G-W*E)},pinch:function(E){var D=this,B=D.chart,A=D.pinchDown,z=D.followTouchMove,x=E.touches,v=x.length,u=D.lastValidTouch,t=D.hasZoom,s=D.selectionMarker,r={},q=v===1&&(D.inClass(E.target,"highcharts-tracker")&&B.runTrackerClick||B.runChartClick),p={};(t||z)&&!q&&E.preventDefault();b5(x,function(F){return D.normalize(F)});if(E.type==="touchstart"){bm(x,function(G,F){A[F]={chartX:G.chartX,chartY:G.chartY}}),u.x=[A[0].chartX,A[1]&&A[1].chartX],u.y=[A[0].chartY,A[1]&&A[1].chartY],bm(B.axes,function(G){if(G.zoomEnabled){var F=B.bounds[G.horiz?"h":"v"],L=G.minPixelPadding,K=G.toPixels(bk(G.options.min,G.dataMin)),J=G.toPixels(bk(G.options.max,G.dataMax)),H=bU(K,J),K=be(K,J);F.min=bU(G.pos,H-L);F.max=be(G.pos+G.len,K+L)}})}else{if(A.length){if(!s){D.selectionMarker=s=bh({destroy:a9},B.plotBox)}D.pinchTranslate(A,x,r,s,p,u);D.hasPinched=t;D.scaleGroups(r,p);!t&&z&&v===1&&this.runPointActions(D.normalize(E))}}},onContainerTouchStart:function(q){var p=this.chart;ao=p.index;q.touches.length===1?(q=this.normalize(q),p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop)?(this.runPointActions(q),this.pinch(q)):this.reset()):q.touches.length===2&&this.pinch(q)},onContainerTouchMove:function(p){(p.touches.length===1||p.touches.length===2)&&this.pinch(p)},onDocumentTouchEnd:function(p){bP[ao]&&bP[ao].pointer.drop(p)}});if(bB.PointerEvent||bB.MSPointerEvent){var aL={},bq=!!bB.PointerEvent,aM=function(){var q,p=[];p.item=function(r){return this[r]};for(q in aL){aL.hasOwnProperty(q)&&p.push({pageX:aL[q].pageX,pageY:aL[q].pageY,target:aL[q].target})}return p},a5=function(q,p,s,r){q=q.originalEvent||q;if((q.pointerType==="touch"||q.pointerType===q.MSPOINTER_TYPE_TOUCH)&&bP[ao]){r(q),r=bP[ao].pointer,r[p]({type:s,target:q.currentTarget,preventDefault:a9,touches:aM()})}};bh(aJ.prototype,{onContainerPointerDown:function(p){a5(p,"onContainerTouchStart","touchstart",function(q){aL[q.pointerId]={pageX:q.pageX,pageY:q.pageY,target:q.currentTarget}})},onContainerPointerMove:function(p){a5(p,"onContainerTouchMove","touchmove",function(q){aL[q.pointerId]={pageX:q.pageX,pageY:q.pageY};if(!aL[q.pointerId].target){aL[q.pointerId].target=q.currentTarget}})},onDocumentPointerUp:function(p){a5(p,"onContainerTouchEnd","touchend",function(q){delete aL[q.pointerId]})},batchMSEvents:function(p){p(this.chart.container,bq?"pointerdown":"MSPointerDown",this.onContainerPointerDown);p(this.chart.container,bq?"pointermove":"MSPointerMove",this.onContainerPointerMove);p(bS,bq?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});bH(aJ.prototype,"init",function(q,p,r){q.call(this,p,r);(this.hasZoom||this.followTouchMove)&&bJ(p.container,{"-ms-touch-action":b9,"touch-action":b9})});bH(aJ.prototype,"setDOMEvents",function(p){p.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(a8)});bH(aJ.prototype,"destroy",function(p){this.batchMSEvents(bz);p.call(this)})}var aR=bE.Legend=function(q,p){this.init(q,p)};aR.prototype={init:function(q,p){var u=this,t=p.itemStyle,s=bk(p.padding,8),r=p.itemMarginTop||0;this.options=p;if(p.enabled){u.itemStyle=t,u.itemHiddenStyle=bd(t,p.itemHiddenStyle),u.itemMarginTop=r,u.padding=s,u.initialItemX=s,u.initialItemY=s-5,u.maxItemWidth=0,u.chart=q,u.itemHeight=0,u.lastLineHeight=0,u.symbolWidth=bk(p.symbolWidth,16),u.pages=[],u.render(),a8(u.chart,"endResize",function(){u.positionCheckboxes()})}},colorizeItem:function(A,z){var x=this.options,v=A.legendItem,u=A.legendLine,t=A.legendSymbol,s=this.itemHiddenStyle.color,x=z?x.itemStyle.color:s,r=z?A.legendColor||A.color||"#CCC":s,s=A.options&&A.options.marker,q={fill:r},p;v&&v.css({fill:x,color:x});u&&u.attr({stroke:r});if(t){if(s&&t.isMarker){for(p in q.stroke=r,s=A.convertAttribs(s),s){v=s[p],v!==bi&&(q[p]=v)}}t.attr(q)}},positionItem:function(q){var p=this.options,u=p.symbolPadding,p=!p.rtl,t=q._legendItemPos,s=t[0],t=t[1],r=q.checkbox;q.legendGroup&&q.legendGroup.translate(p?s:this.legendWidth-s-2*u-4,t);if(r){r.x=s,r.y=t}},destroyItem:function(q){var p=q.checkbox;bm(["legendItem","legendLine","legendSymbol","legendGroup"],function(r){q[r]&&(q[r]=q[r].destroy())});p&&b3(q.checkbox)},destroy:function(){var q=this.group,p=this.box;if(p){this.box=p.destroy()}if(q){this.group=q.destroy()}},positionCheckboxes:function(q){var p=this.group.alignAttr,s,r=this.clipHeight||this.legendHeight;if(p){s=p.translateY,bm(this.allItems,function(v){var u=v.checkbox,t;u&&(t=s+u.y+(q||0)+3,bJ(u,{left:p.translateX+v.checkboxOffset+u.x-20+"px",top:t+"px",display:t>s-6&&t<s+r-6?"":b9}))})}},renderTitle:function(){var q=this.padding,p=this.options.title,r=0;if(p.text){if(!this.title){this.title=this.chart.renderer.label(p.text,q-3,q-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(p.style).add(this.group)}q=this.title.getBBox();r=q.height;this.offsetWidth=q.width;this.contentGroup.attr({translateY:r})}this.titleHeight=r},renderItem:function(Q){var P=this.chart,N=P.renderer,M=this.options,L=M.layout==="horizontal",K=this.symbolWidth,J=M.symbolPadding,H=this.itemStyle,G=this.itemHiddenStyle,F=this.padding,E=L?bk(M.itemDistance,20):0,D=!M.rtl,B=M.width,A=M.itemMarginBottom||0,z=this.itemMarginTop,q=this.initialItemX,x=Q.legendItem,v=Q.series&&Q.series.drawLegendSymbol?Q.series:Q,t=v.options,t=this.createCheckboxForItem&&t&&t.showCheckbox,u=M.useHTML;if(!x){Q.legendGroup=N.g("legend-item").attr({zIndex:1}).add(this.scrollGroup);Q.legendItem=x=N.text(M.labelFormat?aZ(M.labelFormat,Q):M.labelFormatter.call(Q),D?K+J:-J,this.baseline||0,u).css(bd(Q.visible?H:G)).attr({align:D?"left":"right",zIndex:2}).add(Q.legendGroup);if(!this.baseline){this.baseline=N.fontMetrics(H.fontSize,x).f+3+z,x.attr("y",this.baseline)}v.drawLegendSymbol(this,Q);this.setItemEvents&&this.setItemEvents(Q,x,u,H,G);this.colorizeItem(Q,Q.visible);t&&this.createCheckboxForItem(Q)}N=x.getBBox();K=Q.checkboxOffset=M.itemWidth||Q.legendItemWidth||K+J+N.width+E+(t?20:0);this.itemHeight=J=bf(Q.legendItemHeight||N.height);if(L&&this.itemX-q+K>(B||P.chartWidth-2*F-q-M.x)){this.itemX=q,this.itemY+=z+this.lastLineHeight+A,this.lastLineHeight=0}this.maxItemWidth=be(this.maxItemWidth,K);this.lastItemY=z+this.itemY+A;this.lastLineHeight=be(J,this.lastLineHeight);Q._legendItemPos=[this.itemX,this.itemY];L?this.itemX+=K:(this.itemY+=z+J+A,this.lastLineHeight=J);this.offsetWidth=B||be((L?this.itemX-q-E:K)+F,this.offsetWidth)},getAllItems:function(){var p=[];bm(this.chart.series,function(q){var r=q.options;if(bk(r.showInLegend,!bg(r.linkedTo)?bi:!1,!0)){p=p.concat(q.legendItems||(r.legendType==="point"?q.data:q))}});return p},render:function(){var E=this,D=E.chart,B=D.renderer,A=E.group,z,x,v,u,t=E.box,s=E.options,r=E.padding,q=s.borderWidth,p=s.backgroundColor;E.itemX=E.initialItemX;E.itemY=E.initialItemY;E.offsetWidth=0;E.lastItemY=0;if(!A){E.group=A=B.g("legend").attr({zIndex:7}).add(),E.contentGroup=B.g().attr({zIndex:1}).add(A),E.scrollGroup=B.g().add(E.contentGroup)}E.renderTitle();z=E.getAllItems();n(z,function(G,F){return(G.options&&G.options.legendIndex||0)-(F.options&&F.options.legendIndex||0)});s.reversed&&z.reverse();E.allItems=z;E.display=x=!!z.length;bm(z,function(F){E.renderItem(F)});v=s.width||E.offsetWidth;u=E.lastItemY+E.lastLineHeight+E.titleHeight;u=E.handleOverflow(u);if(q||p){v+=r;u+=r;if(t){if(v>0&&u>0){t[t.isNew?"attr":"animate"](t.crisp({width:v,height:u})),t.isNew=!1}}else{E.box=t=B.rect(0,0,v,u,s.borderRadius,q||0).attr({stroke:s.borderColor,"stroke-width":q||0,fill:p||b9}).add(A).shadow(s.shadow),t.isNew=!0}t[x?"show":"hide"]()}E.legendWidth=v;E.legendHeight=u;bm(z,function(F){E.positionItem(F)});x&&A.align(bh({width:v,height:u},s),!0,"spacingBox");D.isResizing||this.positionCheckboxes()},handleOverflow:function(H){var G=this,E=this.chart,D=E.renderer,B=this.options,A=B.y,A=E.spacingBox.height+(B.verticalAlign==="top"?-A:A)-this.padding,z=B.maxHeight,x,v=this.clipRect,u=B.navigation,t=bk(u.animation,!0),s=u.arrowSize||12,r=this.nav,q=this.pages,p,F=this.allItems;B.layout==="horizontal"&&(A/=2);z&&(A=bU(A,z));q.length=0;if(H>A&&!B.useHTML){this.clipHeight=x=be(A-20-this.titleHeight-this.padding,0);this.currentPage=bk(this.currentPage,1);this.fullHeight=H;bm(F,function(K,J){var N=K._legendItemPos[1],M=bf(K.legendItem.getBBox().height),L=q.length;if(!L||N-q[L-1]>x&&(p||N)!==q[L-1]){q.push(p||N),L++}J===F.length-1&&N+M-q[L-1]>x&&q.push(N);N!==p&&(p=N)});if(!v){v=G.clipRect=D.clipRect(0,this.padding,9999,0),G.contentGroup.clip(v)}v.attr({height:x});if(!r){this.nav=r=D.g().attr({zIndex:1}).add(this.group),this.up=D.symbol("triangle",0,0,s,s).on("click",function(){G.scroll(-1,t)}).add(r),this.pager=D.text("",15,10).css(u.style).add(r),this.down=D.symbol("triangle-down",0,0,s,s).on("click",function(){G.scroll(1,t)}).add(r)}G.scroll(0);H=A}else{if(r){v.attr({height:E.chartHeight}),r.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0}}return H},scroll:function(A,z){var x=this.pages,v=x.length,u=this.currentPage+A,t=this.clipHeight,s=this.options.navigation,r=s.activeColor,s=s.inactiveColor,q=this.pager,p=this.padding;u>v&&(u=v);if(u>0){z!==bi&&bW(z,this.chart),this.nav.attr({translateX:p,translateY:t+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:u===1?s:r}).css({cursor:u===1?"default":"pointer"}),q.attr({text:u+"/"+v}),this.down.attr({x:18+this.pager.getBBox().width,fill:u===v?s:r}).css({cursor:u===v?"default":"pointer"}),x=-x[u-1]+this.initialItemY,this.scrollGroup.animate({translateY:x}),this.currentPage=u,this.positionCheckboxes(x)}}};bA=bE.LegendSymbolMixin={drawRectangle:function(q,p){var r=q.options.symbolHeight||12;p.legendSymbol=this.chart.renderer.rect(0,q.baseline-5-r/2,q.symbolWidth,r,q.options.symbolRadius||0).attr({zIndex:3}).add(p.legendGroup)},drawLineMarker:function(q){var p=this.options,v=p.marker,u;u=q.symbolWidth;var t=this.chart.renderer,s=this.legendGroup,q=q.baseline-bf(t.fontMetrics(q.options.itemStyle.fontSize,this.legendItem).b*0.3),r;if(p.lineWidth){r={"stroke-width":p.lineWidth};if(p.dashStyle){r.dashstyle=p.dashStyle}this.legendLine=t.path(["M",0,q,"L",u,q]).attr(r).add(s)}if(v&&v.enabled!==!1){p=v.radius,this.legendSymbol=u=t.symbol(this.symbol,u/2-p,q-p,2*p,2*p).add(s),u.isMarker=!0}}};(/Trident\/7\.0/.test(h)||bN)&&bH(aR.prototype,"positionItem",function(q,p){var s=this,r=function(){p._legendItemPos&&q.call(s,p)};r();setTimeout(r)});f.prototype={init:function(q,p){var v,u=q.series;q.series=null;v=bd(bQ,q);v.series=q.series=u;this.userOptions=q;u=v.chart;this.margin=this.splashArray("margin",u);this.spacing=this.splashArray("spacing",u);var t=u.events;this.bounds={h:{},v:{}};this.callback=p;this.isResizing=0;this.options=v;this.axes=[];this.series=[];this.hasCartesianSeries=u.showAxes;var s=this,r;s.index=bP.length;bP.push(s);aN++;u.reflow!==!1&&a8(s,"load",function(){s.initReflow()});if(t){for(r in t){a8(s,r,t[r])}}s.xAxis=[];s.yAxis=[];s.animation=k?!1:bk(u.animation,!0);s.pointCount=s.colorCounter=s.symbolCounter=0;s.firstRender()},initSeries:function(q){var p=this.options.chart;(p=bT[q.type||p.type||p.defaultSeriesType])||bt(17,!0);p=new p;p.init(this,q);return p},isInsidePlot:function(q,p,s){var r=s?p:q,q=s?q:p;return r>=0&&r<=this.plotWidth&&q>=0&&q<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&bm(this.axes,function(p){p.adjustTickAmount()});this.maxTicks=null},redraw:function(G){var F=this.axes,E=this.series,D=this.pointer,B=this.legend,A=this.isDirtyLegend,z,x,v=this.hasCartesianSeries,u=this.isDirtyBox,t=E.length,s=t,r=this.renderer,q=r.isHidden(),p=[];bW(G,this);q&&this.cloneRenderTo();for(this.layOutTitles();s--;){if(G=E[s],G.options.stacking&&(z=!0,G.isDirty)){x=!0;break}}if(x){for(s=t;s--;){if(G=E[s],G.options.stacking){G.isDirty=!0}}}bm(E,function(H){H.isDirty&&H.options.legendType==="point"&&(A=!0)});if(A&&B.options.enabled){B.render(),this.isDirtyLegend=!1}z&&this.getStacks();if(v){if(!this.isResizing){this.maxTicks=null,bm(F,function(H){H.setScale()})}this.adjustTickAmounts()}this.getMargins();v&&(bm(F,function(H){H.isDirty&&(u=!0)}),bm(F,function(H){if(H.isDirtyExtremes){H.isDirtyExtremes=!1,p.push(function(){bG(H,"afterSetExtremes",bh(H.eventArgs,H.getExtremes()));delete H.eventArgs})}(u||z)&&H.redraw()}));u&&this.drawChartBox();bm(E,function(H){H.isDirty&&H.visible&&(!H.isCartesian||H.xAxis)&&H.redraw()});D&&D.reset(!0);r.draw();bG(this,"redraw");q&&this.cloneRenderTo(!0);bm(p,function(H){H.call()})},get:function(q){var p=this.axes,t=this.series,s,r;for(s=0;s<p.length;s++){if(p[s].options.id===q){return p[s]}}for(s=0;s<t.length;s++){if(t[s].options.id===q){return t[s]}}for(s=0;s<t.length;s++){r=t[s].points||[];for(p=0;p<r.length;p++){if(r[p].id===q){return r[p]}}}return null},getAxes:function(){var q=this,p=this.options,r=p.xAxis=b1(p.xAxis||{}),p=p.yAxis=b1(p.yAxis||{});bm(r,function(t,s){t.index=s;t.isX=!0});bm(p,function(t,s){t.index=s});r=r.concat(p);bm(r,function(s){new bK(q,s)});q.adjustTickAmounts()},getSelectedPoints:function(){var p=[];bm(this.series,function(q){p=p.concat(a7(q.points||[],function(r){return r.selected}))});return p},getSelectedSeries:function(){return a7(this.series,function(p){return p.selected})},getStacks:function(){var p=this;bm(p.yAxis,function(q){if(q.stacks&&q.hasVisibleSeries){q.oldStacks=q.stacks}});bm(p.series,function(q){if(q.options.stacking&&(q.visible===!0||p.options.chart.ignoreHiddenSeries===!1)){q.stackKey=q.type+bk(q.options.stack,"")}})},setTitle:function(q,p,v){var r;var u=this,t=u.options,s;s=t.title=bd(t.title,q);r=t.subtitle=bd(t.subtitle,p),t=r;bm([["title",q,s],["subtitle",p,t]],function(z){var x=z[0],B=u[x],A=z[1],z=z[2];B&&A&&(u[x]=B=B.destroy());z&&z.text&&!B&&(u[x]=u.renderer.text(z.text,0,0,z.useHTML).attr({align:z.align,"class":"highcharts-"+x,zIndex:z.zIndex||4}).css(z.style).add())});u.layOutTitles(v)},layOutTitles:function(q){var p=0,x=this.title,v=this.subtitle,u=this.options,t=u.title,u=u.subtitle,s=this.renderer,r=this.spacingBox.width-44;if(x&&(x.css({width:(t.width||r)+"px"}).align(bh({y:s.fontMetrics(t.style.fontSize,x).b-3},t),!1,"spacingBox"),!t.floating&&!t.verticalAlign)){p=x.getBBox().height}v&&(v.css({width:(u.width||r)+"px"}).align(bh({y:p+(t.margin-13)+s.fontMetrics(t.style.fontSize,v).b},u),!1,"spacingBox"),!u.floating&&!u.verticalAlign&&(p=a2(p+v.getBBox().height)));x=this.titleOffset!==p;this.titleOffset=p;if(!this.isDirtyBox&&x){this.isDirtyBox=x,this.hasRendered&&bk(q,!0)&&this.isDirtyBox&&this.redraw()}},getChartSize:function(){var q=this.options.chart,p=q.width,q=q.height,r=this.renderToClone||this.renderTo;if(!bg(p)){this.containerWidth=bs(r,"width")}if(!bg(q)){this.containerHeight=bs(r,"height")}this.chartWidth=be(0,p||this.containerWidth||600);this.chartHeight=be(0,bk(q,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(q){var p=this.renderToClone,r=this.container;q?p&&(this.renderTo.appendChild(r),b3(p),delete this.renderToClone):(r&&r.parentNode===this.renderTo&&this.renderTo.removeChild(r),this.renderToClone=p=this.renderTo.cloneNode(0),bJ(p,{position:"absolute",top:"-9999px",display:"block"}),p.style.setProperty&&p.style.setProperty("display","block","important"),bS.body.appendChild(p),r&&p.appendChild(r))},getContainer:function(){var q,p=this.options.chart,t,s,r;this.renderTo=q=p.renderTo;r="highcharts-"+w++;if(ad(q)){this.renderTo=q=bS.getElementById(q)}q||bt(13,!0);t=bO(bv(q,"data-highcharts-chart"));!isNaN(t)&&bP[t]&&bP[t].hasRendered&&bP[t].destroy();bv(q,"data-highcharts-chart",this.index);q.innerHTML="";!p.skipClone&&!q.offsetWidth&&this.cloneRenderTo();this.getChartSize();t=this.chartWidth;s=this.chartHeight;this.container=q=b8(bD,{className:"highcharts-container"+(p.className?" "+p.className:""),id:r},bh({position:"relative",overflow:"hidden",width:t+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},p.style),this.renderToClone||q);this._cursor=q.style.cursor;this.renderer=p.forExport?new b(q,t,s,p.style,!0):new aU(q,t,s,p.style);k&&this.renderer.create(this,q,t,s)},getMargins:function(){var B=this.spacing,A,z=this.legend,x=this.margin,v=this.options.legend,u=bk(v.margin,20),t=v.x,s=v.y,r=v.align,q=v.verticalAlign,p=this.titleOffset;this.resetMargins();A=this.axisOffset;if(p&&!bg(x[0])){this.plotTop=be(this.plotTop,p+this.options.title.margin+B[0])}if(z.display&&!v.floating){if(r==="right"){if(!bg(x[1])){this.marginRight=be(this.marginRight,z.legendWidth-t+u+B[1])}}else{if(r==="left"){if(!bg(x[3])){this.plotLeft=be(this.plotLeft,z.legendWidth+t+u+B[3])}}else{if(q==="top"){if(!bg(x[0])){this.plotTop=be(this.plotTop,z.legendHeight+s+u+B[0])}}else{if(q==="bottom"&&!bg(x[2])){this.marginBottom=be(this.marginBottom,z.legendHeight-s+u+B[2])}}}}}this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&bm(this.axes,function(D){D.getOffset()});bg(x[3])||(this.plotLeft+=A[3]);bg(x[0])||(this.plotTop+=A[0]);bg(x[2])||(this.marginBottom+=A[2]);bg(x[1])||(this.marginRight+=A[1]);this.setChartSize()},reflow:function(q){var p=this,u=p.options.chart,t=p.renderTo,s=u.width||bs(t,"width"),r=u.height||bs(t,"height"),u=q?q.target:bB,t=function(){if(p.container){p.setSize(s,r,!1),p.hasUserSize=null}};if(!p.hasUserSize&&s&&r&&(u===bB||u===bS)){if(s!==p.containerWidth||r!==p.containerHeight){clearTimeout(p.reflowTimeout),q?p.reflowTimeout=setTimeout(t,100):t()}p.containerWidth=s;p.containerHeight=r}},initReflow:function(){var q=this,p=function(r){q.reflow(r)};a8(bB,"resize",p);a8(q,"destroy",function(){bz(bB,"resize",p)})},setSize:function(q,p,v){var u=this,t,s,r;u.isResizing+=1;r=function(){u&&bG(u,"endResize",null,function(){u.isResizing-=1})};bW(v,u);u.oldChartHeight=u.chartHeight;u.oldChartWidth=u.chartWidth;if(bg(q)){u.chartWidth=t=be(0,bf(q)),u.hasUserSize=!!t}if(bg(p)){u.chartHeight=s=be(0,bf(p))}(y?a0:bJ)(u.container,{width:t+"px",height:s+"px"},y);u.setChartSize(!0);u.renderer.setSize(t,s,v);u.maxTicks=null;bm(u.axes,function(x){x.isDirty=!0;x.setScale()});bm(u.series,function(x){x.isDirty=!0});u.isDirtyLegend=!0;u.isDirtyBox=!0;u.layOutTitles();u.getMargins();u.redraw(v);u.oldChartHeight=null;bG(u,"resize");y===!1?r():setTimeout(r,y&&y.duration||500)},setChartSize:function(D){var B=this.inverted,A=this.renderer,z=this.chartWidth,x=this.chartHeight,v=this.options.chart,u=this.spacing,t=this.clipOffset,s,r,q,p;this.plotLeft=s=bf(this.plotLeft);this.plotTop=r=bf(this.plotTop);this.plotWidth=q=be(0,bf(z-s-this.marginRight));this.plotHeight=p=be(0,bf(x-r-this.marginBottom));this.plotSizeX=B?p:q;this.plotSizeY=B?q:p;this.plotBorderWidth=v.plotBorderWidth||0;this.spacingBox=A.spacingBox={x:u[3],y:u[0],width:z-u[3]-u[1],height:x-u[0]-u[2]};this.plotBox=A.plotBox={x:s,y:r,width:q,height:p};z=2*by(this.plotBorderWidth/2);B=a2(be(z,t[3])/2);A=a2(be(z,t[0])/2);this.clipBox={x:B,y:A,width:by(this.plotSizeX-be(z,t[1])/2-B),height:be(0,by(this.plotSizeY-be(z,t[2])/2-A))};D||bm(this.axes,function(E){E.setAxisSize();E.setAxisTranslation()})},resetMargins:function(){var q=this.spacing,p=this.margin;this.plotTop=bk(p[0],q[0]);this.marginRight=bk(p[1],q[1]);this.marginBottom=bk(p[2],q[2]);this.plotLeft=bk(p[3],q[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var T=this.options.chart,S=this.renderer,Q=this.chartWidth,P=this.chartHeight,N=this.chartBackground,M=this.plotBackground,L=this.plotBorder,K=this.plotBGImage,J=T.borderWidth||0,H=T.backgroundColor,G=T.plotBackgroundColor,F=T.plotBackgroundImage,E=T.plotBorderWidth||0,D,B=this.plotLeft,s=this.plotTop,z=this.plotWidth,A=this.plotHeight,t=this.plotBox,x=this.clipRect,v=this.clipBox;D=J+(T.shadow?8:0);if(J||H){if(N){N.animate(N.crisp({width:Q-D,height:P-D}))}else{N={fill:H||b9};if(J){N.stroke=T.borderColor,N["stroke-width"]=J}this.chartBackground=S.rect(D/2,D/2,Q-D,P-D,T.borderRadius,J).attr(N).addClass("highcharts-background").add().shadow(T.shadow)}}if(G){M?M.animate(t):this.plotBackground=S.rect(B,s,z,A,0).attr({fill:G}).add().shadow(T.plotShadow)}if(F){K?K.animate(t):this.plotBGImage=S.image(F,B,s,z,A).add()}x?x.animate({width:v.width,height:v.height}):this.clipRect=S.clipRect(v);if(E){L?L.animate(L.crisp({x:B,y:s,width:z,height:A})):this.plotBorder=S.rect(B,s,z,A,0,-E).attr({stroke:T.plotBorderColor,"stroke-width":E,fill:b9,zIndex:1}).add()}this.isDirtyBox=!1},propFromSeries:function(){var q=this,p=q.options.chart,u,t=q.options.series,s,r;bm(["inverted","angular","polar"],function(v){u=bT[p.type||p.defaultSeriesType];r=q[v]||p[v]||u&&u.prototype[v];for(s=t&&t.length;!r&&s--;){(u=bT[t[s].type])&&u.prototype[v]&&(r=!0)}q[v]=r})},linkSeries:function(){var q=this,p=q.series;bm(p,function(r){r.linkedSeries.length=0});bm(p,function(r){var s=r.options.linkedTo;if(ad(s)&&(s=s===":previous"?q.series[r.index-1]:q.get(s))){s.linkedSeries.push(r),r.linkedParent=s}})},renderSeries:function(){bm(this.series,function(p){p.translate();p.setTooltipPoints&&p.setTooltipPoints();p.render()})},renderLabels:function(){var q=this,p=q.options.labels;p.items&&bm(p.items,function(u){var t=bh(p.style,u.style),s=bO(t.left)+q.plotLeft,r=bO(t.top)+q.plotTop+12;delete t.left;delete t.top;q.renderer.text(u.html,s,r).attr({zIndex:2}).css(t).add()})},render:function(){var q=this.axes,p=this.renderer,r=this.options;this.setTitle();this.legend=new aR(this,r.legend);this.getStacks();bm(q,function(s){s.setScale()});this.getMargins();this.maxTicks=null;bm(q,function(s){s.setTickPositions(!0);s.setMaxTicks()});this.adjustTickAmounts();this.getMargins();this.drawChartBox();this.hasCartesianSeries&&bm(q,function(s){s.render()});if(!this.seriesGroup){this.seriesGroup=p.g("series-group").attr({zIndex:3}).add()}this.renderSeries();this.renderLabels();this.showCredits(r.credits);this.hasRendered=!0},showCredits:function(p){if(p.enabled&&!this.credits){this.credits=this.renderer.text(p.text,0,0).on("click",function(){if(p.href){location.href=p.href}}).attr({align:p.position.align,zIndex:8}).css(p.style).add().align(p.position)}},destroy:function(){var q=this,p=q.axes,u=q.series,t=q.container,s,r=t&&t.parentNode;bG(q,"destroy");bP[q.index]=bi;aN--;q.renderTo.removeAttribute("data-highcharts-chart");bz(q);for(s=p.length;s--;){p[s]=p[s].destroy()}for(s=u.length;s--;){u[s]=u[s].destroy()}bm("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(v){var x=q[v];x&&x.destroy&&(q[v]=x.destroy())});if(t){t.innerHTML="",bz(t),r&&b3(t)}for(s in q){delete q[s]}},isReadyToRender:function(){var p=this;return !a4&&bB==bB.top&&bS.readyState!=="complete"||k&&!bB.canvg?(k?b2.push(function(){p.firstRender()},p.options.global.canvasToolsURL):bS.attachEvent("onreadystatechange",function(){bS.detachEvent("onreadystatechange",p.firstRender);bS.readyState==="complete"&&p.firstRender()}),!1):!0},firstRender:function(){var q=this,p=q.options,r=q.callback;if(q.isReadyToRender()){q.getContainer();bG(q,"init");q.resetMargins();q.setChartSize();q.propFromSeries();q.getAxes();bm(p.series||[],function(s){q.initSeries(s)});q.linkSeries();bG(q,"beforeRender");if(bE.Pointer){q.pointer=new aJ(q,p)}q.render();q.renderer.draw();r&&r.apply(q,[q]);bm(q.callbacks,function(s){s.apply(q,[q])});q.cloneRenderTo(!0);bG(q,"load")}},splashArray:function(q,p){var r=p[q],r=aD(r)?r:[r,r,r,r];return[bk(p[q+"Top"],r[0]),bk(p[q+"Right"],r[1]),bk(p[q+"Bottom"],r[2]),bk(p[q+"Left"],r[3])]}};f.prototype.callbacks=[];aO=bE.CenteredSeriesMixin={getCenter:function(){var q=this.options,p=this.chart,x=2*(q.slicedOffset||0),v,u=p.plotWidth-2*x,t=p.plotHeight-2*x,p=q.center,q=[bk(p[0],"50%"),bk(p[1],"50%"),q.size||"100%",q.innerSize||0],s=bU(u,t),r;return b5(q,function(A,z){r=/%$/.test(A);v=z<2||z===2&&r;return(r?[u,t,s,s][z]*bO(A)/100:A)+(v?x:0)})}};var aA=function(){};aA.prototype={init:function(q,p,r){this.series=q;this.applyOptions(p,r);this.pointAttr={};if(q.options.colorByPoint&&(p=q.options.colors||q.chart.options.colors,this.color=this.color||p[q.colorCounter++],q.colorCounter===p.length)){q.colorCounter=0}q.chart.pointCount++;return this},applyOptions:function(q,p){var s=this.series,r=s.options.pointValKey||s.pointValKey,q=aA.prototype.optionsToObject.call(this,q);bh(this,q);this.options=this.options?bh(this.options,q):q;if(r){this.y=this[r]}if(this.x===bi&&s){this.x=p===bi?s.autoIncrement():p}return this},optionsToObject:function(q){var p={},v=this.series,u=v.pointArrayMap||["y"],t=u.length,s=0,r=0;if(typeof q==="number"||q===null){p[u[0]]=q}else{if(m(q)){if(q.length>t){v=typeof q[0];if(v==="string"){p.name=q[0]}else{if(v==="number"){p.x=q[0]}}s++}for(;r<t;){p[u[r++]]=q[s++]}}else{if(typeof q==="object"){p=q;if(q.dataLabels){v._hasPointLabels=!0}if(q.marker){v._hasPointMarkers=!0}}}}return p},destroy:function(){var q=this.series.chart,p=q.hoverPoints,r;q.pointCount--;if(p&&(this.setState(),aH(p,this),!p.length)){q.hoverPoints=null}if(this===q.hoverPoint){this.onMouseOut()}if(this.graphic||this.dataLabel){bz(this),this.destroyElements()}this.legendItem&&q.legend.destroyItem(this);for(r in this){this[r]=null}},destroyElements:function(){for(var q="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),p,r=6;r--;){p=q[r],this[p]&&(this[p]=this[p].destroy())}},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(q){var p=this.series,u=p.tooltipOptions,t=bk(u.valueDecimals,""),s=u.valuePrefix||"",r=u.valueSuffix||"";bm(p.pointArrayMap||["y"],function(v){v="{point."+v;if(s||r){q=q.replace(v+"}",s+v+"}"+r)}q=q.replace(v+"}",v+":,."+t+"f}")});return aZ(q,{point:this,series:this.series})},firePointEvent:function(q,p,t){var s=this,r=this.series.options;(r.point.events[q]||s.options&&s.options.events&&s.options.events[q])&&this.importEvents();q==="click"&&r.allowPointSelect&&(t=function(u){s.select(null,u.ctrlKey||u.metaKey||u.shiftKey)});bG(this,q,p,t)}};var bI=function(){};bI.prototype={isCartesian:!0,type:"line",pointClass:aA,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(q,p){var v=this,u,t,s=q.series,r=function(z,x){return bk(z.options.index,z._i)-bk(x.options.index,x._i)};v.chart=q;v.options=p=v.setOptions(p);v.linkedSeries=[];v.bindAxes();bh(v,{name:p.name,state:"",pointAttr:{},visible:p.visible!==!1,selected:p.selected===!0});if(k){p.animation=!1}t=p.events;for(u in t){a8(v,u,t[u])}if(t&&t.click||p.point&&p.point.events&&p.point.events.click||p.allowPointSelect){q.runTrackerClick=!0}v.getColor();v.getSymbol();bm(v.parallelArrays,function(x){v[x+"Data"]=[]});v.setData(p.data,!1);if(v.isCartesian){q.hasCartesianSeries=!0}s.push(v);v._i=s.length-1;n(s,r);this.yAxis&&n(this.yAxis.series,r);bm(s,function(z,x){z.index=x;z.name=z.name||"Series "+(x+1)})},bindAxes:function(){var q=this,p=q.options,s=q.chart,r;bm(q.axisTypes||[],function(t){bm(s[t],function(u){r=u.options;if(p[t]===r.index||p[t]!==bi&&p[t]===r.id||p[t]===bi&&r.index===0){u.series.push(q),q[t]=u,u.isDirty=!0}});!q[t]&&q.optionalAxis!==t&&bt(18,!0)})},updateParallelArrays:function(q,p){var s=q.series,r=arguments;bm(s.parallelArrays,typeof p==="number"?function(u){var t=u==="y"&&s.toYData?s.toYData(q):q[u];s[u+"Data"][p]=t}:function(t){Array.prototype[p].apply(s[t+"Data"],Array.prototype.slice.call(r,2))})},autoIncrement:function(){var q=this.options,p=this.xIncrement,p=bk(p,q.pointStart,0);this.pointInterval=bk(this.pointInterval,q.pointInterval,1);this.xIncrement=p+this.pointInterval;return p},getSegments:function(){var q=-1,p=[],t,s=this.points,r=s.length;if(r){if(this.options.connectNulls){for(t=r;t--;){s[t].y===null&&s.splice(t,1)}s.length&&(p=[s])}else{bm(s,function(v,u){v.y===null?(u>q+1&&p.push(s.slice(q+1,u)),q=u):u===r-1&&p.push(s.slice(q+1,u+1))})}}this.segments=p},setOptions:function(q){var p=this.chart,t=p.options.plotOptions,p=p.userOptions||{},s=p.plotOptions||{},r=t[this.type];this.userOptions=q;t=bd(r,t.series,q);this.tooltipOptions=bd(bQ.tooltip,bQ.plotOptions[this.type].tooltip,p.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,q.tooltip);r.marker===null&&delete t.marker;return t},getCyclic:function(q,p,u){var t=this.userOptions,s="_"+q+"Index",r=q+"Counter";p||(bg(t[s])?p=t[s]:(t[s]=p=this.chart[r]%u.length,this.chart[r]+=1),p=u[p]);this[q]=p},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||bx[this.type].color,this.chart.options.colors)},getSymbol:function(){var p=this.options.marker;this.getCyclic("symbol",p.symbol,this.chart.options.symbols);if(/^url/.test(this.symbol)){p.radius=0}},drawLegendSymbol:bA.drawLineMarker,setData:function(L,K,J,H){var G=this,F=G.points,E=F&&F.length||0,D,B=G.options,A=G.chart,z=null,x=G.xAxis,v=x&&!!x.categories,t=G.tooltipPoints,s=B.turboThreshold,p=this.xData,q=this.yData,r=(D=G.pointArrayMap)&&D.length,L=L||[];D=L.length;K=bk(K,!0);if(H!==!1&&D&&E===D&&!G.cropped&&!G.hasGroupedData){bm(L,function(M,u){F[u].update(M,!1)})}else{G.xIncrement=null;G.pointRange=v?1:B.pointRange;G.colorCounter=0;bm(this.parallelArrays,function(u){G[u+"Data"].length=0});if(s&&D>s){for(J=0;z===null&&J<D;){z=L[J],J++}if(cg(z)){v=bk(B.pointStart,0);B=bk(B.pointInterval,1);for(J=0;J<D;J++){p[J]=v,q[J]=L[J],v+=B}G.xIncrement=v}else{if(m(z)){if(r){for(J=0;J<D;J++){B=L[J],p[J]=B[0],q[J]=B.slice(1,r+1)}}else{for(J=0;J<D;J++){B=L[J],p[J]=B[0],q[J]=B[1]}}}else{bt(12)}}}else{for(J=0;J<D;J++){if(L[J]!==bi&&(B={series:G},G.pointClass.prototype.applyOptions.apply(B,[L[J]]),G.updateParallelArrays(B,J),v&&B.name)){x.names[B.x]=B.name}}}ad(q[0])&&bt(14,!0);G.data=[];G.options.data=L;for(J=E;J--;){F[J]&&F[J].destroy&&F[J].destroy()}if(t){t.length=0}if(x){x.minRange=x.userMinRange}G.isDirty=G.isDirtyData=A.isDirtyBox=!0;J=!1}K&&A.redraw(J)},processData:function(F){var E=this.xData,D=this.yData,B=E.length,A;A=0;var z,x,v=this.xAxis,u=this.options,t=u.cropThreshold,s=0,r=this.isCartesian,q,p;if(r&&!this.isDirty&&!v.isDirty&&!this.yAxis.isDirty&&!F){return !1}if(r&&this.sorted&&(!t||B>t||this.forceCrop)){if(q=v.getExtremes(),p=q.min,q=q.max,E[B-1]<p||E[0]>q){E=[],D=[]}else{if(E[0]<p||E[B-1]>q){A=this.cropData(this.xData,this.yData,p,q),E=A.xData,D=A.yData,A=A.start,z=!0,s=E.length}}}for(F=E.length-1;F>=0;F--){B=E[F]-E[F-1],!z&&E[F]>p&&E[F]<q&&s++,B>0&&(x===bi||B<x)?x=B:B<0&&this.requireSorting&&bt(15)}this.cropped=z;this.cropStart=A;this.processedXData=E;this.processedYData=D;this.activePointCount=s;if(u.pointRange===null){this.pointRange=x||1}this.closestPointRange=x},cropData:function(z,x,v,u){var t=z.length,s=0,r=t,q=bk(this.cropShoulder,1),p;for(p=0;p<t;p++){if(z[p]>=v){s=be(0,p-q);break}}for(;p<t;p++){if(z[p]>u){r=p+q;break}}return{xData:z.slice(s,r),yData:x.slice(s,r),start:s,end:r}},generatePoints:function(){var E=this.options.data,D=this.data,B,A=this.processedXData,z=this.processedYData,x=this.pointClass,v=A.length,u=this.cropStart||0,t,s=this.hasGroupedData,r,q=[],p;if(!D&&!s){D=[],D.length=E.length,D=this.data=D}for(p=0;p<v;p++){t=u+p,s?q[p]=(new x).init(this,[A[p]].concat(b1(z[p]))):(D[t]?r=D[t]:E[t]!==bi&&(D[t]=r=(new x).init(this,E[t],A[p])),q[p]=r)}if(D&&(v!==(B=D.length)||s)){for(p=0;p<B;p++){if(p===u&&!s&&(p+=v),D[p]){D[p].destroyElements(),D[p].plotX=bi}}}this.data=D;this.points=q},getExtremes:function(D){var B=this.yAxis,A=this.processedXData,z,x=[],v=0;z=this.xAxis.getExtremes();var u=z.min,t=z.max,s,r,q,p,D=D||this.stackedYData||this.processedYData;z=D.length;for(p=0;p<z;p++){if(r=A[p],q=D[p],s=q!==null&&q!==bi&&(!B.isLog||q.length||q>0),r=this.getExtremesFromAll||this.cropped||(A[p+1]||r)>=u&&(A[p-1]||r)<=t,s&&r){if(s=q.length){for(;s--;){q[s]!==null&&(x[v++]=q[s])}}else{x[v++]=q}}}this.dataMin=bk(void 0,ch(x));this.dataMax=bk(void 0,ah(x))},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var H=this.options,G=H.stacking,E=this.xAxis,D=E.categories,B=this.yAxis,A=this.points,z=A.length,x=!!this.modifyValue,v=H.pointPlacement,u=v==="between"||cg(v),t=H.threshold,H=0;H<z;H++){var s=A[H],r=s.x,q=s.y,p=s.low,F=G&&B.stacks[(this.negStacks&&q<t?"-":"")+this.stackKey];if(B.isLog&&q<=0){s.y=q=null}s.plotX=E.translate(r,0,0,0,1,v,this.type==="flags");if(G&&this.visible&&F&&F[r]){F=F[r],q=F.points[this.index+","+H],p=q[0],q=q[1],p===0&&(p=bk(t,B.min)),B.isLog&&p<=0&&(p=null),s.total=s.stackTotal=F.total,s.percentage=F.total&&s.y/F.total*100,s.stackY=q,F.setOffset(this.pointXOffset||0,this.barW||0)}s.yBottom=bg(p)?B.translate(p,0,1,0,1):null;x&&(q=this.modifyValue(q,s));s.plotY=typeof q==="number"&&q!==Infinity?B.translate(q,0,1,0,1):bi;s.clientX=u?E.translate(r,0,0,0,1):s.plotX;s.negative=s.y<(t||0);s.category=D&&D[s.x]!==bi?D[s.x]:s.x}this.getSegments()},animate:function(q){var p=this.chart,v=p.renderer,u;u=this.options.animation;var t=this.clipBox||p.clipBox,s=p.inverted,r;if(u&&!aD(u)){u=bx[this.type].animation}r=["_sharedClip",u.duration,u.easing,t.height].join(",");q?(q=p[r],u=p[r+"m"],q||(p[r]=q=v.clipRect(bh(t,{width:0})),p[r+"m"]=u=v.clipRect(-99,s?-p.plotLeft:-p.plotTop,99,s?p.chartWidth:p.chartHeight)),this.group.clip(q),this.markerGroup.clip(u),this.sharedClipKey=r):((q=p[r])&&q.animate({width:p.plotSizeX},u),p[r+"m"]&&p[r+"m"].animate({width:p.plotSizeX+99},u),this.animate=null)},afterAnimate:function(){var q=this.chart,p=this.sharedClipKey,s=this.group,r=this.clipBox;if(s&&this.options.clip!==!1){if(!p||!r){s.clip(r?q.renderer.clipRect(r):q.clipRect)}this.markerGroup.clip()}bG(this,"afterAnimate");setTimeout(function(){p&&q[p]&&(r||(q[p]=q[p].destroy()),q[p+"m"]&&(q[p+"m"]=q[p+"m"].destroy()))},100)},drawPoints:function(){var G,F=this.points,E=this.chart,D,B,A,z,x,v,u,t;D=this.options.marker;var s=this.pointAttr[""],r,q=this.markerGroup,p=bk(D.enabled,this.activePointCount<0.5*this.xAxis.len/D.radius);if(D.enabled!==!1||this._hasPointMarkers){for(A=F.length;A--;){if(z=F[A],D=by(z.plotX),B=z.plotY,t=z.graphic,v=z.marker||{},G=p&&v.enabled===bi||v.enabled,r=E.isInsidePlot(bf(D),B,E.inverted),G&&B!==bi&&!isNaN(B)&&z.y!==null){if(G=z.pointAttr[z.selected?"select":""]||s,x=G.r,v=bk(v.symbol,this.symbol),u=v.indexOf("url")===0,t){t[r?"show":"hide"](!0).animate(bh({x:D-x,y:B-x},t.symbolName?{width:2*x,height:2*x}:{}))}else{if(r&&(x>0||u)){z.graphic=E.renderer.symbol(v,D-x,B-x,2*x,2*x).attr(G).add(q)}}}else{if(t){z.graphic=t.destroy()}}}}},convertAttribs:function(q,p,x,v){var u=this.pointAttrToOptions,t,s,r={},q=q||{},p=p||{},x=x||{},v=v||{};for(t in u){s=u[t],r[t]=bk(q[s],p[t],x[t],v[t])}return r},getAttribs:function(){var J=this,H=J.options,G=bx[J.type].marker?H.marker:H,F=G.states,E=F.hover,D,B=J.color;D={stroke:B,fill:B};var A=J.points||[],z,x=[],v,u=J.pointAttrToOptions;v=J.hasPointSpecificOptions;var t=H.negativeColor,s=G.lineColor,r=G.fillColor;z=H.turboThreshold;var p;H.marker?(E.radius=E.radius||G.radius+E.radiusPlus,E.lineWidth=E.lineWidth||G.lineWidth+E.lineWidthPlus):E.color=E.color||ce(E.color||B).brighten(E.brightness).get();x[""]=J.convertAttribs(G,D);bm(["hover","select"],function(q){x[q]=J.convertAttribs(F[q],x[""])});J.pointAttr=x;B=A.length;if(!z||B<z||v){for(;B--;){z=A[B];if((G=z.options&&z.options.marker||z.options)&&G.enabled===!1){G.radius=0}if(z.negative&&t){z.color=z.fillColor=t}v=H.colorByPoint||z.color;if(z.options){for(p in u){bg(G[u[p]])&&(v=!0)}}if(v){G=G||{};v=[];F=G.states||{};D=F.hover=F.hover||{};if(!H.marker){D.color=D.color||!z.options.color&&E.color||ce(z.color).brighten(D.brightness||E.brightness).get()}D={color:z.color};if(!r){D.fillColor=z.color}if(!s){D.lineColor=z.color}v[""]=J.convertAttribs(bh(D,G),x[""]);v.hover=J.convertAttribs(F.hover,x.hover,v[""]);v.select=J.convertAttribs(F.select,x.select,v[""])}else{v=x}z.pointAttr=v}}},destroy:function(){var z=this,x=z.chart,v=/AppleWebKit\/533/.test(h),u,t,s=z.data||[],r,q,p;bG(z,"destroy");bz(z);bm(z.axisTypes||[],function(A){if(p=z[A]){aH(p.series,z),p.isDirty=p.forceRedraw=!0}});z.legendItem&&z.chart.legend.destroyItem(z);for(t=s.length;t--;){(r=s[t])&&r.destroy&&r.destroy()}z.points=null;clearTimeout(z.animationTimeout);bm("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(A){z[A]&&(u=v&&A==="group"?"hide":"destroy",z[A][u]())});if(x.hoverSeries===z){x.hoverSeries=null}aH(x.series,z);for(q in z){delete z[q]}},getSegmentPath:function(q){var p=this,s=[],r=p.options.step;bm(q,function(z,x){var v=z.plotX,u=z.plotY,t;p.getPointSpline?s.push.apply(s,p.getPointSpline(q,z,x)):(s.push(x?"L":"M"),r&&x&&(t=q[x-1],r==="right"?s.push(t.plotX,u):r==="center"?s.push((t.plotX+v)/2,t.plotY,(t.plotX+v)/2,u):s.push(v,t.plotY)),s.push(z.plotX,z.plotY))});return s},getGraphPath:function(){var q=this,p=[],s,r=[];bm(q.segments,function(t){s=q.getSegmentPath(t);t.length>1?p=p.concat(s):r.push(t[0])});q.singlePoints=r;return q.graphPath=p},drawGraph:function(){var q=this,p=this.options,x=[["graph",p.lineColor||this.color]],v=p.lineWidth,u=p.dashStyle,t=p.linecap!=="square",s=this.getGraphPath(),r=p.negativeColor;r&&x.push(["graphNeg",r]);bm(x,function(D,B){var A=D[0],z=q[A];if(z){aC(z),z.animate({d:s})}else{if(v&&s.length){z={stroke:D[1],"stroke-width":v,fill:b9,zIndex:1},u?z.dashstyle=u:t&&(z["stroke-linecap"]=z["stroke-linejoin"]="round"),q[A]=q.chart.renderer.path(s).attr(z).add(q.group).shadow(!B&&p.shadow)}}})},clipNeg:function(){var D=this.options,B=this.chart,A=B.renderer,z=D.negativeColor||D.negativeFillColor,x,v=this.graph,u=this.area,t=this.posClip,s=this.negClip;x=B.chartWidth;var r=B.chartHeight,q=be(x,r),p=this.yAxis;if(z&&(v||u)){z=bf(p.toPixels(D.threshold||0,!0));z<0&&(q-=z);D={x:0,y:0,width:q,height:z};q={x:0,y:z,width:q,height:q};if(B.inverted){D.height=q.y=B.plotWidth-z,A.isVML&&(D={x:B.plotWidth-z-B.plotLeft,y:0,width:x,height:r},q={x:z+B.plotLeft-x,y:0,width:B.plotLeft+z,height:x})}p.reversed?(B=q,x=D):(B=D,x=q);t?(t.animate(B),s.animate(x)):(this.posClip=t=A.clipRect(B),this.negClip=s=A.clipRect(x),v&&this.graphNeg&&(v.clip(t),this.graphNeg.clip(s)),u&&(u.clip(t),this.areaNeg.clip(s)))}},invertGroups:function(){function q(){var s={width:p.yAxis.len,height:p.xAxis.len};bm(["group","markerGroup"],function(t){p[t]&&p[t].attr(s).invert()})}var p=this,r=p.chart;if(p.xAxis){a8(r,"resize",q),a8(p,"destroy",function(){bz(r,"resize",q)}),q(),p.invertGroups=q}},plotGroup:function(q,p,v,u,t){var s=this[q],r=!s;r&&(this[q]=s=this.chart.renderer.g(p).attr({visibility:v,zIndex:u||0.1}).add(t));s[r?"attr":"animate"](this.getPlotBox());return s},getPlotBox:function(){var q=this.chart,p=this.xAxis,r=this.yAxis;if(q.inverted){p=r,r=this.xAxis}return{translateX:p?p.left:q.plotLeft,translateY:r?r.top:q.plotTop,scaleX:1,scaleY:1}},render:function(){var z=this,x=z.chart,v,u=z.options,t=(v=u.animation)&&!!z.animate&&x.renderer.isSVG&&bk(v.duration,500)||0,s=z.visible?"visible":"hidden",r=u.zIndex,q=z.hasRendered,p=x.seriesGroup;v=z.plotGroup("group","series",s,r,p);z.markerGroup=z.plotGroup("markerGroup","markers",s,r,p);t&&z.animate(!0);z.getAttribs();v.inverted=z.isCartesian?x.inverted:!1;z.drawGraph&&(z.drawGraph(),z.clipNeg());z.drawDataLabels&&z.drawDataLabels();z.visible&&z.drawPoints();z.drawTracker&&z.options.enableMouseTracking!==!1&&z.drawTracker();x.inverted&&z.invertGroups();u.clip!==!1&&!z.sharedClipKey&&!q&&v.clip(x.clipRect);t&&z.animate();if(!q){t?z.animationTimeout=setTimeout(function(){z.afterAnimate()},t):z.afterAnimate()}z.isDirty=z.isDirtyData=!1;z.hasRendered=!0},redraw:function(){var q=this.chart,p=this.isDirtyData,t=this.group,s=this.xAxis,r=this.yAxis;t&&(q.inverted&&t.attr({width:q.plotWidth,height:q.plotHeight}),t.animate({translateX:bk(s&&s.left,q.plotLeft),translateY:bk(r&&r.top,q.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();p&&bG(this,"updatedData")}};R.prototype={destroy:function(){aQ(this,this.axis)},render:function(q){var p=this.options,r=p.format,r=r?aZ(r,this):p.formatter.call(this);this.label?this.label.attr({text:r,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(r,null,null,p.useHTML).css(p.style).attr({align:this.textAlign,rotation:p.rotation,visibility:"hidden"}).add(q)},setOffset:function(z,x){var v=this.axis,u=v.chart,t=u.inverted,s=this.isNegative,r=v.translate(v.usePercentage?100:this.total,0,0,0,1),v=v.translate(0),v=bF(r-v),q=u.xAxis[0].translate(this.x)+z,p=u.plotHeight,s={x:t?s?r:r-v:q,y:t?p-q-x:s?p-r-v:p-r,width:t?v:x,height:t?x:v};if(t=this.label){t.align(this.alignOptions,null,s),s=t.alignAttr,t[this.options.crop===!1||u.isInsidePlot(s.x,s.y)?"show":"hide"](!0)}}};bK.prototype.buildStacks=function(){var q=this.series,p=bk(this.options.reversedStacks,!0),r=q.length;if(!this.isXAxis){for(this.usePercentage=!1;r--;){q[p?r:q.length-r-1].setStackedPoints()}if(this.usePercentage){for(r=0;r<q.length;r++){q[r].setPercentStacks()}}}};bK.prototype.renderStackTotals=function(){var q=this.chart,p=q.renderer,u=this.stacks,t,s,r=this.stackTotalGroup;if(!r){this.stackTotalGroup=r=p.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()}r.translate(q.plotLeft,q.plotTop);for(t in u){for(s in q=u[t],q){q[s].render(r)}}};bI.prototype.setStackedPoints=function(){if(this.options.stacking&&!(this.visible!==!0&&this.chart.options.chart.ignoreHiddenSeries!==!1)){var P=this.processedXData,N=this.processedYData,M=[],L=N.length,K=this.options,J=K.threshold,H=K.stack,K=K.stacking,G=this.stackKey,F="-"+G,E=this.negStacks,D=this.yAxis,B=D.stacks,A=D.oldStacks,z,x,u,v,t,s;for(v=0;v<L;v++){t=P[v];s=N[v];u=this.index+","+v;x=(z=E&&s<J)?F:G;B[x]||(B[x]={});if(!B[x][t]){A[x]&&A[x][t]?(B[x][t]=A[x][t],B[x][t].total=null):B[x][t]=new R(D,D.options.stackLabels,z,t,H)}x=B[x][t];x.points[u]=[x.cum||0];K==="percent"?(z=z?G:F,E&&B[z]&&B[z][t]?(z=B[z][t],x.total=z.total=be(z.total,x.total)+bF(s)||0):x.total=ak(x.total+(bF(s)||0))):x.total=ak(x.total+(s||0));x.cum=(x.cum||0)+(s||0);x.points[u].push(x.cum);M[v]=x.cum}if(K==="percent"){D.usePercentage=!0}this.stackedYData=M;D.oldStacks={}}};bI.prototype.setPercentStacks=function(){var q=this,p=q.stackKey,s=q.yAxis.stacks,r=q.processedXData;bm([p,"-"+p],function(t){var z;for(var x=r.length,v,u;x--;){if(v=r[x],z=(u=s[t]&&s[t][v])&&u.points[q.index+","+x],v=z){u=u.total?100/u.total:0,v[0]=ak(v[0]*u),v[1]=ak(v[1]*u),q.stackedYData[x]=v[1]}}})};bh(f.prototype,{addSeries:function(q,p,t){var s,r=this;q&&(p=bk(p,!0),bG(r,"addSeries",{options:q},function(){s=r.initSeries(q);r.isDirtyLegend=!0;r.linkSeries();p&&r.redraw(t)}));return s},addAxis:function(q,p,u,t){var s=p?"xAxis":"yAxis",r=this.options;new bK(this,bd(q,{index:this[s].length,isX:p}));r[s]=b1(r[s]||{});r[s].push(q);bk(u,!0)&&this.redraw(t)},showLoading:function(q){var p=this,u=p.options,t=p.loadingDiv,s=u.loading,r=function(){t&&bJ(t,{left:p.plotLeft+"px",top:p.plotTop+"px",width:p.plotWidth+"px",height:p.plotHeight+"px"})};if(!t){p.loadingDiv=t=b8(bD,{className:"highcharts-loading"},bh(s.style,{zIndex:10,display:b9}),p.container),p.loadingSpan=b8("span",null,s.labelStyle,t),a8(p,"redraw",r)}p.loadingSpan.innerHTML=q||u.lang.loading;if(!p.loadingShown){bJ(t,{opacity:0,display:""}),a0(t,{opacity:s.style.opacity},{duration:s.showDuration||0}),p.loadingShown=!0}r()},hideLoading:function(){var q=this.options,p=this.loadingDiv;p&&a0(p,{opacity:0},{duration:q.loading.hideDuration||100,complete:function(){bJ(p,{display:b9})}});this.loadingShown=!1}});bh(aA.prototype,{update:function(A,z,x){var v=this,u=v.series,t=v.graphic,s,r=u.data,q=u.chart,p=u.options,z=bk(z,!0);v.firePointEvent("update",{options:A},function(){v.applyOptions(A);if(aD(A)){u.getAttribs();if(t){A&&A.marker&&A.marker.symbol?v.graphic=t.destroy():t.attr(v.pointAttr[v.state||""])}if(A&&A.dataLabels&&v.dataLabel){v.dataLabel=v.dataLabel.destroy()}}s=cj(v,r);u.updateParallelArrays(v,s);p.data[s]=v.options;u.isDirty=u.isDirtyData=!0;if(!u.fixedBox&&u.hasCartesianSeries){q.isDirtyBox=!0}p.legendType==="point"&&q.legend.destroyItem(v);z&&q.redraw(x)})},remove:function(q,p){var x=this,v=x.series,u=v.points,t=v.chart,s,r=v.data;bW(p,t);q=bk(q,!0);x.firePointEvent("remove",null,function(){s=cj(x,r);r.length===u.length&&u.splice(s,1);r.splice(s,1);v.options.data.splice(s,1);v.updateParallelArrays(x,"splice",s,1);x.destroy();v.isDirty=!0;v.isDirtyData=!0;q&&t.redraw()})}});bh(bI.prototype,{addPoint:function(F,E,D,B){var A=this.options,z=this.data,x=this.graph,v=this.area,u=this.chart,t=this.xAxis&&this.xAxis.names,s=x&&x.shift||0,r=A.data,q,p=this.xData;bW(B,u);D&&bm([x,v,this.graphNeg,this.areaNeg],function(G){if(G){G.shift=s+1}});if(v){v.isArea=!0}E=bk(E,!0);B={series:this};this.pointClass.prototype.applyOptions.apply(B,[F]);x=B.x;v=p.length;if(this.requireSorting&&x<p[v-1]){for(q=!0;v&&p[v-1]>x;){v--}}this.updateParallelArrays(B,"splice",v,0,0);this.updateParallelArrays(B,v);if(t){t[x]=B.name}r.splice(v,0,F);q&&(this.data.splice(v,0,null),this.processData());A.legendType==="point"&&this.generatePoints();D&&(z[0]&&z[0].remove?z[0].remove(!1):(z.shift(),this.updateParallelArrays(B,"shift"),r.shift()));this.isDirtyData=this.isDirty=!0;E&&(this.getAttribs(),u.redraw())},remove:function(q,p){var s=this,r=s.chart,q=bk(q,!0);if(!s.isRemoving){s.isRemoving=!0,bG(s,"remove",null,function(){s.destroy();r.isDirtyLegend=r.isDirtyBox=!0;r.linkSeries();q&&r.redraw(p)})}s.isRemoving=!1},update:function(z,x){var v=this,u=this.chart,t=this.userOptions,s=this.type,r=bT[s].prototype,q=["group","markerGroup","dataLabelsGroup"],p;bm(q,function(A){q[A]=v[A];delete v[A]});z=bd(t,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},z);this.remove(!1);for(p in r){r.hasOwnProperty(p)&&(this[p]=bi)}bh(this,bT[z.type||s].prototype);bm(q,function(A){v[A]=q[A]});this.init(u,z);u.linkSeries();bk(x,!0)&&u.redraw(!1)}});bh(bK.prototype,{update:function(q,p){var r=this.chart,q=r.options[this.coll][this.options.index]=bd(this.userOptions,q);this.destroy(!0);this._addedPlotLB=bi;this.init(r,bh(q,{events:bi}));r.isDirtyBox=!0;bk(p,!0)&&r.redraw()},remove:function(q){for(var p=this.chart,t=this.coll,s=this.series,r=s.length;r--;){s[r]&&s[r].remove(!1)}aH(p.axes,this);aH(p[t],this);p.options[t].splice(this.options.index,1);bm(p[t],function(v,u){v.options.index=u});this.destroy();p.isDirtyBox=!0;bk(q,!0)&&p.redraw()},setTitle:function(q,p){this.update({title:q},p)},setCategories:function(q,p){this.update({categories:q},p)}});var aq=au(bI);bT.line=aq;bx.area=bd(bR,{threshold:0});var af=au(bI,{type:"area",getSegments:function(){var F=this,E=[],D=[],B=[],A=this.xAxis,z=this.yAxis,x=z.stacks[this.stackKey],v={},u,t,s=this.points,r=this.options.connectNulls,q,p;if(this.options.stacking&&!this.cropped){for(q=0;q<s.length;q++){v[s[q].x]=s[q]}for(p in x){x[p].total!==null&&B.push(+p)}B.sort(function(H,G){return H-G});bm(B,function(G){var J=0,H;if(!r||v[G]&&v[G].y!==null){if(v[G]){D.push(v[G])}else{for(q=F.index;q<=z.series.length;q++){if(H=x[G].points[q+","+G]){J=H[1];break}}u=A.translate(G);t=z.toPixels(J,!0);D.push({y:null,plotX:u,clientX:u,plotY:t,yBottom:t,onMouseOver:a9})}}});D.length&&E.push(D)}else{bI.prototype.getSegments.call(this),E=this.segments}this.segments=E},getSegmentPath:function(q){var p=bI.prototype.getSegmentPath.call(this,q),v=[].concat(p),u,t=this.options;u=p.length;var s=this.yAxis.getThreshold(t.threshold),r;u===3&&v.push("L",p[1],p[2]);if(t.stacking&&!this.closedStacks){for(u=q.length-1;u>=0;u--){r=bk(q[u].yBottom,s),u<q.length-1&&t.step&&v.push(q[u+1].plotX,r),v.push(q[u].plotX,r)}}else{this.closeSegment(v,q,s)}this.areaPath=this.areaPath.concat(v);return p},closeSegment:function(q,p,r){q.push("L",p[p.length-1].plotX,r,"L",p[0].plotX,r)},drawGraph:function(){this.areaPath=[];bI.prototype.drawGraph.apply(this);var q=this,p=this.areaPath,u=this.options,t=u.negativeColor,s=u.negativeFillColor,r=[["area",this.color,u.fillColor]];(t||s)&&r.push(["areaNeg",t,s]);bm(r,function(z){var x=z[0],v=q[x];v?v.animate({d:p}):q[x]=q.chart.renderer.path(p).attr({fill:bk(z[2],ce(z[1]).setOpacity(bk(u.fillOpacity,0.75)).get()),zIndex:0}).add(q.group)})},drawLegendSymbol:bA.drawRectangle});bT.area=af;bx.spline=bd(bR);aq=au(bI,{type:"spline",getPointSpline:function(D,B,A){var z=B.plotX,x=B.plotY,v=D[A-1],u=D[A+1],t,s,r,q;if(v&&u){D=v.plotY;r=u.plotX;var u=u.plotY,p;t=(1.5*z+v.plotX)/2.5;s=(1.5*x+D)/2.5;r=(1.5*z+r)/2.5;q=(1.5*x+u)/2.5;p=(q-s)*(r-z)/(r-t)+x-q;s+=p;q+=p;s>D&&s>x?(s=be(D,x),q=2*x-s):s<D&&s<x&&(s=bU(D,x),q=2*x-s);q>u&&q>x?(q=be(u,x),s=2*x-q):q<u&&q<x&&(q=bU(u,x),s=2*x-q);B.rightContX=r;B.rightContY=q}A?(B=["C",v.rightContX||v.plotX,v.rightContY||v.plotY,t||z,s||x,z,x],v.rightContX=v.rightContY=null):B=["M",z,x];return B}});bT.spline=aq;bx.areaspline=bd(bx.area);af=af.prototype;aq=au(aq,{type:"areaspline",closedStacks:!0,getSegmentPath:af.getSegmentPath,closeSegment:af.closeSegment,drawGraph:af.drawGraph,drawLegendSymbol:bA.drawRectangle});bT.areaspline=aq;bx.column=bd(bR,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});aq=au(bI,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){bI.prototype.init.apply(this,arguments);var q=this,p=q.chart;p.hasRendered&&bm(p.series,function(r){if(r.type===q.type){r.isDirty=!0}})},getColumnMetrics:function(){var D=this,B=D.options,A=D.xAxis,z=D.yAxis,x=A.reversed,v,u={},t,s=0;B.grouping===!1?s=1:bm(D.chart.series,function(E){var G=E.options,F=E.yAxis;if(E.type===D.type&&E.visible&&z.len===F.len&&z.pos===F.pos){G.stacking?(v=E.stackKey,u[v]===bi&&(u[v]=s++),t=u[v]):G.grouping!==!1&&(t=s++),E.columnIndex=t}});var A=bU(bF(A.transA)*(A.ordinalSlope||B.pointRange||A.closestPointRange||A.tickInterval||1),A.len),r=A*B.groupPadding,q=(A-2*r)/s,p=B.pointWidth,B=bg(p)?(q-p)/2:q*B.pointPadding,p=bk(p,q-2*B);return D.columnMetrics={width:p,offset:B+(r+((x?s-(D.columnIndex||0):D.columnIndex)||0)*q-A/2)*(x?-1:1)}},translate:function(){var E=this,D=E.chart,B=E.options,A=E.borderWidth=bk(B.borderWidth,E.activePointCount>0.5*E.xAxis.len?0:1),z=E.yAxis,x=E.translatedThreshold=z.getThreshold(B.threshold),v=bk(B.minPointLength,5),u=E.getColumnMetrics(),t=u.width,s=E.barW=be(t,1+2*A),r=E.pointXOffset=u.offset,q=-(A%2?0.5:0),p=A%2?0.5:1;D.renderer.isVML&&D.inverted&&(p+=1);B.pointPadding&&(s=a2(s));bI.prototype.translate.apply(E);bm(E.points,function(M){var L=bk(M.yBottom,x),H=bU(be(-999-L,M.plotY),z.len+999+L),K=M.plotX+r,J=s,F=bU(H,L),G;G=be(H,L)-F;bF(G)<v&&v&&(G=v,F=bf(bF(F-x)>v?L-v:x-(z.translate(M.y,0,1,0,1)<=x?v:0)));M.barX=K;M.pointWidth=t;M.tooltipPos=D.inverted?[z.len-H,E.xAxis.len-K-J/2]:[K+J/2,H];J=bf(K+J)+q;K=bf(K)+q;J-=K;L=bF(F)<0.5;G=bf(F+G)+p;F=bf(F)+p;G-=F;L&&(F-=1,G+=1);M.shapeType="rect";M.shapeArgs={x:K,y:F,width:J,height:G}})},getSymbol:a9,drawLegendSymbol:bA.drawRectangle,drawGraph:a9,drawPoints:function(){var q=this,p=this.chart,v=q.options,u=p.renderer,t=v.animationLimit||250,s,r;bm(q.points,function(A){var z=A.plotY,x=A.graphic;if(z!==bi&&!isNaN(z)&&A.y!==null){s=A.shapeArgs,z=bg(q.borderWidth)?{"stroke-width":q.borderWidth}:{},r=A.pointAttr[A.selected?"select":""]||q.pointAttr[""],x?(aC(x),x.attr(z)[p.pointCount<t?"animate":"attr"](bd(s))):A.graphic=u[A.shapeType](s).attr(r).attr(z).add(q.group).shadow(v.shadow,null,v.stacking&&!v.borderRadius)}else{if(x){A.graphic=x.destroy()}}})},animate:function(q){var p=this.yAxis,t=this.options,s=this.chart.inverted,r={};if(a4){q?(r.scaleY=0.001,q=bU(p.pos+p.len,be(p.pos,p.toPixels(t.threshold))),s?r.translateX=q-p.len:r.translateY=q,this.group.attr(r)):(r.scaleY=1,r[s?"translateX":"translateY"]=p.pos,this.group.animate(r,this.options.animation),this.animate=null)}},remove:function(){var q=this,p=q.chart;p.hasRendered&&bm(p.series,function(r){if(r.type===q.type){r.isDirty=!0}});bI.prototype.remove.apply(q,arguments)}});bT.column=aq;bx.bar=bd(bx.column);af=au(aq,{type:"bar",inverted:!0});bT.bar=af;bx.scatter=bd(bR,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">в—Џ</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});af=au(bI,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&bI.prototype.drawGraph.call(this)}});bT.scatter=af;bx.pie=bd(bR,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});bR={type:"pie",isCartesian:!1,pointClass:au(aA,{init:function(){aA.prototype.init.apply(this,arguments);var q=this,p;if(q.y<0){q.y=null}bh(q,{visible:q.visible!==!1,name:bk(q.name,"Slice")});p=function(r){q.slice(r.type==="select")};a8(q,"select",p);a8(q,"unselect",p);return q},setVisible:function(q){var p=this,s=p.series,r=s.chart;p.visible=p.options.visible=q=q===bi?!p.visible:q;s.options.data[cj(p,s.data)]=p.options;bm(["graphic","dataLabel","connector","shadowGroup"],function(t){if(p[t]){p[t][q?"show":"hide"](!0)}});p.legendItem&&r.legend.colorizeItem(p,q);if(!s.isDirty&&s.options.ignoreHiddenPoint){s.isDirty=!0,r.redraw()}},slice:function(q,p,s){var r=this.series;bW(s,r.chart);bk(p,!0);this.sliced=this.options.sliced=q=bg(q)?q:!this.sliced;r.options.data[cj(this,r.data)]=this.options;q=q?this.slicedTranslation:{translateX:0,translateY:0};this.graphic.animate(q);this.shadowGroup&&this.shadowGroup.animate(q)},haloPath:function(q){var p=this.shapeArgs,r=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(r.plotLeft+p.x,r.plotTop+p.y,p.r+q,p.r+q,{innerR:this.shapeArgs.r,start:p.start,end:p.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:a9,animate:function(q){var p=this,s=p.points,r=p.startAngleRad;if(!q){bm(s,function(t){var u=t.graphic,t=t.shapeArgs;u&&(u.attr({r:p.center[3]/2,start:r,end:r}),u.animate({r:t.r,start:t.start,end:t.end},p.options.animation))}),p.animate=null}},setData:function(q,p,s,r){bI.prototype.setData.call(this,q,!1,s,r);this.processData();this.generatePoints();bk(p,!0)&&this.chart.redraw(s)},generatePoints:function(){var q,p=0,u,t,s,r=this.options.ignoreHiddenPoint;bI.prototype.generatePoints.call(this);u=this.points;t=u.length;for(q=0;q<t;q++){s=u[q],p+=r&&!s.visible?0:s.y}this.total=p;for(q=0;q<t;q++){s=u[q],s.percentage=p>0?s.y/p*100:0,s.total=p}},translate:function(G){this.generatePoints();var F=0,E=this.options,D=E.slicedOffset,B=D+E.borderWidth,A,z,x,v=E.startAngle||0,u=this.startAngleRad=ay/180*(v-90),v=(this.endAngleRad=ay/180*(bk(E.endAngle,v+360)-90))-u,t=this.points,s=E.dataLabels.distance,E=E.ignoreHiddenPoint,r,q=t.length,p;if(!G){this.center=G=this.getCenter()}this.getX=function(H,J){x=bw.asin(bU((H-G[1])/(G[2]/2+s),1));return G[0]+(J?-1:1)*aX(x)*(G[2]/2+s)};for(r=0;r<q;r++){p=t[r];A=u+F*v;if(!E||p.visible){F+=p.percentage/100}z=u+F*v;p.shapeType="arc";p.shapeArgs={x:G[0],y:G[1],r:G[2]/2,innerR:G[3]/2,start:bf(A*1000)/1000,end:bf(z*1000)/1000};x=(z+A)/2;x>1.5*ay?x-=2*ay:x<-ay/2&&(x+=2*ay);p.slicedTranslation={translateX:bf(aX(x)*D),translateY:bf(O(x)*D)};A=aX(x)*G[2]/2;z=O(x)*G[2]/2;p.tooltipPos=[G[0]+A*0.7,G[1]+z*0.7];p.half=x<-ay/2||x>ay/2?1:0;p.angle=x;B=bU(B,s/2);p.labelPos=[G[0]+A+aX(x)*s,G[1]+z+O(x)*s,G[0]+A+aX(x)*B,G[1]+z+O(x)*B,G[0]+A,G[1]+z,s<0?"center":p.half?"right":"left",x]}},drawGraph:null,drawPoints:function(){var q=this,p=q.chart.renderer,v,u,t=q.options.shadow,s,r;if(t&&!q.shadowGroup){q.shadowGroup=p.g("shadow").add(q.group)}bm(q.points,function(x){u=x.graphic;r=x.shapeArgs;s=x.shadowGroup;if(t&&!s){s=x.shadowGroup=p.g("shadow").add(q.shadowGroup)}v=x.sliced?x.slicedTranslation:{translateX:0,translateY:0};s&&s.attr(v);u?u.animate(bh(r,v)):x.graphic=u=p[x.shapeType](r).setRadialReference(q.center).attr(x.pointAttr[x.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(v).add(q.group).shadow(t,s);x.visible!==void 0&&x.setVisible(x.visible)})},sortByAngle:function(q,p){q.sort(function(r,s){return r.angle!==void 0&&(s.angle-r.angle)*p})},drawLegendSymbol:bA.drawRectangle,getCenter:aO.getCenter,getSymbol:a9};bR=au(bI,bR);bT.pie=bR;bI.prototype.drawDataLabels=function(){var z=this,x=z.options,v=x.cursor,u=x.dataLabels,t=z.points,s,r,q,p;if(u.enabled||z._hasPointLabels){z.dlProcessOptions&&z.dlProcessOptions(u),p=z.plotGroup("dataLabelsGroup","data-labels",u.defer?"hidden":"visible",u.zIndex||6),!z.hasRendered&&bk(u.defer,!0)&&(p.attr({opacity:0}),a8(z,"afterAnimate",function(){z.visible&&p.show();p[x.animation?"animate":"attr"]({opacity:1},{duration:200})})),r=u,bm(t,function(B){var F,D=B.dataLabel,A,H,G=B.connector,E=!0;s=B.options&&B.options.dataLabels;F=bk(s&&s.enabled,r.enabled);if(D&&!F){B.dataLabel=D.destroy()}else{if(F){u=bd(r,s);F=u.rotation;A=B.getLabelConfig();q=u.format?aZ(u.format,A):u.formatter.call(A,u);u.style.color=bk(u.color,u.style.color,z.color,"black");if(D){if(bg(q)){D.attr({text:q}),E=!1}else{if(B.dataLabel=D=D.destroy(),G){B.connector=G.destroy()}}}else{if(bg(q)){D={fill:u.backgroundColor,stroke:u.borderColor,"stroke-width":u.borderWidth,r:u.borderRadius||0,rotation:F,padding:u.padding,zIndex:1};for(H in D){D[H]===bi&&delete D[H]}D=B.dataLabel=z.chart.renderer[F?"text":"label"](q,0,-999,null,null,null,u.useHTML).attr(D).css(bh(u.style,v&&{cursor:v})).add(p).shadow(u.shadow)}}D&&z.alignDataLabel(B,D,u,null,E)}}})}};bI.prototype.alignDataLabel=function(A,z,x,v,u){var t=this.chart,s=t.inverted,r=bk(A.plotX,-999),q=bk(A.plotY,-999),p=z.getBBox();if(A=this.visible&&(A.series.forceDL||t.isInsidePlot(r,bf(q),s)||v&&t.isInsidePlot(r,s?v.x+1:v.y+v.height-1,s))){v=bh({x:s?t.plotWidth-q:r,y:bf(s?t.plotHeight-r:q),width:0,height:0},v),bh(x,{width:p.width,height:p.height}),x.rotation?z[u?"attr":"animate"]({x:v.x+x.x+v.width/2,y:v.y+x.y+v.height/2}).attr({align:x.align}):(z.align(x,null,v),s=z.alignAttr,bk(x.overflow,"justify")==="justify"?this.justifyDataLabel(z,x,s,p,v,u):bk(x.crop,!0)&&(A=t.isInsidePlot(s.x,s.y)&&t.isInsidePlot(s.x+p.width,s.y+p.height)))}if(!A){z.attr({y:-999}),z.placed=!1}};bI.prototype.justifyDataLabel=function(B,A,z,x,v,u){var t=this.chart,s=A.align,r=A.verticalAlign,q,p;q=z.x;if(q<0){s==="right"?A.align="left":A.x=-q,p=!0}q=z.x+x.width;if(q>t.plotWidth){s==="left"?A.align="right":A.x=t.plotWidth-q,p=!0}q=z.y;if(q<0){r==="bottom"?A.verticalAlign="top":A.y=-q,p=!0}q=z.y+x.height;if(q>t.plotHeight){r==="top"?A.verticalAlign="bottom":A.y=t.plotHeight-q,p=!0}if(p){B.placed=!u,B.align(A,null,v)}};if(bT.pie){bT.pie.prototype.drawDataLabels=function(){var cv=this,cu=cv.data,ct,cs=cv.chart,cr=cv.options.dataLabels,cq=bk(cr.connectorPadding,10),cp=bk(cr.connectorWidth,1),co=cs.plotWidth,cn=cs.plotHeight,cm,cc,cb=bk(cr.softConnector,!0),ca=cr.distance,bc=cv.center,bb=bc[2]/2,Q=bc[1],ac=ca>0,aa,U,Y,S=[[],[]],L,q,Z,V,ab,p=[0,0,0,0],T=function(s,r){return r.y-s.y};if(cv.visible&&(cr.enabled||cv._hasPointLabels)){bI.prototype.drawDataLabels.apply(cv);bm(cu,function(r){r.dataLabel&&r.visible&&S[r.half].push(r)});for(V=2;V--;){var ba=[],A=[],W=S[V],P=W.length,X;if(P){cv.sortByAngle(W,V-0.5);for(ab=cu=0;!cu&&W[ab];){cu=W[ab]&&W[ab].dataLabel&&(W[ab].dataLabel.getBBox().height||21),ab++}if(ca>0){U=bU(Q+bb+ca,cs.plotHeight);for(ab=be(0,Q-bb-ca);ab<=U;ab+=cu){ba.push(ab)}U=ba.length;if(P>U){ct=[].concat(W);ct.sort(T);for(ab=P;ab--;){ct[ab].rank=ab}for(ab=P;ab--;){W[ab].rank>=U&&W.splice(ab,1)}P=W.length}for(ab=0;ab<P;ab++){ct=W[ab];Y=ct.labelPos;ct=9999;var u,v;for(v=0;v<U;v++){u=bF(ba[v]-Y[1]),u<ct&&(ct=u,X=v)}if(X<ab&&ba[ab]!==null){X=ab}else{for(U<P-ab+X&&ba[ab]!==null&&(X=U-P+ab);ba[X]===null;){X++}}A.push({i:X,y:ba[X]});ba[X]=null}A.sort(T)}for(ab=0;ab<P;ab++){ct=W[ab];Y=ct.labelPos;aa=ct.dataLabel;Z=ct.visible===!1?"hidden":"visible";ct=Y[1];if(ca>0){if(U=A.pop(),X=U.i,q=U.y,ct>q&&ba[X+1]!==null||ct<q&&ba[X-1]!==null){q=bU(be(0,ct),cs.plotHeight)}}else{q=ct}L=cr.justify?bc[0]+(V?-1:1)*(bb+ca):cv.getX(q===Q-bb-ca||q===Q+bb+ca?ct:q,V);aa._attr={visibility:Z,align:Y[6]};aa._pos={x:L+cr.x+({left:cq,right:-cq}[Y[6]]||0),y:q+cr.y-10};aa.connX=L;aa.connY=q;if(this.options.size===null){U=aa.width,L-U<cq?p[3]=be(bf(U-L+cq),p[3]):L+U>co-cq&&(p[1]=be(bf(L+U-co+cq),p[1])),q-cu/2<0?p[0]=be(bf(-q+cu/2),p[0]):q+cu/2>cn&&(p[2]=be(bf(q+cu/2-cn),p[2]))}}}}if(ah(p)===0||this.verifyDataLabelOverflow(p)){this.placeDataLabels(),ac&&cp&&bm(this.points,function(r){cm=r.connector;Y=r.labelPos;if((aa=r.dataLabel)&&aa._pos){Z=aa._attr.visibility,L=aa.connX,q=aa.connY,cc=cb?["M",L+(Y[6]==="left"?5:-5),q,"C",L,q,2*Y[2]-Y[4],2*Y[3]-Y[5],Y[2],Y[3],"L",Y[4],Y[5]]:["M",L+(Y[6]==="left"?5:-5),q,"L",Y[2],Y[3],"L",Y[4],Y[5]],cm?(cm.animate({d:cc}),cm.attr("visibility",Z)):r.connector=cm=cv.chart.renderer.path(cc).attr({"stroke-width":cp,stroke:cr.connectorColor||r.color||"#606060",visibility:Z}).add(cv.dataLabelsGroup)}else{if(cm){r.connector=cm.destroy()}}})}}},bT.pie.prototype.placeDataLabels=function(){bm(this.points,function(q){var q=q.dataLabel,p;if(q){(p=q._pos)?(q.attr(q._attr),q[q.moved?"animate":"attr"](p),q.moved=!0):q&&q.attr({y:-999})}})},bT.pie.prototype.alignDataLabel=a9,bT.pie.prototype.verifyDataLabelOverflow=function(q){var p=this.center,u=this.options,t=u.center,s=u=u.minSize||80,r;t[0]!==null?s=be(p[2]-be(q[1],q[3]),u):(s=be(p[2]-q[1]-q[3],u),p[0]+=(q[3]-q[1])/2);t[1]!==null?s=be(bU(s,p[2]-be(q[0],q[2])),u):(s=be(bU(s,p[2]-q[0]-q[2]),u),p[1]+=(q[0]-q[2])/2);s<p[2]?(p[2]=s,this.translate(p),bm(this.points,function(v){if(v.dataLabel){v.dataLabel._pos=null}}),this.drawDataLabels&&this.drawDataLabels()):r=!0;return r}}if(bT.column){bT.column.prototype.alignDataLabel=function(A,z,x,v,u){var t=this.chart,s=t.inverted,r=A.dlBox||A.shapeArgs,q=A.below||A.plotY>bk(this.translatedThreshold,t.plotSizeY),p=bk(x.inside,!!this.options.stacking);if(r&&(v=bd(r),s&&(v={x:t.plotWidth-v.y-v.height,y:t.plotHeight-v.x-v.width,width:v.height,height:v.width}),!p)){s?(v.x+=q?0:v.width,v.width=0):(v.y+=q?v.height:0,v.height=0)}x.align=bk(x.align,!s||p?"center":q?"right":"left");x.verticalAlign=bk(x.verticalAlign,s||p?"middle":q?"top":"bottom");bI.prototype.alignDataLabel.call(this,A,z,x,v,u)}}var aj=bE.TrackerMixin={drawTrackerPoint:function(){var q=this,p=q.chart,u=p.pointer,t=q.options.cursor,s=t&&{cursor:t},r=function(z){var x=z.target,v;if(p.hoverSeries!==q){q.onMouseOver()}for(;x&&!v;){v=x.point,x=x.parentNode}if(v!==bi&&v!==p.hoverPoint){v.onMouseOver(z)}};bm(q.points,function(v){if(v.graphic){v.graphic.element.point=v}if(v.dataLabel){v.dataLabel.element.point=v}});if(!q._hasTracking){bm(q.trackerGroups,function(v){if(q[v]&&(q[v].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",function(x){u.onTrackerMouseOut(x)}).css(s),bo)){q[v].on("touchstart",r)}}),q._hasTracking=!0}},drawTrackerGraph:function(){var G=this,F=G.options,E=F.trackByArea,D=[].concat(E?G.areaPath:G.graphPath),B=D.length,A=G.chart,z=A.pointer,x=A.renderer,v=A.options.tooltip.snap,u=G.tracker,t=F.cursor,s=t&&{cursor:t},t=G.singlePoints,r,q=function(){if(A.hoverSeries!==G){G.onMouseOver()}},p="rgba(192,192,192,"+(a4?0.0001:0.002)+")";if(B&&!E){for(r=B+1;r--;){D[r]==="M"&&D.splice(r+1,0,D[r+1]-v,D[r+2],"L"),(r&&D[r]==="M"||r===B)&&D.splice(r,0,"L",D[r-2]+v,D[r-1])}}for(r=0;r<t.length;r++){B=t[r],D.push("M",B.plotX-v,B.plotY,"L",B.plotX+v,B.plotY)}u?u.attr({d:D}):(G.tracker=x.path(D).attr({"stroke-linejoin":"round",visibility:G.visible?"visible":"hidden",stroke:p,fill:E?p:b9,"stroke-width":F.lineWidth+(E?0:2*v),zIndex:2}).add(G.group),bm([G.tracker,G.markerGroup],function(H){H.addClass("highcharts-tracker").on("mouseover",q).on("mouseout",function(J){z.onTrackerMouseOut(J)}).css(s);if(bo){H.on("touchstart",q)}}))}};if(bT.column){aq.prototype.drawTracker=aj.drawTrackerPoint}if(bT.pie){bT.pie.prototype.drawTracker=aj.drawTrackerPoint}if(bT.scatter){af.prototype.drawTracker=aj.drawTrackerPoint}bh(aR.prototype,{setItemEvents:function(q,p,u,t,s){var r=this;(u?p:q.legendGroup).on("mouseover",function(){q.setState("hover");p.css(r.options.itemHoverStyle)}).on("mouseout",function(){p.css(q.visible?t:s);q.setState()}).on("click",function(v){var x=function(){q.setVisible()},v={browserEvent:v};q.firePointEvent?q.firePointEvent("legendItemClick",v,x):bG(q,"legendItemClick",v,x)})},createCheckboxForItem:function(p){p.checkbox=b8("input",{type:"checkbox",checked:p.selected,defaultChecked:p.selected},this.options.itemCheckboxStyle,this.chart.container);a8(p.checkbox,"click",function(q){bG(p,"checkboxClick",{checked:q.target.checked},function(){p.select()})})}});bQ.legend.itemStyle.cursor="pointer";bh(f.prototype,{showResetZoom:function(){var q=this,p=bQ.lang,u=q.options.chart.resetZoomButton,t=u.theme,s=t.states,r=u.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=q.renderer.button(p.resetZoom,null,null,function(){q.zoomOut()},t,s&&s.hover).attr({align:u.position.align,title:p.resetZoomTitle}).add().align(u.position,!1,r)},zoomOut:function(){var p=this;bG(p,"selection",{resetSelection:!0},function(){p.zoom()})},zoom:function(q){var p,t=this.pointer,s=!1,r;!q||q.resetSelection?bm(this.axes,function(u){p=u.zoom()}):bm(q.xAxis.concat(q.yAxis),function(u){var x=u.axis,v=x.isXAxis;if(t[v?"zoomX":"zoomY"]||t[v?"pinchX":"pinchY"]){p=x.zoom(u.min,u.max),x.displayBtn&&(s=!0)}});r=this.resetZoomButton;if(s&&!r){this.showResetZoom()}else{if(!s&&aD(r)){this.resetZoomButton=r.destroy()}}p&&this.redraw(bk(this.options.chart.animation,q&&q.animation,this.pointCount<100))},pan:function(q,p){var t=this,s=t.hoverPoints,r;s&&bm(s,function(u){u.setState()});bm(p==="xy"?[1,0]:[1],function(u){var D=q[u?"chartX":"chartY"],B=t[u?"xAxis":"yAxis"][0],A=t[u?"mouseDownX":"mouseDownY"],z=(B.pointRange||0)/2,x=B.getExtremes(),v=B.toValue(A-D,!0)+z,A=B.toValue(A+t[u?"plotWidth":"plotHeight"]-D,!0)-z;B.series.length&&v>bU(x.dataMin,x.min)&&A<be(x.dataMax,x.max)&&(B.setExtremes(v,A,!1,!1,{trigger:"pan"}),r=!0);t[u?"mouseDownX":"mouseDownY"]=D});r&&t.redraw(!1);bJ(t.container,{cursor:"move"})}});bh(aA.prototype,{select:function(q,p){var t=this,s=t.series,r=s.chart,q=bk(q,!t.selected);t.firePointEvent(q?"select":"unselect",{accumulate:p},function(){t.selected=t.options.selected=q;s.options.data[cj(t,s.data)]=t.options;t.setState(q&&"select");p||bm(r.getSelectedPoints(),function(u){if(u.selected&&u!==t){u.selected=u.options.selected=!1,s.options.data[cj(u,s.data)]=u.options,u.setState(""),u.firePointEvent("unselect")}})})},onMouseOver:function(q){var p=this.series,t=p.chart,s=t.tooltip,r=t.hoverPoint;if(r&&r!==this){r.onMouseOut()}this.firePointEvent("mouseOver");s&&(!s.shared||p.noSharedTooltip)&&s.refresh(this,q);this.setState("hover");t.hoverPoint=this},onMouseOut:function(){var q=this.series.chart,p=q.hoverPoints;this.firePointEvent("mouseOut");if(!p||cj(this,p)===-1){this.setState(),q.hoverPoint=null}},importEvents:function(){if(!this.hasImportedEvents){var q=bd(this.series.options.point,this.options).events,p;this.events=q;for(p in q){a8(this,p,q[p])}this.hasImportedEvents=!0}},setState:function(G,F){var E=this.plotX,D=this.plotY,B=this.series,A=B.options.states,z=bx[B.type].marker&&B.options.marker,x=z&&!z.enabled,v=z&&z.states[G],u=v&&v.enabled===!1,t=B.stateMarkerGraphic,s=this.marker||{},r=B.chart,q=B.halo,p,G=G||"";p=this.pointAttr[G]||B.pointAttr[G];if(!(G===this.state&&!F||this.selected&&G!=="select"||A[G]&&A[G].enabled===!1||G&&(u||x&&v.enabled===!1)||G&&s.states&&s.states[G]&&s.states[G].enabled===!1)){if(this.graphic){z=z&&this.graphic.symbolName&&p.r,this.graphic.attr(bd(p,z?{x:E-z,y:D-z,width:2*z,height:2*z}:{})),t&&t.hide()}else{if(G&&v){if(z=v.radius,s=s.symbol||B.symbol,t&&t.currentSymbol!==s&&(t=t.destroy()),t){t[F?"animate":"attr"]({x:E-z,y:D-z})}else{if(s){B.stateMarkerGraphic=t=r.renderer.symbol(s,E-z,D-z,2*z,2*z).attr(p).add(B.markerGroup),t.currentSymbol=s}}}if(t){t[G&&r.isInsidePlot(E,D,r.inverted)?"show":"hide"]()}}if((E=A[G]&&A[G].halo)&&E.size){if(!q){B.halo=q=r.renderer.path().add(B.seriesGroup)}q.attr(bh({fill:ce(this.color||B.color).setOpacity(E.opacity).get()},E.attributes))[F?"animate":"attr"]({d:this.haloPath(E.size)})}else{q&&q.attr({d:[]})}this.state=G}},haloPath:function(q){var p=this.series,t=p.chart,s=p.getPlotBox(),r=t.inverted;return t.renderer.symbols.circle(s.translateX+(r?p.yAxis.len-this.plotY:this.plotX)-q,s.translateY+(r?p.xAxis.len-this.plotX:this.plotY)-q,q*2,q*2)}});bh(bI.prototype,{onMouseOver:function(){var q=this.chart,p=q.hoverSeries;if(p&&p!==this){p.onMouseOut()}this.options.events.mouseOver&&bG(this,"mouseOver");this.setState("hover");q.hoverSeries=this},onMouseOut:function(){var q=this.options,p=this.chart,s=p.tooltip,r=p.hoverPoint;if(r){r.onMouseOut()}this&&q.events.mouseOut&&bG(this,"mouseOut");s&&!q.stickyTracking&&(!s.shared||this.noSharedTooltip)&&s.hide();this.setState();p.hoverSeries=null},setState:function(q){var p=this.options,t=this.graph,s=this.graphNeg,r=p.states,p=p.lineWidth,q=q||"";if(this.state!==q){this.state=q,r[q]&&r[q].enabled===!1||(q&&(p=r[q].lineWidth||p+(r[q].lineWidthPlus||0)),t&&!t.dashstyle&&(q={"stroke-width":p},t.attr(q),s&&s.attr(q)))}},setVisible:function(q,p){var x=this,v=x.chart,u=x.legendItem,t,s=v.options.chart.ignoreHiddenSeries,r=x.visible;t=(x.visible=q=x.userOptions.visible=q===bi?!r:q)?"show":"hide";bm(["group","dataLabelsGroup","markerGroup","tracker"],function(z){if(x[z]){x[z][t]()}});if(v.hoverSeries===x){x.onMouseOut()}u&&v.legend.colorizeItem(x,q);x.isDirty=!0;x.options.stacking&&bm(v.series,function(z){if(z.options.stacking&&z.visible){z.isDirty=!0}});bm(x.linkedSeries,function(z){z.setVisible(q,!1)});if(s){v.isDirtyBox=!0}p!==!1&&v.redraw();bG(x,t)},setTooltipPoints:function(A){var z=[],x,v,u=this.xAxis,t=u&&u.getExtremes(),s=u?u.tooltipLen||u.len:this.chart.plotSizeX,r,q,p=[];if(!(this.options.enableMouseTracking===!1||this.singularTooltips)){if(A){this.tooltipPoints=null}bm(this.segments||this.points,function(B){z=z.concat(B)});u&&u.reversed&&(z=z.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(z);A=z.length;for(q=0;q<A;q++){if(u=z[q],x=u.x,x>=t.min&&x<=t.max){r=z[q+1];x=v===bi?0:v+1;for(v=z[q+1]?bU(be(0,by((u.clientX+(r?r.wrappedClientX||r.clientX:s))/2)),s):s;x>=0&&x<=v;){p[x++]=u}}}this.tooltipPoints=p}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(p){this.selected=p=p===bi?!this.selected:p;if(this.checkbox){this.checkbox.checked=p}bG(this,p?"select":"unselect")},drawTracker:aj.drawTrackerGraph});bH(bI.prototype,"init",function(q){var p;q.apply(this,Array.prototype.slice.call(arguments,1));(p=this.xAxis)&&p.options.ordinal&&a8(this,"updatedData",function(){delete p.ordinalIndex})});bH(bK.prototype,"getTimeTicks",function(P,N,M,L,K,J,H,G){var F=0,E=0,D,B={},A,z,x,v=[],u=-Number.MAX_VALUE,t=this.options.tickPixelInterval;if(!this.options.ordinal||!J||J.length<3||M===bi){return P.call(this,N,M,L,K)}for(z=J.length;E<z;E++){x=E&&J[E-1]>L;J[E]<M&&(F=E);if(E===z-1||J[E+1]-J[E]>H*5||x){if(J[E]>u){for(D=P.call(this,N,J[F],J[E],K);D.length&&D[0]<=u;){D.shift()}D.length&&(u=D[D.length-1]);v=v.concat(D)}F=E+1}if(x){break}}P=D.info;if(G&&P.unitRange<=bM.hour){E=v.length-1;for(F=1;F<E;F++){(new Date(v[F]-aF))[bl]()!==(new Date(v[F-1]-aF))[bl]()&&(B[v[F]]="day",A=!0)}A&&(B[v[0]]="day");P.higherRanks=B}v.info=P;if(G&&bg(t)){var G=P=v.length,E=[],r;for(A=[];G--;){F=this.translate(v[G]),r&&(A[G]=r-F),E[G]=r=F}A.sort();A=A[by(A.length/2)];A<t*0.6&&(A=null);G=v[P-1]>L?P-1:P;for(r=void 0;G--;){F=E[G],L=r-F,r&&L<t*0.8&&(A===null||L<A*0.8)?(B[v[G]]&&!B[v[G+1]]?(L=G+1,r=F):L=G,v.splice(L,1)):r=F}}return v});bh(bK.prototype,{beforeSetTickPositions:function(){var q,p=[],v=!1,u,t=this.getExtremes(),s=t.min,t=t.max,r;if(this.options.ordinal){bm(this.series,function(z,x){if(z.visible!==!1&&z.takeOrdinalPosition!==!1&&(p=p.concat(z.processedXData),q=p.length,p.sort(function(B,A){return B-A}),q)){for(x=q-1;x--;){p[x]===p[x+1]&&p.splice(x,1)}}});q=p.length;if(q>2){u=p[1]-p[0];for(r=q-1;r--&&!v;){p[r+1]-p[r]!==u&&(v=!0)}if(!this.options.keepOrdinalPadding&&(p[0]-s>u||t-p[p.length-1]>u)){v=!0}}v?(this.ordinalPositions=p,v=this.val2lin(be(s,p[0]),!0),u=this.val2lin(bU(t,p[p.length-1]),!0),this.ordinalSlope=t=(t-s)/(u-v),this.ordinalOffset=s-v*t):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=bi}this.groupIntervalFactor=null},val2lin:function(q,p){var u=this.ordinalPositions;if(u){var t=u.length,s,r;for(s=t;s--;){if(u[s]===q){r=s;break}}for(s=t-1;s--;){if(q>u[s]||s===0){u=(q-u[s])/(u[s+1]-u[s]);r=s+u;break}}return p?r:this.ordinalSlope*(r||0)+this.ordinalOffset}else{return q}},lin2val:function(q,p){var x=this.ordinalPositions;if(x){var v=this.ordinalSlope,u=this.ordinalOffset,t=x.length-1,s,r;if(p){q<0?q=x[0]:q>t?q=x[t]:(t=by(q),r=q-t)}else{for(;t--;){if(s=v*t+u,q>=s){v=v*(t+1)+u;r=(q-s)/(v-s);break}}}return r!==bi&&x[t]!==bi?x[t]+(r?r*(x[t+1]-x[t]):0):q}else{return q}},getExtendedPositions:function(){var q=this.chart,p=this.series[0].currentDataGrouping,v=this.ordinalIndex,u=p?p.count+p.unitName:"raw",t=this.getExtremes(),s,r;if(!v){v=this.ordinalIndex={}}if(!v[u]){s={series:[],getExtremes:function(){return{min:t.dataMin,max:t.dataMax}},options:{ordinal:!0},val2lin:bK.prototype.val2lin},bm(this.series,function(x){r={xAxis:s,xData:x.xData,chart:q,destroyGroupedData:a9};r.options={dataGrouping:p?{enabled:!0,forced:!0,approximation:"open",units:[[p.unitName,[p.count]]]}:{enabled:!1}};x.processData.apply(r);s.series.push(r)}),this.beforeSetTickPositions.apply(s),v[u]=s.ordinalPositions}return v[u]},getGroupIntervalFactor:function(q,p,v){var u=0,v=v.processedXData,t=v.length,s=[],r=this.groupIntervalFactor;if(!r){for(;u<t-1;u++){s[u]=v[u+1]-v[u]}s.sort(function(z,x){return z-x});u=s[by(t/2)];q=be(q,v[0]);p=bU(p,v[t-1]);this.groupIntervalFactor=r=t*u/(p-q)}return r},postProcessTickInterval:function(q){var p=this.ordinalSlope;return p?q/(p/this.closestPointRange):q}});bH(f.prototype,"pan",function(G,F){var E=this.xAxis[0],D=F.chartX,B=!1;if(E.options.ordinal&&E.series.length){var A=this.mouseDownX,z=E.getExtremes(),x=z.dataMax,v=z.min,u=z.max,t=this.hoverPoints,s=E.closestPointRange,A=(A-D)/(E.translationSlope*(E.ordinalSlope||s)),r={ordinalPositions:E.getExtendedPositions()},s=E.lin2val,q=E.val2lin,p;if(r.ordinalPositions){if(bF(A)>1){t&&bm(t,function(H){H.setState()}),A<0?(t=r,p=E.ordinalPositions?E:r):(t=E.ordinalPositions?E:r,p=r),r=p.ordinalPositions,x>r[r.length-1]&&r.push(x),this.fixedRange=u-v,A=E.toFixedRange(null,null,s.apply(t,[q.apply(t,[v,!0])+A,!0]),s.apply(p,[q.apply(p,[u,!0])+A,!0])),A.min>=bU(z.dataMin,v)&&A.max<=be(x,u)&&E.setExtremes(A.min,A.max,!0,!1,{trigger:"pan"}),this.mouseDownX=D,bJ(this.container,{cursor:"move"})}}else{B=!0}}else{B=!0}B&&G.apply(this,Array.prototype.slice.call(arguments,1))});bH(bI.prototype,"getSegments",function(q){var p,s=this.options.gapSize,r=this.xAxis;q.apply(this,Array.prototype.slice.call(arguments,1));if(s){p=this.segments,bm(p,function(t,v){for(var u=t.length-1;u--;){t[u+1].x-t[u].x>r.closestPointRange*s&&p.splice(v+1,0,t.splice(u+1,t.length-u))}})}});var bp=bI.prototype,bR=bX.prototype,aB=bp.processData,ar=bp.generatePoints,ai=bp.destroy,C=bR.tooltipHeaderFormatter,i={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},bC={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},bj=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],am={sum:function(q){var p=q.length,r;if(!p&&q.hasNulls){r=null}else{if(p){for(r=0;p--;){r+=q[p]}}}return r},average:function(q){var p=q.length,q=am.sum(q);typeof q==="number"&&p&&(q/=p);return q},open:function(p){return p.length?p[0]:p.hasNulls?null:bi},high:function(p){return p.length?ah(p):p.hasNulls?null:bi},low:function(p){return p.length?ch(p):p.hasNulls?null:bi},close:function(p){return p.length?p[p.length-1]:p.hasNulls?null:bi},ohlc:function(q,p,s,r){q=am.open(q);p=am.high(p);s=am.low(s);r=am.close(r);if(typeof q==="number"||typeof p==="number"||typeof s==="number"||typeof r==="number"){return[q,p,s,r]}},range:function(q,p){q=am.low(q);p=am.high(p);if(typeof q==="number"||typeof p==="number"){return[q,p]}}};bp.groupData=function(L,K,J,H){var G=this.data,F=this.options.data,E=[],D=[],B=L.length,A,z,x=!!K,v=[[],[],[],[]],H=typeof H==="function"?H:am[H],u=this.pointArrayMap,t=u&&u.length,s;for(s=0;s<=B;s++){if(L[s]>=J[0]){break}}for(;s<=B;s++){for(;J[1]!==bi&&L[s]>=J[1]||s===B;){if(A=J.shift(),z=H.apply(0,v),z!==bi&&(E.push(A),D.push(z)),v[0]=[],v[1]=[],v[2]=[],v[3]=[],s===B){break}}if(s===B){break}if(u){A=this.cropStart+s;A=G&&G[A]||this.pointClass.prototype.applyOptions.apply({series:this},[F[A]]);var r;for(z=0;z<t;z++){if(r=A[u[z]],typeof r==="number"){v[z].push(r)}else{if(r===null){v[z].hasNulls=!0}}}}else{if(A=x?K[s]:null,typeof A==="number"){v[0].push(A)}else{if(A===null){v[0].hasNulls=!0}}}}return[E,D]};bp.processData=function(){var B=this.chart,A=this.options,z=A.dataGrouping,x=this.allowDG!==!1&&z&&bk(z.enabled,B.options._stock),v;this.forceCrop=x;this.groupPixelWidth=null;this.hasProcessed=!0;if(aB.apply(this,arguments)!==!1&&x){this.destroyGroupedData();var u=this.processedXData,t=this.processedYData,s=B.plotSizeX,B=this.xAxis,r=B.options.ordinal,q=this.groupPixelWidth=B.getGroupPixelWidth&&B.getGroupPixelWidth(),x=this.pointRange;if(q){v=!0;this.points=null;var p=B.getExtremes(),x=p.min,p=p.max,r=r&&B.getGroupIntervalFactor(x,p,this)||1,s=q*(p-x)/s*r,q=B.getTimeTicks(B.normalizeTimeTickInterval(s,z.units||bj),x,p,null,u,this.closestPointRange),t=bp.groupData.apply(this,[u,t,q,z.approximation]),u=t[0],t=t[1];if(z.smoothed){z=u.length-1;for(u[z]=p;z--&&z>0;){u[z]+=s/2}u[0]=x}this.currentDataGrouping=q.info;if(A.pointRange===null){this.pointRange=q.info.totalRange}this.closestPointRange=q.info.totalRange;if(bg(u[0])&&u[0]<B.dataMin){B.dataMin=u[0]}this.processedXData=u;this.processedYData=t}else{this.currentDataGrouping=null,this.pointRange=x}this.hasGroupedData=v}};bp.destroyGroupedData=function(){var p=this.groupedData;bm(p||[],function(q,r){q&&(p[r]=q.destroy?q.destroy():null)});this.groupedData=null};bp.generatePoints=function(){ar.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};bR.tooltipHeaderFormatter=function(q){var p=q.series,x=p.tooltipOptions,v=p.options.dataGrouping,u=x.xDateFormat,t,s=p.xAxis,r;if(s&&s.options.type==="datetime"&&v&&cg(q.key)){p=p.currentDataGrouping;v=v.dateTimeLabelFormats;if(p){s=v[p.unitName],p.count===1?u=s[0]:(u=s[1],t=s[2])}else{if(!u&&v){for(r in bM){if(bM[r]>=s.closestPointRange||bM[r]<=bM.day&&q.key%bM[r]>0){u=v[r][0];break}}}}u=o(u,q.key);t&&(u+=o(t,q.key+p.totalRange-1));q=x.headerFormat.replace("{point.key}",u)}else{q=C.call(this,q)}return q};bp.destroy=function(){for(var q=this.groupedData||[],p=q.length;p--;){q[p]&&q[p].destroy()}ai.apply(this)};bH(bp,"setOptions",function(q,p){var u=q.call(this,p),t=this.type,s=this.chart.options.plotOptions,r=bx[t].dataGrouping;if(bC[t]){r||(r=bd(i,bC[t])),u.dataGrouping=bd(r,s.series&&s.series.dataGrouping,s[t].dataGrouping,p.dataGrouping)}if(this.chart.options._stock){this.requireSorting=!0}return u});bH(bK.prototype,"setScale",function(p){p.call(this);bm(this.series,function(q){q.hasProcessed=!1})});bK.prototype.getGroupPixelWidth=function(){var q=this.series,p=q.length,u,t=0,s=!1,r;for(u=p;u--;){(r=q[u].options.dataGrouping)&&(t=be(t,r.groupPixelWidth))}for(u=p;u--;){if((r=q[u].options.dataGrouping)&&q[u].hasProcessed){if(p=(q[u].processedXData||q[u].data).length,q[u].groupPixelWidth||p>this.chart.plotSizeX/t||p&&r.forced){s=!0}}}return s?t:0};bx.ohlc=bd(bx.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color}">в—Џ</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});bR=au(bT.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(p){return[p.open,p.high,p.low,p.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){bT.column.prototype.getAttribs.apply(this,arguments);var q=this.options,p=q.states,q=q.upColor||this.color,s=bd(this.pointAttr),r=this.upColorProp;s[""][r]=q;s.hover[r]=p.hover.upColor||q;s.select[r]=p.select.upColor||q;bm(this.points,function(t){if(t.open<t.close){t.pointAttr=s}})},translate:function(){var p=this.yAxis;bT.column.prototype.translate.apply(this);bm(this.points,function(q){if(q.open!==null){q.plotOpen=p.translate(q.open,0,1,0,1)}if(q.close!==null){q.plotClose=p.translate(q.close,0,1,0,1)}})},drawPoints:function(){var A=this,z=A.chart,x,v,u,t,s,r,q,p;bm(A.points,function(B){if(B.plotY!==bi){q=B.graphic,x=B.pointAttr[B.selected?"selected":""]||A.pointAttr[""],t=x["stroke-width"]%2/2,p=bf(B.plotX)-t,s=bf(B.shapeArgs.width/2),r=["M",p,bf(B.yBottom),"L",p,bf(B.plotY)],B.open!==null&&(v=bf(B.plotOpen)+t,r.push("M",p,v,"L",p-s,v)),B.close!==null&&(u=bf(B.plotClose)+t,r.push("M",p,u,"L",p+s,u)),q?q.animate({d:r}):B.graphic=z.renderer.path(r).attr(x).add(A.group)}})},animate:null});bT.ohlc=bR;bx.candlestick=bd(bx.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:bx.ohlc.tooltip,threshold:null,upColor:"white"});bR=au(bR,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){bT.ohlc.prototype.getAttribs.apply(this,arguments);var q=this.options,p=q.states,t=q.upLineColor||q.lineColor,s=p.hover.upLineColor||t,r=p.select.upLineColor||t;bm(this.points,function(u){if(u.open<u.close){u.pointAttr[""].stroke=t,u.pointAttr.hover.stroke=s,u.pointAttr.select.stroke=r}})},drawPoints:function(){var G=this,F=G.chart,E,D=G.pointAttr[""],B,A,z,x,v,u,t,s,r,q,p;bm(G.points,function(H){r=H.graphic;if(H.plotY!==bi){E=H.pointAttr[H.selected?"selected":""]||D,t=E["stroke-width"]%2/2,s=bf(H.plotX)-t,B=H.plotOpen,A=H.plotClose,z=bw.min(B,A),x=bw.max(B,A),p=bf(H.shapeArgs.width/2),v=bf(z)!==bf(H.plotY),u=x!==H.yBottom,z=bf(z)+t,x=bf(x)+t,q=["M",s-p,x,"L",s-p,z,"L",s+p,z,"L",s+p,x,"Z","M",s,z,"L",s,v?bf(H.plotY):z,"M",s,x,"L",s,u?bf(H.yBottom):x],r?r.animate({d:q}):H.graphic=F.renderer.path(q).attr(E).add(G.group).shadow(G.options.shadow)}})}});bT.candlestick=bR;var aG=b.prototype.symbols;bx.flags=bd(bx.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30});bT.flags=au(bT.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:bI.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){bT.column.prototype.translate.apply(this);var E=this.chart,D=this.points,B=D.length-1,A,z,x=this.options.onSeries,x=(A=x&&E.get(x))&&A.options.step,v=A&&A.points,u=v&&v.length,t=this.xAxis,s=t.getExtremes(),r,q,p;if(A&&A.visible&&u){A=A.currentDataGrouping;q=v[u-1].x+(A?A.totalRange:0);for(D.sort(function(G,F){return G.x-F.x});u--&&D[B];){if(A=D[B],r=v[u],r.x<=A.x&&r.plotY!==bi){if(A.x<=q){A.plotY=r.plotY,r.x<A.x&&!x&&(p=v[u+1])&&p.plotY!==bi&&(A.plotY+=(A.x-r.x)/(p.x-r.x)*(p.plotY-r.plotY))}B--;u++;if(B<0){break}}}}bm(D,function(G,F){if(G.plotY===bi){G.x>=s.min&&G.x<=s.max?G.plotY=E.chartHeight-t.bottom-(t.opposite?t.height:0)+t.offset-E.plotTop:G.shapeArgs={}}if((z=D[F-1])&&z.plotX===G.plotX){if(z.stackIndex===bi){z.stackIndex=0}G.stackIndex=z.stackIndex+1}})},drawPoints:function(){var G,F=this.pointAttr[""],E=this.points,D=this.chart.renderer,B,A,z=this.options,x=z.y,v,u,t,s,r=z.lineWidth%2/2,q,p;for(u=E.length;u--;){if(t=E[u],G=t.plotX>this.xAxis.len,B=t.plotX+(G?r:-r),s=t.stackIndex,v=t.options.shape||z.shape,A=t.plotY,A!==bi&&(A=t.plotY+x+r-(s!==bi&&s*z.stackDistance)),q=s?bi:t.plotX+r,p=s?bi:t.plotY,s=t.graphic,A!==bi&&B>=0&&!G){G=t.pointAttr[t.selected?"select":""]||F,s?s.attr({x:B,y:A,r:G.r,anchorX:q,anchorY:p}):t.graphic=D.label(t.options.title||z.title||"A",B,A,v,q,p,z.useHTML).css(bd(z.style,t.style)).attr(G).attr({align:v==="flag"?"left":"center",width:z.width,height:z.height}).add(this.markerGroup).shadow(z.shadow),t.tooltipPos=[B,A]}else{if(s){t.graphic=s.destroy()}}}},drawTracker:function(){var p=this.points;aj.drawTrackerPoint.apply(this);bm(p,function(q){var r=q.graphic;r&&a8(r.element,"mouseover",function(){if(q.stackIndex>0&&!q.raised){q._y=r.y,r.attr({y:q._y-8}),q.raised=!0}bm(p,function(s){if(s!==q&&s.raised&&s.graphic){s.graphic.attr({y:s._y}),s.raised=!1}})})})},animate:a9});aG.flag=function(q,p,u,t,s){var r=s&&s.anchorX||q,s=s&&s.anchorY||p;return["M",r,s,"L",q,p+t,q,p,q+u,p,q+u,p+t,q,p+t,"M",r,s,"Z"]};bm(["circle","square"],function(p){aG[p+"pin"]=function(q,v,u,t,s){var r=s&&s.anchorX,s=s&&s.anchorY,q=aG[p](q,v,u,t);r&&s&&q.push("M",r,v>s?v:v+t,"L",r,s);return q}});aU===bE.VMLRenderer&&bm(["flag","circlepin","squarepin"],function(p){at.prototype.symbols[p]=aG[p]});var bR=[].concat(bj),ax=function(p){return Math[p].apply(0,a7(arguments,function(q){return typeof q==="number"}))};bR[4]=["day",[1,2,3,4]];bR[5]=["week",[1,2,3]];bh(bQ,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:bT.areaspline===bi?"line":"areaspline",color:"#4572A7",compare:null,fillOpacity:0.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:bR},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:0.1,maxPadding:0.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:aW?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:a4&&!aW}});az.prototype={drawHandle:function(q,p){var x=this.chart,v=x.renderer,u=this.elementsToDestroy,t=this.handles,s=this.navigatorOptions.handles,s={fill:s.backgroundColor,stroke:s.borderColor,"stroke-width":1},r;this.rendered||(t[p]=v.g("navigator-handle-"+["left","right"][p]).css({cursor:"e-resize"}).attr({zIndex:4-p}).add(),r=v.rect(-4.5,0,9,16,0,1).attr(s).add(t[p]),u.push(r),r=v.path(["M",-1.5,4,"L",-1.5,12,"M",0.5,4,"L",0.5,12]).attr(s).add(t[p]),u.push(r));t[p][x.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(q,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(q){var p=this.chart.renderer,v=this.elementsToDestroy,u=this.scrollbarButtons,t=this.scrollbarHeight,s=this.scrollbarOptions,r;this.rendered||(u[q]=p.g().add(this.scrollbarGroup),r=p.rect(-0.5,-0.5,t+1,t+1,s.buttonBorderRadius,s.buttonBorderWidth).attr({stroke:s.buttonBorderColor,"stroke-width":s.buttonBorderWidth,fill:s.buttonBackgroundColor}).add(u[q]),v.push(r),r=p.path(["M",t/2+(q?-1:1),t/2-3,"L",t/2+(q?-1:1),t/2+3,t/2+(q?2:-2),t/2]).attr({fill:s.buttonArrowColor}).add(u[q]),v.push(r));q&&u[q].attr({translateX:this.scrollerWidth-t})},render:function(cn,cm,cc,cb){var ca=this.chart,bc=ca.renderer,bb,ba,ac,ab,aa=this.scrollbarGroup,Z=this.navigatorGroup,Y=this.scrollbar,Z=this.xAxis,X=this.scrollbarTrack,W=this.scrollbarHeight,V=this.scrollbarEnabled,T=this.navigatorOptions,Q=this.scrollbarOptions,J=Q.minWidth,N=this.height,v=this.top,u=this.navigatorEnabled,q=T.outlineWidth,U=q/2,P=0,S=this.outlineHeight,K=Q.barBorderRadius,L=Q.barBorderWidth,M=v+U,A;if(!isNaN(cn)){this.navigatorLeft=bb=bk(Z.left,ca.plotLeft+W);this.navigatorWidth=ba=bk(Z.len,ca.plotWidth-2*W);this.scrollerLeft=ac=bb-W;this.scrollerWidth=ab=ab=ba+2*W;Z.getExtremes&&(A=this.getUnionExtremes(!0))&&(A.dataMin!==Z.min||A.dataMax!==Z.max)&&Z.setExtremes(A.dataMin,A.dataMax,!0,!1);cc=bk(cc,Z.translate(cn));cb=bk(cb,Z.translate(cm));if(isNaN(cc)||bF(cc)===Infinity){cc=0,cb=ab}if(!(Z.translate(cb,!0)-Z.translate(cc,!0)<ca.xAxis[0].minRange)){this.zoomedMax=bU(be(cc,cb),ba);this.zoomedMin=be(this.fixedWidth?this.zoomedMax-this.fixedWidth:bU(cc,cb),0);this.range=this.zoomedMax-this.zoomedMin;cc=bf(this.zoomedMax);cm=bf(this.zoomedMin);cn=cc-cm;if(!this.rendered){if(u){this.navigatorGroup=Z=bc.g("navigator").attr({zIndex:3}).add();this.leftShade=bc.rect().attr({fill:T.maskFill}).add(Z);if(!T.maskInside){this.rightShade=bc.rect().attr({fill:T.maskFill}).add(Z)}this.outline=bc.path().attr({"stroke-width":q,stroke:T.outlineColor}).add(Z)}if(V){this.scrollbarGroup=aa=bc.g("scrollbar").add(),Y=Q.trackBorderWidth,this.scrollbarTrack=X=bc.rect().attr({x:0,y:-Y%2/2,fill:Q.trackBackgroundColor,stroke:Q.trackBorderColor,"stroke-width":Y,r:Q.trackBorderRadius||0,height:W}).add(aa),this.scrollbar=Y=bc.rect().attr({y:-L%2/2,height:W,fill:Q.barBackgroundColor,stroke:Q.barBorderColor,"stroke-width":L,r:K}).add(aa),this.scrollbarRifles=bc.path().attr({stroke:Q.rifleColor,"stroke-width":1}).add(aa)}}ca=ca.isResizing?"animate":"attr";if(u){this.leftShade[ca](T.maskInside?{x:bb+cm,y:v,width:cc-cm,height:N}:{x:bb,y:v,width:cm,height:N});if(this.rightShade){this.rightShade[ca]({x:bb+cc,y:v,width:ba-cc,height:N})}this.outline[ca]({d:["M",ac,M,"L",bb+cm+U,M,bb+cm+U,M+S,"L",bb+cc-U,M+S,"L",bb+cc-U,M,ac+ab,M].concat(T.maskInside?["M",bb+cm+U,M,"L",bb+cc-U,M]:[])});this.drawHandle(cm+U,0);this.drawHandle(cc+U,1)}if(V&&aa){this.drawScrollbarButton(0),this.drawScrollbarButton(1),aa[ca]({translateX:ac,translateY:bf(M+N)}),X[ca]({width:ab}),bb=W+cm,ba=cn-L,ba<J&&(P=(J-ba)/2,ba=J,bb-=P),this.scrollbarPad=P,Y[ca]({x:by(bb)+L%2/2,width:ba}),J=W+cm+cn/2-0.5,this.scrollbarRifles.attr({visibility:cn>12?"visible":"hidden"})[ca]({d:["M",J-3,W/4,"L",J-3,2*W/3,"M",J,W/4,"L",J,2*W/3,"M",J+3,W/4,"L",J+3,2*W/3]})}this.scrollbarPad=P;this.rendered=!0}}},addEvents:function(){var q=this.chart.container,p=this.mouseDownHandler,t=this.mouseMoveHandler,s=this.mouseUpHandler,r;r=[[q,"mousedown",p],[q,"mousemove",t],[document,"mouseup",s]];bo&&r.push([q,"touchstart",p],[q,"touchmove",t],[document,"touchend",s]);bm(r,function(u){a8.apply(null,u)});this._events=r},removeEvents:function(){bm(this._events,function(p){bz.apply(null,p)});this._events=bi;this.navigatorEnabled&&this.baseSeries&&bz(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var G=this,F=G.chart,E,D,B=G.scrollbarHeight,A=G.navigatorOptions,z=G.height,x=G.top,v,u,t=document.body.style,s,r=G.baseSeries;G.mouseDownHandler=function(U){var U=F.pointer.normalize(U),T=G.zoomedMin,S=G.zoomedMax,Q=G.top,P=G.scrollbarHeight,N=G.scrollerLeft,M=G.scrollerWidth,L=G.navigatorLeft,K=G.navigatorWidth,J=G.scrollbarPad,H=G.range,Y=U.chartX,X=U.chartY,U=F.xAxis[0],W,V=aW?10:7;if(X>Q&&X<Q+z+P){if((Q=!G.scrollbarEnabled||X<Q+z)&&bw.abs(Y-T-L)<V){G.grabbedLeft=!0,G.otherHandlePos=S,G.fixedExtreme=U.max,F.fixedRange=null}else{if(Q&&bw.abs(Y-S-L)<V){G.grabbedRight=!0,G.otherHandlePos=T,G.fixedExtreme=U.min,F.fixedRange=null}else{if(Y>L+T-J&&Y<L+S+J){G.grabbedCenter=Y;G.fixedWidth=H;if(F.renderer.isSVG){s=t.cursor,t.cursor="ew-resize"}v=Y-T}else{if(Y>N&&Y<N+M){S=Q?Y-L-H/2:Y<L?T-H*0.2:Y>N+M-P?T+H*0.2:Y<L+T?T-H:S;if(S<0){S=0}else{if(S+H>=K){S=K-H,W=E.dataMax}}if(S!==T){G.fixedWidth=H,T=E.toFixedRange(S,S+H,null,W),U.setExtremes(T.min,T.max,!0,!1,{trigger:"navigator"})}}}}}}};G.mouseMoveHandler=function(Q){var P=G.scrollbarHeight,N=G.navigatorLeft,M=G.navigatorWidth,L=G.scrollerLeft,K=G.scrollerWidth,J=G.range,H;if(Q.pageX!==0){Q=F.pointer.normalize(Q),H=Q.chartX,H<N?H=N:H>L+K-P&&(H=L+K-P),G.grabbedLeft?(u=!0,G.render(0,0,H-N,G.otherHandlePos)):G.grabbedRight?(u=!0,G.render(0,0,G.otherHandlePos,H-N)):G.grabbedCenter&&(u=!0,H<v?H=v:H>M+v-J&&(H=M+v-J),G.render(0,0,H-v,H-v+J)),u&&G.scrollbarOptions.liveRedraw&&setTimeout(function(){G.mouseUpHandler(Q)},0)}};G.mouseUpHandler=function(K){var J,H;if(u){if(G.zoomedMin===G.otherHandlePos){J=G.fixedExtreme}else{if(G.zoomedMax===G.otherHandlePos){H=G.fixedExtreme}}J=E.toFixedRange(G.zoomedMin,G.zoomedMax,J,H);F.xAxis[0].setExtremes(J.min,J.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:K})}if(K.type!=="mousemove"){G.grabbedLeft=G.grabbedRight=G.grabbedCenter=G.fixedWidth=G.fixedExtreme=G.otherHandlePos=u=v=null,t.cursor=s||""}};var q=F.xAxis.length,p=F.yAxis.length;F.extraBottomMargin=G.outlineHeight+A.margin;G.navigatorEnabled?(G.xAxis=E=new bK(F,bd({ordinal:r&&r.xAxis.options.ordinal},A.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:q,height:z,offset:0,offsetLeft:B,offsetRight:-B,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),G.yAxis=D=new bK(F,bd(A.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:z,offset:0,index:p,zoomEnabled:!1})),r||A.series.data?G.addBaseSeries():F.series.length===0&&bH(F,"redraw",function(J,H){if(F.series.length>0&&!G.series){G.setBaseSeries(),F.redraw=J}J.call(F,H)})):G.xAxis=E={translate:function(H,N){var M=F.xAxis[0],L=M.getExtremes(),K=F.plotWidth-2*B,J=ax("min",M.options.min,L.dataMin),M=ax("max",M.options.max,L.dataMax)-J;return N?H*M/K+J:K*(H-J)/M},toFixedRange:bK.prototype.toFixedRange};bH(F,"getMargins",function(H){var K=this.legend,J=K.options;H.call(this);G.top=x=G.navigatorOptions.top||this.chartHeight-G.height-G.scrollbarHeight-this.spacing[2]-(J.verticalAlign==="bottom"&&J.enabled&&!J.floating?K.legendHeight+bk(J.margin,10):0);if(E&&D){E.options.top=D.options.top=x,E.setAxisSize(),D.setAxisSize()}});G.addEvents()},getUnionExtremes:function(q){var p=this.chart.xAxis[0],t=this.xAxis,s=t.options,r=p.options;if(!q||p.dataMin!==null){return{dataMin:ax("min",s&&s.min,r.min,p.dataMin,t.dataMin),dataMax:ax("max",s&&s.max,r.max,p.dataMax,t.dataMax)}}},setBaseSeries:function(q){var p=this.chart,q=q||p.options.navigator.baseSeries;this.series&&this.series.remove();this.baseSeries=p.series[q]||typeof q==="string"&&p.get(q)||p.series[0];this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var q=this.baseSeries,p=q?q.options:{},t=p.data,s=this.navigatorOptions.series,r;r=s.data;this.hasNavigatorData=!!r;p=bd(p,s,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0});p.data=r||t;this.series=this.chart.initSeries(p);if(q&&this.navigatorOptions.adaptToUpdatedData!==!1){a8(q,"updatedData",this.updatedDataHandler),q.userOptions.events=bh(q.userOptions.event,{updatedData:this.updatedDataHandler})}},updatedDataHandler:function(){var G=this.chart.scroller,F=G.baseSeries,E=F.xAxis,D=E.getExtremes(),B=D.min,A=D.max,z=D.dataMin,D=D.dataMax,x=A-B,v,u,t,s,r,q=G.series;v=q.xData;var p=!!E.setExtremes;u=A>=v[v.length-1]-(this.closestPointRange||0);v=B<=z;if(!G.hasNavigatorData){q.options.pointStart=F.xData[0],q.setData(F.options.data,!1),r=!0}v&&(s=z,t=s+x);u&&(t=D,v||(s=be(t-x,q.xData[0])));p&&(v||u)?isNaN(s)||E.setExtremes(s,t,!0,!1,{trigger:"updatedData"}):(r&&this.chart.redraw(!1),G.render(be(B,z),bU(A,D)))},destroy:function(){this.removeEvents();bm([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,this.scrollbar],function(p){p&&p.destroy&&p.destroy()});this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null;bm([this.scrollbarButtons,this.handles,this.elementsToDestroy],function(p){aQ(p)})}};bE.Scroller=az;bH(bK.prototype,"zoom",function(q,p,x){var v=this.chart,u=v.options,t=u.chart.zoomType,s=u.navigator,u=u.rangeSelector,r;if(this.isXAxis&&(s&&s.enabled||u&&u.enabled)){if(t==="x"){v.resetZoomButton="blocked"}else{if(t==="y"){r=!1}else{if(t==="xy"){v=this.previousZoom,bg(p)?this.previousZoom=[this.min,this.max]:v&&(p=v[0],x=v[1],delete this.previousZoom)}}}}return r!==bi?r:q.call(this,p,x)});bH(f.prototype,"init",function(q,p,r){a8(this,"beforeRender",function(){var s=this.options;if(s.navigator.enabled||s.scrollbar.enabled){this.scroller=new az(this)}});q.call(this,p,r)});bH(bI.prototype,"addPoint",function(q,p,u,t,s){var r=this.options.turboThreshold;r&&this.xData.length>r&&aD(p)&&!m(p)&&this.chart.scroller&&bt(20,!0);q.call(this,p,u,t,s)});bh(bQ,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}});bQ.lang=bd(bQ.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"});ap.prototype={clickButton:function(J,H){var G=this,F=G.selected,E=G.chart,D=G.buttons,B=G.buttonOptions[J],A=E.xAxis[0],z=E.scroller&&E.scroller.getUnionExtremes()||A||{},x=z.dataMin,v=z.dataMax,u,r=A&&bf(bU(A.max,bk(v,A.max))),q=new Date(r),p=B.type,L=B.count,z=B._range,K;if(!(x===null||v===null||J===G.selected)){if(p==="month"||p==="year"){u={month:"Month",year:"FullYear"}[p],q["set"+u](q["get"+u]()-L),u=q.getTime(),x=bk(x,Number.MIN_VALUE),isNaN(u)||u<x?(u=x,r=bU(u+z,v)):z=r-u}else{if(z){u=be(r-z,x),r=bU(u+z,v)}else{if(p==="ytd"){if(A){if(v===bi){x=Number.MAX_VALUE,v=Number.MIN_VALUE,bm(E.series,function(s){s=s.xData;x=bU(s[0],x);v=be(s[s.length-1],v)}),H=!1}r=new Date(v);K=r.getFullYear();u=K=be(x||0,Date.UTC(K,0,1));r=r.getTime();r=bU(v||r,r)}else{a8(E,"beforeRender",function(){G.clickButton(J)});return}}else{p==="all"&&A&&(u=x,r=v)}}}D[F]&&D[F].setState(0);D[J]&&D[J].setState(2);E.fixedRange=z;A?A.setExtremes(u,r,bk(H,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:B}):(F=E.options.xAxis,F[0]=bd(F[0],{range:z,min:K}));G.setSelected(J)}},setSelected:function(p){this.selected=this.options.selected=p},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(q){var p=this,u=q.options.rangeSelector,t=u.buttons||[].concat(p.defaultButtons),s=u.selected,r=p.blurInputs=function(){var v=p.minInput,x=p.maxInput;v&&v.blur();x&&x.blur()};p.chart=q;p.options=u;p.buttons=[];q.extraTopMargin=35;p.buttonOptions=t;a8(q.container,"mousedown",r);a8(q,"resize",r);bm(t,p.computeButtonRange);s!==bi&&t[s]&&this.clickButton(s,!1);a8(q,"load",function(){a8(q.xAxis[0],"afterSetExtremes",function(){p.updateButtonStates(!0)})})},updateButtonStates:function(A){var z=this,x=this.chart,v=x.xAxis[0],u=x.scroller&&x.scroller.getUnionExtremes()||v,t=u.dataMin,s=u.dataMax,r=z.selected,q=z.options.allButtonsEnabled,p=z.buttons;A&&x.fixedRange!==bf(v.max-v.min)&&(p[r]&&p[r].setState(0),z.setSelected(null));bm(z.buttonOptions,function(B,J){var F=B._range,H=F>s-t,G=F<v.minRange,E=B.type==="all"&&v.max-v.min>=s-t&&p[J].state!==2,D=B.type==="ytd"&&o("%Y",t)===o("%Y",s);F===bf(v.max-v.min)&&J!==r?(z.setSelected(J),p[J].setState(2)):!q&&(H||G||E||D)?p[J].setState(3):p[J].state===3&&p[J].setState(0)})},computeButtonRange:function(q){var p=q.type,s=q.count||1,r={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000};if(r[p]){q._range=r[p]*s}else{if(p==="month"||p==="year"){q._range={month:30,year:365}[p]*86400000*s}}},setInputValue:function(q,p){var r=this.chart.options.rangeSelector;if(bg(p)){this[q+"Input"].HCTime=p}this[q+"Input"].value=o(r.inputEditDateFormat||"%Y-%m-%d",this[q+"Input"].HCTime);this[q+"DateBox"].attr({text:o(r.inputDateFormat||"%b %e, %Y",this[q+"Input"].HCTime)})},drawInput:function(D){var B=this,A=B.chart,z=A.renderer.style,x=A.renderer,v=A.options.rangeSelector,u=B.div,t=D==="min",s,r,q,p=this.inputGroup;this[D+"Label"]=r=x.label(bQ.lang[t?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(bd(z,v.labelStyle)).add(p);p.offset+=r.width+5;this[D+"DateBox"]=q=x.label("",p.offset).attr({padding:2,width:v.inputBoxWidth||90,height:v.inputBoxHeight||17,stroke:v.inputBoxBorderColor||"silver","stroke-width":1}).css(bd({textAlign:"center",color:"#444"},z,v.inputStyle)).on("click",function(){B[D+"Input"].focus()}).add(p);p.offset+=q.width+(t?10:0);this[D+"Input"]=s=b8("input",{name:D,className:"highcharts-range-selector",type:"text"},bh({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:z.fontSize,fontFamily:z.fontFamily,top:A.plotTop+"px"},v.inputStyle),u);s.onfocus=function(){bJ(this,{left:p.translateX+q.x+"px",top:p.translateY+"px",width:q.width-2+"px",height:q.height-2+"px",border:"2px solid silver"})};s.onblur=function(){bJ(this,{border:0,width:"1px",height:"1px"});B.setInputValue(D)};s.onchange=function(){var E=s.value,J=(v.inputDateParser||Date.parse)(E),H=A.xAxis[0],G=H.dataMin,F=H.dataMax;isNaN(J)&&(J=E.split("-"),J=Date.UTC(bO(J[0]),bO(J[1])-1,bO(J[2])));isNaN(J)||(bQ.global.useUTC||(J+=(new Date).getTimezoneOffset()*60000),t?J>B.maxInput.HCTime?J=bi:J<G&&(J=G):J<B.minInput.HCTime?J=bi:J>F&&(J=F),J!==bi&&A.xAxis[0].setExtremes(t?J:H.min,t?H.max:J,bi,bi,{trigger:"rangeSelectorInput"}))}},render:function(J,H){var G=this,F=G.chart,E=F.renderer,D=F.container,B=F.options,A=B.exporting&&B.navigation&&B.navigation.buttonOptions,z=B.rangeSelector,x=G.buttons,B=bQ.lang,v=G.div,v=G.inputGroup,u=z.buttonTheme,t=z.inputEnabled!==!1,s=u&&u.states,q=F.plotLeft,p;if(!G.rendered&&(G.zoomText=E.text(B.rangeSelectorZoom,q,F.plotTop-20).css(z.labelStyle).add(),p=q+G.zoomText.getBBox().width+5,bm(G.buttonOptions,function(K,r){x[r]=E.button(K.text,p,F.plotTop-35,function(){G.clickButton(r);G.isActive=!0},u,s&&s.hover,s&&s.select).css({textAlign:"center"}).add();p+=x[r].width+bk(z.buttonSpacing,5);G.selected===r&&x[r].setState(2)}),G.updateButtonStates(),t)){G.div=v=b8("div",null,{position:"relative",height:0,zIndex:1}),D.parentNode.insertBefore(v,D),G.inputGroup=v=E.g("input-group").add(),v.offset=0,G.drawInput("min"),G.drawInput("max")}t&&(D=F.plotTop-45,v.align(bh({y:D,width:v.offset,x:A&&D<(A.y||0)+A.height-F.spacing[0]?-40:0},z.inputPosition),!0,F.spacingBox),G.setInputValue("min",J),G.setInputValue("max",H));G.rendered=!0},destroy:function(){var q=this.minInput,p=this.maxInput,t=this.chart,s=this.blurInputs,r;bz(t.container,"mousedown",s);bz(t,"resize",s);aQ(this.buttons);if(q){q.onfocus=q.onblur=q.onchange=null}if(p){p.onfocus=p.onblur=p.onchange=null}for(r in this){this[r]&&r!=="chart"&&(this[r].destroy?this[r].destroy():this[r].nodeType&&b3(this[r])),this[r]=null}}};bK.prototype.toFixedRange=function(q,p,t,s){var r=this.chart&&this.chart.fixedRange,q=bk(t,this.translate(q,!0)),p=bk(s,this.translate(p,!0)),t=r&&(p-q)/r;t>0.7&&t<1.3&&(s?q=p-r:p=q+r);return{min:q,max:p}};bH(f.prototype,"init",function(q,p,r){a8(this,"init",function(){if(this.options.rangeSelector.enabled){this.rangeSelector=new ap(this)}});q.call(this,p,r)});bE.RangeSelector=ap;f.prototype.callbacks.push(function(q){function p(){t=q.xAxis[0].getExtremes();s.render(t.min,t.max)}function x(){t=q.xAxis[0].getExtremes();isNaN(t.min)||r.render(t.min,t.max)}function v(z){z.triggerOp!=="navigator-drag"&&s.render(z.min,z.max)}function u(z){r.render(z.min,z.max)}var t,s=q.scroller,r=q.rangeSelector;s&&(a8(q.xAxis[0],"afterSetExtremes",v),bH(q,"drawChartBox",function(z){var A=this.isDirtyBox;z.call(this);A&&p()}),p());r&&(a8(q.xAxis[0],"afterSetExtremes",u),a8(q,"resize",x),x());a8(q,"destroy",function(){s&&bz(q.xAxis[0],"afterSetExtremes",v);r&&(bz(q,"resize",x),bz(q.xAxis[0],"afterSetExtremes",u))})});bE.StockChart=function(q,p){var v=q.series,u,t=bk(q.navigator&&q.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,s={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},r={shadow:!1,borderWidth:0};q.xAxis=b5(b1(q.xAxis||{}),function(x){return bd({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},x,{type:"datetime",categories:null},t)});q.yAxis=b5(b1(q.yAxis||{}),function(x){u=bk(x.opposite,!0);return bd({labels:{y:-2},opposite:u,showLastLabel:!1,title:{text:null}},x)});q.series=null;q=bd({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:s,spline:s,area:s,areaspline:s,arearange:s,areasplinerange:s,column:r,columnrange:r,candlestick:r,ohlc:r}},q,{_stock:!0,chart:{inverted:!1}});q.series=v;return new f(q,p)};bH(aJ.prototype,"init",function(q,p,s){var r=s.chart.pinchType||"";q.call(this,p,s);this.pinchX=this.pinchHor=r.indexOf("x")!==-1;this.pinchY=this.pinchVert=r.indexOf("y")!==-1;this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert});bH(bK.prototype,"autoLabelAlign",function(p){if(this.chart.options._stock&&this.coll==="yAxis"&&cj(this,this.chart.yAxis)===0){if(this.options.labels.x===15){this.options.labels.x=0}return"right"}return p.call(this,[].slice.call(arguments,1))});bK.prototype.getPlotLinePath=function(N,M,L,K,J){var H=this,G=this.isLinked&&!this.series?this.linkedParent.series:this.series,F=H.chart,E=F.renderer,D=H.left,B=H.top,A,z,x,u,t=[],q,p;q=H.isXAxis?bg(H.options.yAxis)?[F.yAxis[H.options.yAxis]]:b5(G,function(r){return r.yAxis}):bg(H.options.xAxis)?[F.xAxis[H.options.xAxis]]:b5(G,function(r){return r.xAxis});bm(H.isXAxis?F.yAxis:F.xAxis,function(s){if(bg(s.options.id)?s.options.id.indexOf("navigator")===-1:1){var r=s.isXAxis?"yAxis":"xAxis",r=bg(s.options[r])?F[r][s.options[r]]:F[r][0];H===r&&q.push(s)}});p=q.length?[]:[H];bm(q,function(r){cj(r,p)===-1&&p.push(r)});J=bk(J,H.translate(N,null,null,L));isNaN(J)||(H.horiz?bm(p,function(r){z=r.top;u=z+r.len;A=x=bf(J+H.transB);(A>=D&&A<=D+H.width||K)&&t.push("M",A,z,"L",x,u)}):bm(p,function(r){A=r.left;x=A+r.width;z=u=bf(B+H.height-J);(z>=B&&z<=B+H.height||K)&&t.push("M",A,z,"L",x,u)}));if(t.length>0){return E.crispPolyLine(t,M||1)}};bK.prototype.getPlotBandPath=function(q,p){var u=this.getPlotLinePath(p),t=this.getPlotLinePath(q),s=[],r;if(t&&u){for(r=0;r<t.length;r+=6){s.push("M",t[r+1],t[r+2],"L",t[r+4],t[r+5],u[r+4],u[r+5],u[r+1],u[r+2])}}else{s=null}return s};b.prototype.crispPolyLine=function(q,p){var r;for(r=0;r<q.length;r+=6){q[r+1]===q[r+4]&&(q[r+1]=q[r+4]=bf(q[r+1])-p%2/2),q[r+2]===q[r+5]&&(q[r+2]=q[r+5]=bf(q[r+2])+p%2/2)}return q};if(aU===bE.VMLRenderer){at.prototype.crispPolyLine=b.prototype.crispPolyLine}bH(bK.prototype,"hideCrosshair",function(q,p){q.call(this,p);bg(this.crossLabelArray)&&(bg(p)?this.crossLabelArray[p]&&this.crossLabelArray[p].hide():bm(this.crossLabelArray,function(r){r.hide()}))});bH(bK.prototype,"drawCrosshair",function(G,F,E){var D,B;G.call(this,F,E);if(bg(this.crosshair.label)&&this.crosshair.label.enabled&&bg(E)){var G=this.chart,A=this.options.crosshair.label,z=this.isXAxis?"x":"y",F=this.horiz,x=this.opposite,v=this.left,u=this.top,t=this.crossLabel,s,r,q=A.format,p="";if(!t){t=this.crossLabel=G.renderer.label().attr({align:A.align||(F?"center":x?this.labelAlign==="right"?"right":"left":this.labelAlign==="left"?"left":"center"),zIndex:12,height:F?16:bi,fill:A.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:bk(A.padding,2),stroke:A.borderColor||null,"stroke-width":A.borderWidth||0}).css(bh({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},A.style)).add()}F?(s=E.plotX+v,r=u+(x?0:this.height)):(s=x?this.width+v:0,r=E.plotY+u);if(r<u||r>u+this.height){this.hideCrosshair()}else{!q&&!A.formatter&&(this.isDatetimeAxis&&(p="%b %d, %Y"),q="{value"+(p?":"+p:"")+"}");t.attr({text:q?aZ(q,{value:E[z]}):A.formatter.call(this,E[z]),x:s,y:r,visibility:"visible"});E=t.getBBox();if(F){if(this.options.tickPosition==="inside"&&!x||this.options.tickPosition!=="inside"&&x){r=t.y-E.height}}else{r=t.y-E.height/2}F?(D=v-E.x,B=v+this.width-E.x):(D=this.labelAlign==="left"?v:0,B=this.labelAlign==="right"?v+this.width:G.chartWidth);t.translateX<D&&(s+=D-t.translateX);t.translateX+E.width>=B&&(s-=t.translateX+E.width-B);t.attr({x:s,y:r,visibility:"visible"})}}});var ck=bp.init,cd=bp.processData,bY=aA.prototype.tooltipFormatter;bp.init=function(){ck.apply(this,arguments);this.setCompare(this.options.compare)};bp.setCompare=function(p){this.modifyValue=p==="value"||p==="percent"?function(q,s){var r=this.compareValue;if(q!==bi&&(q=p==="value"?q-r:q=100*(q/r)-100,s)){s.change=q}return q}:null;if(this.chart.hasRendered){this.isDirty=!0}};bp.processData=function(){var q=0,p,s,r;cd.apply(this,arguments);if(this.xAxis&&this.processedYData){p=this.processedXData;s=this.processedYData;for(r=s.length;q<r;q++){if(typeof s[q]==="number"&&p[q]>=this.xAxis.min){this.compareValue=s[q];break}}}};bH(bp,"getExtremes",function(p){p.apply(this,[].slice.call(arguments,1));if(this.modifyValue){this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin)}});bK.prototype.setCompare=function(q,p){this.isXAxis||(bm(this.series,function(r){r.setCompare(q)}),bk(p,!0)&&this.chart.redraw())};aA.prototype.tooltipFormatter=function(p){p=p.replace("{point.change}",(this.change>0?"+":"")+a6(this.change,bk(this.series.tooltipOptions.changeDecimals,2)));return bY.apply(this,[p])};bH(bI.prototype,"render",function(p){if(this.chart.options._stock){!this.clipBox&&this.animate&&this.animate.toString().indexOf("sharedClip")!==-1?(this.clipBox=bd(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len})}p.call(this)});bh(bE,{Axis:bK,Chart:f,Color:ce,Point:aA,Tick:b7,Renderer:aU,Series:bI,SVGElement:bu,SVGRenderer:b,arrayMin:ch,arrayMax:ah,charts:bP,dateFormat:o,format:aZ,pathAnim:g,getOptions:function(){return bQ},hasBidiBug:a1,isTouchDevice:aW,numberFormat:a6,seriesTypes:bT,setOptions:function(p){bQ=bd(!0,bQ,p);aY();return bQ},addEvent:a8,removeEvent:bz,createElement:b8,discardElement:b3,css:bJ,each:bm,extend:bh,map:b5,merge:bd,pick:bk,splat:b1,extendClass:au,pInt:bO,wrap:bH,svg:a4,canvas:k,vml:!a4&&!k,product:"Highstock",version:"2.0.3"})})();
var iChart={includeFile:function(a){document.write('<script type="text/javascript" src="'+a+'"><\/script>')},chart:null,Index:0,ReutersText:"",ReutersImgPath:null,ReutersDivId:"reutersDIV",chartID:"c"+this.Index,placeholder:"placeholder"+this.Index,chartHeight:200,pointMarker:{enabled:true,symbol:"square",radius:3,lineWidth:0,fillColor:"#0000FF",zIndex:5,states:{hover:{fillColor:"#0000FF",radius:3,lineWidth:0,zIndex:5}}},chartDisplayFactor:0.00012,priceCounter:0,lastPrice:null,yMax:null,yMin:null,optionHistoryPrice:null,highPrice:1+this.chartDisplayFactor,lowPrice:1-this.chartDisplayFactor,startOptionHistoryTime:null,endOptionHistoryTime:null,expiryTime:null,AssetsAccuracy:6,clientUTCTimeDiff:null,OptionName:"",ClassName:"",ratesPopUp:null,DI:null,enableChartGaps:false,chartGapLength:3600000,optionActiveAt:null,strikeDistance:null,tooltipDateFormat:"mmm dd, HH:MM:ss",optionExpiryDate:null,optionExpiryRate:null,hideLastPriceIndicator:null,threshold:null,thresholdUpColor:"#f00",thresholdDownColor:"#090",thresholdSecond:null,thresholdSecondUpColor:"#f00",thresholdSecondDownColor:"#090",lastPriceIndicatorEnable:false,lastPriceIndicatorColor:"#4572a7",lastPriceIndicatorFontColor:"#fff",marginRight:0,showMinMaxYAxis:true,hidePrice:null,allowSetYExtreme:true,zoomOutCssClass:"chartLadderZoomOut",zoomInCssClass:"chartLadderZoomOut",enabledZoom:false,isladderStrikeChart:false,lastYExtreme:{min:null,max:null},arrIndicators:[],ApplyChartGaps:function(b){var c=new Array();c.push(new Array());for(i=0;i<b.length;i++){if(i>0&&(b[i][0]-b[i-1][0])>this.chartGapLength){var a=new Array();a.push(b[i]);c.push(a)}else{c[c.length-1].push(b[i])}}return c},AutoCalculateGapSize:function(){if(this.endOptionHistoryTime!=null&&this.startOptionHistoryTime!=null){var a=this.endOptionHistoryTime-this.startOptionHistoryTime;if(a>604000000){return a/25}else{return a/10}}else{return 3600000}},ChartInfoHtml:function(){return'<div id="'+this.placeholder+'"  class="'+this.ClassName+'"></div>'},getSeriesPoint:function(b){var a=this.chart.series[0];return a.data[a.data.length-1-b]},updatePointMarker:function(){var c=this.getSeriesPoint(1);var b=this.getSeriesPoint(0);var a=this.pointMarker.symbol;if(typeof(widgets.chartMarkerUrl)!="undefined"&&widgets.chartMarkerUrl!=""){a="url("+widgets.chartMarkerUrl+")"}if(c){c.update({x:c.x,y:c.y,marker:{zIndex:5,enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}}},true,false)}if(b){b.update({x:b.x,y:b.y,marker:{enabled:true,symbol:a,radius:3,lineWidth:0,fillColor:"#0000FF",zIndex:5,states:{hover:{fillColor:"#0000FF",radius:3,lineWidth:0,zIndex:5}}}},true,false)}},init:function(a){this.Index=a.Index;this.ReutersText=a.ReutersText||"";this.ReutersImgPath=a.ReutersImgPath||null;this.ReutersDivId=a.ReutersDivId||"reutersDIV";this.chartID="c"+this.Index;this.placeholder="placeholder"+this.Index;this.chartHeight=a.chartHeight;this.chartWidth=a.chartWidth;this.ClassName=a.ClassName;this.hidePrice=a.hidePrice;if(!highstockScriptIncluded&&!highstockExportingScriptIncluded){highstockScriptIncluded=true;highstockExportingScriptIncluded=true}if(a.lineType==null){a.lineType=0}this.lineType=(a.lineType==1)?"spline":"line"},buildChart:function(c){var e="#ffffff";var d="#FFF";var a=1;if(helper.getInternetExplorerVersion()==8){a=2}this.arrIndicators.yLimitMin={id:"yLimitMin",type:"line",show:false,width:a,dashStyle:"Dot",color:"#CCCCCC",value:0,label:{text:""},zIndex:5};this.arrIndicators.yLimitMax={id:"yLimitMax",type:"line",show:false,width:a,dashStyle:"Dot",color:"#CCCCCC",value:0,label:{text:""},zIndex:5};this.arrIndicators.xExpiryTime={id:"xExpiryTime",type:"line",show:false,width:a,dashStyle:"Dot",color:"#FF0000",value:0,label:{text:"",color:"#000"},zIndex:3};this.arrIndicators.xEndInvestment={id:"xEndInvestment",type:"line",show:false,width:a,dashStyle:"Dot",color:"#FF8000",value:0,label:{text:""},zIndex:3};this.arrIndicators.currentPrice={id:"currentPrice",type:"line",show:false,color:d,width:a,dashStyle:"Solid",value:0,label:{text:""},zIndex:4};this.arrIndicators.bandArea1={id:"bandArea1",type:"band",show:true,color:e,from:0,to:0};this.arrIndicators.bandArea2={id:"bandArea2",type:"band",show:true,color:e,from:0,to:0};this.arrIndicators.rangeUpperLine={id:"rangeUpperLine",type:"line",show:false,color:d,width:a,dashStyle:"Solid",value:0,label:{text:""},zIndex:4};this.arrIndicators.rangeLowerLine={id:"rangeLowerLine",type:"line",show:false,color:d,width:a,dashStyle:"Solid",value:0,label:{text:""},zIndex:4};this.arrIndicators.xStartInvestTime={id:"xStartInvestTime",type:"line",show:false,width:a,dashStyle:"Dot",color:"#00FF80",value:0,label:{text:""},zIndex:3};this.arrIndicators.optionExpiryDate={id:"optionExpiryDate",type:"line",show:false,width:0.5,dashStyle:"Straight",color:"#ffca29",value:0,label:{text:""},zIndex:3};this.arrIndicators.optionExpiryRate={id:"optionExpiryRate",type:"line",show:false,width:0.5,dashStyle:"Straight",color:"#ffca29",value:0,label:{text:""},zIndex:3};this.optionHistoryPrice=c.optionHistoryPrice;this.highPrice=c.highPrice*(1+this.chartDisplayFactor);this.lowPrice=c.lowPrice*(1-this.chartDisplayFactor);this.startOptionHistoryTime=c.startOptionHistoryTime;this.endOptionHistoryTime=c.endOptionHistoryTime;this.expiryTime=c.expiryTime;this.AssetsAccuracy=c.AssetsAccuracy;this.clientUTCTimeDiff=c.clientUTCTimeDiff;this.optionId=c.OptionID;this.OptionName=c.OptionName;Highcharts.OptionName=c.OptionName;this.chartGapLength=this.AutoCalculateGapSize();this.optionExpiryDate=c.OptionExpiryDate;this.hideLastPriceIndicator=c.HideLastPriceIndicator;this.optionExpiryRate=c.OptionExpiryRate;if(c!=null&&typeof(GetOptionPerID)=="function"){var b=GetOptionPerID(c.OptionID);if(b.option!=null){this.DI=b.option.DI}}if(c.disableInvestTime){this.DI=c.disableInvestTime}this.optionActiveAt=c.optionActiveAt;if(c.optionActiveAt<c.optionHistoryPrice[0][0]){this.optionActiveAt=c.optionHistoryPrice[0][0]+10*1000}this.strikeDistance=c.optionStrikeDistance;this.initChart()},initChart:function(){var H=this;H.enabledZoom=H.getGlobalSetting("EnableLadderChartZoom");var w=$(H.placeholder).data("chartzoomoutcssclass");var B=$(H.placeholder).data("chartzoomincssclass");if(w){H.zoomOutCssClass=w}if(B){H.zoomInCssClass=B}if(this.optionHistoryPrice.length>0){this.lastPrice=this.optionHistoryPrice[this.optionHistoryPrice.length-1][1]}var f=1;if(helper.getInternetExplorerVersion()==8){f=2}var v="#000000";var N="#000000";var E=1;var l="#ff9800";var p="#ff9800";var O=0;if(typeof $(H.placeholder).attr("data-gridLines")!="undefined"){if($(H.placeholder).attr("data-gridLines").toString()=="true"){O=1}}var u=$("[data-widget="+this.Index+"]");var a=72;var r=widgets.game.toLowerCase();var P=widgets.isLadderBased(r)?55:this.marginRight;var h=0;var t=widgets.isLadderBased(r)?false:true;var N="#CECECE";var q=0.5;var m=0.5;var c=widgets.isLadderBased(r)?35:u.length>0?u.height()/7:a;var I=u.length>0?u.height()/7:a;var e=widgets.isLadderBased(r)?1:0;var o=0;var b=widgets.isLadderBased(r)?true:false;var Q=0;var n=widgets.isLadderBased(r)?3:0;var L=0;var M=widgets.isLadderBased(r)?"left":"right";var C="right";var J=widgets.isLadderBased(r)?true:false;var x=false;var F=false;if(typeof $(H.placeholder).attr("data-alignxleft")!="undefined"){if($(H.placeholder).attr("data-alignxright").toString()=="true"){P=60;t=true;N="#000";q=0.5;c=u.length>0?u.height()/7:a;e=1;b=true;n=3;M="left";J=true;F=true}if($(H.placeholder).attr("data-alignxleft").toString()=="true"){h=60;t=true;N="#CECECE";m=0.5;I=u.length>0?u.height()/7:a;o=1;Q=false;L=-3;C="right";x=true}}var s=this.AssetsAccuracy;var y=new Array();if(this.enableChartGaps){y=this.ApplyChartGaps(this.optionHistoryPrice)}else{y.push(this.optionHistoryPrice)}var D=new Array();for(j=0;j<y.length;j++){D.push({name:this.OptionName,dataGrouping:{enabled:false,groupPixelWidth:1},data:y[j],type:this.lineType,marker:{enabled:true,symbol:this.pointMarker.symbol,radius:0,states:{hover:{enabled:true,radius:1}}},animation:false,color:l,events:{click:function(R){if(H.enabledZoom&&widgets.game.toLowerCase()=="ladder"){H.switchZoom()}}}});if(this.threshold!=null){var g=D[D.length-1];g.lineColor=this.thresholdUpColor;g.threshold=this.threshold;g.negativeColor=this.thresholdDownColor}if(this.thresholdSecond!=null){D.push({name:this.OptionName,dataGrouping:{enabled:false,groupPixelWidth:1},data:y[j],type:this.lineType,marker:{enabled:true,symbol:this.pointMarker.symbol,radius:0,states:{hover:{enabled:true,radius:1}}},color:l,lineColor:this.thresholdSecondUpColor,threshold:this.thresholdSecond,negativeColor:this.thresholdSecondDownColor})}}this.isladderStrikeChart=false;D=this.createChartFlags(D,this.optionId);this.chart=new Highcharts.StockChart({chart:{renderTo:this.placeholder,height:this.chartHeight,width:this.chartWidth,margin:5,marginBottom:20,marginTop:10,marginRight:P,marginLeft:h,backgroundColor:v,className:"oldChart",events:{click:function(R){if(H.enabledZoom&&widgets.game.toLowerCase()=="ladder"){H.switchZoom()}}}},navigator:{enabled:false},exporting:{enabled:false},rangeSelector:{enabled:false},scrollbar:{enabled:false},tooltip:{enabled:t,crosshairs:widgets.isLadderBased(widgets.game)?false:[{color:"#d0d0d0",zIndex:6},{color:"#d0d0d0",zIndex:6}],useHTML:false,borderWidth:0,formatter:function(){if(this.point){var S=Highcharts.dateFormat("%b %e, %H:%M:%S",this.point.x);if(this.point.series.name=="callFlags"){S+='<br/><span style="color:green"> Call rate: <b>'}else{S+='<br/><span style="color:red"> Put rate: <b>'}S+=Highcharts.numberFormat(this.point.options.state,s)+"</b></span>";return S}else{var R=(typeof chartWidget!="undefined"&&typeof chartWidget.dateFormat=="string"&&chartWidget.dateFormat!=""?chartWidget.dateFormat:iChart.tooltipDateFormat);var S=typeof helper.formatDate=="function"?helper.formatDate(new Date(this.x),R):Highcharts.dateFormat("%b %e, %H:%M:%S",this.x);$.each(this.points,function(U,T){S+="<br/>"+T.series.name+": <b>"+Highcharts.numberFormat(T.y,s)+"</b>"});return S}},backgroundColor:{opacity:0},borderWidth:0,shadow:false},credits:{enabled:false,href:"http://www.tradologic.com",text:"Tradologic"},plotOptions:{series:{lineWidth:E,states:{hover:{lineWidth:E}},lineColor:(widgets.isLadderBased(widgets.game)||widgets.game=="overUnder")?"#ff9800":"#4572a7",},},xAxis:{ordinal:false,startOnTick:false,lineWidth:f,tickWidth:f,gridLineColor:l,gridLineWidth:O,endOnTick:false,dateTimeLabelFormats:{day:widgets.isLadderBased(widgets.game)?"%H:%M":"%e.%b",}},yAxis:[{minPadding:0,maxPadding:0,startOnTick:false,endOnTick:F,gridLineColor:N,gridLineWidth:q,tickPixelInterval:this.lastPriceIndicatorEnable==true?35:c,labels:{align:this.lastPriceIndicatorEnable==true?"left":M,x:this.lastPriceIndicatorEnable==true?5:n,enabled:this.lastPriceIndicatorEnable==true?true:J,formatter:function(){return this.value.toFixed(s)}},lineWidth:widgets.isLadderBased(widgets.game)?e:0,opposite:this.lastPriceIndicatorEnable==true?true:b,gridLineDashStyle:"dot",lastPriceIndicator:{lineColor:this.lastPriceIndicatorColor,backgroundColor:this.lastPriceIndicatorColor,borderColor:this.lastPriceIndicatorColor,enabled:this.lastPriceIndicatorEnable,zIndex:7,boxOffsetLeft:-5,formatter:function(){return this.toFixed(s)},style:{color:this.lastPriceIndicatorFontColor}}},{minPadding:0,maxPadding:0,startOnTick:false,endOnTick:false,gridLineColor:N,gridLineWidth:m,tickPixelInterval:I,labels:{align:C,x:L,enabled:x,formatter:function(){return this.value.toFixed(s)}},lineWidth:o,opposite:Q,linkedTo:0,gridLineDashStyle:"dot"}],series:D});if(H.enabledZoom&&widgets.game.toLowerCase()=="ladder"){$(H.chart.container).removeClass(H.zoomInCssClass).addClass(H.zoomInCssClass)}this.updateLimits();if(!this.lastPriceIndicatorEnable){if(this.hideLastPriceIndicator!=true){if(this.lastPrice!=null){this.setIndicator("currentPrice",true,this.lastPrice.toFixed(this.AssetsAccuracy))}}this.updatePointMarker()}if(this.lastPriceIndicatorEnable){var d=0;if(this.chart.yAxis[0].labelGroup!=undefined&&this.chart.yAxis[0].labelGroup.element.childNodes.length){this.chart.marginRight=this.chart.yAxis[0].labelGroup.element.childNodes[0].getBBox().width+5}}if(this.expiryTime!=null){var G=this.arrIndicators.xExpiryTime;G.show=true;G.value=this.expiryTime;G.label.text=typeof widgetMessage.expiration!="undefined"?widgetMessage.expiration:"Expiration";G.label.rotation=widgets.isLadderBased(widgets.game)?0:90;var z=this.arrIndicators.xEndInvestment;z.show=true;z.value=this.expiryTime-(this.DI*1000);z.label.text=typeof widgetMessage.timeToInvest!="undefined"?widgetMessage.timeToInvest:"Time to invest";z.label.rotation=widgets.isLadderBased(widgets.game)?0:90;z.label.x=widgets.isLadderBased(widgets.game)?-30:-10;this.chart.xAxis[0].removePlotLine(G.id);this.chart.xAxis[0].removePlotLine(z.id);if(G.show==true){this.chart.xAxis[0].addPlotLine(G)}if(z.show==true){this.chart.xAxis[0].addPlotLine(z)}var K=this.arrIndicators.xStartInvestTime;K.show=true;K.label.text=typeof widgetMessage.chartStartlbl!="undefined"?widgetMessage.chartStartlbl:"Start";K.label.rotation=widgets.isLadderBased(widgets.game)?0:90;K.value=this.optionActiveAt;if(K.show==true){this.chart.xAxis[0].addPlotLine(K)}}if(this.optionExpiryDate!=null){var A=this.arrIndicators.optionExpiryDate;A.show=true;A.label.text=typeof widgetMessage.Expiry!="undefined"?widgetMessage.Expiry:"Start";A.value=this.optionExpiryDate;if(A.show==true){this.chart.xAxis[0].addPlotBand(A)}}if(this.optionExpiryRate!=null){var k=this.arrIndicators.optionExpiryRate;k.show=true;k.label.text=typeof widgetMessage.PastExpiries_Rate!="undefined"?widgetMessage.PastExpiries_Rate:"Start";k.value=this.optionExpiryRate;if(k.show==true){this.chart.yAxis[0].addPlotBand(k)}}this.chart.redraw()},switchZoom:function(){if(widgets.game.toLowerCase()=="ladder"){var a=this;a.allowSetYExtreme=!a.allowSetYExtreme;a.UpdateZoomStyles();a.updateLimits()}},UpdateZoomStyles:function(){if(widgets.game.toLowerCase()=="ladder"){var a=this;if(a.allowSetYExtreme){$(a.chart.container).removeClass(a.zoomOutCssClass)}else{$(a.chart.container).addClass(a.zoomOutCssClass)}}},updateYAxis:function(){var e=this;var d=e.chart.yAxis[0].getExtremes();if(this.allowSetYExtreme){if(e.lastYExtreme.min!=e.yMin||e.lastYExtreme.max!=e.yMax){e.chart.yAxis[0].setExtremes(e.yMin,e.yMax,true,false);e.lastYExtreme={};e.lastYExtreme.min=e.yMin;e.lastYExtreme.max=e.yMax}}else{if(e.lastYExtreme.min!=d.dataMin||e.lastYExtreme.max!=d.dataMax){var c=e.chart.series[0];var b=d.dataMin;var a=d.dataMax;if(c.dataMax<d.dataMax){a=c.dataMax}if(c.dataMin>d.dataMin){b=c.dataMin}e.chart.yAxis[0].setExtremes(b,a,true,false);e.lastYExtreme={};e.lastYExtreme.min=b;e.lastYExtreme.max=a}}},setNewData:function(e,d,g){if(e.length==0||e==""){return}this.priceCounter++;e=parseFloat(e);this.lastPrice=e;g=(g==null||g==undefined||g);var a=parseFloat(d)+(g?parseFloat(this.clientUTCTimeDiff):0);var c=this.chart.series[0];var f=this.getSeriesPoint(0);if(f){var b=a-f.x;if(b>0){c.addPoint([a,e],false,false);if(this.thresholdSecond){this.chart.series[1].addPoint([a,e],false,false)}}}if((e*(1+this.chartDisplayFactor))>=this.highPrice){this.highPrice=e*(1+this.chartDisplayFactor)}if((e*(1-this.chartDisplayFactor))<=this.lowPrice){this.lowPrice=e*(1-this.chartDisplayFactor)}this.updateLimits();if(!this.lastPriceIndicatorEnable){this.setIndicator("currentPrice",true,e);this.updatePointMarker()}this.chart.redraw()},updateLimits:function(){this.chart.xAxis[0].setExtremes(this.startOptionHistoryTime,this.endOptionHistoryTime,true,false);var b=this.lowPrice+(this.highPrice-this.lowPrice)/2;var a=this.arrIndicators.xExpiryTime;var o=this.arrIndicators.xEndInvestment;o.label.x=-30;if(widgets.isLadderBased(widgets.game)||widgets.game.toLowerCase()=="overunder"){if((Object.keys(widgets.prices)).length==0){return}var g=0;if(typeof Object.keys(widgets.prices[this.optionId].payouts)[0]!="undefined"){g=parseFloat(Object.keys(widgets.prices[this.optionId].payouts)[0])}var d=0;var h=Object.keys(widgets.prices[this.optionId].payouts).length;if(typeof Object.keys(widgets.prices[this.optionId].payouts)[h-1]!="undefined"){d=parseFloat(Object.keys(widgets.prices[this.optionId].payouts)[h-1])}var l=this.strikeDistance/Math.pow(10,this.AssetsAccuracy);if(d-l<=this.lowPrice-l){this.yMin=d-l}else{this.yMin=this.lowPrice-l}if(g+l>=this.highPrice+l){this.yMax=g+l}else{this.yMax=this.highPrice+l}this.updateYAxis()}else{var m=(this.highPrice-this.lowPrice)/10;this.yMax=this.highPrice+m;this.yMin=this.lowPrice-m;var e=this.yMin;var k=this.yMax;if(widgets.game.toLowerCase()=="range"){if(typeof widgets.prices[this.optionId]!="undefined"){var f=parseFloat(widgets.prices[this.optionId].rateBeta.lowerPrice);var n=parseFloat(widgets.prices[this.optionId].rateBeta.upperPrice);if(f!=0&&n!=0){var c=(n-f)/8;if(this.lowPrice>f){e=f-c;this.yMin=e}if(this.yMax<n){k=n+c;this.yMax=k}}}}this.updateYAxis()}if(!widgets.isLadderBased(widgets.game)&&this.showMinMaxYAxis){this.setIndicator("yLimitMin",true,this.lowPrice,Highcharts.numberFormat(this.lowPrice,this.AssetsAccuracy));this.setIndicator("yLimitMax",true,this.highPrice,Highcharts.numberFormat(this.highPrice,this.AssetsAccuracy))}},setDirection:function(h,g,f){f=(typeof f==="undefined")?null:f;if(f==null){this.updateYAxis();var a=(h)?this.highPrice*10:0;this.setIndicator("bandArea1",true,g,a)}else{var e=Math.min(g,f);var c=Math.max(g,f);if(h){this.setIndicator("bandArea1",true,g,f)}else{var d=0;var b=this.highPrice*10;this.setIndicator("bandArea1",true,d,e);this.setIndicator("bandArea2",true,c,b)}}},resetDirection:function(){this.setIndicator("bandArea1",false);this.setIndicator("bandArea2",false)},setIndicator:function(e,b,d,c){if(this.chart==null){return}var a=this.arrIndicators[e];if(a==null){return}a.show=true;if(a.type=="line"){a.value=d;if(e.toLowerCase()=="currentprice"&&this.hidePrice=="false"){if(!widgets.isLadderBased(widgets.game)){a.label.text=(d)?d:"";a.label.align="right";a.label.y=-12;a.label.x=-10}}else{a.label.text=(c)?c:""}this.chart.yAxis[0].removePlotLine(a.id);if(a.show==true){this.chart.yAxis[0].addPlotLine(a)}}if(a.type=="band"){a.from=Math.min(d,c);a.to=Math.max(d,c);this.chart.yAxis[0].removePlotBand(a.id);if(a.show==true){this.chart.yAxis[0].addPlotBand(a)}}},createChartFlags:function(c,f){var b=[];var g=[];var d=this;var e="#006633";var a="#CC0000";if(widgets.settings&&widgets.settings.application.EnableChartFlags){if(widgets.openTrades.length>0){$.each(widgets.openTrades,function(h,k){if(f==k.optionId&&(k.optionType.toLowerCase()=="binary")){if(k.actionType.toLowerCase()=="call"||k.actionType.toLowerCase()=="buy"){c.push({id:"opentrades"+k.optionId+h,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[d.startOptionHistoryTime,parseFloat(k.rate)],[d.endOptionHistoryTime,parseFloat(k.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#006633"});c.push({type:"flags",data:[{x:k.orderDate.timestamp,title:" ",state:k.rate,text:k.description,marker:{fillColor:"#006633"}}],onSeries:"opentrades"+k.optionId+h,name:"callFlags",shape:"triangle",width:6,height:6,color:"#006633",y:-12})}else{if(k.actionType.toLowerCase()=="put"||k.actionType.toLowerCase()=="sell"){c.push({id:"opentrades"+k.optionId+h,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[d.startOptionHistoryTime,parseFloat(k.rate)],[d.endOptionHistoryTime,parseFloat(k.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#CC0000",});c.push({type:"flags",data:[{x:k.orderDate.timestamp,title:" ",state:k.rate,text:k.description,marker:{fillColor:"#CC0000"}}],onSeries:"opentrades"+k.optionId+h,name:"putFlags",shape:"triangle-down",width:6,height:6,color:"#CC0000",y:0})}}}})}}return c},createLadderChartFlags:function(v,x,r,z,y,o){var e=[];var s=[];var q=this;var d=this.lastPrice;var n="#006633";var t="#CC0000";var c="";if(typeof(widgets.chartRedImg)!="undefined"&&widgets.chartRedImg!=""){c="url("+widgets.chartRedImg+")"}var a="";if(typeof(widgets.chartRedImgUp)!="undefined"&&widgets.chartRedImgUp!=""){a="url("+widgets.chartRedImgUp+")"}var p="";if(typeof(widgets.chartRedImgStr)!="undefined"&&widgets.chartRedImgStr!=""){p="url("+widgets.chartRedImgStr+")"}var w="";if(typeof(widgets.chartRedImgStrUp)!="undefined"&&widgets.chartRedImgStrUp!=""){w="url("+widgets.chartRedImgStrUp+")"}var b="";if(typeof(widgets.chartGreenImg)!="undefined"&&widgets.chartGreenImg!=""){b="url("+widgets.chartGreenImg+")"}var g="";if(typeof(widgets.chartGreenImgDown)!="undefined"&&widgets.chartGreenImgDown!=""){g="url("+widgets.chartGreenImgDown+")"}var f="";if(typeof(widgets.chartGreenImgStr)!="undefined"&&widgets.chartGreenImgStr!=""){f="url("+widgets.chartGreenImgStr+")"}var m="";if(typeof(widgets.chartGreenImgStrDown)!="undefined"&&widgets.chartGreenImgStrDown!=""){m="url("+widgets.chartGreenImgStrDown+")"}var k=false;if(widgets.settings&&widgets.settings.application.EnableChartFlags&&widgets.isLogged()){if(widgets.openTrades.length>0){$.each(widgets.openTrades,function(B,C){var A;if(widgets.isLadderBased(C.game.toLowerCase())&&(C.actionType.toLowerCase()=="call"||C.isTouch)){A=true}else{A=false}if(x==C.optionId&&C.rate==z&&widgets.isLadderBased(C.optionType)&&y==A){k=true;if(C.actionType.toLowerCase()=="call"||C.actionType.toLowerCase()=="buy"||C.actionType.toLowerCase()=="touch"){var D=-14;if(widgets.game.toLowerCase()=="laddertouch"&&d>z){b=g;D=2}v.push({id:"openLadddertrades"+C.optionId+"_"+C.rate+"_"+B,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(C.rate)],[q.endOptionHistoryTime,parseFloat(C.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#006633"});if(b!=""){v.push({type:"flags",data:[{x:C.orderDate.timestamp,title:" ",state:C.rate,text:C.description,marker:{fillColor:"#006633"}}],onSeries:"openLadddertrades"+C.optionId+"_"+C.rate+"_"+B,name:"callFlags",shape:b,width:6,height:6,color:"#006633",y:D})}}else{if(C.actionType.toLowerCase()=="put"||C.actionType.toLowerCase()=="sell"||C.actionType.toLowerCase()=="notouch"){var D=1;if(widgets.game.toLowerCase()=="laddertouch"&&d>z){c=a;D=-14}v.push({id:"openLadddertrades"+C.optionId+"_"+C.rate+"_"+B,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(C.rate)],[q.endOptionHistoryTime,parseFloat(C.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#CC0000"});if(c!=""){v.push({type:"flags",data:[{x:C.orderDate.timestamp,title:" ",state:C.rate,text:C.description,marker:{fillColor:"#CC0000"}}],onSeries:"openLadddertrades"+C.optionId+"_"+C.rate+"_"+B,name:"putFlags",shape:c,width:6,height:6,color:"#CC0000",y:D})}}}}})}}if(o!="none"){var l=new Date().getTime();var u=widgets.openTrades.length;if(y){if(o=="trade"){var h=-14;var z=$(".activeRow").find("span.widgetStrike").html();if(widgets.game.toLowerCase()=="laddertouch"&&this.lastPrice>z){b=g;h=2}}else{if(o=="strike"){var b=f;var h=-14;var z=$(".activeRow").find("span.widgetStrike").html();if(widgets.game.toLowerCase()=="laddertouch"&&this.lastPrice>z){b=m;h=2}}}v.push({id:"openLadddertrades"+x+"_"+z+"_"+u,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(z)],[q.endOptionHistoryTime,parseFloat(z)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#006633"});if(b!=""){v.push({type:"flags",data:[{x:l,title:" ",state:z,text:r,marker:{fillColor:"#006633"}}],onSeries:"openLadddertrades"+x+"_"+z+"_"+u,name:"callFlags",shape:b,width:6,height:6,color:"#006633",y:h})}}else{if(o=="trade"){var h=1;var z=$(".activeRow").find("span.widgetStrike").html();if(widgets.game.toLowerCase()=="laddertouch"&&this.lastPrice>z){c=a;h=-14}}else{if(o=="strike"){var c=p;var h=1;var z=$(".activeRow").find("span.widgetStrike").html();if(widgets.game.toLowerCase()=="laddertouch"&&this.lastPrice>z){c=w;h=-14}}}v.push({id:"openLadddertrades"+x+"_"+z+"_"+u,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(z)],[q.endOptionHistoryTime,parseFloat(z)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#CC0000"});if(c!=""){v.push({type:"flags",data:[{x:l,title:" ",state:z,text:r,marker:{fillColor:"#CC0000"}}],onSeries:"openLadddertrades"+x+"_"+z+"_"+u,name:"putFlags",shape:c,width:6,height:6,color:"#CC0000",y:h})}}}return[k,v]},createOverUnderChartFlags:function(v,x,r,z,y,o){var e=[];var s=[];var q=this;var d=this.lastPrice;var n="#006633";var t="#CC0000";var c="";if(typeof(widgets.chartRedImg)!="undefined"&&widgets.chartRedImg!=""){c="url("+widgets.chartRedImg+")"}var a="";if(typeof(widgets.chartRedImgUp)!="undefined"&&widgets.chartRedImgUp!=""){a="url("+widgets.chartRedImgUp+")"}var p="";if(typeof(widgets.chartRedImgStr)!="undefined"&&widgets.chartRedImgStr!=""){p="url("+widgets.chartRedImgStr+")"}var w="";if(typeof(widgets.chartRedImgStrUp)!="undefined"&&widgets.chartRedImgStrUp!=""){w="url("+widgets.chartRedImgStrUp+")"}var b="";if(typeof(widgets.chartGreenImg)!="undefined"&&widgets.chartGreenImg!=""){b="url("+widgets.chartGreenImg+")"}var g="";if(typeof(widgets.chartGreenImgDown)!="undefined"&&widgets.chartGreenImgDown!=""){g="url("+widgets.chartGreenImgDown+")"}var f="";if(typeof(widgets.chartGreenImgStr)!="undefined"&&widgets.chartGreenImgStr!=""){f="url("+widgets.chartGreenImgStr+")"}var m="";if(typeof(widgets.chartGreenImgStrDown)!="undefined"&&widgets.chartGreenImgStrDown!=""){m="url("+widgets.chartGreenImgStrDown+")"}var k=false;if(widgets.settings&&widgets.settings.application.EnableChartFlags&&widgets.isLogged()){if(widgets.openTrades.length>0){$.each(widgets.openTrades,function(B,C){var A=(C.actionType.toLowerCase()=="over")?true:false;if(x==C.optionId&&C.rate==z&&(widgets.game=="overUnder")&&y==A){k=true;if(C.actionType.toLowerCase()=="over"){var D=-14;v.push({id:"openOverUndertrades"+C.optionId+"_"+C.rate+"_"+B,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(C.rate)],[q.endOptionHistoryTime,parseFloat(C.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#006633"});if(b!=""){v.push({type:"flags",data:[{x:C.orderDate.timestamp,title:" ",state:C.rate,text:C.description,marker:{fillColor:"#006633"}}],onSeries:"openOverUndertrades"+C.optionId+"_"+C.rate+"_"+B,name:"callFlags",shape:b,width:6,height:6,color:"#006633",y:D})}}else{if(C.actionType.toLowerCase()=="under"){var D=1;v.push({id:"openOverUndertrades"+C.optionId+"_"+C.rate+"_"+B,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(C.rate)],[q.endOptionHistoryTime,parseFloat(C.rate)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#CC0000"});if(c!=""){v.push({type:"flags",data:[{x:C.orderDate.timestamp,title:" ",state:C.rate,text:C.description,marker:{fillColor:"#CC0000"}}],onSeries:"openOverUndertrades"+C.optionId+"_"+C.rate+"_"+B,name:"putFlags",shape:c,width:6,height:6,color:"#CC0000",y:D})}}}}})}}if(o!="none"){var l=new Date().getTime();var u=widgets.openTrades.length;if(y){if(o=="trade"){var h=-14}else{if(o=="strike"){var b=f;var h=-14}}v.push({id:"openOverUndertrades"+x+"_"+z+"_"+u,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(z)],[q.endOptionHistoryTime,parseFloat(z)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#006633"});if(b!=""){v.push({type:"flags",data:[{x:l,title:" ",state:z,text:r,marker:{fillColor:"#006633"}}],onSeries:"openOverUndertrades"+x+"_"+z+"_"+u,name:"callFlags",shape:b,width:6,height:6,color:"#006633",y:h})}}else{if(o=="trade"){var h=1}else{if(o=="strike"){var c=p;var h=1}}v.push({id:"openOverUndertrades"+x+"_"+z+"_"+u,dataGrouping:{enabled:false,groupPixelWidth:1},data:[[q.startOptionHistoryTime,parseFloat(z)],[q.endOptionHistoryTime,parseFloat(z)]],marker:{enabled:false,radius:0,states:{hover:{enabled:false,radius:0}}},lineWidth:2,type:"line",animation:false,color:"#CC0000"});if(c!=""){v.push({type:"flags",data:[{x:l,title:" ",state:z,text:r,marker:{fillColor:"#CC0000"}}],onSeries:"openOverUndertrades"+x+"_"+z+"_"+u,name:"putFlags",shape:c,width:6,height:6,color:"#CC0000",y:h})}}}return[k,v]},updateChartSeries:function(t,G,E,s,h){var e=this;var F=widgets.isLadderBased(t);var H=[];if(this.optionHistoryPrice.length>0){var p=(this.optionHistoryPrice[this.optionHistoryPrice.length-1].y==undefined)?this.optionHistoryPrice[this.optionHistoryPrice.length-1][1]:this.optionHistoryPrice[parseInt(this.optionHistoryPrice.length-1)].y;this.lastPrice=p}var c=1;if(helper.getInternetExplorerVersion()==8){c=2}var B="#000000";var b="#000000";var d=1;var k="#ff9800";var D="#ff9800";var u=0.5;var g=this.AssetsAccuracy;var y=0;var f=widgets.isLadderBased(t)?55:0;var r=widgets.isLadderBased(t)?false:true;var b=widgets.isLadderBased(t)?"#CECECE":D;var a=widgets.isLadderBased(t)?0.5:u;var m=widgets.isLadderBased(t)?35:$(window).height()/8;var x=widgets.isLadderBased(t)?1:0;var C=widgets.isLadderBased(t)?true:false;var q=widgets.isLadderBased(t)?3:0;var w=widgets.isLadderBased(t)?"left":"right";var l=widgets.isLadderBased(t)?true:false;var A=new Array();if(this.enableChartGaps){A=this.ApplyChartGaps(this.optionHistoryPrice)}else{A.push(this.optionHistoryPrice)}for(j=0;j<A.length;j++){H.push({name:this.OptionName,dataGrouping:{enabled:false,groupPixelWidth:1},data:A[j],type:this.lineType,marker:{enabled:true,symbol:this.pointMarker.symbol,radius:0,states:{hover:{enabled:true,radius:1}}},animation:false,color:k,events:{click:function(I){if(e.enabledZoom&&t=="ladder"){e.switchZoom()}}}})}if(widgets.isLadderBased(t)){H=this.createLadderChartFlags(H,this.optionId,this.OptionName,G,E,s)[1]}else{if(t=="overunder"){H=this.createOverUnderChartFlags(H,this.optionId,this.OptionName,G,E,s)[1]}}e.isladderStrikeChart=widgets.isLadderBased(t)?true:false;e.lastYExtreme.min=undefined;e.lastYExtreme.max=undefined;var v=(t=="overunder")?"oldChart":"";this.chart=new Highcharts.StockChart({chart:{renderTo:this.placeholder,height:this.chartHeight,width:this.chartWidth,margin:5,marginBottom:20,marginTop:10,marginRight:f,marginLeft:y,backgroundColor:B,className:v,events:{click:function(I){if(e.enabledZoom){e.switchZoom()}}}},navigator:{enabled:false},exporting:{enabled:false},rangeSelector:{enabled:false},scrollbar:{enabled:false},tooltip:{enabled:false},credits:{enabled:false,href:"http://www.tradologic.com",text:"Tradologic"},plotOptions:{series:{lineWidth:d,states:{hover:{lineWidth:d}},color:b},},xAxis:{ordinal:false,startOnTick:false,lineWidth:c,tickWidth:c,gridLineColor:k,gridLineWidth:0,endOnTick:false,dateTimeLabelFormats:{day:widgets.isLadderBased(t)?"%H:%M":"%e.%b",}},yAxis:{minPadding:0,maxPadding:0,startOnTick:false,endOnTick:false,gridLineColor:b,gridLineWidth:a,tickPixelInterval:m,labels:{align:w,x:q,enabled:l,formatter:function(){return widgets.isLadderBased(t)?this.value.toFixed(g):this.value}},lineWidth:x,opposite:C,gridLineDashStyle:"dot"},series:H});if(e.enabledZoom&&t=="ladder"){$(e.chart.container).removeClass(e.zoomInCssClass).addClass(e.zoomInCssClass)}e.UpdateZoomStyles();this.updatePointMarker();this.updateLimits();if(this.lastPrice!=null){this.setIndicator("currentPrice",true,this.lastPrice)}if(this.expiryTime!=null){var z=this.arrIndicators.xExpiryTime;z.show=true;z.value=this.expiryTime;z.label.text=typeof widgetMessage.expiration!="undefined"?widgetMessage.expiration:"Expiration";z.label.rotation=widgets.isLadderBased(t)?0:90;var o=this.arrIndicators.xEndInvestment;o.show=true;o.value=this.expiryTime-(this.DI*1000);o.label.text=typeof widgetMessage.timeToInvest!="undefined"?widgetMessage.timeToInvest:"Time to invest";o.label.x=widgets.isLadderBased(t)?-30:-10;this.chart.xAxis[0].removePlotLine(z.id);this.chart.xAxis[0].removePlotLine(o.id);if(z.show==true){this.chart.xAxis[0].addPlotLine(z)}if(o.show==true){this.chart.xAxis[0].addPlotLine(o)}var n=this.arrIndicators.xStartInvestTime;n.show=true;n.value=this.optionActiveAt;if(n.show==true){this.chart.xAxis[0].addPlotLine(n)}}if(typeof this!="undefined"&&(typeof h=="undefined"||(typeof h!="undefined"&&h))){this.setDirection(E,G,null)}},destroyChart:function(){$.each(widgets.links,function(b){var a=$("[data-widget="+widgets.game+"_"+b+"_chart]");a.html("")})},getGlobalSetting:function(a){if(widgets&&widgets.settings&&widgets.settings.application){var b=widgets.settings.application[a];if(b&&b.Value){return b.Value.toString().toLowerCase()=="true"}}return false}};
var informationBarWidget={init:function(){var a=this;informationBarWidget.buildInformationBarDiv();$(window).on(widgets.events.clickedOptionRow,function(c,b){informationBarWidget.updateInfoBar($(b))});$(window).on(widgets.events.loadingIsCompleted,function(d){if(!widgets.links[a.link]||!widgets.links[a.link].option||!widgets.options[widgets.links[a.link].option.id]){return}var e=tableWidget;var c=$(e.element).find("tbody");var b=$(c).find("tr[data-id="+widgets.links[a.link].option.id+"]");informationBarWidget.updateInfoBar(b)});$(window).on(widgets.events.assetPricesUpdated,function(f,c){var e=$("[data-widget="+a.name+"]");if(!$(".informationBarDiv").is(":visible")&&a.link!=null){var g=tableWidget;var d=$(g.element).find("tbody");var b=$(d).find("tr[data-id="+widgets.links[a.link].option.id+"]");informationBarWidget.updateInfoBar(b)}if($(".noOptionsPlaceholder").css("display")=="none"){$.each(c,function(h,j){if(typeof j!="string"&&j!=null){if(j.id==$(e).find(".informationBarDiv").attr("taid")){$(".infoBarMarketRate").html(j.rate)}}})}});$(window).on(widgets.events.optionPricesUpdated,function(f,c){var e=$("[data-widget="+a.name+"]");if(!$(".informationBarDiv").is(":visible")&&a.link!=null){var g=tableWidget;var d=$(g.element).find("tbody");var b=$(d).find("tr[data-id="+widgets.links[a.link].option.id+"]");informationBarWidget.updateInfoBar(b)}if($(".noOptionsPlaceholder").css("display")=="none"){$.each(c,function(h,j){if(j.id==$(e).find(".informationBarDiv").attr("id")){$(".infoBarMarketRate").html(j.rate)}})}});$(window).on(widgets.events.resetWidget,function(){$(".informationBarDiv").hide()});$("[data-widget=informationBar]").show()},buildInformationBarDiv:function(){var b=this;var a='<div class="informationBarDiv" id="0" taid="0"><div class="infoBarAsset"></div><div class="infoBarSerNum"></div><div class="infoBarFillDiv"></div><div class="infoBarMarketRate"></div><div class="infoBarStatus"></div><div class="infoBarDate"></div></div>';$(b.element).html(a)},updateInfoBar:function(f){$(".informationBarDiv").attr("id",f.data("id"));$(".informationBarDiv").attr("taid",f.data("taid"));var e=$(f).find(".assetName").html();var d=$(f).find(".ticketId").html();var c=$(f).find(".Status").html();var b=$(f).find("td span.widgetTradeRate").html();var a=widgetMessage.statusLabel?widgetMessage.statusLabel:"Status:";$(".infoBarAsset").html(e);$(".infoBarSerNum").html(d);$(".infoBarStatus").html(a+" "+c);$(".infoBarMarketRate").html(b);$(".informationBarDiv").show()}};
var investAmountWidget={config:{investAmount:{html:'<span class="investText"></span> <input type="text" class="widgetTradeAmount" />',click:function(a){investAmountWidget.clickElement(a.data)}},investText:{html:widgetMessage.invest},amountText:{html:widgetMessage.amount},ddlButtonHtml:'<a href="#" class="investAmountDDLButton"></a>'},flagClearText:false,flagIsInputDisabled:false,isSettingsLoaded:false,hideSymbol:false,elementCache:{$ddlButton:null,$ddlContainer:null},stepValue:5,init:function(){var b=this;if($(b.element).attr("data-spinner")=="true"){var a;$(b.element).spinner({step:b.stepValue,min:0,stop:function(d,e){a=$(b.element).spinner("value");$(window).trigger(widgets.events.changeSpinnerValue,a)},})}b.element.addClass("widgetInvestAmount");var c=$(b.element).attr("data-hideSymbol");if(c=="true"){b.hideSymbol=true}if(!parseInt($(b.element).attr("maxlength"))>0){$(b.element).attr({maxlength:5})}$(b.element).keypress(function(d){if(d.which!=8&&d.which!=0&&(d.which<48||d.which>57)){return false}});$(window).on(widgets.events.userLogin,function(e){b.checkTradeBelowMin();var d=new RegExp("^\\d+$");var g=d.test(b.config.amountText.html);if(b.element.val().indexOf(b.config.amountText.html)>-1&&!g){b.updateElement(b)}if(b.elementCache.$ddlContainer!=null){b.elementCache.$ddlContainer.hide()}if(widgets.isLogged()&&b.isSettingsLoaded){b.isSettingsLoaded=false;if(!helper.isBalanceBelowMin()){var f=b.getAmountValue();$(b.elements).val(f)}}});$(window).on(widgets.events.userLogout,function(d){b.updateElement(b);b.setWidgetAsDropDown()});$(b.element).keyup(function(){$(window).trigger(widgets.events.investAmountKeyup,[$(b.element),b.link])});$(window).on(widgets.events.linkOptionUpdated,function(e){if(isNaN(parseInt($(b.elements).val()))){var d=helper.getCurrencySymbol();var f=b.hideSymbol?widgetMessage.amount:helper.formatCurrency(d,widgetMessage.amount);$(b.elements).val(f)}if(b.elementCache.$ddlContainer!=null){b.elementCache.$ddlContainer.hide()}});$(window).on(widgets.events.buttonAlphaClick+" "+widgets.events.buttonBetaClick+" "+widgets.events.tradeIsCompleted,function(f){var g=b.getAmountValue(),e=b.hideSymbol?widgetMessage.amount:helper.formatCurrency(d,widgetMessage.amount),d=helper.getCurrencySymbol();if($(b.elements).val()==e){$(b.elements).val(g);b.flagClearText=true}b.checkTradeBelowMin()});$(window).on(widgets.events.settingsLoaded,function(e){if(!widgets.isLogged()){b.isSettingsLoaded=true}var d=b.getAmountValue();b.element.val(d)});$(window).on(widgets.events.limitationsLoaded,function(d){b.setWidgetAsDropDown()});b.updateElement(b)},clickElement:function(c){var a=c.element;var b=c.parent;if($(a).val().indexOf(b.config.amountText.html)!==-1||b.flagClearText==true){$(a).val("");b.flagClearText=false}},updateElement:function(b){var a=helper.getCurrencySymbol();var d=b.hideSymbol?widgetMessage.amount:helper.formatCurrency(a,widgetMessage.amount);try{$(b.element).val(d)}catch(c){}$(b.element).click({parent:b,element:b.element},b.config.investAmount.click);$(".widgetInvestAmount").each(function(){$("input.widgetInvestAmount").keypress(function(f){if(f.which==10||f.which==13){$(".widgetButtonBuy").click();f.preventDefault();return false}})});b.element.show()},getAmountValue:function(){var d=this;var e="";var b=helper.getCurrencySymbol();var c=widgets.settings.application.DefaultInvestAmount.Value;if(c&&parseFloat(c)>0){var a=helper.getCurrencyFactor();e=parseFloat(c)*a}else{e=d.hideSymbol?widgetMessage.amount:helper.formatCurrency(b,widgetMessage.amount)}return e},checkTradeBelowMin:function(){var b=this;if(helper.isBalanceBelowMin()){if(widgets.user.balance<=0){b.element.prop("disabled",false).val("");b.flagIsInputDisabled=false}else{$(b.elements).val(widgets.user.balance);b.element.prop("disabled",true);b.flagIsInputDisabled=true;b.removeDropDown()}}else{if(b.flagIsInputDisabled){var a=widgets.settings.application.DefaultInvestAmount.Value;b.element.prop("disabled",false).val(a);b.flagIsInputDisabled=false}}},setWidgetAsDropDown:function(){var a=this;if(a.flagIsInputDisabled){a.removeDropDown();return false}if(!widgets.settings||(widgets.settings&&widgets.settings.application.PredefinedInvestAmount.Value.toLowerCase()=="false")){return false}if(!widgets.limitations&&widgets.isLogged()&&widgets.user.isReal){return false}if(helper.isBalanceBelowMin()&&parseFloat(widgets.user.balance)<parseFloat(widgets.limitations.minAmount)){return false}var d=widgets.settings.application.PredefinedInvestAmount.Value;d=d.split(",");var j=helper.getCurrencyFactor();var e=helper.getCurrencySymbol();var c=helper.formatCurrency(e,widgetMessage.amount);var g='<div class="investAmountDropDown" style="display:none">';var b=widgets.limitations!=null?widgets.limitations.minAmount:false;var f=widgets.limitations!=null?widgets.limitations.maxAmount:false;for(i in d){var h=d[i]*j;var c=helper.formatCurrency(e,h);if(widgets.isLogged()&&widgets.user.isReal&&b){if(widgets.limitations!=null&&h<b){h=d[i]*j}else{if(widgets.limitations!=null&&h>f){h=d[i]*j}else{h=d[i]*j;g+='<div class="investAmountOption" data-value="'+h+'">'+c+"</div>"}}}else{h=d[i]*j;var c=helper.formatCurrency(e,h);g+='<div class="investAmountOption" data-value="'+h+'">'+c+"</div>"}}g+="</div>";a.removeDropDown();a.elementCache.$ddlContainer=$(g);a.elementCache.$ddlButton=$(a.config.ddlButtonHtml);a.element.after(a.elementCache.$ddlButton).after(a.elementCache.$ddlContainer);a.elementCache.$ddlButton.click(function(){var l=a.element.position();var k=a.element.outerHeight();a.elementCache.$ddlContainer.css({top:l.top+k,left:l.left}).toggle()});a.elementCache.$ddlContainer.on("click","div",function(){var k=$(this).attr("data-value");a.element.val(k).trigger("keyup");a.elementCache.$ddlContainer.hide()})},removeDropDown:function(){var a=this;if(a.elementCache.$ddlContainer){a.elementCache.$ddlContainer.remove()}if(a.elementCache.$ddlButton){a.elementCache.$ddlButton.remove()}}};
var investDropDownWidget={isProcessed:false,flagIsDisabled:false,hideSymbol:false,init:function(){var a=this;a.element.show();$(a.elements).change(function(){var d=this;var c=$(d[d.selectedIndex]);$(window).trigger(widgets.events.changeInvestAmountDropDown,[c,a.link])});var b=$(a.element).attr("data-hideSymbol");if(b=="true"){a.hideSymbol=true}$(window).on(widgets.events.settingsLoaded,function(c){if(investDropDownWidget.isProcessed==false){widgets.api.getInvestPrices(function(d,e){a.updatePrices(d,e)});investDropDownWidget.isProcessed=true}});$(window).on(widgets.events.buttonAlphaClick+" "+widgets.events.buttonBetaClick+" "+widgets.events.tradeIsCompleted+" "+widgets.events.linkOptionUpdated,function(d,c){a.checkTradeBelowMin();if(c!=undefined&&(d.type==widgets.events.buttonAlphaClick||d.type==widgets.events.buttonBetaClick)){var e=$(c).data("widget").split("_")[1];if(e!=a.link){return}}});$(window).on(widgets.events.tradeIsCompleted+" "+widgets.events.linkOptionUpdated,function(d,c){if(a.link!=c){return}if(typeof a.elements.data("resetamount")!="undefined"&&!a.elements.data("resetamount")){return}if(!helper.isBalanceBelowMin()){a.elements.val($(a.elements).find("option:first").val())}});$(window).on(widgets.events.loginIsCompleted,function(c){investDropDownWidget.isProcessed=false});$(window).on(widgets.events.userLogin,function(c){a.checkTradeBelowMin()})},updatePrices:function(c,e){var g=this;var b=g.game;var a=helper.getCurrencyFactor();var f=c.data.investAmounts;var d="";$.each(f,function(l,m){var k=m.value*a;var j=helper.getCurrencySymbol();var h=g.hideSymbol?helper.formatCurrency("",k):helper.formatCurrency(j,k);d+='<option value="'+k+'">'+h+"</option>"});$.each(widgets.links,function(l,i){g=widgets.all[b+"_"+l+"_investDropDown"];g.element.find("option").remove();var k=d;if((g.element.attr("data-allin")=="true"||helper.getGlobalSetting("EnableAllInTrade"))&&widgets.isLogged()){var j=widgets.user.balance;var h=widgetMessage.allInLabel?widgetMessage.allInLabel:"All In";k+='<option value="'+j+'">'+h+"</option>"}g.element.append(k);g.element.trigger("change",[g.link])})},checkTradeBelowMin:function(){var e=this;if(helper.isBalanceBelowMin()){var c=e.element.find("#minUserBalance");if(widgets.user.balance==0&&c.length>0){c.remove()}if(widgets.user.balance<=0){e.element.prop("disabled",false);e.flagIsDisabled=false}else{if(e.element.find("option:selected").val()==parseFloat(widgets.user.balance)){return}else{var d=helper.getCurrencySymbol();var b=e.hideSymbol?helper.formatCurrency("",widgets.user.balance):helper.formatCurrency(d,widgets.user.balance);var a='<option value="'+widgets.user.balance+'" id="minUserBalance" selected="selected">'+b+"</option>";e.element.append(a).prop("disabled",true);e.flagIsDisabled=true}}}else{if(e.flagIsDisabled){e.element.prop("disabled",false).find("#minUserBalance").remove();e.flagIsDisabled=false}}}};
var investTimeWidget={isProcessedExpiredTrigger:false,init:function(){var a=this;$(this.element).show();$(a.element).html("00:00");$(window).on(widgets.events.optionsUpdated,function(){a.isProcessedExpiredTrigger=false});$(window).on(widgets.events.linkOptionUpdated,function(){a.isProcessedExpiredTrigger=false;a.updateInvestTime()});var b="investTimeTimer_"+a.link;clearInterval(widgets.timers[b]);widgets.timers[b]=setInterval(function(){a.updateInvestTime()},1000)},updateInvestTime:function(){var f=this;var b=isNaN(new Date(widgets.serverDateTime.timestamp))?new Date():new Date(widgets.serverDateTime.timestamp);var c=widgets.links[f.link].option;if(!c){return}var a=c.expirationTimestamp-b.getTime()-c.disableInvestTimeInSeconds*1000;if(!f.isProcessedExpiredTrigger){if(a<0){f.isProcessedExpiredTrigger=true;$(window).trigger(widgets.events.linkOptionExpired,c)}}var g=helper.formatExpirationTime(a);var e=helper.formatExpiration(widgets.getDate(c.expirationTimestamp));var d=$(f.element).attr("data-time");if(d=="true"){$(f.element).html(e+" ("+g+")")}else{$(f.element).html(g)}}};
(function(f){var g=[],a=0;var c={init:function(h){this.each(function(){var o={visible_items:3,scrolling_items:1,orientation:"horizontal",circular:"no",autoscroll:"no",interval:4000,direction:"left",start_from:0},B=f(this),F=B.data("als"),u=f(),k=f(),w=f(),l=f(),y=f(),z=f(),q=0,A=0,D=0,G=0,n=0,t=0,x=0,v=0,s=0,p=0;u=f.extend(o,h);if(u.circular=="no"&&u.autoscroll=="yes"){u.circular="yes"}if(!B.attr("id")||B.attr("id")==""){B.attr("id","als-container_"+a)}l=B.find(".als-viewport").attr("id","als-viewport_"+a);w=B.find(".als-wrapper").attr("id","als-wrapper_"+a);k=B.find(".als-item");q=k.size();if(u.visible_items>q){u.visible_items=q-1}if(u.scrolling_items>u.visible_items){u.scrolling_items=u.visible_items-1}if(u.start_from>q-u.visible_items){u.start_from=0}y=B.find(".als-prev").attr("data-id","als-prev_"+a);z=B.find(".als-next").attr("data-id","als-next_"+a);switch(u.orientation){case"horizontal":default:k.each(function(i){f(this).attr("id","als-item_"+a+"_"+i);D+=f(this).outerWidth(true);if(x<u.visible_items){if(u.start_from==0){A+=f(this).outerWidth(true);x++}else{if(i>=u.start_from){A+=f(this).outerWidth(true);x++}}}if(u.start_from!=0){if(v<u.start_from){t+=f(this).outerWidth(true);v++}s=u.start_from}});w.css("width",D);k.css("left",-t);l.css("width",A);w.css("height",k.outerHeight(true));l.css("height",k.outerHeight(true));if(u.circular=="yes"&&u.start_from!=0){for(r=0;r<u.start_from;r++){var E=k.last().position(),m=E.left+k.last().outerWidth(true);k.eq(r).css("left",m)}}break;case"vertical":k.each(function(i){f(this).attr("id","als-item_"+a+"_"+i);n+=f(this).outerHeight(true);if(x<u.visible_items){if(u.start_from==0){G+=f(this).outerHeight(true);x++}else{if(i>=u.start_from){G+=f(this).outerHeight(true);x++}}}if(u.start_from!=0){if(v<u.start_from){t+=f(this).outerHeight(true);v++}s=u.start_from}});w.css("height",n);k.css("top",-t);l.css("height",G);w.css("width",k.outerWidth(true));l.css("width",k.outerWidth(true));if(u.circular=="yes"&&u.start_from!=0){for(r=0;r<u.start_from;r++){var E=k.last().position(),C=E.top+k.last().outerHeight(true);k.eq(r).css("top",C)}}break}if(u.circular=="no"){if(u.start_from==0){y.css("display","none")}if(u.visible_items+u.start_from==q){z.css("display","none")}}B.data("als",{container:B,instance:a,options:u,viewport:l,wrapper:w,prev:y,next:z,item:k,num_items:q,wrapper_width:D,viewport_width:A,wrapper_height:n,viewport_height:G,current:s,timer:p});F=B.data("als");g[a]=F;z.on("click",b);y.on("click",e);if(u.autoscroll=="yes"){f.fn.als("start",a);w.hover(function(){f.fn.als("stop",f(this).attr("id"))},function(){f.fn.als("start",f(this).attr("id"))})}else{if(u.autoscroll=="no"){f.fn.als("stop",a)}}a++;return g})},next:function(i){i=d(i);var j=g[i],o=0,m=0;switch(j.options.orientation){case"horizontal":default:var p=0,n=0;switch(j.options.circular){case"no":default:for(o=j.current;o<j.current+j.options.scrolling_items;o++){p+=j.item.eq(o).outerWidth(true)}j.current+=j.options.scrolling_items;for(m=j.current;m<j.current+j.options.visible_items;m++){n+=j.item.eq(m).outerWidth(true)}j.viewport.animate({width:n},600);j.item.animate({left:"-="+p},600);j.item.promise().done(function(){j.next.on("click",b);j.prev.on("click",e)});if(j.current>0){j.prev.show()}if(j.current+j.options.visible_items>=j.num_items){j.next.hide()}break;case"yes":var s=0,q=[];for(o=j.current;o<j.current+j.options.scrolling_items;o++){var l=o;if(o>=j.num_items){l=o-j.num_items}p+=j.item.eq(l).outerWidth(true);q[s]=l;s++}j.current+=j.options.scrolling_items;if(j.current>=j.num_items){j.current-=j.num_items}for(m=j.current;m<j.current+j.options.visible_items;m++){var k=m;if(m>=j.num_items){k=m-j.num_items}n+=j.item.eq(k).outerWidth(true)}j.viewport.animate({width:n},600);j.item.animate({left:"-="+p},600);j.item.promise().done(function(){var u=j.item.last().position(),v=u.left+j.item.last().outerWidth(true);for(k5=0;k5<q.length;k5++){if(q[k5]==0){var u=j.item.last().position(),v=u.left+j.item.last().outerWidth(true)}j.item.eq(q[k5]).css("left",v)}j.next.on("click",b);j.prev.on("click",e)});break}break;case"vertical":var t=0,h=0;switch(j.options.circular){case"no":default:for(o=j.current;o<j.current+j.options.scrolling_items;o++){t+=j.item.eq(o).outerHeight(true)}j.current+=j.options.scrolling_items;for(m=j.current;m<j.current+j.options.visible_items;m++){h+=j.item.eq(m).outerHeight(true)}j.viewport.animate({height:h},600);j.item.animate({top:"-="+t},600);j.item.promise().done(function(){j.next.on("click",b);j.prev.on("click",e)});if(j.current>0){j.prev.show()}if(j.current+j.options.visible_items>=j.num_items){j.next.hide()}break;case"yes":var s=0,q=[];for(o=j.current;o<j.current+j.options.scrolling_items;o++){var l=o;if(o>=j.num_items){l=o-j.num_items}t+=j.item.eq(l).outerHeight(true);q[s]=l;s++}j.current+=j.options.scrolling_items;if(j.current>=j.num_items){j.current-=j.num_items}for(m=j.current;m<j.current+j.options.visible_items;m++){var k=m;if(m>=j.num_items){k=m-j.num_items}h+=j.item.eq(k).outerHeight(true)}j.viewport.animate({height:h});j.item.animate({top:"-="+t});j.item.promise().done(function(){var u=j.item.last().position(),v=u.top+j.item.last().outerHeight(true);for(k5=0;k5<q.length;k5++){if(q[k5]==0){var u=j.item.last().position(),v=u.top+j.item.last().outerHeight(true)}j.item.eq(q[k5]).css("top",v)}j.next.on("click",b);j.prev.on("click",e)});break}break}g[i]=j;return g},prev:function(j){j=d(j);var l=g[j],s=0,p=0;switch(l.options.orientation){case"horizontal":default:var v=0,q=0;switch(l.options.circular){case"no":default:l.current-=l.options.scrolling_items;for(s=l.current;s<l.current+l.options.scrolling_items;s++){v+=l.item.eq(s).outerWidth(true)}for(p=l.current;p<l.current+l.options.visible_items;p++){q+=l.item.eq(p).outerWidth(true)}l.viewport.animate({width:q});l.item.animate({left:"+="+v},600);l.item.promise().done(function(){l.prev.on("click",e);l.next.on("click",b)});if(l.current<=0){l.prev.hide()}if(l.current+l.options.visible_items<l.num_items){l.next.show()}break;case"yes":var u=0,t=[];l.current-=l.options.scrolling_items;if(l.current<0){l.current+=l.num_items}for(s=l.current;s<l.current+l.options.scrolling_items;s++){var o=s;if(s>=l.num_items){o=s-l.num_items}v+=l.item.eq(o).outerWidth(true);t[u]=o;u++}for(p=l.current;p<l.current+l.options.visible_items;p++){var n=p;if(p>=l.num_items){n=p-l.num_items}q+=l.item.eq(n).outerWidth(true)}var m=l.item.first().position(),w=m.left-l.wrapper_width;for(k5=0;k5<t.length;k5++){l.item.eq(t[k5]).css("left",w);if(t[k5]==0&&t[k5-1]==l.num_items-1){var m=l.item.first().position(),w=m.left-l.wrapper_width;l.item.eq(t[k5-1]).css("left",w)}}setTimeout(function(){l.viewport.animate({width:q});l.item.animate({left:"+="+v},600);l.item.promise().done(function(){l.prev.on("click",e);l.next.on("click",b)})},200);break}break;case"vertical":var h=0,i=0;switch(l.options.circular){case"no":default:l.current-=l.options.scrolling_items;for(s=l.current;s<l.current+l.options.scrolling_items;s++){h+=l.item.eq(s).outerHeight(true)}for(p=l.current;p<l.current+l.options.visible_items;p++){i+=l.item.eq(p).outerHeight(true)}l.viewport.animate({height:i});l.item.animate({top:"+="+h},600);l.item.promise().done(function(){l.prev.on("click",e);l.next.on("click",b)});if(l.current<=0){l.prev.hide()}if(l.current+l.options.visible_items<l.num_items){l.next.show()}break;case"yes":var u=0,t=[];l.current-=l.options.scrolling_items;if(l.current<0){l.current+=l.num_items}for(s=l.current;s<l.current+l.options.scrolling_items;s++){var o=s;if(s>=l.num_items){o=s-l.num_items}h+=l.item.eq(o).outerHeight(true);t[u]=o;u++}for(p=l.current;p<l.current+l.options.visible_items;p++){var n=p;if(p>=l.num_items){n=p-l.num_items}i+=l.item.eq(n).outerHeight(true)}var m=l.item.first().position(),k=m.top-l.wrapper_height;for(k5=0;k5<t.length;k5++){l.item.eq(t[k5]).css("top",k);if(t[k5]==0&&t[k5-1]==l.num_items-1){var m=l.item.first().position(),k=m.top-l.wrapper_height;l.item.eq(t[k5-1]).css("top",k)}}setTimeout(function(){l.viewport.animate({height:i},600);l.item.animate({top:"+="+h},600);l.item.promise().done(function(){l.prev.on("click",e);l.next.on("click",b)})},200);break}break}g[j]=l;return g},start:function(i){i=d(i);var h=g[i];if(h.timer!=0){clearInterval(h.timer)}switch(h.options.direction){case"left":case"up":default:h.timer=setInterval(function(){h.next.off();h.prev.off();f.fn.als("next",i)},h.options.interval);break;case"right":case"down":h.timer=setInterval(function(){h.prev.off();h.next.off();f.fn.als("prev",i)},h.options.interval);break}g[i]=h;return g},stop:function(i){i=d(i);var h=g[i];clearInterval(h.timer);g[i]=h;return g},destroy:function(i){i=d(i);var h=g[i];h.prev.off();h.next.off();f.fn.als("stop",i);f.removeData(h,this.name);this.removeClass(this.name);this.unbind();this.element=null}};function d(i){if(typeof(i)==="string"){var h=i.indexOf("_");if(h!=-1){i=i.substr(h+1)}}return i}function b(i){i.preventDefault();var j=d(f(this).attr("data-id")),h=g[j];f(this).off();h.prev.off();f.fn.als("next",j)}function e(i){i.preventDefault();var j=d(f(this).attr("data-id")),h=g[j];f(this).off();h.next.off();f.fn.als("prev",j)}f.fn.als=function(h){if(c[h]){return c[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return c.init.apply(this,arguments)}else{f.error("Method "+h+" does not exist on jQuery.als")}}}})(jQuery);
/*!
 * jQuery-ajaxTransport-XDomainRequest - v1.0.1 - 2013-10-17
 * https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest
 * Copyright (c) 2013 Jason Moon (@JSONMOON)
 * Licensed MIT (/blob/master/LICENSE.txt)
 */
(function(d){if(!d.support.cors&&d.ajaxTransport&&window.XDomainRequest){var g=/^https?:\/\//i;var f=/^get|post$/i;var e=new RegExp("^"+location.protocol,"i");var c=/text\/html/i;var b=/\/json/i;var a=/\/xml/i;d.ajaxTransport("* text html xml json",function(q,p,o){if(q.crossDomain&&q.async&&f.test(q.type)&&g.test(q.url)&&e.test(q.url)){var n=null;var h=(p.dataType||"").toLowerCase();return{send:function(k,j){n=new XDomainRequest();if(/^\d+$/.test(p.timeout)){n.timeout=p.timeout}n.ontimeout=function(){j(500,"timeout")};n.onload=function(){var m="Content-Length: "+n.responseText.length+"\r\nContent-Type: "+n.contentType;var l={code:200,message:"success"};var u={text:n.responseText};try{if(h==="html"||c.test(n.contentType)){u.html=n.responseText}else{if(h==="json"||(h!=="text"&&b.test(n.contentType))){try{u.json=d.parseJSON(n.responseText)}catch(s){l.code=500;l.message="parseerror"}}else{if(h==="xml"||(h!=="text"&&a.test(n.contentType))){var t=new ActiveXObject("Microsoft.XMLDOM");t.async=false;try{t.loadXML(n.responseText)}catch(s){t=undefined}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){l.code=500;l.message="parseerror";throw"Invalid XML: "+n.responseText}u.xml=t}}}}catch(r){throw r}finally{j(l.code,l.message,u,m)}};n.onprogress=function(){};n.onerror=function(){j(500,"error",{text:n.responseText})};var i="";if(p.data){i=(d.type(p.data)==="string")?p.data:d.param(p.data)}n.open(q.type,q.url);n.send(i)},abort:function(){if(n){n.abort()}}}}})}})(jQuery);
(function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var pairs,k,name,val,type=$.type(o);if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return String(o)}if(type==="string"){return $.quoteString(o)}if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=0;k<o.length;k++){pairs.push($.toJSON(o[k])||"null")}return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+str+")")}throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(str){if(str.match(escape)){return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+str+'"'}}(jQuery));
var languagesWidget={init:function(){var a=this;$(a.element).show();widgets.api.getLanguages(a.processLanguages,a)},processLanguages:function(a,c){var b="";$.each(a.data,function(e,d){b+='<option value="'+d.lcid+'">'+d.language+"</option>"});$(c.element).append(b)}};
var leaderBoardWidget={isProcessed:false,data:null,page:1,limit:parseInt($("[data-widget=leaderBoard][data-type=paging]").attr("data-pagingLimit"))||10,selectedValue:1,isRoiVisible:true,init:function(){var a=this;if(a.isProcessed){return}$(a.element).show();a.initBoard();widgets.api.getLeaderBoard(a.selectedValue,50,0,function(b,c){if(b.message!="OK"){return}a.data=b.data;a.showPage(1)});a.isProcessed=true;if($(a.element).attr("data-slide")=="false"){return}setInterval(function(){if($(".myPaging .activePage").next().hasClass("nextPage")){$(".myPaging .nextPage").trigger("click");$(".myPaging .activePage").removeClass("activePage");$(".myPaging .pageLink:first").addClass("activePage");$(".myPaging .pageLink:first").trigger("click");return}if($(".myPaging .activePage").next().length==0){$(".myPaging .activePage").removeClass("activePage");$(".myPaging .prevPage").trigger("click");$(".myPaging a").first().addClass("activePage");$(".myPaging .activePage").trigger("click")}else{$(".myPaging .activePage").next().trigger("click")}},3000)},initBoard:function(){var d=this;var c=$("[data-widget=leaderBoard][data-type=period]");var b='<option value="1" selected>'+widgetMessage.lastDay+'</option><option value="7">'+widgetMessage.lastWeek+'</option><option value="30">'+widgetMessage.lastMonth+'</option><option value="61">'+widgetMessage.last3Months+'</option><option value="93">'+widgetMessage.last6Months+"</option>";c.append(b);$(c).change(function(){d.selectedValue=$(this).val();d.page=1;widgets.api.getLeaderBoard(parseInt(d.selectedValue),50,0,function(e,f){if(e.message!="OK"){return}d.data=e.data;d.showPage(1)})});var a=$("<tbody></tbody>");$table=$("[data-widget=leaderBoard][data-type=leadersBoardTable]");$table.find("tbody").remove();$table.append(a)},switchColumn:function(){var a=this;$("#byROI").click(function(){$("th[data-column=hitRate], td.hitRate").hide();$("th[data-column=roi], td.roi").show();a.isRoiVisible=true});$("#byHitRate").click(function(){$("th[data-column=roi], td.roi").hide();$("th[data-column=hitRate], td.hitRate").show();a.isRoiVisible=false})},showPage:function(c){var b=this;var d=(b.limit*c)-b.limit;var a=b.limit;b.processLeaderBoard(b.data.results.slice(d,d+a),arguments)},processLeaderBoard:function(b,c){var d=this;d.doUpdate(c);$("[data-widget=leaderBoard][data-type=leadersBoardTable] tbody tr").remove();var a=$("[data-widget=leaderBoard][data-type=leadersBoardTable] tbody");$.each(b,function(e,f){var g=$("<tr></tr>");$.each($("[data-widget=leaderBoard][data-type=leadersBoardTable]").find("thead tr th"),function(h,k){var l=$("<td></td>");switch($(k).attr("data-column")){case"image":var j='<div class="pImage"><div class="thumb '+(f.gender==true?"male":"female")+'"></div><div class="status '+(f.isOnline==true?"online":"offline")+'"></div>';$(l).append(j);break;case"country":var j='<div class="flag '+f.countryCode+'"></div><div>'+f.countryCode+"</div>";$(l).append(j);break;case"name":var j='<div class="pName">'+f.name+"</div>";$(l).append(j);break;case"countryAndName":var j='<div class="pName">'+f.name+'</div><div class="flag '+f.countryCode+'"></div><div>'+f.countryCode+"</div>";$(l).append(j);break;case"roi":var j='<div class="trend up"></div><div class="number">'+f.returnOfInvestment.toFixed(2)+"%</div>";$(l).append(j);$(l).addClass("roi"+(d.isRoiVisible==true?"":" hidden"));break;case"hitRate":var j='<div class="number">'+(f.hitRate==null?"":f.hitRate.toFixed(2)+"%")+"</div>";$(l).append(j);$(l).addClass("hitRate"+(d.isRoiVisible==false?"":" hidden"));break}$(g).append(l)});$(a).append(g);$(window).trigger(widgets.events.socialLoadingComplete)});d.switchColumn()},doUpdate:function(a){if(!leaderBoardWidget.data){$("[data-widget=leaderBoard][data-type=paging]").html("");return}if(a[0]>2){}else{$("[data-widget=leaderBoard][data-type=paging]").html("");this.getNextPage(0,a[2])}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=leaderBoard][data-type=paging]");var a=leaderBoardWidget.data.total;var d=Math.ceil(a/e.limit);c.html("");var b='<div class="myPaging">';if(f>=e.limit){b+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){b+='<a class="pageLink';if(i==leaderBoardWidget.page){b+=" activePage"}b+='" href="javascript:;">'+i+"</a> "}if(d>i){b+='<a class="nextPage" href="javascript:;">...</a>'}b+="</div>";c.html(b);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=leaderBoard][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j=(e.limit*e.page)-e.limit;e.showPage(h)})}};
var leadsWidget={widgetName:"leads",allLanguagesExp:/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC -.']*$/,expressions:{email:/\S+@\S+\.\S+/,firstName:"",lastName:"",phone:/^[0-9]+$/,},init:function(){leadsWidget=$.extend({},validationWidget,leadsWidget);var a=this;a.expressions.firstName=a.allLanguagesExp;a.expressions.lastName=a.allLanguagesExp;$.each($("[data-widget=leads]"),function(){var b=$(this);if($(b).attr("data-label")){$(b).val($(this).attr("data-label"));$(b).addClass("isLabel");$(b).focus(function(){a.updateField(b)});$(b).blur(function(){a.updateField(b)})}});a.updateLanguages();$("[data-widget=leads][data-type=submit]").click(function(b){a.submit(b)})},updateField:function(a){if($(a).attr("data-label")==$(a).val()){$(a).val("");$(a).removeClass("isLabel")}else{if($(a).val()==""){$(a).val($(a).attr("data-label"));$(a).addClass("isLabel")}}},updateLanguages:function(){var a=this;var b=$("[data-widget=leads][data-type=languageCode]");if(!$(b).length){return}widgets.api.getLanguages(a.processLanguages)},processLanguages:function(response){var widget=this;var data=eval(response);var languages=$("[data-widget=leads][data-type=languageCode]");widget.languages=data.data;helper.setLanguages(languages,data.data)},submit:function(b){var c=leadsWidget;if(!c.validate()){return false}var d={};$.each($("[data-widget=leads]"),function(e,f){d[$(f).attr("data-type")]=$(f).val()});if($.cookie("TLAffiliateID")){var a=URL.unserialize($.cookie("TLAffiliateID"));d.affiliateInfo={};d.affiliateInfo["affiliateId"]=a.AffiliateID;d.affiliateInfo["bannerId"]=a.ClickBannerID;d.affiliateInfo["subAffiliateId"]=a.SubAffiliateID;d.affiliateInfo["clickDateTime"]=a.ClickDateTime;if(a.AffDealID){d.affiliateInfo["dealId"]=a.AffDealID}}if(typeof widgets.onLeadsSubmit=="function"){widgets.onLeadsSubmit()}widgets.api.addLead(d,c.processAddLead)},processAddLead:function(a){}};
var loginWidget={isPending:false,isUserProcessed:false,init:function(){loginWidget.isProcessed=true;var c=this,a=c.elements,d=a.filter("[data-type=submit]"),b=a.filter("[data-type=container]");d.click(function(e){c.submit()});b.show();b.each(function(){c.elements.find("input").keypress(function(f){if(f.which==10||f.which==13){if($(f.target).data("widget").toLowerCase()=="login"||$(f.srcElement).data("widget").toLowerCase()=="login"){c.submit()}}})});if(typeof widgets.initLoginWidget=="function"){widgets.initLoginWidget()}$(window).on(widgets.events.userLogin,function(e){if(widgets.user!=null&&widgets.settings.environment.TermsAndConditionsEnabled){if(widgets.user.tos==false){$(window).trigger(widgets.events.tosRequired,true)}}});$(window).on(widgets.events.loginIsCompleted,function(e){var f={};f.user={};f.limitations={};widgets.api.getResources(f,[widgets.processResources,c.processDocsSentLogin])});$(window).on(widgets.events.updateUserStatus,function(f,e){if(!e){widgets.api.updateUserDetails("",{tos:e},function(g){$(window).trigger(widgets.events.tosUpdated,e);return})}if($("#chkBxTC").length>0&&$("#chkBxTC").is(":checked")){widgets.api.updateUserDetails("",{tos:e},function(g){if(g.code!=401&&g.code!=400){widgets.user.tos=true;$(window).trigger(widgets.events.tosUpdated,e)}})}});$(window).on(widgets.events.docsNotSentPanelDismissed,function(f){var h="DocSent";var e="false";var g="false";widgets.api.insertAuditLog(h,e,g,function(i){})})},processDocsSentLogin:function(){if(widgets.user!=null&&widgets.settings.application["Documents sent pop up"]){if(widgets.user.docsSent==false&&widgets.user.isReal==true){$(window).trigger(widgets.events.docsNotSent,true)}}},submit:function(){var c=loginWidget;if(loginWidget.isPending===true){return true}loginWidget.isPending=true;var a=c.elements.filter("[data-type=error]");var d=c.elements.filter("[data-type=username]");var b=c.elements.filter("[data-type=password]");a.hide();$(window).trigger(widgets.events.loginIsStarted);if($(c.element).attr("data-loginexternal")=="true"||helper.getGlobalSetting("EnableExternalUsername")){widgets.api.loginUserExternal(d.val(),b.val(),c.processLogin)}else{widgets.api.loginUser(d.val(),b.val(),c.processLogin)}},processLogin:function(a){var d=loginWidget;if(a.code==200||a.code==201){var c=a.data;$.cookie(widgets.tokenCookie,JSON.stringify(c),{path:"/"});widgets.token=c}if(a.code==400||a.code==401){var b=a.data.type;d.message(b)}else{loginWidget.isPending=false;$(window).trigger(widgets.events.loginIsCompleted,a);return}widgets.getTokenWithRefresh(false,function(){loginWidget.isPending=false;$(window).trigger(widgets.events.loginIsCompleted,a)})},message:function(d){var c=this;var b=c.elements.filter("[data-type=error]");var a=widgetMessage.Login_WrongCredentials||"Invalid username or password";a=widgetMessage[d]?widgetMessage[d]:a;b.html(a);b.show()}};
var loginExternalWidget={isPending:false,init:function(){loginExternalWidget.isProcessed=true;var a=this;$("[data-widget=loginExternal][data-type=submit]").click(function(b){a.submit()});$("[data-widget=loginExternal][data-type=container]").show();$("[data-widget=loginExternal][data-type=container]").each(function(){$("input").keypress(function(b){if(b.which==10||b.which==13){if($(b.target).data("widget").toLowerCase()=="loginExternal"||$(b.srcElement).data("widget").toLowerCase()=="loginExternal"){$("[data-widget=loginExternal][data-type=submit]").click()}}})});if(typeof widgets.initloginExternalWidget=="function"){widgets.initloginExternalWidget()}},submit:function(){var c=loginExternalWidget;if(loginExternalWidget.isPending===true){return true}loginExternalWidget.isPending=true;var a=$("[data-widget=loginExternal][data-type=error]");var d=$("[data-widget=loginExternal][data-type=username]");var b=$("[data-widget=loginExternal][data-type=password]");a.hide();$(window).trigger(widgets.events.loginIsStarted);widgets.api.loginUserExternal(d.val(),b.val(),c.processLogin)},processLogin:function(a){var b=loginExternalWidget;if(a.code!=201){loginExternalWidget.isPending=false;$(window).trigger(widgets.events.loginIsCompleted,a);return}widgets.getTokenWithRefresh(false,function(){loginExternalWidget.isPending=false;$(window).trigger(widgets.events.loginIsCompleted,a)})},message:function(b){var a=$("[data-widget=loginExternal][data-type=error]");a.html(b);a.show()}};
var logoutWidget={isProcessed:false,init:function(){var a=this;a.element.click(function(){widgets.logout()});$(window).on(widgets.events.loginIsCompleted,function(c,b){if(b&&b.code===201){a.element.show();a.isProcessed=true}});$(window).on(widgets.events.userLogout,function(){a.element.hide()});$(window).on(widgets.events.userLogin,function(){if(!a.isProcessed&&widgets.isLogged()){a.isProcessed=true;a.element.show()}})}};
var menuGamesWidget={init:function(){var a=this;$(window).on(widgets.events.settingsLoaded,function(b){a.buildGameMenu()});$("[data-widget=menuGames]").show()},buildGameMenu:function(){if($(".widgetMenu").length){return}var g=$("[data-widget=menuGames]");var b=$('<div id="menu" class="widgetMenu"></div>');var c=widgets.settings.application.EnableLadderGame.Value;var f=widgets.settings.application.EnableLadderTouchGame.Value;var d=(widgets.settings.application.EnableBinary100!=undefined)?widgets.settings.application.EnableBinary100.Value:false;var e=widgetMessage.ladder?widgetMessage.ladder:"Ladder";var i=widgetMessage.ladderTouch?widgetMessage.ladderTouch:"Touch";var k=widgetMessage.binary100?widgetMessage.binary100:"Binary 100";if(c.toString().toLowerCase()=="true"){var a=(widgets.game.toLowerCase()=="ladder")?"class='active'":"";var l=$('<div class="menulinkWrapper"><a href="index.html" '+a+">"+e+"</a></div> ");$(b).append(l)}if(f.toString().toLowerCase()=="true"){var a=(widgets.game.toLowerCase()=="laddertouch")?"class='active'":"";var h=$('<div class="menulinkWrapper"><a href="ladderTouch.html"  '+a+">"+i+"</a></div> ");$(b).append(h)}if(d.toString().toLowerCase()=="true"){var a=(widgets.game.toLowerCase()=="binary100")?"class='active'":"";var j=$('<div class="menulinkWrapper"><a href="binary100.html" '+a+">"+k+"</a></div> ");$(b).append(j)}$(b).append('<div class="menulinkFillDiv" style="overflow:hidden;"><span></span></div>');$(g).append(b)}};
var messageWidget={isProcessed:false,getPopUpMessagesInterval:10,htmlPanel:null,buttonClose:null,buttonNext:null,popupMessages:{},init:function(){var a=this;a.getPopUpMessagesInterval=(widgets.messagePopUpPullInterval!=null)?widgets.messagePopUpPullInterval:10;$(window).on(widgets.events.userLogin,function(){if(widgets.isLogged()&&!a.isProcessed&&widgets.settings){a.isProcessed=true;a.initMessageNotifications()}})},initMessageNotifications:function(){var a=this;clearInterval(widgets.timers.msgPopUpCheckInterval);widgets.timers.msgPopUpCheckInterval=setInterval(function(){var b=(a.htmlPanel==null)?true:false;widgets.api.getMessages(function(c){a.processMessages(b,c)})},a.getPopUpMessagesInterval*1000);widgets.api.getMessages(function(b){a.processMessages(true,b)})},processMessages:function(b,a){var c=this;if(a.code!=200||!a.data){c.resetWidget();return}if(a.data.popupMessages.length>0){$.each(a.data.popupMessages,function(d,e){var f=c.popupMessages[e.id]?false:true;if(f){c.popupMessages[e.id]=e}});if(b==true){c.resetWidget();c.showPopUpMessages(c.popupMessages[Object.keys(c.popupMessages)[0]])}if(Object.keys(c.popupMessages).length>1&&c.buttonNext!=null){c.buttonNext.removeAttr("disabled")}}else{c.resetWidget()}if(a.data.totalInbox!=0){c.showInboxMessages(a.data.totalInbox)}else{c.element.html("(0)")}},resetWidget:function(){var a=this;$(a.htmlPanel).remove();a.htmlPanel=null},showPopUpMessages:function(b){var c=this;var a=$('<div class="messagePopupWrap"><div class="messagePopup">'+b.content+'</div><input id="closePopUp" class="popUpButtons" type="button" value="'+widgetMessage.popUpCloseBtn+'" /><input id="nextPopUp" class="popUpButtons" type="button" value="'+widgetMessage.popUpNextBtn+'"/></div>');a.dialog({position:"center",width:700,height:350,title:b.subject,resizable:false,open:function(d,e){$(this).parent().children().children(".ui-dialog-titlebar-close").hide()},});c.htmlPanel=a;c.buttonClose=c.htmlPanel.find("input#closePopUp");c.buttonNext=c.htmlPanel.find("input#nextPopUp");c.buttonClose.click(function(){c.closeMessage(b)});c.buttonNext.click(function(){c.closeMessage(b)});if(Object.keys(c.popupMessages).length==1){c.buttonNext.attr("disabled","disabled")}},closeMessage:function(a){var b=this;widgets.api.markMessageRead(a.id,function(c){if(c.code==200){delete b.popupMessages[a.id];widgets.api.getMessages(function(d){b.processMessages(true,d)})}})},showInboxMessages:function(b){var a=this;a.element.html("("+b+")")}};
var messageInboxWidget={isProcessed:false,elementsCache:{},page:1,offset:0,getInboxMessagesInterval:60,init:function(){var a=this;a.getInboxMessagesInterval=(widgets.messageInboxPullInterval!=null)?widgets.messageInboxPullInterval:60;a=$.extend({},pagingWidget,messageInboxWidget);a.elementsCache.paging=a.elements.filter("[data-type=paging]");a.elementsCache.allMessages=a.elements.filter("[data-type=allMessages]");a.elementsCache.content=a.elements.filter("[data-type=content]");a.rowsPerPage=(a.elementsCache.paging.attr("data-rowsperpage")!=undefined)?parseInt(a.elementsCache.paging.attr("data-rowsperpage")):a.rowsPerPage;$(window).on(widgets.events.userLogin,function(){if(widgets.isLogged()&&widgets.settings&&!a.isProcessed){a.isProcessed=true;widgets.api.getInboxMessages(a.offset,a.rowsPerPage,function(b){a.processMessages(b)});a.initMessageNotifications();a.elementsCache.allMessages.show()}})},initMessageNotifications:function(){var a=this;clearInterval(widgets.timers.msgCheckInterval);widgets.timers.msgCheckInterval=setInterval(function(){widgets.api.getInboxMessages(a.offset,a.rowsPerPage,function(b){a.processMessages(b)})},a.getInboxMessagesInterval*1000)},processMessages:function(a){var c=this;if(a.code!=200){return}var d=a.data.total;c.update(d,c.rowsPerPage,c.offset,c.elementsCache.paging);var b=true;if(widgets.messages!={}){$.each(a.data.results,function(e,f){if(widgets.messages[f.id]){b=false}})}if(b){c.InsertAllMessages(a.data)}},getPageResources:function(b){var a=this;a.page=b;a.offset=(a.rowsPerPage*a.page)-a.rowsPerPage+1;widgets.api.getInboxMessages(a.offset,a.rowsPerPage,function(c){a.processMessages(c)})},clickMessage:function(b){var a=this;widgets.api.getMessageDetails(b,function(c){a.processMessageDetails(c)})},processMessageDetails:function(a){var b=this;if(a.code!=200){return}b.drawMsgContent(a);b.elementsCache.content.show();b.elementsCache.allMessages.hide();b.elementsCache.paging.hide()},InsertAllMessages:function(a){var b=this;var c=b.elementsCache.allMessages.find("tbody").first();c.html("");$.each(a.results,function(e,g){var h=(g.isRead)?"read":"";var f=$('<tr class="inboxRow '+h+'" data-id='+g.id+"></tr>");var d=b.elementsCache.allMessages.find("thead tr th");$.each(d,function(l,m){var n=$('<td class="inboxCell "></td>');switch($(m).attr("data-column")){case"subject":$(n).html(g.subject);$(n).addClass("link");break;case"dateReceived":var j=(g.receivedDate!=null)?helper.formatDate(new Date(g.receivedDate.dateTime),helper.dateFormats.masks.normalDateTime):"N/A";$(n).html(j);break;case"activeFrom":var k=(g.activeFrom!=null)?helper.formatDate(new Date(g.activeFrom.dateTime),helper.dateFormats.masks.normalDateTime):"N/A";$(n).html(k)}$(f).append(n)});f.click(function(){b.elementsCache.allMessages.find("tr.clicked").removeClass("clicked");$(f).addClass("read");b.clickMessage(g.id)});c.append(f);widgets.messages={};widgets.messages[g.id]=g})},drawMsgContent:function(b){var e=this;var c=b.data.subject;var a=helper.formatDate(new Date(b.data.activeFrom.dateTime),helper.dateFormats.masks.normalDateTime);var f='<div class="headerWrap"><div class="headerDetails"><strong>'+widgetMessage.inboxSubject+":</strong> "+c+"  <strong>"+widgetMessage.inboxActiveFrom+":</strong> "+a+'</div><div class="headerBackBtn">'+widgetMessage.inboxBacktoInbox+"</div></div>";var d=b.data.content;e.elementsCache.content.html(f+d);e.elementsCache.content.show();e.elementsCache.content.find(".headerBackBtn").click(function(){widgets.api.getInboxMessages(e.offset,e.rowsPerPage,function(g){e.processMessages(g)});e.elementsCache.content.hide();e.elementsCache.allMessages.show();e.elementsCache.paging.show()})}};
var myStatisticsWidget={dateFormatDefault:"dd M yy",elementCache:{},init:function(){var a=this;a.elementCache.toDate=$(a.elements).filter("[data-type=toDate]");a.elementCache.fromDate=$(a.elements).filter("[data-type=fromDate]");a.elementCache.taTypes=$(a.elements).filter("[data-type=taTypes]");a.elementCache.submit=$(a.elements).filter("[data-type=submit]");a.elementCache.pie=$(a.elements).filter("[data-type=pie]");a.elementCache.chart=$(a.elements).filter("[data-type=chart]");a.elementCache.tradesVolume=$(a.elements).filter("[data-type=tradesVolume]");a.elementCache.tradesProfit=$(a.elements).filter("[data-type=tradesProfit]");a.elementCache.tradesTotal=$(a.elements).filter("[data-type=tradesTotal]");a.initTradableAssetTypes();a.initDatePickers();a.initTrades();$(a.elementCache.submit).click(function(){a.submit()});$(a.elements).show()},initTradableAssetTypes:function(){var a=this;widgets.api.getTradableAssets(function(d){var e='<option value="0">All</option>';var b=[];for(var f=0;f<d.data.length;f++){var g=d.data[f];var h=true;for(var c=0;c<b.length;c++){if(b[c]==parseInt(g.type)){h=false;break}}if(h==true){e+='<option value="'+g.type+'">'+g.typeName+"</option>";b.push(parseInt(g.type))}}a.elementCache.taTypes.html(e)})},initDatePickers:function(){var b=this;var a=widgets.getDate(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var c=$(b.elements).filter("[data-type=toDate], [data-type=fromDate]");$(window).on(widgets.events.loadingIsCompleted,function(d){c.val($.datepicker.formatDate((b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat,a));c.datepicker({dateFormat:(b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat});helper.translateDatepicker($(b.element))})},submit:function(){var d=this;var b=$.datepicker.formatDate("yy-mm-dd",d.elementCache.fromDate.datepicker("getDate"));var a=$.datepicker.formatDate("yy-mm-dd",d.elementCache.toDate.datepicker("getDate"));var c=d.elementCache.taTypes.val();if(d.elementCache.chart.length>0){widgets.api.getMyStatisticsChartData(b,a,c,function(e){d.drawChart(e)})}if(d.elementCache.pie.length>0){widgets.api.getMyStatisticsPieData(b,a,c,function(e){d.drawPie(e)})}if(d.elementCache.tradesVolume.length>0||d.elementCache.tradesProfit.length>0||d.elementCache.tradesTotal.length>0){widgets.api.getUserTradeOrdersCharts(c,b,a,function(e){d.initTrades(e)})}},initTrades:function(a){var c=this;var b=helper.getCurrencySymbol();if(c.elementCache.tradesVolume.length>0){c.elementCache.tradesVolume.html(helper.formatCurrency(b,(typeof a=="undefined"?0:a.data.totalVolume).toFixed(2)))}if(c.elementCache.tradesProfit.length>0){c.elementCache.tradesProfit.html(helper.formatCurrency(b,(typeof a=="undefined"?0:a.data.totalProfit).toFixed(2)))}if(c.elementCache.tradesTotal.length>0){c.elementCache.tradesTotal.html(typeof a=="undefined"?0:a.data.totalTrades)}},drawPie:function(result){var widget=this;pieChartColors=Highcharts.getOptions().colors;var myTradesCol=eval(result.data.replace("Turbo Binary",widgetMessage.Turbo_MyStat).replace("Turbo",widgetMessage.Turbo_MyStat).replace("Binary",widgetMessage.Digital_MyStat).replace("Touch",widgetMessage.Touch_MyStat).replace("OneTouch",widgetMessage.OneTouch_MyStat).replace("Range Out",widgetMessage.RangeOut_MyStat).replace("Range",widgetMessage.Range_MyStat).replace("Fixed Binary",widgetMessage.FixedBinary_MyStat).replace("Fixed Touch",widgetMessage.FixedTouch_MyStat).replace("Ladder",widgetMessage.Ladder_MyStat).replace("Multi",widgetMessage.Multi_MyStat).replace("Matrix",widgetMessage.Matrix_MyStat).replace("LadderTouch",widgetMessage.LadderTouch_MyStat).replace("LadderRange",widgetMessage.LadderRange_MyStat).replace("Binary100",widgetMessage.Binary100_MyStat).replace("OverUnder",widgetMessage.OverUnder_MyStat).replace("Binary_Call",widgetMessage.Binary_Call_MyStat).replace("Binary_Put",widgetMessage.Binary_Put_MyStat).replace("Binary100_Call",widgetMessage.Binary100_Call_MyStat).replace("Binary100_Put",widgetMessage.Binary100_Put_MyStat).replace("Range_In",widgetMessage.Range_In_MyStat).replace("Range_Out",widgetMessage.Range_Out_MyStat).replace("Touch_Up",widgetMessage.Touch_Up_MyStat).replace("Touch_Down",widgetMessage.Touch_Down_MyStat).replace("Turbo Binary_Call",widgetMessage.Turbo_Binary_Call_MyStat).replace("Turbo Binary_Put",widgetMessage.Turbo_Binary_Put_MyStat).replace("OneTouch_Touch Up",widgetMessage["OneTouch_Touch Up_MyStat"]).replace("OneTouch_Touch Down",widgetMessage["OneTouch_Touch Down_MyStat"]).replace("OneTouch_NoTouch Up",widgetMessage["OneTouch_NoTouch Up_MyStat"]).replace("OneTouch_NoTouch Down",widgetMessage["OneTouch_NoTouch Down_MyStat"]).replace("Ladder_Call",widgetMessage.Ladder_Call_MyStat).replace("Ladder_Put",widgetMessage.Ladder_Put_MyStat));if(myTradesCol==-1||myTradesCol.length==0){widget.elementCache.pie.hide();return}widget.elementCache.pie.show();CurrencyColumn=helper.getCurrencySymbol();var gameData=[];var actionData=[];for(var i=0;i<myTradesCol.length;i++){gameData.push({name:myTradesCol[i].drilldown.name,y:myTradesCol[i].y,color:myTradesCol[i].color});for(var j=0;j<myTradesCol[i].drilldown.data.length;j++){var brightness=0.2-(j/myTradesCol[i].drilldown.data.length)/5;actionData.push({name:myTradesCol[i].drilldown.arrGameDrill[j],y:myTradesCol[i].drilldown.data[j],color:Highcharts.Color(myTradesCol[i].color).brighten(brightness).get()})}}widget.elementCache.pie.highcharts({chart:{renderTo:"pieChartPH",type:"pie"},title:{text:widgetMessage.Traded_Games},yAxis:{title:{text:""}},tooltip:{valueSuffix:"%",formatter:function(){return"<div>"+this.series.name+"</div><br />"+this.point.name+": <b>"+this.point.y+"%</b>"}},credits:{enabled:false},series:[{name:"Game",data:gameData,size:"60%",innerSize:"0%",dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"white",distance:-30}},{name:"Action",data:actionData,innerSize:"60%",size:"100%",dataLabels:{formatter:function(){return this.y>1?"<b>"+this.point.name+":</b> "+this.y+"%":null},distance:10}}]})},drawChart:function(result){var widget=this;pieChartColors=Highcharts.getOptions().colors;var myTradesCol=eval(result.data);if(myTradesCol==-1||myTradesCol.length==0){widget.elementCache.chart.hide();return}widget.elementCache.chart.show();CurrencyColumn=helper.getCurrencySymbol();var xCategories=[];var i,cat;for(i=0;i<myTradesCol.length;i++){cat=myTradesCol[i][0];if(xCategories.indexOf(cat)===-1){xCategories[xCategories.length]=cat}}widget.elementCache.chart.highcharts({chart:{renderTo:"colChartPH",height:350,alignTicks:true},navigator:{enabled:false},exporting:{enabled:true},rangeSelector:{enabled:false},scrollbar:{enabled:false},credits:{enabled:false},legend:{enabled:false},title:{text:widgetMessage.Traded_Assets},xAxis:{categories:xCategories,title:{text:null},labels:{enabled:true,rotation:-90,color:"red",align:"right",x:4,y:10,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif",}}},yAxis:{title:{text:null}},series:[{name:"Volume "+CurrencyColumn,type:"column",data:myTradesCol,}]})},};
var myTradesFromDateWidget={dateFormatDefault:"dd M yy",flag:false,init:function(){var b=this;var a=widgets.getDate(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());$(b.element).show();$(window).on(widgets.events.loadingIsCompleted,function(c){if((widgets.game==""||widgets.isLadderBased(widgets.game)&&widgets.game!="binary100")&&a.getHours()-widgets.settings.application.TradingStartHour.Value<0){a=new Date(a.setDate(a.getDate()-1));b.flag=true}$(b.element).val($.datepicker.formatDate((b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat,a));$(b.element).datepicker({beforeShow:function(d,e){if(b.flag){setTimeout(function(){e.dpDiv.find("a.ui-state-highlight").removeClass("ui-state-highlight");e.dpDiv.find(".ui-datepicker-today").prev().find("a").addClass("ui-state-highlight")},100)}},dateFormat:(b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat});helper.translateDatepicker($(b.element))})}};
var myTradesOptionsWidget={isProcessed:false,init:function(){var b=this;var a=[widgets.events.loadingIsCompleted,widgets.events.expireOptions,widgets.events.reportsTradeAssetsIsLoading];$(window).on(a.join(" "),function(){if(!myTradesOptionsWidget.isProcessed&&$(b.element).length<=1){widgets.api.getTradableAssets(function(c){b.processTradableAssets(c)});b.isProcessed=true}});$(b.element).show()},processTradableAssets:function(a){var c=this;var b='<option value="0">'+widgetMessage.filterAll+"</option>";$.each(a.data,function(d,e){if(!e||typeof e!="object"){return}b+='<option value="'+e.id+'">'+e.description+"</option>"});$(c.element).append(b);$(window).trigger(widgets.events.closedTradesIsReady)}};
var myTradesPagingWidget={fromDate:null,toDate:null,asset:0,init:function(){var a=this;myTradesPagingWidget=$.extend({},pagingWidget,myTradesPagingWidget);$(a.element).show()},getPageResources:function(f){var d=this;var g=d.fromDate;var e=d.toDate;var c=d.asset;var b=(d.rowsPerPage*f)-d.rowsPerPage+1;var h="expireat";var a="all";var i="all";if(widgets.isLadderBased()){widgets.api.getUserTradeReports(c,g,e,d.rowsPerPage,i,a,b,myTradesTableWidget.processMyTrades)}else{widgets.api.getUserTradeOrders(c,g,e,d.rowsPerPage,0,a,b,myTradesTableWidget.processMyTrades)}}};
var myTradesProfitWidget={init:function(){var a=this;$(a.element).show()},doUpdate:function(b){var a=helper.getCurrencySymbol();$("[data-widget=myTradesProfit]").html(helper.formatCurrency(a,b.totalProfit.toFixed(2)))}};
var myTradesSearchButtonWidget={init:function(){var a=this;$(a.element).show();$(window).on(widgets.events.expireOptions,function(){var g=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=myTradesFromDate]").datepicker("getDate"));var c=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=myTradesToDate]").datepicker("getDate"));var e=($("[data-widget=myTradesTable]").attr("data-rowsperpage")!=undefined)?parseInt($("[data-widget=myTradesTable]").attr("data-rowsperpage")):widgets.all.myTradesTable.rowsPerPage;var f="all";var b="all";if(g.length==0){g=widgets.getDate(new Date().getTime(),helper.dateFormats.masks.isoDate)}if(c.length==0){c=widgets.getDate(new Date().getTime(),helper.dateFormats.masks.isoDate)}if(widgets.isLadderBased(widgets.game)){widgets.api.getUserTradeReports($("[data-widget=myTradesOptions]").val()||0,g,c,e,b,f,0,myTradesTableWidget.processMyTrades)}else{var d=(widgets.all.tradesOptions!=undefined)?widgets.all.tradesOptions.getValue():$("[data-widget=myTradesOptions]").val();myTradesPagingWidget.asset=d||0;widgets.api.getUserTradeOrders(d||0,g,c,e,0,f,0,myTradesTableWidget.processMyTrades,d)}myTradesPagingWidget.fromDate=g;myTradesPagingWidget.toDate=c});$(a.element).click(function(){if(widgets.isLogged()){var g=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=myTradesFromDate]").datepicker("getDate"));var d=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=myTradesToDate]").datepicker("getDate"));var e=($("[data-widget=myTradesTable]").attr("data-rowsperpage")!=undefined)?parseInt($("[data-widget=myTradesTable]").attr("data-rowsperpage")):widgets.all.myTradesTable.rowsPerPage;var f="all";var b="all";var c=(widgets.all.tradesOptions!=undefined)?widgets.all.tradesOptions.getValue():$("[data-widget=myTradesOptions]").val();if(widgets.isLadderBased(widgets.game)){widgets.api.getUserTradeReports(c||0,g,d,e,b,f,0,myTradesTableWidget.processMyTrades)}else{widgets.api.getUserTradeOrders(c||0,g,d,e,0,f,0,myTradesTableWidget.processMyTrades)}}else{$(window).trigger(widgets.events.closedTradesNotLoggedIn)}myTradesPagingWidget.fromDate=g;myTradesPagingWidget.toDate=d})}};
var myTradesTableWidget={rowsPerPage:10,enableEmptyRows:true,init:function(){var c=this;c.rowsPerPage=(c.element.attr("data-rowsperpage")!==undefined)?parseInt(c.element.attr("data-rowsperpage")):c.rowsPerPage;c.enableEmptyRows=c.element.data("enableemptyrows")!==undefined?c.element.data("enableemptyrows")===true:c.enableEmptyRows;c.elements.filter("[data-widget=myTradesTable]").show();var b=$.datepicker.formatDate("yy-mm-dd",widgets.getDate());var a=$.datepicker.formatDate("yy-mm-dd",widgets.getDate());$(window).on(widgets.events.userLogout,function(d){$("[data-widget=myTradesTable] tbody tr").remove();$(".myTradesPaging").remove()});$(window).on(widgets.events.updatePayoutType,function(d){c.updatePayoutType(d)})},updatePayoutType:function(b){var a=this;var c=a.element.find("tbody tr td[data-payout]");c.each(function(e,f){var d=$(f).data("payout");f.textContent=helper.formatPayout(parseInt(d))})},processMyTrades:function(d,h){var i=d.data.trades;if(!i){return}var a=[],g=myTradesTableWidget,b=i[i.length-1],j=d.data&&d.data.totalTrades?d.data.totalTrades:0,f=h[6],c=g.element.find("thead tr th");myTradesPagingWidget.update(j,g.rowsPerPage,f);if(typeof myTradesProfitWidget!="undefined"){myTradesProfitWidget.doUpdate(d.data)}if(typeof myTradesVolumeWidget!="undefined"){myTradesVolumeWidget.doUpdate(d.data)}if(typeof myTradesTotalTradesWidget!="undefined"){myTradesTotalTradesWidget.doUpdate(d.data)}g.element.find("tbody > tr").remove();$.each(i,function(k,m){if(!(widgets.isLadderBased(m.optionType)&&m.state=="TradeExpired"&&m.contracts==0)){var l=$('<tr data-optionId="'+m.optionId+'" data-game="'+m.game.toLowerCase()+'"></tr>');a.push(l[0]);$.each(c,function(D,t){var u=$("<td></td>");switch($(t).attr("data-column")){case"id":if(widgets.isLadderBased(m.optionType)&&(m.state=="TradeSold"||m.state=="TradeCancelled")){u.html(m.parantOrderId)}else{u.html(m.orderId)}break;case"serialNum":u.html(m.serialNumber);break;case"type":var v="";if(m.optionType=="OneTouch"){v=(m.isUp)?"Up":"Down"}u.html((widgetMessage[m.game.toLowerCase()]||m.game)+" "+v);break;case"typeAndAsset":if(m.game.toLowerCase()=="turbobinary"){var q=widgetMessage[m.game.toLowerCase()+m.interval]||m.game}else{var q=widgetMessage[m.game.toLowerCase()]||m.game}var A=m.description;u.html(q+" "+A);break;case"name":u.html(m.description);break;case"expiryRate":if(m.state=="TradeSold"){u.html(m.soldRate)}else{u.html(m.tradeExpiryRate)}break;case"state":var r="";var s=widgetMessage.closedTradeSold?widgetMessage.closedTradeSold:"Sold";var o=widgetMessage.closedTradeExpired?widgetMessage.closedTradeExpired:"Expired";var E=widgetMessage.closedTradeCancelled?widgetMessage.closedTradeCancelled:"Cancelled";var G=widgetMessage.closedTradeStopped?widgetMessage.closedTradeStopped:"Stopped";var w=widgetMessage.closedTradeExtended?widgetMessage.closedTradeExtended:"TradeExtended";if(m.state=="TradeSold"){r=s}else{if(m.state=="TradeExpired"){r=o}else{if(m.state=="TradeCancelled"){r=E}else{if(m.state=="TradeStopped"){r=G}else{if(m.state=="TradeExtended"){r=w}}}}}u.html('<span class="'+r+'">'+r+"</span>");break;case"contracts":u.html(m.contracts);break;case"action":u.addClass("action");var n="";if(m.game==="TurboBinary"){if(m.actionType==="Call"){n=widgetMessage.above||"Above"}else{if(m.actionType=="Put"){n=widgetMessage.below||"Below"}}}else{n=widgetMessage[m.actionType.toLowerCase()]||m.actionType}if(widgets.isLadderBased(m.optionType)){if(m.actionType.toLowerCase()=="call"){n="";u.addClass("buy")}else{if(m.actionType.toLowerCase()=="put"){n="";u.addClass("sell")}}}u.addClass(m.game);u.html(n);m.isCall||m.isIn||m.isUp?u.addClass("isAlpha"):u.addClass("isBeta");break;case"created":if(g.dateFormat&&g.dateFormat.length>0){u.html(widgets.getDate(m.orderDate.timestamp,g.dateFormat))}else{u.html(widgets.getDate(m.orderDate.timestamp,helper.dateFormats.masks.normalDateTime))}break;case"expired":if(m.state=="TradeExpired"||m.state=="TradeCancelled"){if(g.dateFormat&&g.dateFormat.length>0){u.html(widgets.getDate(m.expirationDate.timestamp,g.dateFormat))}else{if(widgets.isLadderBased(widgets.game)){u.html(widgets.getDate(m.expirationDate.timestamp,helper.dateFormats.masks.isoTime))}else{u.html(widgets.getDate(m.expirationDate.timestamp,helper.dateFormats.masks.normalDateTime))}}}else{if(m.state=="TradeSold"){if(widgets.isLadderBased(widgets.game)){u.html(widgets.getDate(m.soldDate.timestamp,helper.dateFormats.masks.isoTime))}else{u.html(widgets.getDate(m.orderDate.timestamp,helper.dateFormats.masks.normalDateTime))}}else{if(m.expirationDate){u.html(widgets.getDate(m.expirationDate.timestamp,helper.dateFormats.masks.normalDateTime))}}}break;case"rate":u.addClass("openTradesRowRate");if(!widgets.isLadderBased(m.game)){var x="";if(m.isCall||m.isUp||m.isIn){x="buy"}else{x="sell"}u.html('<div class="CloseTradeAction '+x+" "+m.game.toLowerCase()+'"></div><div class="CloseTradeActionlbl">'+m.rate+"</div>")}else{var F=m.game.toLowerCase();if(F=="ladder"||F=="binary100"){if(m.isBuy){x="buy"}else{x="sell"}}if(F=="laddertouch"){if(m.isTouch){x="touch"}else{x="notouch"}}u.html('<div class="CloseTradeAction '+x+" "+m.game.toLowerCase()+'"></div><div class="CloseTradeActionlbl">'+m.rate+"</div>")}break;case"currentRate":u.html(m.expirationRate);break;case"invested":u.html(helper.formatCurrency(helper.getCurrencySymbol(m),m.volume));break;case"investedAll":var C=m.contracts!=undefined?m.contracts:1;u.html(helper.formatCurrency(helper.getCurrencySymbol(m),m.volume));break;case"payout":var B=(m.profit==0)?"neutral":(m.profit>0)?"positive":"negative";if(widgets.isLadderBased(m.game)){u.html(helper.formatCurrency(helper.getCurrencySymbol(m),m.profit))}else{u.attr("data-payout",m.payoutPercent).html(helper.formatPayout(m.payoutPercent))}u.addClass("closedTradesProfit").addClass(B);break;case"expiryAmount":if(m.state=="TradeExpired"){var z=0;if(m.profit>0){var C=m.contracts!=undefined?m.contracts:1;z=parseFloat(m.volume)+parseFloat(m.profit)}z=z.toFixed(2);u.html(helper.formatCurrency(helper.getCurrencySymbol(m),z))}else{u.html("-")}break;case"sellAmount":if(m.state=="TradeSold"){u.html(helper.formatCurrency(helper.getCurrencySymbol(m),(parseInt(m.profit)+parseInt(m.volume))))}else{u.html("-")}break;case"profit":if($(t).attr("data-fullAmount")=="true"){u.html(helper.formatCurrency(helper.getCurrencySymbol(m),parseFloat(m.payoutAmount).toFixed(2)))}else{u.html(helper.formatCurrency(helper.getCurrencySymbol(m),parseFloat(m.profit).toFixed(2)))}u.addClass("profit").addClass(m.outcome);break;case"optionType":var y="";switch(m.game.toLowerCase()){case"digital":y="Digital";break;case"touch":y="Touch";break;case"range":y="Range";break;case"turbobinary":y="Turbo";break;case"onetouch":y="One Touch";break;case"overUnder":y="Over Under";break}u.html(y);break;case"outcome":var p="";switch(m.outcome.toLowerCase()){case"win":p=widgetMessage.winOutcome;l.addClass("win");break;case"lose":p=widgetMessage.loseOutcome;l.addClass("lose");break;case"na":p=widgetMessage.naOutcome;l.addClass("tie");break}u.html(p);break}l.append(u)})}});function e(){if(g.enableEmptyRows){if(g.rowsPerPage>i.length){for(var k=0;k<g.rowsPerPage-i.length;k++){a.push($("<tr><td colspan="+c.length+">&nbsp;</td></tr>")[0])}}}g.element.append(a)}e();$(window).trigger(widgets.events.myTradesTableIsLoaded)}};
var myTradesToDateWidget={dateFormatDefault:"dd M yy",flag:false,init:function(){var b=this;var a=widgets.getDate(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());$(b.element).show();$(window).on(widgets.events.loadingIsCompleted,function(c){if((widgets.game==""||widgets.isLadderBased(widgets.game)&&widgets.game!="binary100")&&a.getHours()-widgets.settings.application.TradingStartHour.Value<0){a=new Date(a.setDate(a.getDate()-1));b.flag=true}$(b.element).val($.datepicker.formatDate((b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat,a));$(b.element).datepicker({beforeShow:function(d,e){if(b.flag){setTimeout(function(){e.dpDiv.find("a.ui-state-highlight").removeClass("ui-state-highlight");e.dpDiv.find(".ui-datepicker-today").prev().find("a").addClass("ui-state-highlight")},100)}},dateFormat:(b.dateFormat=="undefined"||b.dateFormat=="")?b.dateFormatDefault:b.dateFormat});helper.translateDatepicker($(b.element))})}};
var myTradesTotalTradesWidget={init:function(){var a=this;$(a.element).show()},doUpdate:function(b){var a=$("[data-widget=myTradesTotalTrades]").attr("data-ladderbased")!=undefined?$("[data-widget=myTradesTotalTrades]").attr("data-ladderbased"):false;if((a||widgets.isLadderBased(widgets.game))){$("[data-widget=myTradesTotalTrades]").html(b.totalContracts)}else{$("[data-widget=myTradesTotalTrades]").html(b.totalTrades)}}};
var myTradesVolumeWidget={init:function(){var a=this;$(a.element).show();$("[data-widget=myTradesVolume]").show()},doUpdate:function(b){var a=helper.getCurrencySymbol();$("[data-widget=myTradesVolume]").html(helper.formatCurrency(a,b.totalVolume.toFixed(2)))}};
var nchartWidget={isReady:false,init:function(){var a=this;$(window).on(widgets.events.linkOptionUpdated,function(c,b){if(a.link!=b||!widgets.links[a.link].option){return}switch(widgets.game){case"turboBinary":widgets.api.getAssetPriceHistory(widgets.links[a.link].option.id,function(d){a.setHistory(d)});break;default:widgets.api.getOptionPriceHistory(widgets.links[a.link].option.id,function(d){a.setHistory(d)})}});$(window).on(widgets.events.optionPricesUpdated+" "+widgets.events.assetPricesUpdated,function(c,b){a.update()})},update:function(){var b=this;if(!b.container||!b.isReady){return}var a=widgets.links[b.link].price;b.container.series[0].addPoint([a.timestamp,a.rate],true,false)},setHistory:function(a){var b=this;b.container=new Highcharts.StockChart({chart:{events:{load:function(){b.isReady=true}},renderTo:$(b.element)[0]},rangeSelector:{enabled:false},scrollbar:{enabled:false},navigator:{enabled:false},yAxis:{minPadding:0.2,maxPadding:0},series:[{name:"USD to EUR",data:a.data.history}]})}};
var notificationsWidget={widgetName:"notifications",isProcessed:false,init:function(){var a=this;$(window).trigger(widgets.events.initNotificationsWidget);$(window).on(widgets.events.loginIsCompleted,function(c,b){if(b&&b.code==201){widgets.api.getNotifications($.proxy(a.processNotifications,a))}});$(window).on(widgets.events.loadingIsCompleted,function(){if(widgets.isLogged()){widgets.api.getNotifications($.proxy(a.processNotifications,a))}})},processNotifications:function(a){var b=this;$.each(a.data,function(d,f){if(f.type=="Pixel"){var e=$('<img src="'+f.url+'" style="display:none" />');b.element.append(e)}else{if(f.type=="ScriptBlock"){var c=$("<div/>").html(f.url).text();var e=$(c);b.element.append(e)}}})}};
var openTradesWidget={config:{columns:[]},chart:null,activeItem:null,ladderSellButton:[],ladderCancelButton:[],enableTurboSlider:false,elementCache:{turboBoxSection:null},isTurboSlide:false,init:function(){var a=this;widgets.isTraderoom=true;if(!widgets.isLogged){return}$(".openTradesInfo").hide();$(window).on(widgets.events.optionPricesUpdated,function(c,b){$.each(b,function(d,e){if(e==null||typeof e.type=="undefined"){return}a.updateOpenTradesPrice(e,true);if(widgets.isLadderBased(e.type)){a.updateLadderStrikePrice(e)}});a.updateOpenTrades()});$(window).on(widgets.events.assetPricesUpdated,function(c,b){$.each(b,function(d,e){if(e==null||typeof e.type=="undefined"){return}a.updateOpenTradesPrice(e,false);if(widgets.isLadderBased(e.type)){a.updateLadderStrikePrice(e)}});a.updateOpenTrades()});$(a.element).stupidtable();$(window).on(widgets.events.tradeIsCompleted,function(c,b){if(b.code==200){a.updateOpenTradesCollection(b);var d={};d.openTrades={};widgets.api.getResources(d,widgets.processResources)}});$(window).on(widgets.events.openTradesUpdated,function(c,b){a.processOpenTrades(b);a.updateOpenTrades()});$(window).on(widgets.events.userLogout,function(c,b){$(a.element).find("tbody tr").remove();$(".openTradesInfo").hide();widgets.openTrades={}});$(window).on(widgets.events.loginIsCompleted,function(){var b={};b.openTrades={};widgets.api.getResources(b,function(){widgets.processResources()})});$(window).on(widgets.events.ladderOptionClosing,function(d,b){var c=$(a.element).find('tbody tr[data-id^="'+b.id+'"]');if(c.length>0){c.find(".actionButton").prop("disabled",true);c.parent().find("[data-id="+b.id+"].sellTools").remove();c.find(".actionButton").removeClass("clicked").addClass("disabled")}});$(a.element).on("click",".openTradesChartButton",function(){var b=this;a.removeTools();a.openTradesChartButtonClick(b)});$(a.element).on("click",".openTradesChartClose",function(){a.openTradesChartRemove()});$(window).on(widgets.events.loadingIsCompleted,function(){a.showHideSlider()});if($(a.element).attr("data-turboslide")=="true"){a.isTurboSlide=true}clearInterval(widgets.timers.updateTurboBoxes);widgets.timers.updateTurboBoxes=setInterval(function(){a.updateTurboBoxes()},1000);$(a.element).append($("<tbody></tbody>"));$(a.element).show()},update:function(b){var a=this;$.each(b,function(c,d){if(openTradesWidget.chart&&$(".turboChart[data-assetId="+d.id+"]").length){openTradesWidget.chart.setNewData(parseFloat(d.rate),d.timestamp)}if(openTradesWidget.activeItem&&openTradesWidget.activeItem.optionId==d.id){$(a.element).find(".doubleValue").html(d.rate)}})},processOpenTrades:function(a,b){var c=this;if(widgets.isLogged().toString()=="true"){if($(".openTradesBtn").hasClass("active")){$(".openTradesInfo").show()}if(widgets.isLadderBased(widgets.game)){openTradesVolumeWidget.doUpdate(a.data);openTradesTotalContractsWidget.doUpdate(a.data);openTradesProfitWidget.doUpdate(a)}c.updateTradeToolsData(a)}},updateRow:function(k,n){var h=this;$('[data-orderId="'+k.orderId+'"]').find(".openTradesFloatingProfit").attr("data-sort-value",k.floatingProfit);if(!h.isValid(k)){if($(h.element).attr("data-showToolsAsDialog")=="true"&&$(".ui-dialog").find("tr").data("id")==k.optionId){$(".ui-dialog").remove()}$(n).find(".actionButton").remove();if($(n).next().hasClass("tradeTools")){$(n).next().remove()}}else{if(!widgets.isLadderBased(widgets.game)){h.getActions(n,k)}}if($(n).find(".openTradesPayout").length>0){switch(k.game.toLocaleLowerCase()){case"digital":var i=widgets.prices[k.optionId].rate;var c=k.rate;var g=(k.actionType=="Call")?1:-1;var j=(i-c)*g;break;case"touch":var i=widgets.prices[k.optionId].rate;var c=k.rate;var g=(k.actionType=="Up")?1:-1;if(i<c){var j=-1*g}else{var j=1*g}break;case"range":var i=widgets.prices[k.optionId].rate;var l=k.strikeHigh;var e=k.strikeLow;var g=(k.actionType=="In")?1:-1;if(i<l&&i>e){var j=1*g}else{var j=-1*g}break;case"turbobinary":var i=widgets.assetsPrices[k.tradableAssetId]!=undefined?widgets.assetsPrices[k.tradableAssetId].rate:0;var c=k.rate;var g=(k.actionType=="Above")?1:-1;var j=(i-c)*g;break;case"overunder":var i=widgets.prices[k.optionId].rate;var c=k.rate;var g=(k.actionType=="Over")?1:-1;var j=(i-c)*g;break}var a="na";if(j>0){a="win"}else{if(j<0){a="lose"}}switch(a){case"win":var f=((k.payoutPercent+100)/100*k.volume).toFixed(2);break;case"lose":var f=(k.game.toLocaleLowerCase()=="overunder")?("-"+k.volume):((k.returnOnLossPercent)/100*k.volume).toFixed(2);break;case"na":var f=((k.returnOnLossPercent)/100*k.volume).toFixed(2);break}$(n).find(".openTradesPayout").html(helper.formatCurrency(helper.getCurrencySymbol(k),f));var d=$(n).find(".openTradesPayout");d.removeClass();d.addClass("openTradesPayout "+k.outcome)}var b=new Date(widgets.serverDateTime.dateTime);if(widgets.isLadderBased(k.game)&&(k.expirationDate.timestamp-b.getTime())<k.disableInvestTimeInSeconds*1000){var m={id:k.optionId};$(window).trigger(widgets.events.ladderOptionClosing,[m])}},updateOpenTradesPrice:function(c,d){if(!c){return false}var e=this;var a=c.type.toLowerCase();var f;var b=helper.getCurrencySymbol();if(widgets.isLadderBased(a)&&$(e.element).find("tr[data-id^="+c.id+"_]").length==0){return}if(!document.getElementById("trade"+c.id)){return}if($(".turboChart[data-assetid="+c.id+"]").find(".chart").length&&openTradesWidget.chart){openTradesWidget.chart.setNewData(parseFloat(c.rate),c.timestamp)}if(widgets.isLadderBased(a)&&$(e.element).find("tr[data-id^="+c.id+"_]").length){f=$(e.element).find("tr[data-id^="+c.id+"_]")}if($(e.element).find("tr[data-id="+c.id+"]").length){f=$(e.element).find("tr[data-id="+c.id+"]")}if(!f){return}f.find(".openTradesRowRate").html(c.rate);if(c.type.toLowerCase()=="private"){$.each(f,function(j,l){var h=$(l).find(".openTradesStrikeRate .OpenTradeActionlbl").html();var m=$(l).find(".OpenTradeAction").hasClass("buy")?1:-1;var g=$(l).attr("data-orderid");var n=(c.rate-h)*m;var k="na";if(n>0){k="win"}else{if(n<0){k="lose"}}e.updateTurboBox(k,g)})}else{if(c.type.toLowerCase()=="overunder"){$.each(widgets.openTrades,function(g,h){$.each(c.payouts,function(k,n){if(c.id==h.optionId&&parseFloat(k)==h.rate.toString()&&h.game=="OverUnder"){var l;var j=e.elements.find('[data-orderId="'+h.orderId+'"]');if(parseFloat(c.rate)>parseFloat(h.rate)){l=(h.actionType.toLowerCase()=="over")?true:false}else{if(parseFloat(c.rate)<parseFloat(h.rate)){l=(h.actionType.toLowerCase()=="over")?false:true}}var m=(l==false||l==undefined)?0:(100+h.payoutPercent);$(j).find(".openTradesFloatingProfit").html(m+"%")}})})}}this.updateSellRow(c.id,c.rate,d);e.updateDoublePrice(c);e.updateChart(c)},updateChart:function(a){var c=this;if(!c.chart||!c.chart.chart){return}var b=$(c.chart.chart.container).closest("tr").data("id");if(b&&b!=a.id){return}else{if(b){a.timestamp=widgets.getDate(a.timestamp).getTime();c.chart.setNewData(parseFloat(a.rate),a.timestamp)}}},updateTurboBox:function(b,a){var c=$(".turboBox[data-orderId="+a+"]");if(c.length){c.removeClass("isWin isLose isNA");switch(b){case"win":c.addClass("isWin");break;case"lose":c.addClass("isLose");break;case"na":c.addClass("isNA");break;default:c.addClass("isWin");break}}},updateSellRow:function(c,b,a){if(a){if($("[data-id="+c+"].sellTools").length>0){$("[data-id="+c+"].sellTools").find("#rateData").html(b)}}else{if($("[data-taid="+c+"].sellTools").length>0){$("[data-taid="+c+"].sellTools").find("#rateData").html(b)}}},updateOpenTrades:function(){if(!widgets.isLogged()){return}var h=this,f=[],c=h.element,e=c.find("tbody tr"),d=c.find("thead tr th"),g=c.data("minrows"),b=helper.getCurrencySymbol();c.find(".noTradesMessage").remove();if(typeof widgets.openTrades=="undefined"||typeof widgets.openTrades.length=="undefined"||widgets.openTrades.length<=0){e.remove();a();return false}c.find("thead").show();$.each(e,function(k,m){var j=$(m).attr("data-orderId"),l=false;$.each(widgets.openTrades,function(i,n){if(n&&n.orderId==j){l=true;return}});if(!l&&!$(m).hasClass("tradeTools")){$(m).remove();if($(m).next().is(".tradeTools")){$(m).next().remove()}}});widgets.openTradeIds=[];$.each(widgets.openTrades,function(l,n){if(!n||typeof n!="object"){return}if(n.game.toLowerCase()=="turbobinary"){h.turboTrade(n)}widgets.openTradeIds.push(n.optionId);var k=c.find("tbody tr[data-orderId="+n.orderId+"]");if(k.length>0){h.updateRow(n,k);return}var o=n.optionId;var q=0;if(widgets.isLadderBased(n.game)){o=n.optionId+"_"+n.rate;q=n.tradableAssetId}var j=n.optionId;if(n.game=="TurboBinary"){o=n.tradableAssetId;j=n.tradableAssetId}var m=$('<tr id="trade'+j+'" data-id="'+o+'" data-orderId="'+n.orderId+'" data-taid = "'+q+'" data-game="'+n.game.toLowerCase()+'"></tr>');m.data("item",n);f.push(m[0]);$.each(d,function(r,u){var x=$("<td></td>");switch($(u).attr("data-column")){case"id":x.html(n.orderId).addClass("openTradeOrderId");break;case"bd":x.html(n.orderId);break;case"action":x.addClass("OpenTradeAction");var v=widgetMessage[n.actionType.toLowerCase()]||n.actionType;if(widgets.isLadderBased(n.optionType)){if(n.actionType.toLowerCase()=="call"){v="";x.addClass("buy")}else{if(n.actionType.toLowerCase()=="put"){v="";x.addClass("sell")}else{if(n.actionType.toLowerCase()=="touch"){v="";x.addClass("touch")}else{if(n.actionType.toLowerCase()=="notouch"){v="";x.addClass("notouch")}}}}}x.html(v);break;case"type":var i="";if(n.optionType=="OneTouch"){i=(n.isUp)?"Up":"Down"}x.html((widgetMessage[n.game.toLowerCase()]||n.game)+" "+i);break;case"name":x.html(n.description);break;case"created":if(!widgets.isLadderBased(n.game)){if(h.dateFormat&&h.dateFormat.length>0){x.html(widgets.getDate(n.orderDate.timestamp,h.dateFormat))}else{x.html(widgets.getDate(n.orderDate.timestamp,helper.dateFormats.masks.normalDateTime))}}else{if(h.dateFormat&&h.dateFormat.length>0){x.html(widgets.getDate(n.orderDate.timestamp,h.dateFormat))}else{if(n.orderDate.timestamp!=null){x.html(widgets.getDate(n.orderDate.timestamp,helper.dateFormats.masks.isoTime))}else{x.html("")}}}break;case"expires":if(!widgets.isLadderBased(n.game)){if(h.dateFormat&&h.dateFormat.length>0){x.html(widgets.getDate(n.expirationDate.timestamp,h.dateFormat))}else{if(h.dateFormat&&h.dateFormat.length>0){x.html(widgets.getDate(n.expirationDate.timestamp,h.dateFormat))}else{if($(h.element).attr("data-turbotime")=="true"){x.addClass("turboRemainingTime")}x.html(widgets.getDate(n.expirationDate.timestamp,helper.dateFormats.masks.normalDateTime))}}}else{if(h.dateFormat&&h.dateFormat.length>0){x.html(widgets.getDate(n.expirationDate.timestamp,h.dateFormat))}else{x.html(widgets.getDate(n.expirationDate.timestamp,helper.dateFormats.masks.isoTime))}}break;case"duration":var w="<span>"+helper.formatDuration(n.expirationDate.timestamp-n.orderDate.timestamp)+"</span>";x.html(w);break;case"strike":x.addClass("openTradesStrikeRate");if(!widgets.isLadderBased(n.game)||widgets.game=="overUnder"){var t="";if(n.isCall||n.isUp||n.isIn||n.isOver){t="buy"}else{t="sell"}x.html('<div class="OpenTradeAction '+t+" "+n.game.toLowerCase()+'"></div><div class="OpenTradeActionlbl">'+n.rate+"</div>")}else{var t="";var s=n.game.toLowerCase();if(s=="ladder"||s=="binary100"){if(n.isBuy){t="buy"}else{t="sell"}}if(n.game.toLowerCase()=="laddertouch"){if(n.isTouch){t="touch"}else{t="notouch"}}x.html('<div class="OpenTradeAction '+t+'"></div><div class="OpenTradeActionlbl">'+n.rate+"</div>")}break;case"rate":x.addClass("openTradesRowRate").html(n.rate);break;case"invested":x.html(helper.formatCurrency(b,n.volume));break;case"investedTotal":x.addClass("openTradesBuyAmount");if(widgets.isLadderBased(n.game)){x.html(helper.formatCurrency(b,parseFloat(n.volume)*n.contracts))}break;case"payout":x.addClass("openTradesPayout "+n.outcome).html(helper.formatCurrency(helper.getCurrencySymbol(n),parseFloat(n.payoutAmount).toFixed(2)));break;case"actions":x.addClass("action");if($(u).attr("data-chart")=="true"){x.addClass("actionChart")}break;case"contracts":x.addClass("openTradesContracts").html(n.contracts);break;case"serialNo":x.addClass("openTradesSerialNumber");if(n.serialNumber!=undefined&&n.serialNumber.indexOf("#")!=-1){x.html(n.serialNumber)}else{x.html("#"+n.serialNumber)}break;case"asset":x.html(n.asset);break;case"sellPremium":if(widgets.isLadderBased(n.game)){x.addClass("openTradesSellPremium")}break;case"return":x.addClass("openTradesExpiryAmmount");break;case"ticket":x.addClass("openTradesTicketID");break;case"floatingProfit":x.addClass("openTradesFloatingProfit neutral");break;case"sell":if(widgets.isLadderBased(n.game)){x.addClass("openTradesSellAmount")}break;default:}m.append(x)});if(h.isValid(n)){h.getActions(m,n)}else{if(m.find("td.action.actionChart").size()>0){var p='<input class="openTradesChartButton" type="button" data-translate="chart" value="Chart" />';m.find("td.action.actionChart").append(p)}}});function a(){if(c.attr("data-minrows")!==undefined){if(widgets.openTrades.length<g){for(var j=0;j<g-widgets.openTrades.length;j++){f.push($("<tr><td colspan="+d.length+">&nbsp;</td></tr>")[0])}}}c.append(f)}a()},openTradesChartButtonClick:function(c){var e=this;e.openTradesChartRemove();var d=$(c).closest("tr").data("item");var a=$('<div id="openTradesChart" class="openTradesChart"><div class="openTradesChartTitle">'+d.description+'</div><a class="openTradesChartClose" href="javascript:void(0)">x</a><div class="chart" id="oldChartContainer">'+e.getChart(d)+"</div></div>");var b=$(c).position();var f=$(c).outerWidth();a.css({position:"absolute",top:b.top,left:b.left+f});$(c).after(a)},openTradesChartRemove:function(){$("#openTradesChart").remove()},updateLadderStrikePrice:function(d,c){if(!d){return false}var e=this;var b=helper.getCurrencySymbol();if(widgets.openTrades.length>0){var a=false;$.each(widgets.openTrades,function(f,g){$.each(d.payouts,function(k,r){a=true;if(d.id==g.optionId&&parseFloat(k)==g.rate.toString()&&widgets.isLadderBased(g.game)){var w,m;var t=d.type.toLowerCase();if(t=="ladder"||t=="binary100"){callPrice=r.Call.toFixed(2);putPrice=r.Put.toFixed(2);w=r.SellCall;m=r.SellPut}else{if(d.type.toLowerCase()=="laddertouch"){callPrice=r.Touch.toFixed(2);putPrice=r.NoTouch.toFixed(2);w=r.SellTouch;m=r.SellNoTouch}}var l=e.elements.find('[data-orderId="'+g.orderId+'"]');var x=(g.actionType.toLowerCase()=="call"||g.isTouch==true)?w:m;$(l).find(".openTradesSellPremium").html(helper.formatCurrency(b,x.round(2)).replace(" ",""));var j=(x*g.contracts).round(2);$(l).find(".openTradesSellAmount").html(helper.formatCurrency(b,j).replace(" ",""));var n;var t=d.type.toLowerCase();if(t=="ladder"||t=="binary100"){if(parseFloat(d.rate)>parseFloat(g.rate)){n=(g.actionType.toLowerCase()=="call"||g.isTouch==true)?true:false}else{if(parseFloat(d.rate)<parseFloat(g.rate)){n=(g.actionType.toLowerCase()=="call"||g.isTouch==true)?false:true}}}else{if(d.type.toLowerCase()=="laddertouch"){n=g.isTouch==true?false:true}}var v=parseFloat(widgets.settings.environment.CurrencyFactor);var q=(n==undefined)?(g.actionType.toLowerCase()=="call")?widgets.payoutTotalUSD*v*g.contracts:0:(n==true)?widgets.payoutTotalUSD*v*g.contracts:0;$(l).find(".openTradesExpiryAmmount").html(helper.formatCurrency(b,q).replace(" ",""));$(l).find(".openTradesTicketID").html(g.orderId);$(l).find(".openTradesSerialNumber").html("#"+g.serialNumber);$(l).find(".openTradesContracts").html(g.contracts);$(l).find(".openTradesBuyAmount").html(helper.formatCurrency(b,parseFloat(g.volume)*parseInt(g.contracts)).replace(" ",""));$(l).find(".openTradesRowRate").html(d.rate);var s=e.elements.find('.sellTools[data-orderId="'+g.orderId+'"]');if(s&&s.length>0){var w,m;var t=d.type.toLowerCase();if(t=="ladder"||t=="binary100"){callPrice=r.Call.toFixed(2);putPrice=r.Put.toFixed(2);w=r.SellCall;m=r.SellPut}else{if(d.type.toLowerCase()=="laddertouch"){callPrice=r.Touch.toFixed(2);putPrice=r.NoTouch.toFixed(2);w=r.SellTouch;m=r.SellNoTouch}}var p=(g.actionType.toLowerCase()=="call"||g.isTouch==true)?w:m;var h=$(s).find("#contractsData").val();$(s).find("#buyAmountData").html(helper.formatCurrency(b,(g.volume*h).toFixed(2)).replace(" ",""));$(s).find("#sellAmountData").html(helper.formatCurrency(b,(p*h).toFixed(2)).replace(" ",""));$(s).find("#profitData").html(helper.formatCurrency(b,((parseFloat(p)*h)-(parseFloat(g.volume)*h)).toFixed(2)).replace(" ",""))}var o=((parseFloat(x)*g.contracts)-(parseFloat(g.volume)*g.contracts)).toFixed(2);var u=(o==0)?"neutral":(o>0)?"positive":"negative";$(l).find(".openTradesFloatingProfit").html(helper.formatCurrency(b,o).replace(" ","")).removeClass("neutral").removeClass("positive").removeClass("negative").addClass(u);g.floatingProfit=parseFloat(o);if(widgets.isLadderBased(widgets.game)&&typeof openTradesProfitWidget.updateProfit!="undefined"){openTradesProfitWidget.updateProfit(o)}}})});if(a){$(e.element).find("tr[data-id="+d.id+"]").find(".openTradesButton.SellButton.inactive").attr("disabled",false);$(e.element).find("tr[data-id="+d.id+"]").find(".openTradesButton.SellButton.inactive").removeClass("inactive").addClass("active");$(e.element).find("tr[data-id="+d.id+"]").find(".openTradesButton.CancelButton.inactive").attr("disabled",false);$(e.element).find("tr[data-id="+d.id+"]").find(".openTradesButton.CancelButton.inactive").removeClass("inactive").addClass("active")}}},updateOpenTradesCollection:function(){var c=new Object();var b=new Date(widgets.serverDateTime.dateTime);var a=helper.getCurrencySymbol();c.orderId="justAdded"+Math.floor((Math.random()*100)+1);c.ruleId=widgets.lastExecutedTrade.ruleId;c.optionId=widgets.lastExecutedTrade.option.id;c.orderDate={};c.orderDate.timestamp=widgets.lastExecutedTrade.tsOrderDate||null;c.optionType=widgets.lastExecutedTrade.game;c.description=widgets.lastExecutedTrade.option.name;c.strikeRate=widgets.lastExecutedTrade.strikeRate;c.rate=widgets.lastExecutedTrade.rate;if(widgets.lastExecutedTrade.investType!=undefined){c.actionType=widgets.lastExecutedTrade.investType}c.expirationDate={};c.expirationDate.timestamp=widgets.lastExecutedTrade.option.expirationTimestamp==undefined?b.getTime():widgets.lastExecutedTrade.option.expirationTimestamp;c.contracts=widgets.lastExecutedTrade.contracts;c.game=widgets.lastExecutedTrade.game;c.serialNumber=widgets.lastExecutedTrade.serialNumber;c.asset=widgets.lastExecutedTrade.option.name;c.volume=widgets.lastExecutedTrade.amount;c.sellOne=widgets.lastExecutedTrade.sellOne;c.payoutAmount=parseInt(widgets.lastExecutedTrade.amount);c.currencySymbol=a;c.isBuy=widgets.lastExecutedTrade.isUp;if(widgets.lastExecutedTrade.game.toLowerCase()=="laddertouch"){c.isTouch=widgets.lastExecutedTrade.isUp}c.minuteVal=widgets.lastExecutedTrade.minuteVal;c.actionType="";widgets.openTrades.push(c)},updateOpenTradesCollectionAfterSell:function(){$.each(widgets.openTrades,function(a,b){if(b==undefined){return}if(b.orderId==parseInt(widgets.lastExecutedSell.orderId)){if(widgets.openTrades[a].contracts==1){widgets.openTrades.splice(a,1)}else{widgets.openTrades[a].contracts=parseInt(widgets.openTrades[a].contracts)-parseInt(widgets.lastExecutedSell.contracts);if(widgets.openTrades[a].contracts==0){widgets.openTrades.splice(a,1)}}}})},isValid:function(f){if(widgets.isLadderBased(f.game)){return true}if(f.game.toLowerCase()!="digital"&&f.game.toLowerCase()!="overunder"){return false}if(widgets.settings.application.EnableTraderTools.Value!="true"){return false}var c=new Date(widgets.serverDateTime.dateTime);var a=(c.getTime()-f.orderDate.timestamp)/1000;var e=a-10;if(e<widgets.settings.application.TradingToolsActvationTime.Value){return false}if(parseInt(f.volume)<parseInt(widgets.settings.application.TradingToolsMinInvestAmount.Value)){return false}var d=(f.expirationDate.timestamp-c.getTime())/1000;var g=widgets.settings.application.TradingToolsActiveBeforeExpiry.Value*3600;if(d>g){return false}var b=f.disableInvestTimeInSeconds;if(d<b){return false}if(f.isAutoTrade==true){return false}if(d<widgets.settings.application.TradingToolsDisableTime.Value){return false}if(d<=f.disableInvestTimeInSeconds){return false}return true},getActions:function(h,j){var e=this;var c=$(h).find(".action");if(!c||!e.isValid(j)){return false}var f="";if(widgets.isLadderBased(j.optionType)){var b=widgetMessage.openTradeSellBtn?widgetMessage.openTradeSellBtn:"Sell";var g="";if($(h).find("td input.actionButton").hasClass("clicked")){g="clicked"}var d="";var a=new Date(widgets.serverDateTime.dateTime);if((j.expirationDate.timestamp-a.getTime())<j.disableInvestTimeInSeconds*1000){d="disabled"}f=$('<input class="actionButton '+g+'" type="button" value="'+b+'" '+d+" />");$(c).html(f);$(f).click(function(){e.openTradesChartRemove();e.showSell(h,j)})}else{if(j.optionType.toLowerCase()=="binary"||j.optionType.toLowerCase()=="overunder"){var i=widgetMessage.showMsg?widgetMessage.showMsg:"Show";f=$('<input class="actionButton" type="button" value="'+i+'"/>');$(c).html(f);c.addClass("toolsButtonTd");$(f).click(function(){e.openTradesChartRemove();e.showTools(h,j)})}}},showTools:function(b,B){var f=this;var p=(helper.isUserClassEnabled("Extend")&&B.extendEnabled);var a=helper.isUserClassEnabled("CloseTakeProfitStopLoss");if(B.game=="OverUnder"){a=false}var v=helper.isUserClassEnabled("Double");var x=!p&&!v&&!a;f.activeItem=B;$(".tradeTools").remove();var D=$('<tr class="tradeTools" data-orderId='+B.orderId+" data-optionId="+B.optionId+" data-id="+B.optionId+"></tr>");var g=$('<td colspan="'+$(b).find("td").length+'"></td>');var e=widgetMessage.extend?widgetMessage.extend:"Extend";var z=widgetMessage.closeTradingTools?widgetMessage.closeTradingTools:"Close";var t=widgetMessage["double"]?widgetMessage["double"]:"Double";var l=widgetMessage.cost?widgetMessage.cost:"Cost";var F=widgetMessage["return"]?widgetMessage["return"]:"Return";var E=widgetMessage.currentStrike?widgetMessage.currentStrike:"Current Strike";var r=widgetMessage.execute?widgetMessage.execute:"Execute";var k=widgetMessage.cancel?widgetMessage.cancel:"Cancel";var n=widgetMessage.extendTo?widgetMessage.extendTo:"Extend To:";var w=$('<div class="toolsHeader"></div>');var q=$('<div class="headerMenu"></div>');var A=p?$('<div class="headerExtend"><span class="headerIcon"></span>'+e+"</div>"):"";var o=a?$('<div class="headerClose"><span class="headerIcon"></span>'+z+"</div>"):"";var i=v?$('<div class="headerDouble"><span class="headerIcon"></span>'+t+"</div>"):"";var y=p?$('<div class="extendContainer" style="display:none"><span class="extendLabel" style="display:none">'+n+'</span><span class="extendToSelectWrapper"><select class="extendToSelect" /></span></div><div class="extendCost"><span style="display:none" class="extendCostText">'+l+'</span><span class="extendCostAmount"></span></div></div>'):"";var m=a?$('<div class="closeContainer" style="display:none"><span class="closeText">'+F+' </span><span class="closeValue"></span></div>'):"";var s=v?$('<div class="doubleContainer" style="display:none"><span class="doubleText">'+E+' </span><span class="doubleValue"></span></div>'):"";var c=$('<div class="chartContainer openTradesTools">'+f.getChart(B)+"</div>");var u=x?"":$('<input type="button" class="tradingToolsExecute" value="'+r+'" />');var C=x?"":$('<input type="button" class="tradingToolsCancel" value="'+k+'" />');var d=($("[data-widget="+f.game+"_"+f.link+"_payoutDynamic]").length==0)?false:true;$(u).click(function(){var H=$(D).prev();if($(".headerClose").hasClass("activeTab")){var J=$(f.element).find("tbody tr[data-orderId="+B.orderId+"]");J.hide();widgets.api.stopTradeOrder(B.orderId,widgets.prices[B.optionId].rate,$(".closeContainer").attr("data-offerId"),f.processOrder)}else{if($(".headerExtend").hasClass("activeTab")){var J=$(f.element).find("tbody tr[data-orderId="+B.orderId+"]");J.hide();widgets.api.extendTradeOrder(B.orderId,widgets.prices[B.optionId].rate,$(".extendToSelect option:selected").attr("data-offerId"),f.processOrder,f)}else{if($(".headerDouble").hasClass("activeTab")){switch(B.optionType.toLowerCase()){case"binary":var K=H.find(".openTradesRowRate").length>0?H.find(".openTradesRowRate").html():$(".doubleValue").html();widgets.api.addBinaryTradeOrder_v2(B.optionId,B.isCall,K,B.volume,B.payoutPercent,B.returnOnLossPercent,0,d,B.isPayoutManagement,null,widgets.api.setTradeCompleted);break;case"overunder":var K=H.find(".openTradesRowRate").length>0?H.find(".openTradesRowRate").html():$(".doubleValue").html();var L=(H.find(".OpenTradeAction").html()=="Over")?true:false;var I=H.find(".openTradesStrikeRate .OpenTradeActionlbl").html();var M="";if(L){M=widgets.prices[B.optionId].payouts[I].CallPayout}else{M=widgets.prices[B.optionId].payouts[I].PutPayout}widgets.api.addOverUnderTradeOrder(B.optionId,B.isOver,K,I,B.volume,M,widgets.options[B.optionId].returnOnLoss,widgets.api.setTradeCompleted);break}}}}$(".tradeTools").remove();$(".action>input.actionButton").removeClass("activeButton")});$(C).click(function(){f.removeTools()});$(A).click(function(){f.showExtend(D,B);widgets.api.getExtendOffersOptions(B.orderId,B.optionId,f.processExtendOptions,$(D),f)});$(o).click(function(){f.showClose(g,B);widgets.api.getStopOffersOptions(B.orderId,f.processCloseOrderPremium,$(D),this)});$(i).click(function(){f.showDouble(g,B)});$(q).append(A,o,i);$(w).append(q,y,m,s,u,C,c);$(g).html(w);$(D).append($(g));$(D).insertAfter(b);f.showExtend(g,B);if(B.stopEnabled==false){$(f.element).find(".headerClose").unbind("click").addClass("disabled")}if($(f.element).attr("data-showToolsAsDialog")=="true"){var h=(B.orderId)?B.orderId:"";var G=typeof widgetMessage.tradeToolsDetails!="undefined"?widgetMessage.tradeToolsDetails:"Trade Tools Details";var j=G+" - "+h;$(D).attr("data-widget","openTrades");$(g).css("width","747px");$(D).dialog({modal:true,position:"center",width:750,height:500,title:j,resizable:false,close:function(H,I){$(".tradeTools").remove();$(".action>input.actionButton").removeClass("activeButton")}});$(b).find("input").addClass("activeButton")}$(window).trigger(widgets.events.tradingToolsIsReady)},removeTools:function(){var a=this;a.element.find(".tradeTools").remove();a.element.find("input.actionButton").removeClass("activeButton")},updateDoublePrice:function(b,c){var e=this;var d=b.id;var a=new Object();a.rate=b.rate;$.each(widgets.openTrades,function(h,g){if(!g||!g.optionId||!g.isCall||!g.optionType||!g.accuracy){return}if(g.optionId==d){a.isAlpha=g.isCall;a.type=g.optionType;g.isAlpha=g.isCall;a.accuracy=g.accuracy;if(typeof(priceHelper)!=="undefined"){priceHelper.updateOptionPrice(a,g)}}});if($(e.element).attr("data-showToolsAsDialog")=="true"){if(typeof(a.riskPrice)!=="undefined"){$(".doubleValue").html(a.riskPrice.rate)}else{$(".doubleValue").html(a.rate)}}else{var f=$(e.element).find("tr[data-optionId="+d+"]");if(a&&a.riskPrice&&typeof(a.riskPrice)!=="undefined"){f.find(".doubleValue").html(a.riskPrice.rate)}else{if(a&&a.rate){f.find(".doubleValue").html(a.rate)}}}},getOpenTradeTools:function(d){var a="";var b=d.elements.find("TR.tradeTools");if(b){for(var c=0;c<b.length;c++){var e=b[c].data("orderid");a+=e+","}}return a},updateTradeToolsData:function(c){var f=this;var b=f.elements.find("TR.tradeTools");if(b){for(var d=0;d<b.length;d++){var h=$(b[d]).data("orderid");for(var g=0;g<c.length;g++){var e=c[g];if(e.orderId==h){if(e.offers){var a=helper.getCurrencySymbol();if(e.extendEnabled&&e.offers.extend){f.displayExtend(e.offers.extend,h,e.optionId,b[d],f,a)}if(e.stopEnabled&&e.offers.stop){f.updateCloseReturn(e,a)}}}}}}},updateCloseReturn:function(b,a){var c=this;var d=c.elements.find(".closeContainer");if(d.length>0){d.find(".closeValue").html(helper.formatCurrency(a,parseFloat(b.offers.stop.premium).toFixed(2)))}},processOrder:function(response,args){var widget=this;var data=eval(response.d);$(".tradeTools").remove();if(response.code==200){var resources={};resources.openTrades={};widgets.api.getResources(resources,widgets.processResources)}$(window).trigger(widgets.events.openTradesTradeOrderExecuted,[response])},processExtendOptions:function(c,d){var g=c.data;var a=d[0];var f=d[1];var h=d[3];var e=d[4];var b=helper.getCurrencySymbol();e.displayExtend(g,a,f,h,e,b)},displayExtend:function(c,a,b,l,f){var i=$(".extendToSelect");var k=$("TR.tradeTools");var g=$(".extendToSelect option:selected").val();$(".extendToSelect option").remove();if(c.length==0){var e=$("<option />");e.text("N/A");$(i).append(e);if($(f.element).attr("data-showToolsAsDialog")=="true"){$("input[value$='Execute']").attr("disabled","disabled")}else{$(f.element).find("input[value$='Execute']").attr("disabled","disabled")}k.find(".extendContainer, .extendCost").addClass("nooptions");k.find(".extendCostText").hide();$(window).trigger(widgets.events.openTradesNoOptionsExtend)}else{$(".extendToSelect").change(function(){for(var m=0;m<c.length;m++){if(this.selectedOptions[0].value==c[m].optionId){$(l).find(".extendCostAmount").html(helper.formatCurrency(helper.getCurrencySymbol(),parseFloat(c[m].premium).toFixed(2)))}}});var j=0;$(c).each(function(n,p){var m=p.expirationDate?helper.formatExpiration(widgets.getDate(p.expirationDate.timestamp)):null;var o=$("<option />");o.val(p.optionId);o.text(m);o.attr("data-offerId",p.id);$(i).append(o);if(p.optionId==g){j=parseFloat(p.premium).toFixed(2)}});var d=$(c).first();if(typeof d[0]=="undefined"){return}$(".extendToSelect option").each(function(){this.selected=this.value==g});var h=helper.getCurrencySymbol();if(j==0){j=parseFloat(c[0].premium).toFixed(2)}$(l).find(".extendCostAmount").html(helper.formatCurrency(h,j));$(l).find(".toolsExecute").attr("disabled",false);k.find(".extendContainer, .extendCost").removeClass("nooptions");k.find(".extendCostText").show();$(window).trigger(widgets.events.openTradesHasExtendOptions)}},processCloseOrderPremium:function(b,c){var f=c[2];var d=b.data;var a=helper.getCurrencySymbol();var e=parseFloat(d.premium).toFixed(2);$(".tradeTools").find(".closeValue").html(helper.formatCurrency(a,e));$(".tradeTools").find(".closeValue").parent().attr("data-offerId",d.id)},processExtendOrderPremium:function(response,args){var data=eval(response.d);var orderId=args[0];var optionId=args[1];var row=args[3];var widget=args[4];$(row).find(".extendCostAmount").html(data.Premium);$(row).find(".toolsExecute").attr("disabled",false)},showExtend:function(a,b){var c=this;c.hideDouble();c.hideClose();$(".extendContainer").show();$(".extendCost").show();$(".tradeTools .activeTab").removeClass("activeTab");$(".headerExtend").addClass("activeTab");widgets.api.getExtendOffersOptions(b.orderId,b.optionId,c.processExtendOptions,$(a),c)},hideExtend:function(){var a=this;$(".extendContainer").hide();$(".extendCost").hide();$(".extendCostText").hide();if($(a.element).attr("data-showToolsAsDialog")=="true"){$("input[value$='Execute']").removeAttr("disabled","disabled")}else{$(a.element).find("input[value$='Execute']").removeAttr("disabled","disabled")}},showClose:function(){var a=this;a.hideDouble();a.hideExtend();$(".closeContainer").show();$(".tradeTools .activeTab").removeClass("activeTab");$(".headerClose").addClass("activeTab")},hideClose:function(){var a=this;$(".closeContainer").hide();if($(a.element).attr("data-showToolsAsDialog")=="true"){$("input[value$='Execute']").removeAttr("disabled","disabled")}else{$(a.element).find("input[value$='Execute']").removeAttr("disabled","disabled")}},showDouble:function(){var a=this;a.hideExtend();a.hideClose();$(".doubleContainer").show();$(".tradeTools .activeTab").removeClass("activeTab");$(".headerDouble").addClass("activeTab")},hideDouble:function(){var a=this;$(".doubleContainer").hide();$(a.element).find("input[value$='Execute']").removeAttr("disabled","disabled")},formatDate:function(c){var c=new Date(c);var b=c.getDate();if(b<10){b="0"+b}var f=c.getMonth()+1;if(f<10){f="0"+f}var d=c.getFullYear()-2000;var a=c.getHours();if(a<10){a="0"+a}var g=c.getMinutes();if(g<10){g="0"+g}var e=b+"."+f+"."+d+" "+a+":"+g;return e},getChart:function(a){var b=this;switch(a.game.toLowerCase()){case"digital":case"touch":case"onetouch":case"range":case"binary100":widgets.api.getOptionPriceHistory(a.optionId,function(c){b.processChart(c,a)},a);break;default:widgets.api.getAssetPriceHistory(a.tradableAssetId,function(c){b.processChart(c,a)},a);break}return'<div class="chart"></div>'},processChart:function(b,e){var h=this;if(b.code!=200){return}h.chart=$.extend({},iChart);if(e.game=="TurboBinary"){h.chart=$.extend(h.chart,turboAdapter)}if(widgets&&widgets.settings&&widgets.settings.application&&widgets.settings.application.EnablePriceTicker){var g=widgets.settings.application.EnablePriceTicker;if(g&&g.Value){h.chart.lastPriceIndicatorEnable=(g.Value.toString().toLowerCase()=="true")}}if(h.chart.lastPriceIndicatorEnable){h.chart.marginRight=70;h.chart.showMinMaxYAxis=false}h.chart.hideLastPriceIndicator=true;if(e.optionType=="Range"){h.chart.threshold=parseFloat(e.strikeLow);h.chart.thresholdSecond=parseFloat(e.strikeHigh);h.chart.lastPriceIndicatorFontColor="#fff";if(e.isIn==true){h.chart.thresholdUpColor="#090";h.chart.thresholdDownColor="#f00";h.chart.thresholdSecondUpColor="#f00";h.chart.thresholdSecondDownColor="transparent";h.chart.lastPriceIndicatorColor="#090"}else{h.chart.thresholdUpColor="#f00";h.chart.thresholdDownColor="#090";h.chart.thresholdSecondUpColor=h.chart.thresholdDownColor;h.chart.thresholdSecondDownColor="transparent";h.chart.lastPriceIndicatorColor="#f00"}}else{if(e.optionType=="OneTouch"||e.optionType=="Touch"||e.optionType=="FixedTouch"){}else{h.chart.threshold=parseFloat(e.rate);if(e.isCall==true){h.chart.thresholdUpColor="#090";h.chart.thresholdDownColor="#f00";h.chart.lastPriceIndicatorColor="#090"}else{h.chart.thresholdUpColor="#f00";h.chart.thresholdDownColor="#090";h.chart.lastPriceIndicatorColor="#f00"}}}var c;if(e.game=="Digital"){c=($(".chartContainer.openTradesTools").css("display")!="none")?$(".chartContainer.openTradesTools .chart").height():undefined}else{if(e.game=="TurboBinary"){c=($(".turboChart .chart").css("display")!="none")?$(".turboChart .chart").height():undefined}}h.chart.init({baseUrl:widgets.baseUrl,enableChartGaps:false,chartHeight:(c!=null)?c:undefined});h.chart.placeholder=$(".chart").get(0);var d=e;var f=b.data;f=helper.updateHistoryPricesOffset(f);var a={optionHistoryPrice:f.history,highPrice:f.price.to,lowPrice:f.price.from,startOptionHistoryTime:f.date.from.timestamp,endOptionHistoryTime:f.date.to.timestamp,AssetsAccuracy:f.accuracy,clientUTCTimeDiff:0,OptionID:d.id,OptionName:"chart"};Highcharts.setOptions({global:{useUTC:false}});h.chart.buildChart(a);switch(d.optionType){case"Binary":h.binaryChart(f,d);break;case"OneTouch":h.oneTouchChart(f,d);break}},binaryChart:function(d,b){var c=this;var a=c.chart;a.chart.yAxis[0].addPlotLine({from:b.rate,to:b.isCall?a.highPrice:a.lowPrice,color:"rgba(68, 170, 213, 0.2)"})},oneTouchChart:function(d,b){var c=this;var a=c.chart;if((b.isUp==true&&b.isTouch==true)||(b.isUp==false&&b.isTouch==false)){a.chart.yAxis[0].addPlotLine({from:b.rate,to:a.highPrice,color:"rgba(68, 170, 213, 0.2)"})}else{a.chart.yAxis[0].addPlotLine({from:a.lowPrice,to:b.rate,color:"rgba(68, 170, 213, 0.2)"})}},turboTrade:function(l){var f=this;if(l.game.toLowerCase()!="turbobinary"){return}if(l.expirationDate.dateTime==undefined){return}var a=$(".turboBox[data-orderId="+l.orderId+"]");if(a.length){return}var c=Math.floor(l.expirationDate.timestamp-widgets.serverDateTime.timestamp)/1000;var j="isNA";var d="";if(l.orderId.toString().indexOf("justAdded")!=-1){j="isWin";if(l.isBuy){d="Above"}else{d="Below"}}else{var e=$(".turboBox");$.each(e,function(n,o){if($(o).attr("data-orderId").toString().indexOf("justAdded")!=-1){$(o).remove()}});d=l.actionType}var b=typeof widgetMessage["openTrades"+d]!="undefined"?widgetMessage["openTrades"+d]:d;var a=$('<div class="turboBox '+j+'"></div>').attr("data-orderId",l.orderId).attr("data-optionId",l.optionId).attr("data-timeStamp",l.expirationDate.timestamp).append('<div class="turboDescription">'+l.description+'</div><div class="turboTime" data-time="'+c+'"></div><div class="turboAction">'+b+"</div>");if(f.isTurboSlide){a.hover(function(){f.showChart(this,l);var n=f.elementCache.turboBoxSection;var o=n.offset().left+n.innerWidth();var p=$(".turboChart");var q=p.innerWidth()+p.offset().left;if(o<q){p.removeClass("flipChart");p.addClass("flipChart")}else{p.removeClass("flipChart")}p.unbind("hover").hover(function(){},function(){p.remove()})},function(){var n=$(".turboChart");if(!n.is(":hover")){n.remove()}})}else{a.click(function(){$(".turboChart").remove();f.showChart(this,l)})}if($(f.element).attr("data-turbotime")=="true"){a.hide()}if(f.isTurboSlide){var g=(f.elementCache.turboBoxSection?true:false);if(!g){var m=$('<div class="turboBoxSection isTurboSlider"><a class="turboSliderButton leftButton inactive" ></a><div class="turboSliderWrapper"></div><a class="turboSliderButton rightButton inactive"></a></div>');f.elementCache.turboBoxSection=$(m);f.elementCache.turboBoxSection.insertBefore(f.element);f.elementCache.turboBoxSection.on("click",".rightButton",function(){if(!f.enableTurboSlider){return}var n=f.elementCache.turboBoxSection.find(".turboBox").first().width();f.slideLeft(".turboSliderWrapper",n)});f.elementCache.turboBoxSection.on("click",".leftButton",function(){if(!f.enableTurboSlider){return}var n=f.elementCache.turboBoxSection.find(".turboBox").first().width();f.slideRight(".turboSliderWrapper",n)});f.elementCache.turboBoxSection.find(".turboSliderWrapper").prepend(a)}else{var h=l.expirationDate.timestamp;var k=false;var i=f.elementCache.turboBoxSection.find(".turboBox");$.each(i,function(o,n){if(h<$(n).data("timestamp")){a.insertBefore(n);k=true;return false}});if(!k){f.elementCache.turboBoxSection.find(".turboSliderWrapper").append(a)}}f.showHideSlider()}else{var g=(f.elementCache.turboBoxSection?true:false);if(!g){var m=$('<div class="turboBoxSection"></div>');f.elementCache.turboBoxSection=$(m);f.elementCache.turboBoxSection.insertBefore(f.element)}f.elementCache.turboBoxSection.append(a)}},updateTurboBoxes:function(){var b=this;var a=$(".turboBox");if(a.length==0){return}$.each(a,function(d,f){var h=parseInt($(f).find(".turboTime").attr("data-time"));var g=$(f).attr("data-optionid");var c=$(f).attr("data-orderid");$(f).find(".turboTime").html(b.toTime(h));h=parseInt($(f).find(".turboTime").attr("data-time"));if($(f).next().hasClass("turboChart")){$(f).next().find(".turboExpiry").html(widgetMessage.expiry+': <span class="turboExpiryItem">'+b.toTime(h)+"</span>")}$(f).find(".turboTime").attr("data-time",h-1);if(h<0){if($(f).next().hasClass("turboChart")){$(f).next().remove()}$(f).remove();if($(b.element).attr("data-turboslide")=="true"){var e=b.elementCache.turboBoxSection.find(".turboBox").first().width();b.slideRight(".turboSliderWrapper",e)}if(b.isTurboSlide){b.showHideSlider()}for(var d=0;d<widgets.openTrades.length;d++){if(parseInt(widgets.openTrades[d].optionId)==g){widgets.openTrades.splice(d,1);d--}}}if($(b.element).attr("data-turbotime")=="true"){a.hide();var j=$(b.element).find("tr[data-orderid="+c+"]");if(b.toTime(h).toString()<="0.00"){$(j).find(".turboRemainingTime").html("0.00");return}$(j).find(".turboRemainingTime").html(b.toTime(h))}})},toTime:function(b){var a=Math.floor(b/60);var c=b-a*60;if(c<10){c="0"+c}return a+":"+c},showChart:function(b,c){var d=this;var f=$(".turboChart[data-orderId="+c.orderId+"]");if(f.length){return}var d=this;var a=new Date(widgets.serverDateTime.dateTime);var e=Math.floor(c.expirationDate.timestamp-a.getTime())/1000;e=parseInt(e);var f=$('<div class="turboChart"></div>');f.attr("data-orderId",c.orderId);if(c.tradableAssetId){f.attr("data-assetId",c.tradableAssetId)}f.append('<div class="turboDescription">'+widgetMessage.asset+': <span class="turboDescriptionItem">'+c.description+"</span></div>");f.append('<div class="turboExpiry" data-timestamp="'+parseInt(e)+'">'+widgetMessage.expiry+': <span class="turboExpiryItem">'+d.toTime(e)+"</span></div>");f.append('<div class="turboStrike">'+widgetMessage.strike+': <span class="turboStrikeItem">'+c.rate+"</span></div>");f.append('<div class="turboAmount">'+widgetMessage.amount+': <span class="turboAmountItem">'+c.volume+"</span></div>");f.append('<div class="turboReturn">'+widgetMessage["return"]+': <span class="turboReturnItem">'+helper.formatPayout(c.payoutPercent)+"</span></div>");f.append('<a class="chartClose" href="javascript:;"></a>');f.append(d.getChart(c));f.insertAfter(b);$(".chartClose").unbind("click");$(".chartClose").click(function(){$(".turboChart").remove()});$(window).trigger(widgets.events.turboChartOpenTradeShow,b)},showSell:function(b,A,t){var m=helper.getCurrencySymbol();$("td input.actionButton.clicked").removeClass("clicked");$(b).find("td input.actionButton").addClass("clicked");var f=this;$(".sellTools").remove();var q=$('<tr class="sellTools" data-orderId='+A.orderId+' data-taid="'+A.tradableAssetId+'" data-id='+A.optionId+"></tr>");var z=$('<td colspan="'+$(b).find("td").length+'"></td>');var w=widgetMessage.openTradeSellRateMsg?widgetMessage.openTradeSellRateMsg:"Rate";var D=widgetMessage.openTradeSellBuyAmountMsg?widgetMessage.openTradeSellBuyAmountMsg:"Buy amount";var x=widgetMessage.openTradeSellSellAmountMsg?widgetMessage.openTradeSellSellAmountMsg:"Sell amount";var n=widgetMessage.openTradeSellProfitMsg?widgetMessage.openTradeSellProfitMsg:"Profit";var h=widgetMessage.openTradeSellContractsMsg?widgetMessage.openTradeSellContractsMsg:"Contracts";var o=widgetMessage.openTradeSellSellBtn?widgetMessage.openTradeSellSellBtn:"Sell";var g=widgetMessage.openTradeSellCancelBtn?widgetMessage.openTradeSellCancelBtn:"Cancel";var c=$('<div class="openTradeToolsInfoCell">'+w+"</div>");var u=$('<div class="openTradeToolsInfoCell">'+D+"</div>");var C=$('<div class="openTradeToolsInfoCell">'+x+"</div>");var p=$('<div class="openTradeToolsInfoCell">'+n+"</div>");var a=$('<div class="openTradeToolsInfoCell">'+h+"</div>");var y=$('<div class="openTradeToolsDataCell" id="rateData">'+parseFloat($(b).find(".openTradesRowRate").text())+"</div>");var i=$('<div class="openTradeToolsDataCell" id="buyAmountData">'+helper.formatCurrency(m,(parseFloat(A.volume)*t).toFixed(2)).replace(" ","")+"</div>");var l=helper.formatCurrency(m,parseFloat($(b).find(".openTradesSellAmount").text().replace(/[^0-9-.]/g,"")).toFixed(2)).replace(" ","");var e=$('<div class="openTradeToolsDataCell" id="sellAmountData">'+l+"</div>");var k=helper.formatCurrency(m,parseFloat($(b).find(".openTradesFloatingProfit").text().replace(/[^0-9-.]/g,"")).toFixed(2)).replace(" ","");var d=$('<div class="openTradeToolsDataCell" id="profitData">'+k+"</div>");var s=A;for(var v=0;v<widgets.openTrades.length;v++){if(widgets.openTrades[v].orderId==A.orderId){s=widgets.openTrades[v];break}}t=t==undefined?s.contracts:t;var r=$('<input class="openTradeToolsDataCell" id="contractsData" name="value" value="1">');f.ladderSellButton=$('<input type="button" class="openTradesButton openTradeToolsInfoCell SellButton inactive" value="'+o+'" disabled="true"/>');f.ladderCancelButton=$('<input type="button" class="openTradesButton openTradeToolsInfoCell CancelButton inactive" value="'+g+'" disabled="true" />');$(c).append(y).append(u).append(i).append(C).append(e).append(p).append(d).append(a).append(r).append(f.ladderSellButton).append(f.ladderCancelButton);$(z).html(c);$(q).append($(z));$(q).insertAfter(b);var B=r.spinner();B.spinner("value",parseInt(s.contracts));B.spinner({min:1,max:s.contracts});B.spinner().on("input spinstop",function(){if(widgets.prices[A.optionId]){f.updateLadderStrikePrice(widgets.prices[A.optionId])}var F=B.spinner("value");var j=B.spinner("option","max");var E=B.spinner("option","min");if(F==""){F=E.toString()}if(!parseInt(F)){F=E.toString()}F=F>j?j:F<E?E:F;B.spinner("value",F)});$(window).trigger(widgets.events.showSellClicked);f.ladderCancelButton.click(function(){if($(this).hasClass("active")){$(".sellTools").remove();$(".actionButton.clicked").removeClass("clicked")}});f.ladderSellButton.click(function(){if($(this).hasClass("active")){var J=openTradesWidget;var K=$(this).parent().parent().parent().attr("data-orderId");var I=$(this).parent().parent().parent().attr("data-id");var G=$(this).parent();var E=parseInt($(G).find("#contractsData").val());var F=parseFloat($(G).find("#sellAmountData").html().replace(/[^0-9-.]/g,""))/E;var j=0;$.each(widgets.prices,function(L,M){if(M.id==parseInt(I)){j=(M.rate)}});widgets.lastExecutedSell=new Object();widgets.lastExecutedSell.orderId=K;widgets.lastExecutedSell.contracts=E;var H;if(A.game.toLowerCase()=="ladder"){H=A.isBuy}else{H=A.isTouch}widgets.api.sellOpenTrade(K,E,F,j,I,H,A.rate,function(L){J.processSellOpenTrade(L)});$(this).unbind("click")}})},processSellOpenTrade:function(a){var b=this;if(a.code=="400"){b.ladderCancelButton.click()}$(window).trigger(widgets.events.sellCompleted,[a])},slideLeft:function(g,d){var i=this;$(".leftButton").removeClass("inactive");var c=i.elementCache.turboBoxSection;var f=c.offset().left+c.innerWidth();var a=$(c).find(".turboBox").last().offset().left+$(c).find(".turboBox").last().innerWidth();if(f>a){$(".rightButton").addClass("inactive");return}$(".rightButton").removeClass("inactive");var b=$(g).width();var j=$(g).parent().width();var h=$(g).css("left");if(h=="auto"){h="0px"}h=parseInt(h.substr(0,h.length-2));if(h==0&&b>j){var e=-d;$(g).css({left:e});return}if(h>-(b-j+50)){var e=h-d;$(g).css({left:e})}},slideRight:function(d,f){$(".rightButton").removeClass("inactive");if($(d).css("left")>="0px"){$(".leftButton").addClass("inactive");return}$(".leftButton").removeClass("inactive");var e=$(d).width();var b=$(d).parent().width();var a=$(d).css("left");if(a=="auto"){a="0px"}a=parseInt(a.substr(0,a.length-2));if(a>-(e-b+50)){var c=a-f;$(d).css({left:c})}var c=a+f;$(d).css({left:c})},showHideSlider:function(){var c=this;var d=$(c.elementCache.turboBoxSection).find(".turboBox");var b=d.first().outerWidth(true)*d.length;if(c.elementCache.turboBoxSection!=null){var a=c.elementCache.turboBoxSection.find(".turboSliderButton");if(b<=c.elementCache.turboBoxSection.innerWidth()){a.removeClass("active").addClass("inactive");c.enableTurboSlider=false;if(d.length===0){c.elementCache.turboBoxSection.hide()}}else{c.elementCache.turboBoxSection.find(".rightButton").removeClass("inactive").addClass("active");c.elementCache.turboBoxSection.show();c.enableTurboSlider=true}}}};
var openTradesProfitWidget={init:function(){var a=this;$(a.element).show()},updateProfit:function(a){var b=0;$.each(widgets.openTrades,function(c,d){b=b+d.floatingProfit});$("[data-widget=openTradesProfit]").html(helper.formatCurrency(helper.getCurrencySymbol(),b.toFixed(2)))},doUpdate:function(a){if(a.length==0){$("[data-widget=openTradesProfit]").html(helper.formatCurrency(helper.getCurrencySymbol(),0))}}};
var openTradesTotalContractsWidget={init:function(){var a=this;$(a.element).show()},doUpdate:function(b){var a=0;$.each(widgets.openTrades,function(c,d){var e=d.contracts;a=a+e});$("[data-widget=openTradesTotalContracts]").html(a)}};
var openTradesVolumeWidget={init:function(){var a=this;$(a.element).show()},doUpdate:function(b){var c=0;var a=helper.getCurrencySymbol();$.each(widgets.openTrades,function(d,e){var f=e.volume*e.contracts;c=c+f});$("[data-widget=openTradesVolume]").html(helper.formatCurrency(a,c))}};
var optionAccordionWidget={skipMultipleInvokeValidation:true,init:function(){var a=this;widgets.isTraderoom=true;$(a.element).show();$(window).on(widgets.events.linkOptionUpdated,function(){a.updateActiveOption()});$(window).on(widgets.events.optionsUpdated,function(d,c,b){switch(c){case"add":$.each(b,function(e,f){a.addOption(f)});a.sort_accordion_headers();a.sort();break;case"del":$.each(b,function(e,f){var g=f.tradableAssetId?f.tradableAssetId:f.id;a.delOptionId(g)});break}});$(window).on(widgets.events.loadingIsCompleted,function(){if($(a.element).attr("data-accordiondisable")!="true"){$(a.element).accordion({heightstyle:"fitt"})}})},sort:function(){var a=this;$.each($(a.element).find("[class*=Options]"),function(b,c){$(c).html($(c).find(".option").sort(function(e,d){return $(e).text()==$(d).text()?0:$(e).text()<$(d).text()?-1:1}))});$(".accordionOption").unbind("click");$(".accordionOption").click(function(){widgets.setLinkOption(a.link,undefined,a.getFirstOptionFromGroup($(this).data("assetid")));$(".activeOption").removeClass("activeOption");$(this).addClass("activeOption");$(a.element).trigger("change",[a.link])});a.updateActiveOption();$(a.element).trigger("change",[a.link])},sort_accordion_headers:function(){var b=this;var c=[];$(".optionAccordion  .groupName ").each(function(d,e){c.push(new b.accordion_sort_object(e,$(e).next("div")))});c.sort(function(g,e){var f=$(g.header).attr("data-sort-value");var d=$(e.header).attr("data-sort-value");return(f>d)?1:-1});for(var a in c){$(".optionAccordion").append(c[a].header).append(c[a].div)}},accordion_sort_object:function(b,a){this.header=b;this.div=a},getFirstOptionFromGroup:function(b){var a=[];$.each(widgets.options,function(d,c){var e=c.tradableAssetId?c.tradableAssetId:c.id;if(e==b){a.push(c)}});if(a.length!=0){a.sort(function(d,c){return d.expirationTimestamp-c.expirationTimestamp});newOption=a.shift()}return newOption},updateActiveOption:function(){var a=this;$.each($(a.element).find(".option"),function(b,c){if(c.text==widgets.links[a.link].option.name){$(a.element).val(c.value)}})},addOption:function(f){var e=this;var h=f.assetName?f.assetName:f.type;var d=$(e.element).find('div[label="'+h+'"]').first();var c;if(d.length==0){var b="";switch(h.toLowerCase()){case"currencies":b="A";break;case"indices":b="B";break;case"stocks":b="C";break;case"commodities":b="D";break}var d=$("<div />").attr("label",h).attr("data-sort-value",b+"A").attr("class","groupName").html(h);var c=$('<div class="'+h+'Options" data-sort-value="'+b+'B" />');$(e.element).append(d);$(e.element).append(c)}else{c=$(e.element).find('div[class*="'+h+'Options"]')}var i=$(c).find("div:contains("+f.name+")").length;if(i){return false}var g=$('<div class="option accordionOption" />');g.text(f.name);var a=f.tradableAssetId?f.tradableAssetId:f.id;g.attr("data-assetid",a);$(c).append(g);if(f.id==widgets.links[e.link].option.id){$(g).addClass("activeOption")}},delOptionId:function(d){var c=this;var a=$(c.element).find('div[data-assetid="'+d+'"]');if($(a).parent().find(".option").length==0){$(a).parent().remove()}var b=false;$.each(widgets.options,function(e,f){var g=f.tradableAssetId?f.tradableAssetId:f.id;if(g==d){b=true;return}});if(!b){$(a).remove()}}};
var optionDropDownWidget={init:function(){var a=this;$(a.element).show();$(a.element).change(function(){widgets.setLinkOption(a.link,$(this).val())});$(window).on(widgets.events.linkOptionUpdated,function(c,b){a.updateActiveOption(b)});$(window).on(widgets.events.assetAlreadyUsedForWidgets,function(e,b){var c=b.options;var d=b.link;$("[data-widget="+a.game+"_"+d+"_optionDropDown]").val(c.id)});$(window).on(widgets.events.optionsUpdated,function(d,c,b){switch(c){case"add":$.each(b,function(e,f){a.addOption(f)});a.sort();a.sortOptionGroups();break;case"del":$.each(b,function(e,f){a.delOptionId(f.id);$.each(widgets.options,function(g,h){if(h.name==f.name){a.addOption(h);return false}})});break}})},sort:function(){var a=this;$.each($(a.element).find("optgroup"),function(b,c){$(c).html($(c).find("option").sort(function(e,d){return e.text==d.text?0:e.text<d.text?-1:1}))});a.updateActiveOption(a.link)},updateActiveOption:function(a){var b=this;if(b.link!==a){return}$.each($(b.element).find("option"),function(c,d){if(typeof widgets.links[b.link].option!="undefined"&&d.text==widgets.links[b.link].option.name){$(b.element).find("option[value="+d.value+"]").val(widgets.links[b.link].option.id);$(b.element).val(widgets.links[b.link].option.id)}})},addOption:function(c){var e=this;var f=c.assetName?c.assetName:c.type;var b=$(e.element).find('optgroup[label="'+f+'"]').first();if(b.length==0){if($.inArray(f.toLowerCase(),widgets.filterByAssetType)!=-1){var b=$("<optgroup />").attr("label",f);e.addSortOrder($(e.element),b)}}var a=$(b).find("option:contains("+c.name+")");if(a.length>0){if($(b).find("option:selected").text()==c.name){var g=$("[data-widget="+e.game+"_"+e.link+"_expireDropDown]").val();if(g!=null){a.val(g)}}return false}var d=$("<option />");d.val(c.id);d.text(c.name);d.attr("data-assetId",c.tradableAssetId);$(b).append(d)},delOptionId:function(c){var b=this;var a=$(b.element).find('option[value="'+c+'"]');if($(a).parent().find("option").length==1){$(a).parent().remove()}a.remove()},updateOption:function(a){var c=this;if(!a){return}if(a.id==widgets.placeholders[c.name].option.id){var b=$(c.element).find("option:contains("+a.name+")");if(b){$(c.element).text($(b).val())}else{$(c.element).text(widgets.placeholders[c.name].option.id)}}},addSortOrder:function(b,e){var c=this;var a=$(e).attr("label").toLowerCase();var d="";switch(a){case"currencies":d="A";break;case"indices":d="B";break;case"stocks":d="C";break;case"commodities":d="D";break}$(e).attr("data-sort-value",d);b.append(e)},sortOptionGroups:function(){var c=this;var a=c.element,b=a.children("optgroup");b.sort(function(e,d){var f=e.getAttribute("data-sort-value"),g=d.getAttribute("data-sort-value");if(f>g){return 1}if(f<g){return -1}return 0});c.element.html(b);if(typeof widgets.links[c.link].option!="undefined"){$(c.element).val(widgets.links[c.link].option.id)}}};
var optionStatusWidget={init:function(){var a=this;$(a.element).show();$(window).on(widgets.events.linkOptionUpdated,function(h,g){var f=widgets.links[g].option;var e=new Date(widgets.serverDateTime.dateTime);var b=(f.expirationTimestamp-e.getTime())/1000;var d=widgetMessage.expiring?widgetMessage.expiring:"Expiring";var c=widgetMessage.active?widgetMessage.active:"Active";if(b<f.disableInvestTimeInSeconds){$(a.elements).html(d)}else{$(a.elements).html(c)}})},};
var optionTypeWidget={init:function(){var a=this;$(a.elements).show();$(window).on(widgets.events.btnOverClicked,function(c,b){a.buildType(b)});$(window).on(widgets.events.btnUnderClicked,function(c,b){a.buildType(b)});$(window).on(widgets.events.linkOptionUpdated,function(b){a.removeType()})},buildType:function(b){var c=this;var a=widgetMessage.overMsg?widgetMessage.overMsg:"Over";var d=widgetMessage.underMsg?widgetMessage.underMsg:"Open";if(b.direction){$(c.element).html(a)}else{$(c.element).html(d)}},removeType:function(){var a=this;$(a.element).html("")}};
var overUnderPayoutWidget={isButtonclicked:false,optionId:null,strikeLevel:null,oldPutPayout:null,oldCallPayout:null,directionUp:null,init:function(){var a=this;$(a.elements).show();$(window).on(widgets.events.btnOverClicked,function(c,b){a.isButtonclicked=true;a.optionId=b.optionId;a.directionUp=b.direction;a.buildPayout(b)});$(window).on(widgets.events.btnUnderClicked,function(c,b){a.isButtonclicked=true;a.optionId=b.optionId;a.directionUp=b.direction;a.buildPayout(b)});$(window).on(widgets.events.linkOptionUpdated,function(b){a.isButtonclicked=false;a.removePayout()});$(window).on(widgets.events.optionPricesUpdated,function(d,b){if(a.isButtonclicked){var c;$.each(b,function(e,f){c=b[a.optionId];a.updatePayout(c)})}})},buildPayout:function(b){var c=this;var a=widgets.prices[b.optionId].payouts[b.strike];c.strikeLevel=b.strike;if(b.direction){$(c.elements).html(helper.formatPayout(a.CallPayout));c.oldCallPayout=a.CallPayout;$(window).trigger(widgets.events.payoutsOverUnder,a.CallPayout)}else{$(c.elements).html(helper.formatPayout(a.PutPayout));c.oldPutPayout=a.oldPutPayout;$(window).trigger(widgets.events.payoutsOverUnder,a.PutPayout)}},updatePayout:function(a){var b=this;var c=a.payouts[b.strikeLevel];if(c.CallPayout!=b.oldCallPayout&&b.directionUp){$(b.elements).html(helper.formatPayout(c.CallPayout));b.oldCallPayout=c.CallPayout;$(window).trigger(widgets.events.payoutsOverUnder,c.CallPayout)}if(c.PutPayout!=b.oldPutPayout&&!b.directionUp){$(b.elements).html(helper.formatPayout(c.PutPayout));$(window).trigger(widgets.events.payoutsOverUnder,c.PutPayout);b.oldPutPayout=c.PutPayout}},removePayout:function(){var a=this;$(a.elements).html("")}};
var pagingWidget={pageLower:1,totalElements:0,totalPages:0,rowsPerPage:10,limit:5,showPrevNextPage:false,isPostBack:false,update:function(a,c,e,b){var d=this;if(!d.isPostBack){d.initEvents();d.isPostBack=true}if(b){d.element=b}if(a==0){d.element.html("");return}if(e==0){d.totalElements=a;d.rowsPerPage=c;d.pageLower=1;d.redrawPaging(d.pageLower);d.pageChanged(d.pageLower)}},initEvents:function(){var a=this;a.limit=parseInt(a.element.attr("data-pagingLimit"))||5;a.showPrevNextPage=a.element.attr("data-prevNextPage")?a.element.attr("data-prevNextPage"):false;a.element.unbind("click");a.element.on("click",".nextPage:not(.disabled)",function(){var c=a.element.find(".activePage");var b=parseInt(c.html());a.getPageResources(b+1);if(b+1>=a.pageLower+a.limit){a.redrawPaging(a.pageLower+a.limit)}else{c.removeClass("activePage");c.next().addClass("activePage")}a.pageChanged(b+1)});a.element.on("click",".prevPage:not(.disabled)",function(){var c=a.element.find(".activePage");var b=parseInt(c.html());a.getPageResources(b-1);if(b-1<a.pageLower){a.redrawPaging(a.pageLower-a.limit);a.element.find(".activePage").removeClass("activePage");a.element.find(".pageLink:last").addClass("activePage")}else{c.removeClass("activePage");c.prev().addClass("activePage")}a.pageChanged(b-1)});a.element.on("click",".nextPages",function(){a.getPageResources(a.pageLower+a.limit);a.redrawPaging(a.pageLower+a.limit);a.pageChanged(a.pageLower)});a.element.on("click",".prevPages",function(){a.getPageResources(a.pageLower-a.limit);a.redrawPaging(a.pageLower-a.limit);a.pageChanged(a.pageLower)});a.element.on("click",".pageLink",function(){a.element.find(".activePage").removeClass("activePage");var c=$(this);c.addClass("activePage");var b=parseInt(c.html());a.getPageResources(b);a.pageChanged(b)})},redrawPaging:function(f){var e=this;e.totalPages=Math.ceil(e.totalElements/e.rowsPerPage);e.pageLower=f;var d='<div class="paging">';if(e.pageLower>=e.limit){var b=widgetMessage.prevPages?widgetMessage.prevPages:"...";d+='<a class="prevPages">'+b+"</a> "}if(e.showPrevNextPage){var c=widgetMessage.prevPage?widgetMessage.prevPage:"&lt;";d+='<a class="prevPage">'+c+"</a> "}for(i=e.pageLower;(i<e.pageLower+e.limit&&i<=e.totalPages);i++){var h=(i==e.pageLower?"activePage":"");d+='<a class="pageLink '+h+'" href="javascript:;">'+i+"</a> "}if(e.showPrevNextPage){var a=widgetMessage.nextPage?widgetMessage.nextPage:"&gt;";d+='<a class="nextPage">'+a+"</a>"}if(e.totalPages>=i){var g=widgetMessage.nextPages?widgetMessage.nextPages:"...";d+='<a class="nextPages">'+g+"</a>"}d+="</div>";e.element.html(d)},pageChanged:function(c){var b=this;if(b.showPrevNextPage){var a=b.element.find(".disabled");if(a){a.removeClass("disabled")}if(c==1){b.element.find(".prevPage").addClass("disabled")}if(c==b.totalPages){b.element.find(".nextPage").addClass("disabled")}}}};
var pastExpiriesDateListWidget={numDates:3,dates:[],selectedDate:new Date(),templateContainer:'<ul class="date-list" />',templateElemenent:'<li class="date-element" />',init:function(){var a=pastExpiriesDateListWidget;$(a.element).show();$(window).on(widgets.events.loadingIsCompleted,function(h){var c=$(a.templateContainer);this.selectedDate=widgets.getDate(new Date());var g=0;while(a.dates.length<a.numDates){var d=widgets.getDate(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());if(d.getHours()-widgets.settings.application.TradingStartHour.Value<0){d=new Date(d.setDate(d.getDate()-1))}d.setHours(0,0,0,0);d.setDate(d.getDate()-g);if(d.getDay()!=6&&d.getDay()!=0){a.dates.push(d)}g++}a.selectedDate=a.dates[0];for(g=0;g<a.dates.length;++g){var b=a.dates[g];var f=(b.getMonth()+1)+"/"+b.getDate();var e=$(a.templateElemenent);e.append($('<a class="element-inner" href="javascript:;" />').text(f));e.attr("data-dateobj",b);if(b==a.selectedDate){e.addClass("selected")}e.click(function(){$(a.element).find(".selected").removeClass("selected");$(this).addClass("selected");a.selectedDate=new Date($(this).data("dateobj"));widgets.pastExpiriesLoad()});c.append(e)}$(a.element).append(c)})}};
var pastExpiriesFromDateWidget={init:function(){var d=this;var b=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var a=(widgets.dateFormat?widgets.dateFormat:"dd MM yy");var c=60*60*24*1000;$(d.element).val($.datepicker.formatDate(a,widgets.getDate(b.getTime()-c)));$(d.element).datepicker({dateFormat:a});helper.translateDatepicker($(d.element));$(d.element).show()}};
var pastExpiriesLadderTableWidget={isStarted:false,numAssets:0,scrollerVisibleItems:3,scrollerScrollingItems:3,templateSliderPagesContainer:'<ul class="page-list" />',templateSliderPagesElemenent:'<li class="page-element" />',optionCache:[],init:function(){var b=this;widgets.isLadderPastExpiries=true;var a=$('<div class="als-viewport"></div>');if(pastExpiriesLadderTableWidget.isStarted){return false}pastExpiriesLadderTableWidget.isStarted=true;$("[data-widget=pastExpiriesLadderTable]").append(a);widgets.pastExpiriesLoad=b.loadDataTable;b.getDefault();$("[data-widget=pastExpiriesLadderTable]").show()},getDefault:function(){var a=this;$(window).on(widgets.events.loadingIsCompleted,function(){a.loadDataTable()})},loadDataTable:function(){var f=this;var n=widgets.settings.application.EnableLadderTouchGame.Value;var a=widgets.settings.application.EnableLadderGame.Value;if(n=="true"||a=="true"){var j=typeof pastExpiriesDateListWidget=="object"?$.datepicker.formatDate("yy-mm-dd",pastExpiriesDateListWidget.selectedDate):$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesFromDate]").datepicker("getDate"));var g=typeof pastExpiriesDateListWidget=="object"?$.datepicker.formatDate("yy-mm-dd",pastExpiriesDateListWidget.selectedDate):$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesToDate]").datepicker("getDate"));var e=0;var d=0;var c=10000;var m="ExpireAt";var h=0;var b=0;if($(".pastExpiriesFilter.selected").hasClass("ladder")){h=8}else{if($(".pastExpiriesFilter.selected").hasClass("touch")){h=12}}var l=true;var k=false;widgets.api.getPastExpiries(j,g,e,d,c,m,h,l,b,k,pastExpiriesLadderTableWidget.processOptions,f)}},processOptions:function(b,c){var d=this;var a=b.data;if(!a){return}var e=new Array();$.each(a,function(j,k){var h={id:k.ID,minRateReached:k.minRateReached,maxRateReached:k.MaxRateReached};pastExpiriesLadderTableWidget.optionCache.push(h);var f=false;$.each(e,function(m,l){if(l.name==k.AssetsName){l.data.push(k);f=true;return}});if(!f){var g={};g.name=k.AssetsName;g.taID=k.Asset1+"_"+k.Asset2;g.data=new Array();g.data.push(k);e.push(g)}});pastExpiriesLadderTableWidget.buildResultPanels(e);$(pastExpiriesLadderTableWidget.element).als({visible_items:pastExpiriesLadderTableWidget.scrollerVisibleItems,scrolling_items:pastExpiriesLadderTableWidget.scrollerScrollingItems,orientation:"horizontal"});$(window).trigger(widgets.events.pastExpiriesLadderTableProcessOptions)},buildResultPanels:function(c){var d=this;$("[data-widget=pastExpiriesLadderTable] .als-viewport").find(".pastXpiryWrap").remove();$("[data-widget=pastExpiriesLadderTable]").find(".als-prev").remove();$("[data-widget=pastExpiriesLadderTable]").find(".als-next").remove();var a=$("[data-widget=pastExpiriesLadderTable] .als-viewport");var b=$('<ul class="als-wrapper pastXpiryWrap"></ul>');$.each(c,function(g,f){var h=$("<li class='als-item pastExpiriesAsset pastXpiryPanelRow' taid='"+f.taID+"'></li>");var e=false;$.each(f.data,function(p,x){var w=(p%2==0)?"odd":"even";var v=new Date(parseInt(x.ExpireAtTimeStamp));var t=$("<div class='pastExpiriesOption plus "+w+"' data-id='"+x.ID+"'></div>");if(!e){var k=widgetMessage.asset?widgetMessage.asset:"Asset";var r=widgetMessage["serial#"]?widgetMessage["serial#"]:"Serial#";var l=widgetMessage.expDate?widgetMessage.expDate:"Exp. Date";var u=widgetMessage.expRate?widgetMessage.expRate:"Exp. Rate";var q=$("<div class='pastXpiryHeaderRow'><div class='pastXpiryRow assetName'>"+k+"</div><div class='pastXpiryRow serialNo'>"+r+"</div><div class='pastXpiryRow expiryTime'>"+l+"</div><div class='pastXpiryRow expiryRate'>"+u+"</div></div>");$(h).append(q);e=true}var m=$('<div class="pastXpiryRow assetName">'+x.AssetsName+"</div>");$(t).append(m);var n=$('<div class="pastXpiryRow serialNo">'+helper.formatSerialNumber(x.SerialNumber)+"</div>");$(t).append(n);var o=$('<div class="pastXpiryRow expiryTime">'+helper.formatDate(v,"HH:MM")+"</div>");$(t).append(o);var s=$('<div class="pastXpiryRow expiryRate">'+x.ExpiryRate+"</div>");$(t).append(s);$(h).append(t)});$(b).append(h);$(a).append(b)});$("<div class='als-prev'><span>&lt;&lt;</span></div>").insertBefore(".als-viewport");$("<div class='als-next'><span>&gt;&gt;</span></div>").insertAfter(".als-viewport");$.each($("[data-widget=pastExpiriesLadderTable]").find(".als-viewport .als-wrapper .als-item .pastExpiriesOption"),function(e,f){$(f).click(function(){if($(f).hasClass("plus")){$("[data-widget=pastExpiriesLadderTable]").find(".pastExpiriesOption").removeClass("minus").addClass("plus");$(f).removeClass("plus").addClass("minus");pastExpiriesLadderTableWidget.expandLadder(f)}else{$(f).removeClass("minus").addClass("plus");pastExpiriesLadderTableWidget.collapseLadder(f)}})})},expandLadder:function(a){var b=$(a).attr("data-id");widgets.api.getSingleOptionPayouts(b,pastExpiriesLadderTableWidget.processExpandPayouts,b)},collapseLadder:function(){$(".pastExpiryStrikeRow").remove();$(window).trigger(widgets.events.pastExpiriesLadderTableCollapseLadder)},processExpandPayouts:function(f,m){var h=f.data;var n=m;$(".pastExpiryStrikeRow").remove();var a=$("[data-widget=pastExpiriesLadderTable]").find("div[data-id="+arguments[1]+"]");var c=parseFloat($(a).find(".expiryRate").html());var l=h.sort(function(q,p){return q-p});var b;var j;for(var g=0;g<pastExpiriesLadderTableWidget.optionCache.length;g++){if(pastExpiriesLadderTableWidget.optionCache[g].id==n){b=pastExpiriesLadderTableWidget.optionCache[g].minRateReached;j=pastExpiriesLadderTableWidget.optionCache[g].maxRateReached;break}}$.each(l,function(s,u){var t;var p;var v=parseFloat(u);var r=widgetMessage.highLabel?widgetMessage.highLabel:"HIGH";var y=widgetMessage.lowLabel?widgetMessage.lowLabel:"LOW";var x=widgetMessage.touchLabel?widgetMessage.touchLabel:"Touch";var w=widgetMessage.noTouchLabel?widgetMessage.noTouchLabel:"No Touch";if($(".pastExpiriesFilter.selected").hasClass("ladder")){t=(c>v)?r:y;p=(c>v)?r:y}else{if($(".pastExpiriesFilter.selected").hasClass("touch")){if(j&&b){t=(j>=v&&v>=b)?x:w;p=(j>=v&&v>=b)?r:y}else{t="-";p="LOW"}}}var q=$('<div class="pastExpiryStrikeRow" data-id="'+arguments[1]+'" style="display:none"><div class="pastExpiryStrikeValue">'+u+'</div><div class="pastExpiryStrikeLabel'+p+'">'+t+"</div></div>");$(q).insertAfter(a)});var k=false;if(!k){var o=widgetMessage.strike?widgetMessage.strike:"Strike";var d=widgetMessage.expiry?widgetMessage.expiry:"Expiry";var e=$('<div class="pastExpiryStrikeRow pastExpiryStrikeRowHeader"><div class="pastExpiryStrikeValue">'+o+'</div><div class="pastExpiryStrikeLabel">'+d+"</div></div>");$(e).insertAfter(a);k=true}$(".pastExpiryStrikeRow").show();$(window).trigger(widgets.events.pastExpiriesLadderTableExpandLadder)},sliderBuildPaging:function(){var e=pastExpiriesLadderTableWidget.element.data("als").num_items;var c=pastExpiriesLadderTableWidget.scrollerVisibleItems;var a=Math.ceil(e/c);var d=$(pastExpiriesLadderTableWidget.templateSliderPagesContainer);for(i=0;i<a;i++){var b=$(pastExpiriesLadderTableWidget.templateSliderPagesElemenent);b.append($('<a href="javascript:;" />').text(i+1));b.attr("data-page",i);b.addClass("page-element",i);if(i==0){b.addClass("selected")}b.click(function(){$(pastExpiriesLadderTableWidget.element).find(".page-element.selected").removeClass("selected");$(this).addClass("selected");pastExpiriesLadderTableWidget.sliderGoToPage($(this).data("page"))});d.append(b)}$(pastExpiriesLadderTableWidget.element).append(d)},sliderGoToPage:function(b){var a=pastExpiriesLadderTableWidget.scrollerVisibleItems;var c=Math.ceil(pastExpiriesLadderTableWidget.element.data("als").current/a);if(b<c){pastExpiriesLadderTableWidget.element.data("als").prev.click()}else{if(b>c){pastExpiriesLadderTableWidget.element.data("als").next.click()}}},};
var pastExpiriesOptionsWidget={init:function(){var a=pastExpiriesOptionsWidget;widgets.api.getTradableAssets(a.processTradableAssets);$(a.element).show()},processTradableAssets:function(a){var b=pastExpiriesOptionsWidget;if(b.element.data("ismobile")!=undefined&&b.element.data("ismobile")==true){b.getPopUpHtml(a)}else{b.getDropDownHtml(a)}if(widgets.pastExpiriesLoad){widgets.pastExpiriesLoad();$(window).trigger(widgets.events.pastExpiriesOptionsLoad)}},getDropDownHtml:function(a){var c=pastExpiriesOptionsWidget;var b=$("<option />");b.val("0");b.text("All");$(c.element).append(b);$.each(a.data,function(e,g){var d=$(c.element).find('optgroup[label="'+g.typeName+'"]').first();if(d.length==0){var d=$("<optgroup />").attr("label",g.typeName);$(c.element).append(d)}var f=$("<option />");f.val(g.id);f.text(g.description);$(d).append(f)})},getPopUpHtml:function(d){var f=this;var i="";var c="";var e="";var a="";$.each(d.data,function(j,k){if(!k||typeof k!="object"){return}switch(k.type){case 1:i+='<div data-id="'+k.id+'" class="pastExpiriesOptionsItem">'+k.description+"</div>";break;case 2:e+='<div data-id="'+k.id+'" class="pastExpiriesOptionsItem">'+k.description+"</div>";break;case 3:c+='<div data-id="'+k.id+'" class="pastExpiriesOptionsItem">'+k.description+"</div>";break;default:a+='<div data-id="'+k.id+'" class="pastExpiriesOptionsItem">'+k.description+"</div>"}});var g='<div id="pastExpiriesOptionsElementId-0" class="pastExpiriesOptionsElement" data-type="showSelected">All</div><div class="pastExpiriesOptionsPoUp" style="display: none;"><div class="pastExpiriesOptionsWrap"><div class="pastExpiriesOptionsFilter"><div><div id="currenciespastExpiriesOptions" class="optionsIndexNav active">Currency</div></div><div><div id="stockspastExpiriesOptions" class="optionsIndexNav">Stocks</div></div><div><div id="indicespastExpiriesOptions" class="optionsIndexNav">Indices</div></div><div><div id="commoditiespastExpiriesOptions" class="optionsIndexNav">Commodities</div></div><div><div id="allpastExpiriesOptions">'+widgetMessage.filterAll+'</div></div></div><div class="pastExpiriesOptionsAssets"><div id="currenciespastExpiriesOptionsDiv" class="active">'+i+'</div><div id="stockspastExpiriesOptionsDiv">'+c+'</div><div id="indicespastExpiriesOptionsDiv">'+e+'</div><div id="commoditiespastExpiriesOptionsDiv">'+a+"</div></div></div></div>";$(f.element).append(g);var b=f.elements[0].children[0];var h=f.elements[0].children[1];if($.mobile){$(b).on("tap",function(){$(h).show()});$(f.elements).find("#allpastExpiriesOptions").on("tap",function(j){$(b).html(widgetMessage.filterAll).attr("id","pastExpiriesOptionsElementId-0");$(h).hide()});$(h).find(".optionsIndexNav").on("tap",function(){if($(this).hasClass("active")){return}$(h).find(".optionsIndexNav").removeClass("active");$(h).find(".pastExpiriesOptionsAssets > div").removeClass("active");$(this).addClass("active");$(h).find("#"+this.id+"Div").addClass("active")});$(h).find(".pastExpiriesOptionsItem").on("tap",function(){var j=this.innerHTML;$(b).html(j).attr("id","pastExpiriesOptionsElementId-"+$(this).data("id"));$(h).hide()})}else{$(b).on("click",function(){$(h).show()});$(f.elements).find("#allpastExpiriesOptions").on("click",function(j){$(b).html(widgetMessage.filterAll).attr("id","pastExpiriesOptionsElementId-0");$(h).hide()});$(h).find(".optionsIndexNav").on("click",function(){if($(this).hasClass("active")){return}$(h).find(".optionsIndexNav").removeClass("active");$(h).find(".pastExpiriesOptionsAssets > div").removeClass("active");$(this).addClass("active");$(h).find("#"+this.id+"Div").addClass("active")});$(h).find(".pastExpiriesOptionsItem").on("click",function(){var j=this.innerHTML;$(b).html(j).attr("id","pastExpiriesOptionsElementId-"+$(this).data("id"));$(h).hide()})}},getValue:function(){var a=this;if(a.element.data("ismobile")!=undefined&&a.element.data("ismobile")==true){return $(a.elements).find("[data-type=showSelected]").attr("id").substr(29)}return $(a.element).val()}};
var pastExpiriesPagingWidget={fromDate:null,toDate:null,init:function(){var a=this;pastExpiriesPagingWidget=$.extend({},pagingWidget,pastExpiriesPagingWidget);$(a.element).addClass("pastExpiriesPaging").show()},getPageResources:function(f){var d=this;var g=d.fromDate;var e=d.toDate;var c=widgets.all.pastExpiriesOptions.getValue();var b=(d.rowsPerPage*f)-d.rowsPerPage+1;var i="expireat";var a=0;var h=true;widgets.api.getPastExpiries(helper.toServerDateFrom(g),helper.toServerDateTo(e),c,b,d.rowsPerPage,i,"",false,a,h,pastExpiriesTableWidget.processOptions)}};
var pastExpiriesSearchButtonWidget={init:function(){var a=pastExpiriesSearchButtonWidget;$(a.element).show();$(a.element).click(function(){var n=60*60*24*1000;var j=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesFromDate]").datepicker("getDate"));var g=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesToDate]").datepicker("getDate"));var e=0;var d=0;var b=($("[data-widget=pastExpiriesTable]").attr("data-rowsperpage")!=undefined)?parseInt($("[data-widget=pastExpiriesTable]").attr("data-rowsperpage")):widgets.all.pastExpiriesTable.rowsPerPage;var m="ExpireAt";var c=0;var i=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesFromDate]").datepicker("getDate"));var f=$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesToDate]").datepicker("getDate"));pastExpiriesPagingWidget.fromDate=i;pastExpiriesPagingWidget.toDate=f;var l=false;var k=true;if(!widgets.isLadderPastExpiries){e=widgets.all.pastExpiriesOptions.getValue();widgets.api.getPastExpiries(helper.toServerDateFrom(j),helper.toServerDateTo(g),e,d,b,m,"",l,c,k,pastExpiriesTableWidget.processOptions)}else{var h=8;if($(".pastExpiriesFilter.selected").hasClass("ladder")){h=8}else{if($(".pastExpiriesFilter.selected").hasClass("touch")){h=12}}l=true;widgets.api.getPastExpiries(helper.toServerDateFrom(j),helper.toServerDateTo(g),e,d,b,m,h,l,c,k,pastExpiriesLadderTableWidget.processOptions)}})}};
var pastExpiriesTableWidget={isStarted:false,activeOptionId:null,chart:null,rowsPerPage:10,init:function(){var b=pastExpiriesTableWidget;b.rowsPerPage=(b.element.attr("data-rowsperpage")!=undefined)?parseInt(b.element.attr("data-rowsperpage")):b.rowsPerPage;var a=$("<tbody></tbody>");if(pastExpiriesTableWidget.isStarted){return false}pastExpiriesTableWidget.isStarted=true;$("[data-widget=pastExpiriesTable]").append(a);widgets.pastExpiriesLoad=pastExpiriesTableWidget.getDefault;$("[data-widget=pastExpiriesTable]").show();$(b.element).on("click",".pastExpiriesChartButton",b.pastExpiriesChartButtonClick);$(b.element).on("click",".pastExpiriesChartClose",b.pastExpiriesChartRemove)},getDefault:function(){var d=pastExpiriesTableWidget;var f=(typeof pastExpiriesDateListWidget=="object"?$.datepicker.formatDate("yy-mm-dd",pastExpiriesDateListWidget.selectedDate):$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesFromDate]").datepicker("getDate")));var e=(typeof pastExpiriesDateListWidget=="object"?$.datepicker.formatDate("yy-mm-dd",pastExpiriesDateListWidget.selectedDate):$.datepicker.formatDate("yy-mm-dd",$("[data-widget=pastExpiriesToDate]").datepicker("getDate")));pastExpiriesPagingWidget.fromDate=f;pastExpiriesPagingWidget.toDate=e;var c=widgets.all.pastExpiriesOptions.getValue();var b=0;var h="ExpireAt";var i=false;var a=0;var g=true;widgets.api.getPastExpiries(helper.toServerDateFrom(f),helper.toServerDateTo(e),c,b,d.rowsPerPage,h,"",i,a,g,function(j,k){pastExpiriesTableWidget.processOptions(j,k)})},processOptions:function(c,d){var e=pastExpiriesTableWidget;var b=c.data;if(!b){return}var f=b.length>0?b[b.length-1].RowsNumber:0;var g=d[3];pastExpiriesPagingWidget.update(f,e.rowsPerPage,g);$("[data-widget=pastExpiriesTable] tbody tr").remove();var a=$("[data-widget=pastExpiriesTable] tbody");if(a.length==0){a=$("[data-widget=pastExpiriesTable]").append("<tbody></tbody>")}if(b.type=="WrongDatePeriod"){return}$.each(b,function(j,k){var h="";if(widgets.isLadderBased(k.OptionType)){h="plus"}var l=$("<tr data-id='"+k.ID+"' class='"+h+"'></tr>");$.each($("[data-widget=pastExpiriesTable]").find("thead tr th"),function(m,n){switch($(n).attr("data-column")){case"asset":var r=$("<td class='assetname'></td>");$(r).html(k.AssetsName);break;case"expiryDate":var r=$("<td class='expirydate'></td>");var q=parseInt(k.ExpireAtTimeStamp);$(r).html(widgets.getDate(q,helper.dateFormats.masks.normalDateTime));break;case"expiryRate":var r=$("<td class='expiryrate'></td>");$(r).html(k.ExpiryRate);break;case"chart":var r=$("<td></td>");var i=new Date();var q=parseInt(k.ExpireAtTimeStamp);var p=new Date(i.setMonth(i.getMonth()-2));if(new Date(q)>p){var o='<input class="pastExpiriesChartButton" type="button" value="'+widgetMessage.chart+'"></input>';$(r).addClass("pastExpiriesChartWrapper").append(o);break}default:}$(l).append(r)});$(a).append(l)});$(window).trigger(widgets.events.pastExpiriesTableProcessOptions)},pastExpiriesChartButtonClick:function(c){var e=pastExpiriesTableWidget;e.pastExpiriesChartRemove();$(this).addClass("clicked");var d=$(this).closest("tr").data("id");var a=$('<div id="pastExpiriesChart" class="pastExpiriesChart"><div class="pastExpiriesChartTitle">'+e.labelsContainerElement(this)+'</div><a class="pastExpiriesChartClose" href="javascript:void(0)">x</a><div class="chart"></div></div>');e.drawChartAndTablePastExpiries(d);var b=$(this).position();var f=$(this).outerWidth();a.css({position:"absolute",top:b.top,left:b.left+f});$(this).after(a)},labelsContainerElement:function(c){var d=$(c).closest("tr").find(".assetname").html();var a=$(c).closest("tr").find(".expirydate").html();var b=$(c).closest("tr").find(".expiryrate").html();var e='<div class="pastExpiriesAssetNameTitle"><span class="pastExpiriesExpiryNameLabel">'+widgetMessage.Asset_Name+"</span>"+d+'</div><div class="pastExpiriesExpiryDateTitle" ><span class="pastExpiriesExpiryDateLabel">'+widgetMessage.Expiry_Date+"</span>"+a+'</div><div class="pastExpiriesExpiryRateTitle" ><span class="pastExpiriesExpiryRateLabel">'+widgetMessage.Expiry_Rate+"</span>"+b+"</div>";return e},pastExpiriesChartRemove:function(){$(".pastExpiriesChartButton").removeClass("clicked");$("#pastExpiriesChart").remove()},drawChartAndTablePastExpiries:function(b){var a=this;widgets.api.getPastExpiriesChartData(b,function(c){a.processChartAndTable(b,c)})},processChartAndTable:function(f,a){if(a.code!=200){return}var d;var e=JSON.parse(a.data);var c=e.expireDate;var g=e.accuracy;for(var b=0;b<e.shortHistory.length;b++){if(c==e.shortHistory[b][0]){d=e.shortHistory[b][1];break}}pastExpiriesTableWidget.createCustomersChart(f,e,d,c);pastExpiriesTableWidget.createCustomersTable(e.shortHistory,c,g)},createCustomersChart:function(e,d,c,b){pastExpiriesTableWidget.chart=$.extend({},iChart);pastExpiriesTableWidget.chart.init({baseUrl:widgets.baseUrl,enableChartGaps:false,});pastExpiriesTableWidget.chart.placeholder=$(".chart").get(0);d=helper.updateHistoryPricesOffset(d);var a={optionHistoryPrice:d.history,highPrice:d.price.to,lowPrice:d.price.from,startOptionHistoryTime:d.date.from.timestamp,endOptionHistoryTime:d.date.to.timestamp,AssetsAccuracy:d.accuracy,clientUTCTimeDiff:0,OptionID:e,OptionName:"chart",OptionExpiryDate:b,HideLastPriceIndicator:true,OptionExpiryRate:c,};Highcharts.setOptions({global:{useUTC:false}});pastExpiriesTableWidget.chart.buildChart(a);$(".highcharts-markers image").hide()},createCustomersTable:function(b,d,f){var g='<table class="pastExpiriesChartTable">';g+='<tr><th class="firstTh"><label class=tableExpiryRate>'+widgetMessage.Expiry_Rate+'</label></th><th class="secondTh"><label class=tableTimeStamp">'+widgetMessage.Time_Stamp+"</label></th></tr>";for(var c=0;c<b.length;c++){var e=b[c][1];e=e.toFixed(f);var a=helper.formatDate(b[c][0],helper.dateFormats.masks.isoTime);g+='<tr class="'+((b[c][0]==d)?"highlighed":"standard")+'"><td><span>'+e+"</span></td><td><span>"+a+"</span></td></tr>"}g+="</table>";$(".chart").after(g)},hideBlink:function(){}};
var pastExpiriesToDateWidget={init:function(){var c=this;var b=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var a=(widgets.dateFormat?widgets.dateFormat:"dd MM yy");$(c.element).val($.datepicker.formatDate(a,widgets.getDate(b)));$(c.element).datepicker({dateFormat:a});helper.translateDatepicker($(c.element));$(c.element).show()}};
var payoutWidget={init:function(){var a=this;$(a.elements).show();$(a.elements).addClass("widgetPayout");$(window).on(widgets.events.linkOptionUpdated,function(){if(!widgets.links[a.link].option){return}$(a.elements).val(widgets.links[a.link].option.id);$(a.elements).html(widgets.links[a.link].option.payout);a.updateOption(widgets.links[a.link].option);$(window).trigger(widgets.events.payoutUpdated,a.link)});$(window).on(widgets.events.updatePayoutType+" "+widgets.events.updateTurboExpire+" "+widgets.events.changeLadderContracts,function(){a.updateOption(widgets.links[a.link].option);$(window).trigger(widgets.events.payoutUpdated,a.link)});$(window).on(widgets.events.changeDynamicPayout,function(){if(!widgets.links[a.link].option||!widgets.links[a.link].payout){return}var b=widgets.links[a.link].payout.profit;$(a.elements).html(helper.formatPayout(widgets.links[a.link].payout.profit));$(window).trigger(widgets.events.payoutUpdated,a.link)})},updateOption:function(e){var h=this;if(widgets.links[h.link].option.id==e.id){if(h.game=="turboBinary"){var f=$("[data-widget="+h.game+"_"+h.link+"_expireTurbo] .activeRule").attr("data-ruleId");var g=false;$.each(e.rules,function(j,k){if(k.id==f||(typeof filterOnly30secOptions!="undefined"&&k.interval==0.5)){g=k;return true}});if(g){$(h.elements).html(helper.formatPayout(g.payout))}else{if(e.rules&&e.rules[0]&&e.rules[0].payout){e.rules.sort(function(j,i){return j.interval-i.interval});$(h.elements).html(helper.formatPayout(e.rules[0].payout))}}return}else{if(widgets.isLadderBased(widgets.game)){var b=(widgets.isLogged())?widgets.user.currencyFactor:parseFloat(widgets.settings.environment.CurrencyFactor);var a=widgets.payoutTotalUSD*b;var d=$("[data-widget="+widgets.game+"_"+h.link+"_contractsTradeDdl]").val();var c=helper.getCurrencySymbol();$(h.elements).html(helper.formatCurrency(c,a*d))}else{$(h.elements).html(helper.formatPayout(e.payout))}}}}};
var payoutAdvancedWidget={config:{payout:{html:'<span class="widgetPayoutAdvancedText"></span><span class="widgetPayoutAdvancedValue"></span>'}},preProcess:function(){var a=this},getInstance:function(){var a=this;return $(a.config.payout.html)},postProcess:function(){var a=this;$(this.element).show()},updateOption:function(a){var b=this;if(widgets.placeholders[b.name].option.id==a.id){var a=widgets.getOptionId(widgets.games[b.game].options,a.id);if(typeof payoutTypeWidget!="undefined"){return false}$(this.element).html(a.payout+100+"%")}}};
var payoutDynamicWidget={returnLoss:null,init:function(){var a=this;$(a.elements).show();$(a.elements).addClass("widgetDynamicPayout");$(window).on(widgets.events.linkOptionUpdated,function(){if(!widgets.links[a.link].option){return}a.updateOption(widgets.links[a.link].option)});$(window).on(widgets.events.updatePayoutType+" "+widgets.events.updateTurboExpire,function(){a.updateOption(widgets.links[a.link].option)})},initDropDown:function(b){var c=this;var a=b.payout;var d=b.returnOnLoss;c.returnLoss=b.returnOnLoss;if(d>0){widgets.links[c.link].payout={};widgets.links[c.link].payout.profit=a;widgets.links[c.link].payout.loss=d}$(c.elements).html("");for(i=0;i<5;i++){var e=d==0&&i==0?helper.formatPayout(a):helper.formatPayout(a)+" | "+helper.formatPayout(i*5+d-100);$(c.elements).append($("<option></option>").attr("value",a).attr("data-rol",i*5+d).text(e));a=a-5}$(c.elements).change(function(){var f=this;var g=$(f[f.selectedIndex]);widgets.links[c.link].payout={};widgets.links[c.link].payout.profit=parseInt(g.attr("value"));widgets.links[c.link].payout.loss=parseInt(g.attr("data-rol"));$(window).trigger(widgets.events.changeDynamicPayout,[g,c.link])});$(window).on(widgets.events.linkOptionUpdated,function(f){if(c.returnLoss==0){widgets.links[c.link].payout=undefined}})},updateOption:function(a){var d=this;if(widgets.links[d.link].option.id==a.id){if(d.game=="turboBinary"){var b=$("[data-widget="+d.game+"_"+d.link+"_expireTurbo] .activeRule").attr("data-ruleId");var c=false;$.each(a.rules,function(e,f){if(f.id==b){c=f;return true}});if(c){d.initDropDown(a)}return}d.initDropDown(a)}}};
var payoutTypeWidget={storageName:"payoutType",init:function(){var a=this;var b=localStorage.getItem(a.storageName)||"return";widgets.payoutType=b;a.element.html("").append('<option value="return">Return</option><option value="fractional">Fractional</option><option value="decimal">Decimal</option><option value="moneyline">Moneyline</option><option value="simple">Simple</option>').val(b).change(function(){var c=$(this).val();widgets.payoutType=c;localStorage.setItem(a.storageName,c);$(window).trigger(widgets.events.updatePayoutType)}).show()},getSimple:function(a){return helper.getSimple(a)},getFraction:function(a){return helper.getFraction(a)},getDecimal:function(a){return helper.getFraction(a)},getReturn:function(a){return helper.getReturn(a)},getMoneyline:function(a){return helper.getMoneyline(a)}};
var quickDemoUserWidget={init:function(){var a=this;$("[data-widget=quickDemoUser][data-type=submit]").click(function(){a.initQuickDemoMode()})},initQuickDemoMode:function(){var a=this;$.removeCookie(widgets.tokenCookie);$(window).trigger(widgets.events.quickDemoLogin);widgets.api.addDemoUser(a.processDemoUser)},processDemoUser:function(a){if(typeof(a.data.type)=="undefined"){var b=a.data;$.cookie(widgets.tokenCookie,JSON.stringify(b),{path:"/"});widgets.token=b}$(window).trigger(widgets.events.loginIsCompleted,a)}};
var rateWidget={init:function(){var b=this;$(b.elements).show();widgets.isTraderoom=true;var a=[widgets.events.linkOptionUpdated,widgets.events.optionPricesUpdated,widgets.events.assetPricesUpdated];$(window).on(a.join(" "),function(e){var c=widgets.links[b.link].option;if(!c||(!widgets.prices[c.id]&&!widgets.assetsPrices[c.id])){return}var d="";if(c.rules){d=widgets.links[b.link].price.rate}else{if(widgets.prices[c.id]){d=widgets.prices[c.id].rate}}$(b.elements).html(d);if(e.type=="linkOptionUpdated"){helper.rateDeltaStateClear(b.element)}helper.rateDeltaState(b.elements)})}};
var rateAlphaWidget={init:function(){var b=this;$(b.element).show();var a=[widgets.events.linkOptionUpdated,widgets.events.optionPricesUpdated,widgets.events.assetPricesUpdated,widgets.events.mouseOver,widgets.events.mouseOut];$(window).on(a.join(" "),function(i,e){if(b.game=="range"){switch(i.type){case"mouseOver":var f=e.element;var h=e.link;$("[data-widget="+b.game+"_"+h+"_rateAlpha]").show();if($(e.element).data("widget")==(b.game+"_"+h+"_buttonAlpha")){$("[data-widget="+b.game+"_"+h+"_rateAlpha]").find('[data-type="buttonAlpha"]').show();$("[data-widget="+b.game+"_"+h+"_rateAlpha]").find('[data-type="buttonBeta"]').hide()}else{if($(e.element).data("widget")==(b.game+"_"+h+"_buttonBeta")){$("[data-widget="+b.game+"_"+h+"_rateAlpha]").find('[data-type="buttonAlpha"]').hide();$("[data-widget="+b.game+"_"+h+"_rateAlpha]").find('[data-type="buttonBeta"]').show()}}break;case"mouseOut":var f=e.element;var h=e.link;if(!$("[data-widget="+b.game+"_"+h+"_buttonAlpha]").hasClass("isClicked")&&!$("[data-widget="+b.game+"_"+h+"_buttonBeta]").hasClass("isClicked")){$("[data-widget="+b.game+"_"+h+"_rateAlpha]").hide()}if(!$(".widgetButtonAlpha").hasClass("isClicked")&&!$(".widgetButtonBeta").hasClass("isClicked")){$(b.element).hide()}break;case"linkOptionUpdated":$(b.element).hide();break}}var g=widgets.links[b.link].option;if(!g||(!widgets.prices[g.id]&&!widgets.assetsPrices[g.id])){return}if(i.type=="linkOptionUpdated"){helper.rateDeltaStateClear(b.elements)}if(b.game!="range"||$(".widgetButtonAlpha").hasClass("isClicked")||$(".widgetButtonAlpha:hover")){switch(b.game){case"touch":$(b.elements).html(widgets.prices[g.id].rateBeta);helper.rateDeltaState(b.elements);break;case"oneTouch":var d=(g.isUp)?"up":"down";var c="<div class='targetLblContentWrap'><div class='targetLblContent lbl'>"+widgetMessage.target+" </div><div class='targetLblContent img "+d+"'></div><div class='targetLblContent price'>"+widgets.prices[g.id].rateAlpha+"</div></div>";$(b.elements).html(c);helper.rateDeltaState(b.elements);break;case"range":break;default:$(b.elements).html(widgets.prices[g.id].rateAlpha);helper.rateDeltaState(b.elements);break}}});if(b.game=="range"){b.initRangeAlphaRates()}$(window).on(widgets.events.linkOptionUpdated+" "+widgets.events.optionPricesUpdated+" "+widgets.events.assetPricesUpdated,function(f){var e=widgets.links[b.link].option;if(!e||(!widgets.prices[e.id]&&!widgets.assetsPrices[e.id])){return}if(b.game=="range"){var c=$("[data-widget="+b.game+"_"+b.link+"_rateAlpha]").find('[data-type="buttonAlpha"]');var d=$("[data-widget="+b.game+"_"+b.link+"_rateAlpha]").find('[data-type="buttonBeta"]');c.html("");d.html("");c.html(widgets.prices[e.id].rateAlpha.upperPrice);d.html(widgets.prices[e.id].rateBeta.upperPrice);helper.rateDeltaState([c,d])}})},initRangeAlphaRates:function(){var b=this;var a=$("[data-widget="+b.game+"_"+b.link+"_rateAlpha]");var c=$('<span data-type="buttonAlpha"></span><span data-type="buttonBeta"></span>');a.append(c)}};
var rateBetaWidget={init:function(){var b=this;$(b.element).show();var a=[widgets.events.linkOptionUpdated,widgets.events.optionPricesUpdated,widgets.events.assetPricesUpdated,widgets.events.mouseOver,widgets.events.mouseOut];$(window).on(a.join(" "),function(g,c){if(b.game=="range"){switch(g.type){case"mouseOver":var d=c.element;var f=c.link;$("[data-widget="+b.game+"_"+f+"_rateBeta]").show();if($(c.element).data("widget")==(b.game+"_"+f+"_buttonAlpha")){$("[data-widget="+b.game+"_"+f+"_rateBeta]").find('[data-type="buttonBeta"]').hide();$("[data-widget="+b.game+"_"+f+"_rateBeta]").find('[data-type="buttonAlpha"]').show()}else{if($(c.element).data("widget")==(b.game+"_"+f+"_buttonBeta")){$("[data-widget="+b.game+"_"+f+"_rateBeta]").find('[data-type="buttonBeta"]').show();$("[data-widget="+b.game+"_"+f+"_rateBeta]").find('[data-type="buttonAlpha"]').hide()}}break;case"mouseOut":var d=c.element;var f=c.link;if(!$("[data-widget="+b.game+"_"+f+"_buttonAlpha]").hasClass("isClicked")&&!$("[data-widget="+b.game+"_"+f+"_buttonBeta]").hasClass("isClicked")){$("[data-widget="+b.game+"_"+f+"_rateBeta]").hide()}if(!$(".widgetButtonAlpha").hasClass("isClicked")&&!$(".widgetButtonBeta").hasClass("isClicked")){$(b.element).hide()}break;case"linkOptionUpdated":$(b.element).hide();break}}var e=widgets.links[b.link].option;if(!e||(!widgets.prices[e.id]&&!widgets.assetsPrices[e.id])){return}if(g.type=="linkOptionUpdated"){helper.rateDeltaStateClear(b.elements)}if(b.game!="range"||$(".widgetButtonBeta").hasClass("isClicked")||$(".widgetButtonBeta:hover")){switch(b.game){case"touch":$(b.elements).html(widgets.prices[e.id].rateAlpha);helper.rateDeltaState(b.elements);break;case"range":break;default:$(b.elements).html(widgets.prices[e.id].rateBeta);helper.rateDeltaState(b.elements);break}}});if(b.game=="range"){b.initRangeBetaRates()}$(window).on(widgets.events.linkOptionUpdated+" "+widgets.events.optionPricesUpdated+" "+widgets.events.assetPricesUpdated,function(f){var e=widgets.links[b.link].option;if(!e||(!widgets.prices[e.id]&&!widgets.assetsPrices[e.id])){return}if(b.game=="range"){var c=$("[data-widget="+b.game+"_"+b.link+"_rateBeta]").find('[data-type="buttonAlpha"]');var d=$("[data-widget="+b.game+"_"+b.link+"_rateBeta]").find('[data-type="buttonBeta"]');c.html("");d.html("");c.html(widgets.prices[e.id].rateAlpha.lowerPrice);d.html(widgets.prices[e.id].rateBeta.lowerPrice);helper.rateDeltaState([c,d])}})},initRangeBetaRates:function(){var a=this;var b=$('<span data-type="buttonAlpha"></span><span data-type="buttonBeta"></span>');$("[data-widget="+a.game+"_"+a.link+"_rateBeta]").append(b)}};
var rateRiskWidget={init:function(){var c=this;$(c.elements).show();widgets.isTraderoom=true;var b;var a=[widgets.events.linkOptionUpdated,widgets.events.optionPricesUpdated,widgets.events.assetPricesUpdated,widgets.events.buttonAlphaClick,widgets.events.buttonBetaClick];$(window).on(a.join(" "),function(j){var e=$(c.elements);var i=widgets.links[c.link];var h=i.price;b=i.option;if(!b||(!widgets.prices[b.id]&&!widgets.assetsPrices[b.id])){return}var g="";if(b.rules){g=h.rate}else{if(h&&typeof(i.isAlpha)!=="undefined"&&i.isAlpha!==null){if(j.type=="buttonAlphaClick"||j.type=="buttonBetaClick"){priceHelper.updateOptionPrice(h,i)}var k=i.isAlpha===true;var f=h.riskPrice;var d=(typeof(f)!=="undefined"&&f!==null&&f.modified);switch(i.price.type){case"Binary":g=d?f.rate:h.rate;break;case"Touch":if(k==true){g=d?f.rateBeta:h.rateBeta}else{g=d?f.rateAlpha:h.rateAlpha}break;case"OneTouch":g=d?f.rateAlpha:h.rateAlpha;break;case"Range":if(k==true){g=d?(f.rateAlpha.upperPrice+" "+f.rateAlpha.lowerPrice):(h.rateAlpha.upperPrice+" "+h.rateAlpha.lowerPrice)}else{g=d?(f.rateBeta.upperPrice+" "+f.rateBeta.lowerPrice):(h.rateBeta.upperPrice+" "+h.rateBeta.lowerPrice)}break}}}e.html(g);if(j.type=="linkOptionUpdated"){helper.rateDeltaStateClear(c.element)}helper.rateDeltaState(c.elements)})},};
var registrationWidget={isProcessed:false,countries:[],widgetName:"registration",nonExistingAgentText:"",base64String:null,elementCache:{},allLanguagesExp:/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC -.']*$/,initialResources:{},expressions:{email:/\S+@\S+\.\S+/,firstName:"",lastName:"",secondaryPhone:/^[0-9]+$/,phone:/^[0-9]+$/,birthDate:/^([0-9]{4})-([0-9][0-9])-([0-9][0-9])+$/,title:/(mister|miss|mrs)/,agentEmail:/\S+@\S+\.\S+/},init:function(){var a=this;a.expressions.firstName=a.allLanguagesExp;a.expressions.lastName=a.allLanguagesExp;if(a.isProcessed){return}a=$.extend({},validationWidget,registrationWidget);a.elements.filter("[data-type=submit]").unbind("click");a.elements.filter("[data-type=submit]").click(function(b){a.submit(b)});a.updateGender();a.updateTitle();a.updateBirthDate();a.updateCountriesByMerge();a.updateLanguagesByMerge();a.updateCurrenciesByMerge();a.updateLocationByMerge();a.addPasswordStrengh();$(window).on(widgets.events.settingsLoaded,function(b){a.checkPromoCode()});$(document).on("click","input[value$='Update']",function(){a.updatePicture()});if($("input[value$='Update']").length>0){a.defaultPreview()}if(Object.keys(a.initialResources).length>0){widgets.api.getResources(a.initialResources,function(b){a.processInitialResources(b)})}a.hideAgentEmailValidation();a.isProcessed=true},customValidation:function(){var e=this;var a=e.elements.filter("[data-type=countryPhoneCode]");var b=e.elements.filter("[data-type=areaCode]");var g=e.elements.filter("[data-type=phone]");var d=e.elements.filter("[data-type=tos]");var c=/^[0-9]+$/;var f=true;if(!a.val().match(c)||!b.val().match(c)||!g.val().match(c)){e.addError(g.attr("data-type"),g.attr("data-regexpMessage")?g.attr("data-regexpMessage"):widgetMessage.invalidSyntax);f=false}return f},addPasswordStrengh:function(){var b=this;var a=b.elements.filter("[data-type=password]");strengthMeterWidget.init();a.keydown(function(){strengthMeterWidget.validate(a.val())})},updateLanguagesByMerge:function(){var a=this;var b=a.elements.filter("[data-type=languageCode]");if(!$(b).length){return}a.initialResources.languages={}},updateCountriesByMerge:function(){var a=this;var b=a.elements.filter("[data-type=countryCode]");if(!$(b).length){return}a.initialResources.countries={}},updateCurrenciesByMerge:function(){var b=this;var a=b.elements.filter("[data-type=currencyCode]");if(!$(a).length){return}b.initialResources.currencies={}},updateLocationByMerge:function(){var a=this;var b=a.elements.filter("[data-type=countryCode]");if(!$(b).length){return}a.initialResources.location={}},updateTitle:function(){var b=this;var a=b.elements.filter("[data-type=title]");helper.setTitle(a)},updateGender:function(){var a=this;var b=a.elements.filter("[data-type=gender]");helper.setGender(b)},updateBirthDate:function(){var d=this;var b=d.elements.filter("[data-type=birthDay]");var c=d.elements.filter("[data-type=birthMonth]");var a=d.elements.filter("[data-type=birthYear]");helper.setDaysOfMonth(b);var e=d.elements.filter("[data-type=birthMonth]").attr("data-format")==undefined?"mmmm":d.elements.filter("[data-type=birthMonth]").attr("data-format");helper.setMonths(c,e);helper.setYears(a)},checkPromoCode:function(){var b=this;var a=widgets.settings.application.BonusPromotionalCodes.Value.toLowerCase();if(a=="false"){b.elements.filter("[data-type=promoCodeLabel]").hide();b.elements.filter("[data-type=promoCode]").hide()}},submit:function(b){var c=this;if(!c.validate()){return false}c.hideAgentEmailValidation();var d={};$.each(c.elements,function(e,f){d[$(f).attr("data-type")]=$(f).val()});d.base64Photo=c.base64String;d.phone=d.countryPhoneCode+"-"+d.areaCode+"-"+d.phone;d.subscribeToPromoEmail=c.elements.filter("[data-type=subscribeToPromoEmail]").is(":checked");d.subscribeToPromoSms=c.elements.filter("[data-type=subscribeToPromoSms]").is(":checked");if($.cookie("TLAffiliateID")){var a=URL.unserialize($.cookie("TLAffiliateID"));d.affiliateInfo={};d.affiliateInfo["affiliateId"]=a.AffiliateID;d.affiliateInfo["bannerId"]=a.ClickBannerID;d.affiliateInfo["subAffiliateId"]=a.SubAffiliateID;d.affiliateInfo["clickDateTime"]=a.ClickDateTime;if(a.AffDealID){d.affiliateInfo["dealId"]=a.AffDealID}}if(c.elements.filter("[data-type=agentEmail]")!=undefined){d.agentEmail=c.elements.filter("[data-type=agentEmail]").val()}$(window).trigger(widgets.events.registrationOnSubmit);widgets.api.addUser(d,function(e){c.processAddUser(e)})},birthYear:function(d){var g=this;var c=g.elements.filter("[data-type=birthDay]").val();var f=g.elements.filter("[data-type=birthMonth]").val();var b=g.elements.filter("[data-type=birthYear]").val();var a=new Date(b,f,c);var e=/^[0-9]+$/;if(!c.match(e)||!f.match(e)||!b.match(e)){g.addError($(d).attr("data-type"),$(d).attr("data-regexpMessage")?$(d).attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}if(!this.meetsMinimumAge(a,18)){g.addError($(d).attr("data-type"),$(d).attr("data-regexpMessage")?$(d).attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}return true},meetsMinimumAge:function(a,c){var b=new Date(a.getFullYear()+c,a.getMonth(),a.getDate());return(b<=new Date())},confirmPassword:function(a){var b=this;if(b.elements.filter("[data-type=password]").val()!=b.elements.filter("[data-type=confirmPassword]").val()){b.addError($(a).attr("data-type"),widgetMessage.passwordMissmatch);return false}return true},getCountry:function(a){var c=this;var b=false;$.each(c.countries,function(d,e){if(e.countryCode==a){b=e;return false}});return b},processInitialResources:function(a){var b=this;if(!a||!a.data){return false}if(a.data.currencies){b.processCurrencies(a.data.currencies)}if(a.data.languages){b.processLanguages(a.data.languages)}if(a.data.countries){if(a.data.location){b.processCountries(a.data.countries,a.data.location)}else{b.processCountries(a.data.countries,null)}}},processCountries:function(response,responseLocation){var widget=this;var data=eval(response);var countries=widget.elements.filter("[data-type=countryCode]");widget.countries=data.data;helper.setCountries(countries,data.data);if(responseLocation!=null){widget.processLocationCountry(responseLocation)}$(countries).change(function(){var country=widget.getCountry($(this).val());widget.elements.filter("[data-type=countryPhoneCode]").val(country.areaCode);widget.elements.filter("[data-type=currencyCode]").val(country.currencyCode)})},processCurrencies:function(b){var c=this;var a=$("[data-widget=registration][data-type=currencyCode]");c.currencies=b.data;helper.setCurrencies(a,b.data);$(window).trigger(widgets.events.currenciesLoaded)},processLanguages:function(a){var b=this;var c=b.elements.filter("[data-type=languageCode]");b.languages=a.data;helper.setLanguages(c,a.data)},processLocationCountry:function(response){var widget=this;var data=eval(response);var countries=widget.elements.filter("[data-type=countryCode]");var currencies=widget.elements.filter("[data-type=currencyCode]");var phoneCountryCode=widget.elements.filter("[data-type=countryPhoneCode]");widget.geolocation=data.data;helper.setLocation(countries,data.data);helper.setCurrency(currencies,data.data);helper.setPhoneCode(phoneCountryCode,data.data);$(window).trigger(widgets.events.locationLoaded)},processAddUser:function(a){var c=this;if(typeof(a.data.type)=="undefined"){var b=a.data;$.cookie(widgets.tokenCookie,JSON.stringify(b),{path:"/"});widgets.token=b}else{if(a.data.type=="Registration_AgentEmail"){c.elements.filter("[data-type=nonExistingAgentEmail]").text(a.data.text);c.elements.filter("[data-type=nonExistingAgentEmail]").show()}else{if(a.data.type=="Registration_CurrencyMismatch"){c.elements.filter("[data-type=agentCurrencyMismatch]").text(a.data.text);c.elements.filter("[data-type=agentCurrencyMismatch]").show()}}}$(window).trigger(widgets.events.registrationCompleted,a)},hideAgentEmailValidation:function(){var a=this;if(typeof a.elements.filter("[data-type=nonExistingAgentEmail]")!="undefined"){a.elements.filter("[data-type=nonExistingAgentEmail]").hide()}if(typeof a.elements.filter("[data-type=agentCurrencyMismatch]")!="undefined"){a.elements.filter("[data-type=agentCurrencyMismatch]").hide()}},updatePicture:function(){var b=this;var a=document.getElementById("fileInput");var c=document.getElementById("fileDisplayArea");a.addEventListener("change",function(h){var f=a.files[0];var g=/image.*/;if(f.type.match(g)){var d=new FileReader();d.onload=function(j){$(".defaultPicture").remove();c.innerHTML="";var i=new Image();i.src=d.result;c.appendChild(i);$("img:first").addClass("Jcrop_target");$("#fileDisplayArea .Jcrop_target").Jcrop({onChange:function(e){b.updatePreview(e)},onSelect:function(e){b.updatePreview(e)},aspectRatio:1,minSize:[100,100],setSelect:[0,0,100,100],})};d.readAsDataURL(f)}else{$(window).trigger(widgets.events.invalidFileType)}})},updatePreview:function(f){var d=this;if(parseInt(f.w)>0){var e=$("img:first")[0];var a=$(".preview")[0];var b=a.getContext("2d");b.drawImage(e,f.x,f.y,f.w,f.h,0,0,a.width,a.height);console.log(f.x,f.y,f.w,f.h)}d.base64String=$(".preview").get(0).toDataURL("image/png");d.base64String=d.base64String.replace(/^data:image\/(png|jpg);base64,/,"")},defaultPreview:function(){var c=this;var d=$("img:first")[0];var a=$(".myCanvas")[0];var b=a.getContext("2d");b.drawImage(d,0,0,a.width,a.height,0,0,a.width,a.height);c.base64String=$(".myCanvas").get(0).toDataURL("image/png");c.base64String=c.base64String.replace(/^data:image\/(png|jpg);base64,/,"")}};
var resetPasswordWidget={widgetName:"resetPassword",expressions:{email:/\S+@\S+\.\S+/},btnClicked:false,init:function(){var a=this;a=$.extend(validationWidget,a);a.elements.filter("[data-type=submit]").click(function(){if(!a.btnClicked){a.btnClicked=true;a.submit()}})},submit:function(){var c=this;if(!c.validate()){c.btnClicked=false;return false}var b=c.elements.filter("[data-type=error]");var a=c.elements.filter("[data-type=email]");b.hide();widgets.api.resetPassword(a.val(),function(d){c.processResetPassword(d)})},processResetPassword:function(a){var b=this;b.btnClicked=false;$(window).trigger(widgets.events.resetPassword,a)},message:function(b){var a=$("[data-widget=resetPassword][data-type=error]");a.html(b);a.show()}};
var returnOverUnderWidget={payoutValue:null,investAmount:null,init:function(){var a=this;$(a.elements).show();$(window).on(widgets.events.btnOverClicked,function(c,b){a.buildReturn(b)});$(window).on(widgets.events.btnUnderClicked,function(c,b){a.buildReturn(b)});$(window).on(widgets.events.linkOptionUpdated,function(b){a.removeReturn()});$(window).on(widgets.events.investAmountKeyup,function(b){a.investAmount=a.getInvestAmount();a.updateReturnValue(a.payoutValue)});$(window).on(widgets.events.payoutsOverUnder,function(c,b){a.payoutValue=b;a.updateReturnValue(b)});$(window).on(widgets.events.changeSpinnerValue,function(c,b){a.investAmount=b;a.updateReturnValue(a.payoutValue)})},buildReturn:function(c){var d=this;d.investAmount=d.getInvestAmount();var b=(d.payoutValue+100)/100*d.investAmount;var a=helper.getCurrencySymbol();$(d.element).html(a+b.toFixed(2))},updateReturnValue:function(a){var d=this;var c=(d.payoutValue+100)/100*d.investAmount;var b=helper.getCurrencySymbol();$(d.element).html(b+c.toFixed(2))},getInvestAmount:function(){var c=this;var b=widgets.all[c.game+"_"+c.link+"_investDropDown"]?widgets.all[c.game+"_"+c.link+"_investDropDown"].element:null;var a=widgets.all[c.game+"_"+c.link+"_investAmount"]?widgets.all[c.game+"_"+c.link+"_investAmount"].element:null;if(a){if(isNaN(parseInt(a.val()))){return 0}else{return a.val()}}else{return b.find("option:selected").val()}},removeReturn:function(){var a=this;$(a.element).html("")}};
var riskFactorWidget={init:function(){var b=this;$(window).on(widgets.events.optionPricesUpdated,function(e,c){if(!widgets.isLogged()||widgets.riskFactor==0){return}var d=widgets.links[b.link].price;$(".riskFactor").hide();$(".riskFactorHide").show()});var a=[widgets.events.buttonAlphaClick,widgets.events.buttonBetaClick];$(window).on(a.join(" "),function(d,c){if(!widgets.isLogged()||widgets.riskFactor==0){return}if(!c||c==window){return}$(".riskFactor").show();$(".riskFactorHide").hide()})},updateRate:function(f,c){if(!widgets.isLogged()||widgets.riskFactor==0){return c}var e=riskFactorWidget;var d=c.rate.indexOf(",")>0?",":".";var b=c.rate.split(d);var a=b[0];if(b[1]){a=b[1].length}switch(widgets.game){case"digital":if(widgets.links[f].isAlpha===true){c.rate=c.rate*(1+widgets.riskFactor)}if(widgets.links[f].isAlpha===false){c.rate=c.rate*(1-widgets.riskFactor)}break;case"touch":if(widgets.links[f].isAlpha===true){c.rateAlpha=parseFloat(c.rateAlpha*(1+widgets.riskFactor)).toFixed(a)}if(widgets.links[f].isAlpha===false){c.rateBeta=parseFloat(c.rateBeta*(1-widgets.riskFactor)).toFixed(a)}case"range":if(widgets.links[f].isAlpha===true){c.rateAlpha.upperPrice=parseFloat(c.rateAlpha.upperPrice*(1-widgets.riskFactor)).toFixed(a);c.rateAlpha.lowerPrice=parseFloat(c.rateAlpha.lowerPrice*(1+widgets.riskFactor)).toFixed(a)}if(widgets.links[f].isAlpha===false){c.rateBeta.upperPrice=parseFloat(c.rateBeta.upperPrice*(1+widgets.riskFactor)).toFixed(a);c.rateBeta.lowerPrice=parseFloat(c.rateBeta.lowerPrice*(1-widgets.riskFactor)).toFixed(a)}break}c.rate=parseFloat(c.rate).toFixed(a);return c}};
var selectedOptionWidget={tradableAssetId:0,tradableAssetName:"",init:function(){var a=this;widgets.isTraderoom=true;$(a.element).show();$(window).on(widgets.events.linkOptionUpdated,function(){a.updateActiveOption(widgets.links[a.link].option)})},updateActiveOption:function(b){var c=this;if(!b){return}switch(c.game){case"turboBinary":var d=b.id;var a=b.name;break;default:var d=b.tradableAssetId;var a=b.name;break}if(d!=c.tradableAssetId){c.tradableAssetId=d;c.tradableAssetName=a;$(c.elements).attr("data-assetId",d);if(c.tradableAssetId>0){$(c.elements).html(a)}else{$(c.elements).html("")}}}};
var showOffWidget={data:null,limit:5,offset:0,init:function(){var a=this;widgets.api.getShowOff(a.limit,a.offset,function(b,c){a.processShowOff(b,c)});setInterval(function(){widgets.api.getShowOff(a.limit,a.offset,function(b,c){a.processShowOff(b,c)})},5000)},processShowOff:function(a,b){var f=this;var e=a.data.results;var d=a.serverTime.timestamp;var c="";$.each(e,function(h,j){var g=f.calculateDate(j.timestamp)[0];var m=f.calculateDate(j.timestamp)[1];if(m>59){g=g+1;var o=g+" minutes ago "}else{if(g==0&&m<60){var o=m+" seconds ago"}else{var o=g+" minutes ago "}}var n=$('<li class="soItem" data-id="'+j.timestamp+'"></li>');var l=$('<div class="pImage"><div class="thumb '+(j.gender?"male":"female")+'"></div><div class="status '+(j.isOnline?"online":"offline")+'"></div></div>');var k=$('<div class="soInfo"><b>'+j.name+'</b><span class="win"> '+widgetMessage.winMessage+"<b> "+helper.formatCurrency(j.currencySymbol,j.profit)+'</b></span><br/><span data-timestamp="'+j.timestamp+'" class="soItemTime">'+o+"</span></div>");$(n).append(l,k);if($(f.element).find(".soItem").length>4){if(n.attr("data-id")==$(f.element).find('.soItem[data-id="'+j.timestamp+'"]').attr("data-id")){}else{$(f.element).find(".soItem:first").remove();$(f.element).append(n)}}else{$(f.element).append(n)}});widgets.timers.showoff=setInterval(function(){f.update()},1000)},update:function(){var a=this;$(a.element).find("[data-timestamp]").each(function(){var b=a.calculateDate($(this).data("timestamp"))[0];var c=a.calculateDate($(this).data("timestamp"))[1];if(c>59){b=b+1;$(this).html(b+" minutes ago ")}else{if(b==0&&c<60){$(this).html(c+" seconds ago")}else{$(this).html(b+" minutes ago ")}}})},calculateDate:function(d){var b=new Date();var a=new Date();var f=a-new Date(d);f/=1000;var e=Math.round(f%60);f=Math.floor(f/60);var c=Math.round(f%60);return[c,e]}};
var sliderWidget={isProcessed:false,offset:0,mouseover:false,settings:{travelocity:0.04},elementContainer:{},elementUL:{},elementLI:{},totalTravel:0,defTiming:0,maxElements:30,init:function(){if(sliderWidget.isProcessed){return false}var a=this;a.elementContainer=$('<div class="slider-container" style="display:block;overflow:hidden;"></div>');a.elementUL=$('<ul class="scroller" style="margin:0;padding:0;"></ul>');a.elementLI=$('<li style="position:relative;display:inline-block;list-style:none;left:0;"></li>');$(a.element).append(a.elementContainer.append(a.elementUL.append(a.elementLI)));widgets.api.getQuotes(a,function(b){a.processQuotes(b)})},processQuotes:function(a){var c=this;var b=new String();var d=0;a.data=a.data.slice(0,c.maxElements);$.each(a.data,function(f,g){var h=(g.Last<g.Price?"up":"down");var e=(g.Last<g.Price?"assetUp":"assetDown");b+='<div class="asset '+e+'" style="display: inline-block;"><span class="assetName">'+g.TradableAsset.Desc+'</span><span class="assetPrice '+h+'">'+g.Price+"</span></div>"});c.elementLI.append(b);c.initSlider()},initSlider:function(){var e=this;$(e.element).show();var a=0;var d=e.elementContainer.width();var c=1;var b=e.elementContainer.clone();b.css({position:"absolute",visibility:"hidden"}).appendTo("body");b.find("li").children().each(function(f){c+=jQuery(this,f).outerWidth(true);if(c<=d){a=f+2}});b.remove();e.totalTravel=c;e.defTiming=e.totalTravel/e.settings.travelocity;e.elementLI.width(c*3);firstElements=e.elementLI.children().slice(0,a).clone();e.elementLI.append(firstElements);e.elementLI.hover(function(){e.slidePause()},function(){var h=jQuery(this).offset();var f=h.left+c;var g=f/e.settings.travelocity;e.slideIt(f,g)});$(e.element).show();e.elementLI.css({transform:"translate3d(0px, 0px, 0px)"});e.slideIt(e.totalTravel,e.defTiming);$(window).on("loadingIsCompleted",function(){sliderWidget.elementLI.trigger("mouseleave")});e.isProcessed=true},slidePause:function(){var a=this;if(helper.getInternetExplorerVersion()>0){jQuery(a.elementLI).stop()}else{var b=a.elementLI.css("left");a.elementLI.css({left:b,"-webkit-animation":0});clearTimeout(widgets.timers.slideIt)}},slideIt:function(e,d){var a=this;var c=parseFloat(a.elementLI.css("left").slice(0,-2));var b=Math.abs(c)+e;if(helper.getInternetExplorerVersion()>0){a.elementLI.animate({left:"-="+e},d,"linear",function(){a.elementLI.css("left",0);a.slideIt(a.totalTravel,a.defTiming)})}else{a.elementLI.css({"-webkit-transition":"left "+d+"ms linear","-moz-transition":"left "+d+"ms linear","-o-transition":"left "+d+"ms linear","-transition":"left "+d+"ms linear",left:"-"+b+"px"});clearTimeout(widgets.timers.slideIt);widgets.timers.slideIt=setTimeout(function(){a.elementLI.css({left:0,"-webkit-transition":"left 0ms linear","-moz-transition":"left 0ms linear","-0-transition":"left 0ms linear","-transition":"left 0ms linear","-webkit-animation":0});a.slideIt(a.totalTravel,a.defTiming)},d)}},};
var slipsWidget={activeSlips:[],init:function(){var d=this;var c=$("[data-widget="+d.game+"_"+d.link+"_slips][data-type=slips]");var b=$("[data-widget="+d.game+"_"+d.link+"_slips][data-type=clearAll]");var a=$("[data-widget="+d.game+"_"+d.link+"_slips][data-type=submit]");$(window).on(widgets.events.setBetSelection,function(h,g,j){var f=d.getHtml(g,j);var e={option:g,isUp:j,rate:"",amount:""};d.activeSlips=[];d.activeSlips.push(e);c.html(f);c.find("[data-optionid="+g.id+"] .slipCloseBtn").click(function(){d.removeSlip(g.id)});c.find("[data-optionid="+g.id+"] .slipInvestAmount").keyup(function(l){var k=$(l.target).val();if(parseInt(k)!=NaN){d.updateSlipPrice(g.id,k)}});c.find("[data-optionid="+g.id+"] .slipInvestAmount").keypress(function(k){if(k.which!=8&&k.which!=0&&(k.which<48||k.which>57)){return false}})});$(window).on(widgets.events.optionsUpdated,function(g,f,e){$.each(e,function(h,j){switch(f){case"del":if(d.activeSlips.length>0&&j.id==d.activeSlips[0].option.id){d.removeSlip(j.id)}break}})});$(window).on(widgets.events.optionPricesUpdated,function(g,e){if(d.activeSlips.length==0){return}var h=d.activeSlips[0].option.id;if(e[h]!=undefined){var f=e[h];if(d.activeSlips[0].option.rate!=f.rate){d.activeSlips[0].option.rate=f.rate;c.find("[data-optionid="+f.id+"] .slipRate").text(f.rate)}}});$(window).on(widgets.events.tradeIsCompleted,function(f,e){if(e.code==200){d.removeAllSlips()}});$(window).on(widgets.events.updatePayoutType,function(e){d.updatePayoutType(e)});b.click(function(){d.removeAllSlips()});a.click(function(){d.submit()})},updateSlipPrice:function(e,d){var f=this;f.activeSlips[0].amount=d;var b=f.activeSlips[0].option.payout;var c=(b+100)*d/100;var a=helper.getCurrencySymbol();$("[data-widget="+f.game+"_"+f.link+"_slips][data-type=slips] [data-optionid="+e+"] .slipPayoutAmount").text(helper.formatCurrency(a,c))},updatePayoutType:function(b){var a=this;if(a.activeSlips.length>0){$("[data-widget="+a.game+"_"+a.link+"_slips][data-type=slips] .slipPayout").html(helper.formatPayout(a.activeSlips[0].option.payout))}},removeSlip:function(b){var a=this;for(i=0;i<a.activeSlips.length;i++){if(a.activeSlips[i].option.id==b){a.activeSlips.splice(i,1);$("[data-widget="+a.game+"_"+a.link+"_slips][data-type=slips] [data-optionid="+b+"]").remove()}}},removeAllSlips:function(){var a=this;a.activeSlips=[];$("[data-widget="+a.game+"_"+a.link+"_slips][data-type=slips] [data-optionId]").remove()},getHtml:function(c,g){var e=this;var f=g?widgetMessage.selectAlpha:widgetMessage.selectBeta;var b=widgetMessage.digital;switch(e.game.toLowerCase()){case"digital":f=g?widgetMessage.selectAlpha:widgetMessage.selectBeta;b=widgetMessage.digital;break}var a=helper.getCurrencySymbol();var d='<div class="slip" data-optionId="'+c.id+'"><img class="slipCloseBtn" /><span class="slipOptionName">'+c.name+'</span><span class="slipRate"></span><span class="slipPayout">'+helper.formatPayout(c.payout)+'</span><span class="slipGame">'+b+" | "+f+"</span><br /><span>"+widgetMessage.expire+': </span><span class="slipExpire">'+helper.formatExpiration(widgets.getDate(c.expirationTimestamp))+"</span><br /><span>"+widgetMessage.stake+'</span><input class="slipInvestAmount" placeholder="'+helper.formatCurrency(a,widgetMessage.amount)+'" /><span>'+widgetMessage.toWin+'</span><span class="slipPayoutAmount"></span></div>';return d},submit:function(){var d=this;if(d.activeSlips.length==0){return}var c=d.activeSlips[0].option;var b=d.activeSlips[0];var a=b.isUp?"call":"put";helper.setLastExecutedTrade(null,c,a,null,null,c.rate,0,b.amount,b.amount,d.game,0,0,b.isUp,null);switch(d.game.toLowerCase()){case"digital":widgets.api.addBinaryTradeOrder_v2(c.id,b.isUp,c.rate,b.amount,c.payout,c.returnOnLoss,0,false,false,null,widgets.api.setTradeCompleted);break}}};
var strengthMeterWidget={init:function(){var a='<div id="passwordDescription">&nbsp;</div>';var b='<div id="passwordStrength"></div>';$('[data-type="passwordStrength"]').html(a+b)},validate:function(a){var c=new Array();c[0]="Very Weak";c[1]="Weak";c[2]="Better";c[3]="Medium";c[4]="Strong";c[5]="Strongest";var b=0;if(a.length>6){b++}if((a.match(/[a-z]/))&&(a.match(/[A-Z]/))){b++}if(a.match(/\d+/)){b++}if(a.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)){b++}if(a.length>12){b++}$("#passwordDescription").html(c[b]);$("#passwordStrength").attr("class","strength"+b)}};
var strikeWidget={init:function(){var a=this;$(a.elements).show();$(window).on(widgets.events.btnOverClicked,function(c,b){a.buildStrike(b)});$(window).on(widgets.events.btnUnderClicked,function(c,b){a.buildStrike(b)});$(window).on(widgets.events.linkOptionUpdated,function(b){a.removeStrike()})},buildStrike:function(a){var b=this;$(b.element).html(a.strike)},removeStrike:function(){var a=this;$(a.element).html("")}};
(function(a){a.fn.stupidtable=function(c){return this.each(function(){var b=a(this);c=c||{};c=a.extend({},a.fn.stupidtable.default_sort_fns,c);b.on("click","th",function(){var k=b.children("tbody").find("tr"),i=a(this),g=0,d=a.fn.stupidtable.dir;b.find("th").slice(0,i.index()).each(function(){var e=a(this).attr("colspan")||1;g+=parseInt(e,10)});var f=i.data("sort-dir")===d.ASC?d.DESC:d.ASC,h=f==d.DESC?i.data("sort-desc")||i.data("sort")||null:i.data("sort")||null;null!==h&&(b.trigger("beforetablesort",{column:g,direction:f}),b.css("display"),setTimeout(function(){var e=[],n=c[h];k.each(function(p,o){var r=a(o).children().eq(g),q=r.data("sort-value"),r="undefined"!==typeof q?q:r.text();e.push(r)});var m=[],l=0;if(i.data("sort-dir")&&!i.data("sort-desc")){for(n=e.length-1;0<=n;n--){m.push(n)}}else{for(var j=e.slice(0).sort(n),n=0;n<e.length;n++){for(l=a.inArray(e[n],j);-1!=a.inArray(l,m);){l++}m.push(l)}}b.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");i.data("sort-dir",f).addClass("sorting-"+f);l=k.slice(0);for(j=n=0;j<m.length;j++){n=m[j],l[n]=k[j]}m=a(l);if(typeof $.fn.stupidtableInsertCallback!="undefined"){$.fn.stupidtableInsertCallback(b,m)}else{b.children("tbody").append(m)}b.trigger("aftertablesort",{column:g,direction:f});b.css("display")},10))})})};a.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};a.fn.stupidtable.default_sort_fns={"int":function(c,d){return parseInt(c,10)-parseInt(d,10)},"float":function(c,d){return parseFloat(c)-parseFloat(d)},string:function(c,d){return c<d?-1:c>d?1:0},"string-ins":function(c,d){c=c.toLowerCase();d=d.toLowerCase();return c<d?-1:c>d?1:0}}})(jQuery);
var tableWidget={isProcessed:false,filterByTradableAssetId:null,investAmountFlag:false,investAmounts:null,elementCache:{},filterByOptionType:"all",updatePayout:false,isPopulatedInvestDropDown:false,say:function(c,a){var d=this;if(!d.benchmark){d.benchmark=new Date();d.benchmarkTotal=new Date()}var b=new Date();var e=b.getTime()-d.benchmark.getTime();d.benchmark=b;if(a){if(typeof c=="string"){console.log(e+"ms "+c,a);return}console.log(e+"ms ",a,c);return}console.log(e+"ms ",c);return},init:function(){widgets.isTraderoom=true;$(window).on(widgets.events.loginIsInvalid,function(c,b){});var a=this;a.currentOptionsCache=[];if(a.isProcessed){return}a.start();if($(a.element).find("thead tr th[data-column=investDropDown]").length>0){$(window).on(widgets.events.tableIsLoaded,function(){a.populateInvestDropDown()})}},populateInvestDropDown:function(){var a=this;widgets.api.getInvestPrices(function(c){if(c.code!=200){return}a.isPopulatedInvestDropDown=true;a.investAmounts=c.data.investAmounts;var b=$(a.element).find("tbody tr");$.each(b,function(f,h){var d=$(h).find("select.tableInvestDropDown");var e=$(h).find(".tablePayoutAmount");var g=widgets.options[$(h).data("taid")];$(d).html(a.setInvestDropDown(h,d,g));a.setPayoutAmount(h,e,g)})})},start:function(){var b=this;b.isProcessed=true;$(b.element).addClass("scrollTable").append($('<tbody class="scrollContent"></tbody>')).find("thead").addClass("fixedHeader");var a=b.game.toLowerCase();if(a=="ladder"||a=="binary100"){$(b.element).addClass("ladder")}if(a=="laddertouch"){$(b.element).addClass("ladder")}$(window).on(widgets.events.userLogin,function(){if($(b.element).find("thead tr th[data-column=investDropDown]").length>0){if(b.isPopulatedInvestDropDown){return}b.populateInvestDropDown()}});$(this.element).show();if(typeof $(".optionTypeContainer").mCustomScrollbar!="undefined"){$(".optionTypeContainer").mCustomScrollbar()}$(window).on(widgets.events.optionsUpdated,function(g,e,d){var c=$(b.element).find("tbody").first();b.currentOptionsCache=$.map(c.find("tr"),function(j){return $(j).data("id")});if(b.updatePayout){var f=widgets.links[b.link].option.id}var h=c.detach();$.each(d,function(j,k){var l=typeof k.assetName!="undefined"?k.assetName:k.type;if(b.filterByOptionType!=l.toLowerCase()&&b.filterByOptionType!="all"){return}if(b.cache&&b.cache[k.id]){delete b.cache[k.id]}switch(e){case"add":if(b.updatePayout){b.updateTablePayout(k,h)}else{b.addOption(k,h)}break;case"del":b.delOptionId(k.id,h);break}});$(b.element).append(h);if(b.updatePayout){if(widgets.options[f]!=undefined){widgets.setLinkOption(b.link,f)}b.updatePayout=false}if(typeof b.filterByTradableAssetId=="string"){$("[data-widget="+b.game+"_"+b.link+"_table] tbody>tr").show();$("[data-widget="+b.game+"_"+b.link+"_table] tbody>tr:not([data-taid="+b.filterByTradableAssetId+"])").hide()}if($(b.element).find('thead tr th[data-column="signal"]').length>0){clearInterval(widgets.signalTimer);widgets.api.getSignal(function(j){b.processSignal(j)});widgets.signalTimer=setInterval(function(){widgets.api.getSignal(function(j){b.processSignal(j)})},60000)}$(window).trigger(widgets.events.tableIsLoaded)});$(window).on(widgets.events.filterOptionsByTAId,function(e,c,d){b.filterByTradableAssetId=c;$("[data-widget="+b.game+"_"+b.link+"_table] tbody>tr").show();$("[data-widget="+b.game+"_"+b.link+"_table] tbody>tr:not([data-taid="+c+"])").hide();var f=$("[data-widget="+b.game+"_"+b.link+"_table] tbody>tr[data-taid="+c+"]:first");$(window).trigger(widgets.events.click,f.parent());widgets.setLinkOption(b.link,f.attr("data-id"))});$(window).on(widgets.events.tableWidgetChangeInvestDropDown,function(f,e){var c=$(b.element).find("tbody tr[data-taId="+e.id+"]");var d=c.find(".tablePayoutAmount");d=b.setPayoutAmount(c,d,e)});$(window).on(widgets.events.updateTurboExpire,function(j,k){var d=$(b.element).find("tbody tr[data-taId="+k.taId+"]")||$(b.element).find("tbody tr.widgetTableActiveRow");var h=d.find("td .tableInvestDropDown");var g=h.find(":selected").val();var f=d.find("td .tablePayoutAmount");h.attr("data-ruleId",k.ruleId);var c=helper.getCurrencySymbol();var e=(k.payout+100)*g/100;f.text(helper.formatCurrency(c,e))});$(window).on(widgets.events.tableWidgetButtonBuyClick,function(c,j){if(b.game.toLowerCase()!="turbobinary"){return}var o=$(b.element).find("tbody tr[data-taId="+j.id+"]");var k=o.find(".tableInvestDropDown :selected").val();var e=o.find("[data-widget="+b.game+"_"+b.link+"_buttonAlpha]").hasClass("isClicked");var g=o.find("[data-widget="+b.game+"_"+b.link+"_buttonBeta]").hasClass("isClicked");if(e==false&&g==false){return}var p=o.find(".tableInvestDropDown").attr("data-ruleId")||$("[data-widget="+b.game+"_"+b.link+"_expireTurbo] .activeRule").attr("data-ruleId");var l=o.find(".widgetTradeRate").html();var h=e?"call":"put";helper.setLastExecutedTrade(p,j,h,null,null,l,0,k,k,b.game,0,0,e,null,(new Date()).getTime());var d=null;var m=null;var n=widgets.links[b.link];if(n&&n.price){if(n.price.marketrate){d=n.price.marketrate}if(n.price.PPDRuleID){m=n.price.PPDRuleID}}widgets.api.addTurboBinaryTradeOrder(j.id,p,e,l,k,false,false,d,m,widgets.api.setTradeCompleted);o.find("input").removeClass("isClicked");o.find("select").removeAttr("data-ruleId");o.find("select option:first").attr("selected","selected");var f={ruleId:j.rules[0].id,interval:j.rules[0].interval,payout:j.rules[0].payout,taId:j.id};$(window).trigger(widgets.events.updateTurboExpire,f)});$(window).on(widgets.events.linkOptionUpdated,function(e){if(!widgets.links[b.link]||!widgets.links[b.link].option||!widgets.options[widgets.links[b.link].option.id]){return}b.setActiveRow();var c=$(b.element).find("tbody tr.widgetTableActiveRow td .tableInvestDropDown");if(c.length>0){var d=c.attr("data-ruleId");if(d!=undefined){$("[data-widget="+b.game+"_"+b.link+"_expireTurbo] .expireTurboRuleInterval").removeClass("activeRule");$("[data-widget="+b.game+"_"+b.link+"_expireTurbo] [data-ruleId="+d+"]").addClass("activeRule")}}});$(window).on(widgets.events.tableIsLoaded,function(){if(!widgets.links[b.link]||!widgets.links[b.link].option||!widgets.options[widgets.links[b.link].option.id]){return}b.setActiveRow()});$(window).on(widgets.events.optionPricesUpdated,function(d,c){$.each(c,function(f,g){b.updateOption(g,true);var e=widgets.game.toLowerCase();if(widgets.isLadderBased(widgets.game)){b.updateLadderStrikePrice(g);if($(".tradeboxRightHide").css("display")=="none"){updateTradeBoxValues()}}})});$(window).on(widgets.events.assetPricesUpdated,function(d,c){$.each(c,function(e,f){b.updateOption(f,false)})});$(window).on(widgets.events.updatePayoutType,function(c){b.updatePayoutType(c)});$(window).on(widgets.events.resetWidget,function(){var c=$(b.element).find("tbody tr");$(c).remove();b.cache={}});$(window).on(widgets.events.tradeIsCompleted,function(d,c){if(c.code==400){b.disableStrikeButtons(d)}});$(window).on(widgets.events.strikeLevelTouched,function(d,c){b.disableStrikeButtons(d)});$(window).on(widgets.events.noOptions,function(e,c){var d=$(b.element).find("tbody tr");if(d.length>0){d.remove()}});$(window).on(widgets.events.ladderOptionClosing,function(e,c){var d=$(b.element).find("span[id*=putBtn"+c.id+"_]");d.removeClass("disabled").addClass("disabled");var f=$(b.element).find("span[id*=callBtn"+c.id+"_]");f.removeClass("disabled").addClass("disabled")});$(window).on(widgets.events.loginIsCompleted,function(c){b.updatePayout=true});if($.mobile){b.element.on("tap","tr",function(){var c=typeof $(this).data("id")=="string"?$(this).data("taid"):$(this).data("id");$(window).trigger(widgets.events.click,$(this));widgets.setLinkOption(b.link,c)})}else{b.element.on("click","tr",function(){var c;if(typeof $(this).data("id")=="number"){c=$(this).data("id")}else{if($(this).data("taid")){c=$(this).data("taid")}}if(c){$(window).trigger(widgets.events.click,$(this));widgets.setLinkOption(b.link,c)}})}$(b.element).stupidtable();if(widgets.isLadderBased(b.game)){$(b.element).bind("aftertablesort",function(d,e){var c=$(b.element).find("tbody").find("tr.ladder:visible");var f=$(b.element).find("tbody").find("tr.ladder:visible").attr("data-optid");c.remove();$(c).insertAfter($(b.element).find('tr[data-id="'+f+'"]'))})}b.sortTable=setInterval(function(){if($(b.element).find("tbody tr").length>0){clearInterval(b.sortTable);$(b.element).find("thead tr th[data-column=name]").trigger("click",this)}},200);if(widgets.isLadderBased(b.game)){b.updateOptionStatus=setInterval(function(){b.updateOptions()},5000)}},processSignal:function(a){var c=this;var b=a.data;$(c.element).find("td div.signal").removeClass("signal");$.each(b,function(e,f){var g=$(c.element).find('td[data-taid="'+f.TAID+'"]');if(f.Strength==0||f.Strength==1||f.Strength==2){f.Strength=1}else{if(f.Strength==3||f.Strength==4||f.Strength==5){f.Strength=2}else{f.Strength=3}}if(f.IsCall==1){g.attr("data-sort-value","1"+f.Strength.toString());g.attr("data-strength",f.Strength).attr("data-alpha",true).find(".signalBackground").removeClass().addClass("signal").addClass("signalBackground").addClass("signalUp"+f.Strength)}else{g.attr("data-sort-value","0"+f.Strength.toString());g.attr("data-strength",f.Strength).attr("data-alpha",false).find(".signalBackground").removeClass().addClass("signal").addClass("signalBackground").addClass("signalDown"+f.Strength)}});var d=false;$.each($(c.element).find("tbody tr"),function(e,h){var g=$(h);if(g.find(".signal").length>0){var f=$(this).attr("data-id");g.show();if(!d){widgets.setLinkOption(c.link,f);d=true}}else{g.hide()}})},addOption:function(c,d){var f=this;if(!c||(f.currentOptionsCache.indexOf(c.id)>-1)){return}f.currentOptionsCache.push(c.id);var a="";if(widgets.isLadderBased(f.game)){a="plus"}var b=widgets.isLadderBased(f.game)?"":c.tradableAssetId;var e=$('<tr data-id="'+c.id+'" data-taid="'+b+'" class="'+a+'"></tr>');if(f.game.toString().toLowerCase()=="turbobinary"){e=$('<tr data-id="'+c.id+'" data-taid="'+c.id+'" class="'+a+'"></tr>')}$.each($(f.element).find("thead tr th"),function(x,j){var o=$("<td></td>");switch($(j).attr("data-column")){case"name":$(o).addClass("assetName");var y="";var n=c.type?c.type.toLowerCase():"";var C=c.assetName?c.assetName.toLowerCase():n;switch(C){case"currencies":y="A";break;case"indices":y="B";break;case"stocks":y="C";break;case"commodities":y="D";break}$(o).attr("data-sort-value",c.expirationTimestamp+y+c.name);if(f.game=="oneTouch"){var v=(c.isUp)?"up":"down";var u="<div class='oneTouchNameWrap'><div class='oneTouchName img "+v+"'></div><div class='oneTouchName lbl'>"+c.name+"</div></div>";$(o).html(u)}else{$(o).html(c.name)}break;case"buttonAlpha":var m='<input type="button" data-widget="'+f.game+"_"+f.link+'_buttonAlpha" value="Above" />';$(o).html(m);$(o).find("input").addClass("tableWidgetButtons");$(o).find("input").click(function(){$(o).parent("tr").find("input").removeClass("isClicked");$(o).find("input").addClass("isClicked")});break;case"buttonBeta":var q='<input type="button" data-widget="'+f.game+"_"+f.link+'_buttonBeta" value="Below" />';$(o).html(q);$(o).find("input").addClass("tableWidgetButtons");$(o).find("input").click(function(){$(o).parent("tr").find("input").removeClass("isClicked");$(o).find("input").addClass("isClicked")});break;case"buttonBuy":var t='<input type="button" data-widget="'+f.game+"_"+f.link+'_buttonBuy" value="Bet Now" />';$(o).html(t);$(o).find("input").click(function(){$(window).trigger(widgets.events.tableWidgetButtonBuyClick,[c])});break;case"selectAlpha":$(o).html(helper.formatPayout(c.payout));$(o).addClass("payoutCell");$(o).click(function(){$(window).trigger(widgets.events.setBetSelection,[c,true])});break;case"selectBeta":$(o).html(helper.formatPayout(c.payout));$(o).addClass("payoutCell");$(o).click(function(){$(window).trigger(widgets.events.setBetSelection,[c,false])});break;case"payoutAmount":var s='<span class="tablePayoutAmount"></span>';$(o).html(s);break;case"investDropDown":var B='<select class="tableInvestDropDown" />';$(o).change(function(){$(window).trigger(widgets.events.tableWidgetChangeInvestDropDown,[c])});$(o).html(B);break;case"rate":if(f.game=="turboBinary"){var w=widgets.assetsPrices[c.id]?widgets.assetsPrices[c.id].rate:""}else{var w=widgets.prices[c.id]?widgets.prices[c.id].rate:""}$(o).html('<span id="rate'+c.id+'" class="widgetTradeRate">'+w+"</span>");break;case"expire":$(o).attr("data-sort-value",c.expirationTimestamp);if(widgets.isLadderBased(f.game)){$(o).html(widgets.getDate(c.expirationTimestamp,helper.dateFormats.masks.isoShortTime))}else{$(o).html(helper.formatExpiration(widgets.getDate(c.expirationTimestamp)))}break;case"payout":$(o).addClass("payoutCell").prop("id","payout"+c.id).html(helper.formatPayout(c.payout));break;case"serialNo":$(o).addClass("ticketId");$(o).html("#"+c.serialNumber);break;case"signal":var g=2;var p=true;var r=c.tradableAssetId?c.tradableAssetId:c.id;$(o).attr("data-taid",r);$(o).attr("data-level",g);$(o).attr("data-alpha",p);$(o).html('<div class="signalBackground"/>');break;case"state":$(o).addClass("Status");var D="";var k=c.state.toLowerCase();var h=new Date(widgets.serverDateTime.dateTime);if(((c.expirationTimestamp-h.getTime())<c.disableInvestTimeInSeconds*1000)){k="waitexpiry"}if((h.getTime()<c.activeAtTimestamp)){k="loading"}if(h.getTime()>c.activeAtTimestamp&&((c.expirationTimestamp-h.getTime())>c.disableInvestTimeInSeconds*1000)){k="active"}var A=widgetMessage.openStatus?widgetMessage.openStatus:"Open";var l=widgetMessage.loadingStatus?widgetMessage.loadingStatus:"Loading";var z=widgetMessage.waitexpiryStatus?widgetMessage.waitexpiryStatus:"Closing";switch(k){case"active":D=A;$(o).attr("data-status","open");break;case"loading":D=l;$(o).attr("data-status","loading");break;case"waitexpiry":D=z;$(o).attr("data-status","closing");break}$(o).html(D)}$(e).append(o)});if(widgets.isLadderBased(f.game)){$(e).click(function(){$(window).trigger(widgets.events.clickedOptionRow,e);if($(e).hasClass("plus")){$(e).removeClass("plus");$(d).find("tr.minus").removeClass("minus").addClass("plus");$(e).addClass("minus");f.expandMultiTrade(e,f,c)}else{$(e).removeClass("minus");$(e).addClass("plus");f.collapseMultiTrade(d,c.id)}})}$(d).append(e)},updateOption:function(d,a){var e=this;if(!d){return}var c=document.getElementById("rate"+d.id);if(c){var b=c.innerHTML;if(parseFloat(d.rate)>=b){className="isMore"}else{className="isLess"}c.setAttribute("class","widgetTradeRate "+className);c.innerHTML=d.rate}},updateTablePayout:function(c,a){var d=this;if(!c){return}var b=a.find("#payout"+c.id);if(b.length>0){b.html(helper.formatPayout(c.payout))}},delOptionId:function(d,a){var c=this,b=a.find("tr[data-id="+d+"]");c.currentOptionsCache.pop(c.currentOptionsCache.indexOf(d));if($(b).next().hasClass("ladder")||$(b).next().hasClass("overUnder")){$(window).trigger(widgets.events.deleteOption);$(b).next().remove()}$(b).off("click");$(b).remove()},setActiveRow:function(){var b=this;var a=$(b.element).find("tbody");if(widgets.game=="turboBinary"){var c=$(a).find("tr[data-taid="+widgets.links[b.link].option.id+"]")}else{var c=$(a).find("tr[data-id="+widgets.links[b.link].option.id+"]")}$(a).find(".widgetTableActiveRow").removeClass("widgetTableActiveRow");$(c).addClass("widgetTableActiveRow");if(widgets.isLadderBased(widgets.game)){$(a).find(".callButtonClicked").removeClass("callButtonClicked");$(a).find(".touchButtonClicked").removeClass("touchButtonClicked");$(a).find(".putButtonClicked").removeClass("putButtonClicked");$(a).find(".noTouchButtonClicked").removeClass("noTouchButtonClicked");return}},updatePayoutType:function(c){var b=this;var a=$(b.element).find("tbody").first();$.each(widgets.options,function(d,e){if(e.payout){var f=$(a).find("tr[data-id="+e.id+"]").first();$(f).find(".payoutCell").html(helper.formatPayout(e.payout))}})},expandMultiTrade:function(f,e,c){var e=this;e.closeOtherLadders(f,c.id);var d=widgets.prices[c.id];var b=d.rate;if(d){var a='<tr  class="ladder" style="display:none" data-optId='+c.id+'><td class="expandedLadderTD" colspan="'+f.find("td").length+'" id=td_'+c.id+'><div class="strikeContentDivWrap">'+e.createStrikeRows(d,c.id,f)+"</div></td></tr>"}$(a).insertAfter(f).show();this.colorizeStrikeValues(c,b,true);e.bindTradeButtons(f.next())},createStrikeRows:function(d,c,n){var e=this;var a=0;var h="";var r=helper.getCurrencySymbol();var k=widgetMessage.strikeLabel?widgetMessage.strikeLabel:"Strike:";var q=widgetMessage.multiple?widgetMessage.multiple:"Multiple:";var o=widgetMessage.sellLabel?widgetMessage.sellLabel:"Sell:";var j,b,g,f,m,l;var p=widgets.isLogged()?widgets.user.currencyFactor:parseFloat(widgets.settings.environment.CurrencyFactor);if(widgets.game=="ladder"||widgets.game=="binary100"){tradeButtonClassCall="callButton";tradeButtonClassPut="putButton"}else{if(widgets.game=="ladderTouch"){tradeButtonClassCall="touchButton";tradeButtonClassPut="noTouchButton"}}$.each(d.payouts,function(t,s){if(widgets.game=="ladder"||widgets.game=="binary100"){callPrice=s.Call.toFixed(2);putPrice=s.Put.toFixed(2);f=s.SellCall;g=s.SellPut}else{if(widgets.game=="ladderTouch"){callPrice=s.Touch.toFixed(2);putPrice=s.NoTouch.toFixed(2);f=s.SellTouch;g=s.SellNoTouch}}m="";if(parseFloat(callPrice)==0||parseFloat(callPrice)/p==widgets.payoutTotalUSD||callPrice<0){m=" disabled";if(callPrice<0){callPrice="";r="";j="";f=""}}l="";if(parseFloat(putPrice)==0||parseFloat(putPrice)/p==widgets.payoutTotalUSD||putPrice<0){l=" disabled";if(putPrice<0){putPrice="";r="";b="";g=""}}j=helper.truncateDecimals((widgets.payoutTotalUSD*p/callPrice),2).toLowerCase()=="infinity"?"":helper.truncateDecimals((widgets.payoutTotalUSD*p/callPrice),2);b=helper.truncateDecimals((widgets.payoutTotalUSD*p/putPrice),2).toLowerCase()=="infinity"?"":helper.truncateDecimals((widgets.payoutTotalUSD*p/putPrice),2);if(n.length>0){e.disableButtons(c,n)}h+='<div class="strikeContentTable"><div class="strikeCell strikePrice"><span>'+k+'</span></br><span id="strikePrice'+c+"_"+a+'" class="widgetStrike isMore">'+t+'</span></div><div class="strikeCell strikePayout"><span>'+q+'</span> <span class="strikePayoutSpan" id="strikeCallPayout'+c+"_"+a+'">'+j+"</span></br><span>"+o+'</span> <span id="strikeCallSell'+c+"_"+a+'" class="sellPrice">'+helper.formatCurrency(r,f).replace(" ","")+'</span></div><div class="strikeCell strikeCall"><span class="'+tradeButtonClassCall+m+'" id="callBtn'+c+"_"+a+'"><span id="callAmount'+c+"_"+a+'" class="investAmount">'+helper.formatCurrency(r,callPrice).replace(" ","")+'</span></span></div><div class="strikeCell strikePut"><span class="'+tradeButtonClassPut+l+'" id="putBtn'+c+"_"+a+'"><span id="putAmount'+c+"_"+a+'" class="investAmount">'+helper.formatCurrency(r,putPrice).replace(" ","")+'</span></span></div><div class="strikeCell strikePayout"><span>'+q+'</span> <span class="strikePayoutSpan" id="strikePutPayout'+c+"_"+a+'">'+b+"</span></br><span>"+o+'</span> <span id="strikePutSell'+c+"_"+a+'" class="sellPrice">'+helper.formatCurrency(r,g).replace(" ","")+"</span></div></div>";a++});return h},disableButtons:function(b,a){$.each(Object.keys(widgets.options),function(c,e){var d=a.find(".Status").attr("data-status")!=undefined?a.find(".Status").attr("data-status").toLowerCase():"open";if(b==widgets.options[e].id&&d!="open"){callButtonDisabled=" disabled";putButtonDisabled=" disabled"}})},closeOtherLadders:function(){var b=this;var a=b.element.find("[data-optid]");if(a.length>0){a.remove()}},collapseMultiTrade:function(a,c){var b=a.find("tr[data-optId="+c+"]").first();b.fadeOut("slow");clearInterval(widgets.timers.updateStrikeNumbers)},updateLadderStrikePrice:function(h){var g=this;if(h.id!=widgets.links[g.link].option.id||h.payouts==null){$(".strikeContentLoading").hide();return}var p=[];var n=new Object();var f,c,k,j,o,d,n;var e=$("#td_"+h.id);var m="";var a=0;var q=widgets.isLogged()?widgets.user.currencyFactor:parseFloat(widgets.settings.environment.CurrencyFactor);var l=$(g.element).find("td[id=td_"+h.id+"] .strikeContentDivWrap .strikeContentTable").length>0?false:true;var m="";$.each(h.payouts,function(u,v){n=u;var D=helper.getCurrencySymbol();var A=h.type.toLowerCase();if(A=="ladder"||A=="binary100"){f=v.Call.toFixed(2);c=v.Put.toFixed(2);k=helper.truncateDecimals(v.SellCall,5);j=helper.truncateDecimals(v.SellPut,5)}else{if(A=="laddertouch"){f=v.Touch.toFixed(2);c=v.NoTouch.toFixed(2);k=helper.truncateDecimals(v.SellTouch,5);j=helper.truncateDecimals(v.SellNoTouch,5)}}o=helper.truncateDecimals((widgets.payoutTotalUSD*q/f),2).toLowerCase()=="infinity"?"":helper.truncateDecimals((widgets.payoutTotalUSD*q/f),2);d=helper.truncateDecimals((widgets.payoutTotalUSD*q/c),2).toLowerCase()=="infinity"?"":helper.truncateDecimals((widgets.payoutTotalUSD*q/c),2);var E="";var t="";var A=widgets.game.toLowerCase();if(A=="ladder"||A=="binary100"){E="callButton";t="putButton"}else{if(A=="laddertouch"){E="touchButton";t="noTouchButton"}}var B=$(g.element).find(".widgetTableActiveRow .Status").attr("data-status").toLowerCase();$("#strikePrice"+h.id+"_"+a).html(n);if(f>0){$("#strikeCallPayout"+h.id+"_"+a).html(o)}if(parseFloat(f)==0||parseFloat(f)/q==widgets.payoutTotalUSD||f<0){var w=$("#callBtn"+h.id+"_"+a);w.addClass("disabled");if(f<0){f="";D="";o="";k=""}if(w.hasClass("callButtonClicked")&&parseFloat(f)/q==widgets.payoutTotalUSD){w.removeClass("callButtonClicked").removeClass("callButton").addClass("callButton");var x=true;var C={strikeLevel:u,direction:x};$(window).trigger(widgets.events.strikeLevelTouched,C)}if(w.hasClass("touchButtonClicked")||(w.hasClass("touchButtonClicked")&&parseFloat(f)/q==widgets.payoutTotalUSD)){w.removeClass("touchButtonClicked").removeClass("touchButton").addClass("touchButton");var x=true;var C={strikeLevel:u,direction:x};$(window).trigger(widgets.events.strikeLevelTouched,C)}}else{if(B=="open"){$("#callBtn"+h.id+"_"+a).removeClass("disabled")}}if(parseFloat(c)==0||parseFloat(c)/q==widgets.payoutTotalUSD||c<0){var z=$("#putBtn"+h.id+"_"+a);z.addClass("disabled");if(c<0){c="";d="";j=""}if(z.hasClass("putButtonClicked")&&parseFloat(c)/q==widgets.payoutTotalUSD){z.removeClass("putButtonClicked").removeClass("putButton").addClass("putButton");var x=true;var C={strikeLevel:u,direction:x};$(window).trigger(widgets.events.strikeLevelTouched,C)}if(z.hasClass("noTouchButtonClicked")||(z.hasClass("noTouchButtonClicked")&&parseFloat(f)/q==widgets.payoutTotalUSD)){z.removeClass("noTouchButtonClicked").removeClass("noTouchButton").addClass("noTouchButton");var x=false;var C={strikeLevel:u,direction:x};$(window).trigger(widgets.events.strikeLevelTouched,C)}}else{if(B=="open"){$("#putBtn"+h.id+"_"+a).removeClass("disabled")}}$("#strikePutPayout"+h.id+"_"+a).html(d);$("#callAmount"+h.id+"_"+a).html(helper.formatCurrency(D,f).replace(" ",""));$("#putAmount"+h.id+"_"+a).html(helper.formatCurrency(D,c).replace(" ",""));$("#strikeCallSell"+h.id+"_"+a).html(helper.formatCurrency(D,k).replace(" ",""));$("#strikePutSell"+h.id+"_"+a).html(helper.formatCurrency(D,j).replace(" ",""));var s=$(g.element).find(".widgetTableActiveRow .Status").attr("data-status").toLowerCase();if(s!="open"){var y=$(g.element).find(".callButton").length>0?$(g.element).find(".callButton"):$(g.element).find(".touchButton");var r=$(g.element).find(".putButton").length>0?$(g.element).find(".putButton"):$(g.element).find(".noTouchButton");y.removeClass("disabled").addClass("disabled");r.removeClass("disabled").addClass("disabled")}a++});if(l){var b=$(g.element).find("td[id=td_"+h.id+"] .strikeContentDivWrap");b.html("");b.append(m);widgets.translate()}g.bindTradeButtons();if(!l){$(".strikeContentLoading").hide()}this.colorizeStrikeValues(widgets.links[g.link].option,h.rate,l)},bindTradeButtons:function(d){var c=this;if(typeof d!="undefined"){var b="";var e="";var a=widgets.game.toLowerCase();if(a=="ladder"||a=="binary100"){b="callButton callButtonClicked";e="putButton putButtonClicked"}else{if(a=="laddertouch"){b="touchButton touchButtonClicked";e="noTouchButton noTouchButtonClicked"}}d.find("span[id^=callBtn]").unbind("click");d.find("span[id^=callBtn]").click(function(){if(!$(this).hasClass("disabled")){c.resetSetTradeBtns(this,true,b,d)}});d.find("span[id^=putBtn]").unbind("click");d.find("span[id^=putBtn]").click(function(){if(!$(this).hasClass("disabled")){c.resetSetTradeBtns(this,false,e,d)}})}},resetSetTradeBtns:function(e,j,m,f){var d=this;$(".activeRow").removeClass("activeRow");$(e).parent().parent().addClass("activeRow");var o="";var c="";var k="";var h="";var l=widgets.game.toLowerCase();if(l=="ladder"||l=="binary100"){o="callButton";c="putButton";k="callButtonClicked";h="putButtonClicked"}else{if(l=="laddertouch"){o="touchButton";c="noTouchButton";k="touchButtonClicked";h="noTouchButtonClicked"}}f.find("span[id^=callBtn]").removeClass(k).addClass(o);f.find("span[id^=putBtn]").removeClass(h).addClass(c);$(e).toggleClass(m);showRight(j);var g=".activeRow ."+k;var b=".activeRow ."+h;var a=($(g).length>0)?$(g).parent().parent().find("span.widgetStrike").html():$(b).parent().parent().find("span.widgetStrike").html();var j=($(g).length>0)?true:false;var n={strikeLevel:a,direction:j};$(window).trigger(widgets.events.clickedStrikeButton,n)},colorizeStrikeValues:function(f,h,d){var b=this;var v=$(b.element).find("tbody").first();var x=$(v).find("tr[data-optid="+f.id+"]");if(x.length>0){var p=$(x).find("td .widgetStrike");var l=new Array();for(var u=0;u<p.length;u++){l.push(parseFloat(p[u].innerHTML))}var r=parseInt(l.length)-helper.binary_search_iterative(l.sort(),parseFloat(h))[0];var a=parseInt(l.length)-helper.binary_search_iterative(l.sort(),parseFloat(h))[1];$(x).find("td .widgetStrike").attr("class",function(j,k){return k.replace(/\bgreen_\S+/g,"").replace(/\bred_\S+/g,"")});$(x).find("td .widgetStrike").attr("class",function(j,k){return k.replace(/\bred_\S+/g,"")});var y=0;var c=0;y=Math.abs(parseFloat(h)-l[helper.binary_search_iterative(l.sort(),parseFloat(h))[1]]);c=Math.abs(parseFloat(h)-l[helper.binary_search_iterative(l.sort(),parseFloat(h))[0]]);var e=0;if(y>c){e=r-1}else{if(y<c){e=r}else{if(y==c){e=r-1}}}if(r==l.length){e=l.length-1}$(x).find(".strikeContentTable").removeClass("recommend");($($(p)[e]).parent().parent()).addClass("recommend");$(x).find(".strikeContentTable").removeClass("UpDownRecommend");($($(p)[e+1]).parent().parent()).addClass("UpDownRecommend");($($(p)[e-1]).parent().parent()).addClass("UpDownRecommend");var o=e-1;for(var s=0;s<e;s++){$(p[s]).addClass("green_"+o);o-=1}var q=0;for(var t=e+1;t<l.length;t++){$(p[t]).addClass("red_"+q);q+=1}if(d){var g=parseInt($(x).find(".strikeContentTable").first().outerHeight(true));var w=(e-2)*g;$(x).find(".strikeContentDivWrap").find(".widgetStrike.red_0").parent().parent().parent().scrollTop(w);if(r==l.length){$(x).find(".strikeContentDivWrap").find(".widgetStrike.green_0").parent().parent().parent().scrollTop(w)}}}},updateOptions:function(){var d=this;var b=new Date(widgets.serverDateTime.dateTime);var a=widgetMessage.openStatus?widgetMessage.openStatus:"Open";var c=widgetMessage.loadingStatus?widgetMessage.loadingStatus:"Loading";var e=widgetMessage.waitexpiryStatus?widgetMessage.waitexpiryStatus:"Closing";$.each(widgets.options,function(f,g){if(((g.expirationTimestamp-b.getTime())<g.disableInvestTimeInSeconds*1000)){d.updateColumnStatus(g,e,"closing");$(window).trigger(widgets.events.ladderOptionClosing,[g])}if((b.getTime()<g.activeAtTimestamp)){d.updateColumnStatus(g,c,"loading")}if(b.getTime()>g.activeAtTimestamp&&((g.expirationTimestamp-b.getTime())>g.disableInvestTimeInSeconds*1000)){d.updateColumnStatus(g,a,"open")}})},updateColumnStatus:function(d,b,c){var e=this;var a=$(e.element).find("tbody tr[data-id="+d.id+"] .Status");if(a.html()!=b){a.html(b);a.attr("data-status",c)}},disableStrikeButtons:function(d){var b="";var f="";var e="";var c="";var a=widgets.game.toLowerCase();if(a=="ladder"||a=="binary100"){b="callButton";f="putButton";e="callButtonClicked";c="putButtonClicked"}else{if(a=="laddertouch"){b="touchButton";f="noTouchButton";e="touchButtonClicked";c="noTouchButtonClicked"}}$(".activeRow").removeClass("activeRow");$("span[id^=callBtn]").removeClass(e).addClass(b);$("span[id^=putBtn]").removeClass(c).addClass(f)},setInvestDropDown:function(f,h,d){var e=this;var c="";var a=widgets.isLogged()?parseFloat(widgets.user.currencyFactor):parseFloat(widgets.settings.environment.CurrencyFactor);var b=helper.getCurrencySymbol();$.each(e.investAmounts,function(l,m){var k=m.value*a;var j=helper.formatCurrency(b,k);c+='<option value="'+k+'">'+j+"</option>"});h=$(h).html(c);var g=$(h).find(":first")[0].value;$(h).val(g);return"<div>"+$(h)[0].outerHTML+"</div>"},setPayoutAmount:function(f,j,c){var b=this;var k=$(f).find(".tableInvestDropDown");var d=k.find(":selected").val()||b.investAmounts[0].value;var h=k.attr("data-ruleId")?k.attr("data-ruleId"):c.rules[0].id;var g=0;for(i=0;i<c.rules.length;i++){if(c.rules[i].id==h){g=c.rules[i].payout;break}}var e=helper.getCurrencySymbol();var a=(g+100)*d/100;j=$(j).text(helper.formatCurrency(e,a));return j}};
var tableBaseWidget={isProcessed:false,filterByTradableAssetId:null,filterByOptionType:"all",updatePayout:false,isPopulatedInvestDropDown:false,columns:["name","expire","rate","payout"],elementCache:{$tbody:null},data:{assetsOptions:{},assetsSelectedOption:{},assetsCreatedOptions:{}},sayToConsole:false,init:function(){widgets.isTraderoom=true;var a=this;if(a.isProcessed){return}a.initColumns();a.initTableBody();a.initSorting();if(typeof a.afterInit=="function"){a.afterInit()}a.attachEvents();a.isProcessed=true;a.element.show()},initColumns:function(){var c=this;var a=c.element.attr("data-columns");if(a){var a=a.split(",");c.columns=[];$.each(a,function(d,e){c.columns.push(e)})}else{var b=c.element.find("thead tr th");if(b.size()>0){c.columns=[];$.each(b,function(e,f){var d=$(f).attr("data-column");if(d){c.columns.push(d)}})}}},initTableBody:function(){var a=this;a.elementCache.$tbody=$('<tbody class="scrollContent"></tbody>');a.element.addClass("scrollTable").append(a.elementCache.$tbody).find("thead").addClass("fixedHeader")},initSorting:function(){var a=this;a.element.stupidtable()},attachEvents:function(){var a=this;$(window).on(widgets.events.optionsUpdated,function(e,c,b,d){a.say("processOptionsUpdated start with "+b.length+" options");a.processOptionsUpdated(c,b,d);a.say("processOptionsUpdated end");$(window).trigger(widgets.events.tableIsLoaded)});$(window).on(widgets.events.updateTurboExpire,function(h,j){var c=a.element.find("tbody tr[data-taId="+j.taId+"]")||a.element.find("tbody tr.widgetTableActiveRow");var g=c.find("td .tableInvestDropDown");var f=g.find(":selected").val();var e=c.find("td .tablePayoutAmount");g.attr("data-ruleId",j.ruleId);var b=helper.getCurrencySymbol();var d=(j.payout+100)*f/100;e.text(helper.formatCurrency(b,d))});$(window).on(widgets.events.populateMarketAssets,function(b,c){a.elementCache.$tbody.empty();a.filterByOptionType=c;$(window).trigger(widgets.events.optionsUpdated,["add",widgets.options])});$(window).on(widgets.events.linkOptionUpdated,function(b){if(!widgets.links[a.link]||!widgets.links[a.link].option||!widgets.options[widgets.links[a.link].option.id]){return}a.setActiveOption()});$(window).on(widgets.events.tableIsLoaded,function(){if(!widgets.links[a.link]||!widgets.links[a.link].option||!widgets.options[widgets.links[a.link].option.id]){return}a.setActiveOption()});$(window).on(widgets.events.optionPricesUpdated,function(d,b){for(i in a.data.assetsSelectedOption){var c=b[a.data.assetsSelectedOption[i]];a.updateOptionRate(c,false)}});$(window).on(widgets.events.assetPricesUpdated,function(d,b){for(i in a.data.assetsSelectedOption){var c=b[a.data.assetsSelectedOption[i]];a.updateOptionRate(c,false)}});$(window).on(widgets.events.updatePayoutType,function(b){a.updatePayoutType(b)});$(window).on(widgets.events.resetWidget,function(){a.reset()});$(window).on(widgets.events.noOptions,function(c,b){a.reset()});$(window).on(widgets.events.loginIsCompleted,function(b){a.updatePayout=true});a.element.on("change",".expire-select",function(){var b=$(this).val();widgets.setLinkOption(a.link,b)});a.elementCache.$tbody.on("click","tr",function(){if($(this).attr("data-createdassetid")!=undefined){return}var c=$(this).attr("data-id"),b=a.data.assetsSelectedOption[c];if(!widgets.options[b]||!c){a.say("(click,tr) Invalid widget.data.assetsSelectedOption[assetId]")}if(widgets.links[a.link].option.id!=b){widgets.setLinkOption(a.link,b)}})},processOptionsUpdated:function(c,b,e){var f=this;f.loadingStart();var g=f.elementCache.$tbody.detach(),a=false;$.each(b,function(h,j){var k=f.game.toString().toLowerCase()=="turbobinary"?true:false,l=k?j.type:j.assetName;j.tradableAssetId=k?j.id:j.tradableAssetId;if(f.filterByOptionType!=l.toLowerCase()&&f.filterByOptionType!="all"){return}switch(c){case"add":if(!f.data.assetsOptions[j.tradableAssetId]){f.addAsset(j,g);f.data.assetsOptions[j.tradableAssetId]={};f.data.assetsSelectedOption[j.tradableAssetId]=j.id;a=true}if(f.updatePayout&&f.data.assetsSelectedOption[j.tradableAssetId]==j.id){f.updateOptionPayout(j)}else{f.addOption(j,g);f.data.assetsOptions[j.tradableAssetId][j.id]=j}break;case"del":f.deleteOption(j.id,g);delete f.data.assetsOptions[j.tradableAssetId][j.id];if(helper.isEmptyObject(f.data.assetsOptions[j.tradableAssetId])){f.deleteAsset(j.tradableAssetId,g);delete f.data.assetsOptions[j.tradableAssetId];delete f.data.assetsSelectedOption[j.tradableAssetId]}if(f.data.assetsSelectedOption[j.tradableAssetId]==j.id&&widgets.options[f.getSelectedOptionId(j.tradableAssetId)]){f.setAssetSelectedOption(j.tradableAssetId,widgets.options[f.getSelectedOptionId(j.tradableAssetId)])}else{if(h==(b.length-1)){f.setAssetSelectedOption(widgets.options[Object.keys(widgets.options)[0]].tradableAssetId,widgets.options[Object.keys(widgets.options)[0]])}}break}});$.each(e,function(h,j){switch(c){case"add":if(!f.data.assetsCreatedOptions[j.tradableAssetId]){f.addCreatedOption(j,g);f.data.assetsCreatedOptions[j.tradableAssetId]=j}break;case"del":f.deleteCreatedAsset(j.tradableAssetId,g);delete f.data.assetsCreatedOptions[j.tradableAssetId];break}});f.element.append(g);if(a){f.element.find("th").first().trigger("click",this)}$(window).trigger(widgets.events.tableOptionsUpdated);f.loadingEnd();if(f.updatePayout){var d=widgets.links[f.link].option.id;if(widgets.options[d]!=undefined){widgets.setLinkOption(f.link,d)}f.updatePayout=false}},addAsset:function(d,b){var f=this;if(!d){return}var a=f.game.toString().toLowerCase()=="turbobinary"?d.id:d.tradableAssetId,e='<tr data-id="'+a+'" data-taid="'+a+'" class="asset-'+a+'">';var c="";$.each(f.columns,function(g,h){var j="getColumn"+helper.ucfirst(h);if(f[j]){var k=f[j](d,h)}else{var k=f.getColumnDefault(d,h)}c+=k});var e='<tr data-id="'+a+'" data-taid="'+a+'" class="asset-'+a+'">'+c+"</tr>";b.append(e)},addCreatedOption:function(d,a){var c=helper.formatExpiration(new Date(d.activeAtTimestamp));var b='<tr data-createdAssetId="'+d.tradableAssetId+'"><td>'+d.name+'</td><td colspan="3">This option will be availabel at '+c+"</td></tr>";a.append(b)},deleteAsset:function(b,a){a.find(".asset-"+b).remove()},deleteCreatedAsset:function(b,a){a.find('[data-createdassetid="'+b+'"]').remove()},getColumnDefault:function(c,b){var d=this;var a=(c[b]?c[b]:"");var e='<td class="'+b+'">'+a+"</td>";return e},getColumnName:function(b,a){var d=this;var e="";var c=b.assetName?b.assetName.toLowerCase():b.type.toLowerCase();switch(c){case"currencies":e="A";break;case"indices":e="B";break;case"stocks":e="C";break;case"commodities":e="D";break}var e=e+"-"+b.name;var f='<td class="'+a+' assetName" data-sort-value="'+e+'">'+b.name+"</td>";return f},getColumnExpire:function(b,a){var c=this;var d='<td class="'+a+'"><select class="expire-select expire-'+b.tradableAssetId+'"></select></td>';return d},getColumnRate:function(c,b){var e=this;if(e.game=="turboBinary"){var d=widgets.assetsPrices[c.id]?widgets.assetsPrices[c.id].rate:""}else{var d=widgets.prices[c.id]?widgets.prices[c.id].rate:""}var a='<span id="rate'+c.id+'" class="widgetTradeRate">'+d+"</span>";var f='<td class="'+b+'">'+a+"</td>";return f},getColumnPayout:function(c,b){var d=this;var a='<span id="payout'+c.id+'" class="payoutCell">'+helper.formatPayout(c.payout)+"</span>";var e='<td class="'+b+'">'+a+"</td>";return e},addOption:function(d,b){var e=this;if(!d){return}var a=b.find(".expire-"+d.tradableAssetId);if(a.size()==0){return false}var c="<option class='option-"+d.id+"' data-timestamp='"+d.expirationTimestamp+"' value="+d.id+">"+helper.formatExpiration(widgets.getDate(d.expirationTimestamp))+"</option>";a.append(c)},deleteOption:function(b,a){a.find(".option-"+b).remove()},getSelectedOptionId:function(c){if(!c){return false}var b=this;var a=b.data.assetsSelectedOption[c];if(!widgets.options[a]){var a=b.elementCache.$tbody.find(".expire-"+c).val()}return a},updateOptionRate:function(d,a){var e=this;if(!d){return}var c=document.getElementById("rate"+d.id);if(c){var b=c.innerHTML;if(parseFloat(d.rate)>=b){className="isMore"}else{className="isLess"}c.setAttribute("class","widgetTradeRate "+className);c.innerHTML=d.rate}},updateOptionPayout:function(c,a){var d=this;if(!c){return}var a=a||d.elementCache.$tbody;var b=a.find("#payout"+c.id);if(b.length>0){b.html(helper.formatPayout(c.payout))}},updatePayoutType:function(d){var c=this;c.say("updatePayoutType start");c.loadingStart();var e=c.elementCache.$tbody;for(var a in c.data.assetsSelectedOption){var b=widgets.options[c.data.assetsSelectedOption[a]];if(b&&b.payout){e.find("#payout"+b.id).html(helper.formatPayout(b.payout))}}c.loadingEnd();c.say("updatePayoutType end")},setActiveOption:function(a){var c=this;var a=a||widgets.links[c.link].option;var d=c.game.toString().toLowerCase()=="turbobinary"?true:false;var e=d?a.id:a.tradableAssetId;c.elementCache.$tbody.find(".widgetTableActiveRow").removeClass("widgetTableActiveRow");var b=c.elementCache.$tbody.find(".asset-"+e);b.addClass("widgetTableActiveRow");c.setAssetSelectedOption(e,a,b)},setAssetSelectedOption:function(d,a,c){var b=this;b.data.assetsSelectedOption[d]=a.id;var c=c||b.elementCache.$tbody.find(".asset-"+d);c.find(".expire-"+d).val(a.id);c.find(".widgetTradeRate").attr("id","rate"+a.id);c.find(".payoutCell").attr("id","payout"+a.id);b.updateOptionPayout(a)},loadingStart:function(){var a=this;a.element.addClass("loading")},loadingEnd:function(){var a=this;a.element.removeClass("loading")},reset:function(){var a=this;a.elementCache.$tbody.empty();a.data.assetsOptions=[];a.data.assetsSelectedOption=[]},say:function(c,a){var d=this;if(!d.sayToConsole){return false}if(!d.benchmark){d.benchmark=new Date();d.benchmarkTotal=new Date()}var b=new Date();var e=b.getTime()-d.benchmark.getTime();d.benchmark=b;if(a){if(typeof c=="string"){console.log(e+"ms "+c,a);return}console.log(e+"ms ",a,c);return}console.log(e+"ms ",c);return},};
var tableMobileWidget={isFirstTimeLoading:true,columns:[],subColumns:[],expandmode:"multi",filterByOptionType:"all",init:function(){var a=this;widgets.isTraderoom=true;a.setColumns();a.initTable();$(window).on(widgets.events.optionsUpdated,function(c,b,d){a.updateTableByOptionType(b,d);if(a.isFirstTimeLoading){a.isFirstTimeLoading=false;$(window).trigger(widgets.events.tableIsLoaded)}});$(window).on(widgets.events.populateMarketAssets,function(b,c){$(a.element).find(".scrollContent").children().remove();a.filterByOptionType=c;a.updateTableByOptionType("add",widgets.options)});$(window).on(widgets.events.optionPricesUpdated,function(d,b){var c=[];$.each(b,function(f,g){a.updateInvestTime(g.id);var e=widgets.options[g.id];if(e!=undefined&&c.indexOf(e.tradableAssetId)==-1){c.push(e.tradableAssetId);a.updateRate(g,e.tradableAssetId)}})})},setColumns:function(){var a=this;a.columns=$(a.element).data("columns").split(",");a.subColumns=$(a.element).data("subcolumns").split(",")},initTable:function(){var a=this;if($(a.element).data("expandmode")!==undefined){a.expandmode=$(a.element).data("expandmode")}$(a.element).append($('<div class="scrollContent"></div>'));if($.mobile){$(a.element).on("tap","div[data-taid].assetRow",function(c){if(this.nextSibling!=null&&this.nextSibling.className=="optionsRow"){a.collapseRow(this)}else{if(a.expandmode=="single"){var b=a.element.find(".extended");if(b.length>0){b.each(function(){a.collapseRow(this)})}}a.expandRow(this,$(this).data("taid"))}c.preventDefault();c.stopPropagation()});$(a.element).on("tap","div[data-taid].optionsRow div[data-id]",function(b){a.setActiveOption(widgets.options[$(this).data("id")]);b.preventDefault();b.stopPropagation()})}else{$(a.element).on("click","div[data-taid].assetRow",function(c){if(this.nextSibling!=null&&this.nextSibling.className=="optionsRow"){a.collapseRow(this)}else{if(a.expandmode=="single"){var b=a.element.find(".extended");if(b.length>0){b.each(function(){a.collapseRow(this)})}}a.expandRow(this,$(this).data("taid"))}c.preventDefault();c.stopPropagation()});$(a.element).on("click","div[data-taid].optionsRow div[data-id]",function(b){a.setActiveOption(widgets.options[$(this).data("id")]);b.preventDefault();b.stopPropagation()})}},updateTableByOptionType:function(d,c){var f=this;var b=$(f.element).find(".scrollContent").first();var g=b.detach();var a=[];var e=[];if(d=="del"){$.each(widgets.options,function(h,k){if(a.indexOf(k.tradableAssetId)==-1){a.push(k.tradableAssetId)}})}$.each(c,function(h,k){if(f.filterByOptionType!=k.assetName.toLowerCase()&&f.filterByOptionType!="all"){return}switch(d){case"add":f.addRow(k,g);break;case"del":if(a.indexOf(k.tradableAssetId)==-1&&e.indexOf(k.tradableAssetId)==-1){e.push(k.tradableAssetId);f.delRow(k,g,true)}else{if(a.indexOf(k.tradableAssetId)>-1){f.delRow(k,g,false)}}break}});$(f.element).append(g)},addRow:function(d,b){if(!d||b.find("[data-taid="+d.tradableAssetId+"]").length>0){return}var g=this;var f='<div data-taid="'+d.tradableAssetId+'" class="assetRow">';for(var c=0;c<g.columns.length;c++){var a=g.columns[c];switch(a){case"name":f+='<div class="asset-name taid'+d.tradableAssetId+'">'+d.name+"</div>";break;case"marketRate":var e=widgets.prices[d.id]?widgets.prices[d.id].rate:"";f+='<div id="marketRate'+d.tradableAssetId+'" class="widgetTradeRate">'+e+"</div>";break}}f+="</div>";b.append(f)},delRow:function(b,a,e){if(e){var c=a.find("[data-taid="+b.tradableAssetId+"]");c.remove()}else{var d=a.find("[data-id="+b.id+"]");d.remove()}},expandRow:function(d,b){var c=[];$.each(widgets.options,function(k,h){if(h.tradableAssetId==b){c.push(h)}});c.sort(function(k,h){if(k.expirationDateTime>h.expirationDateTime){return 1}if(k.expirationDateTime<h.expirationDateTime){return -1}return 0});var f=this;if(c.length==0||$(f.element).find(".scrollContent div[data-taid="+b+"]").length>1){return}var g='<div data-taid="'+b+'" class="optionsRow">';for(i=0;i<c.length;i++){var e=c[i];g+='<div data-id="'+e.id+'">';for(j=0;j<f.subColumns.length;j++){var a=f.subColumns[j];switch(a){case"expire":g+='<div class="expiration-timestamp-wrap"><label class="expiration-timestamp-label">'+helper.formatDate(widgets.getDate(e.expirationTimestamp)).substring(4,15)+"</label>";g+='<div class="expiration-timestamp">'+helper.formatDate(widgets.getDate(e.expirationTimestamp)).substring(16,21)+"</div></div>";break;case"payout":g+='<div class="option-payout">'+helper.formatPayout(e.payout)+"</div>";break;case"investTime":g+='<div class="invest-time-wrap"><label class="invest-time-label">'+widgetMessage.timeToInvest+"</label>";g+='<div id="investTime'+e.id+'" class="invest-time"></div></div>';break}}g+="</div>"}g+="</div>";$(d).addClass("extended");$(g).insertAfter(d);f.scrollTop(d)},collapseRow:function(a){$(a).removeClass("extended");$(a.nextSibling).remove()},setActiveOption:function(a){var b=this;widgets.setLinkOption(b.link,a.id);$(window).trigger(widgets.events.tableMobileSelectOption,[a])},updateRate:function(d,a){var e=this;if(!d){return}var c=document.getElementById("marketRate"+a);if(c){var b=c.innerHTML;if(parseFloat(d.rate)>=b){className="isMore"}else{className="isLess"}c.setAttribute("class","widgetTradeRate "+className);c.innerHTML=d.rate}},updateInvestTime:function(e){var c=this;var a=document.getElementById("investTime"+e);if(!a){return}else{var b=(widgets.options[e].expirationTimestamp-new Date(widgets.serverDateTime.dateTime).getTime())/1000-widgets.options[e].disableInvestTimeInSeconds;if(b>0){a.innerHTML=c.secondsToString(b)}else{a.innerHTML="00:00:00"}}var d=e;clearInterval(widgets.timers[d]);widgets.timers[d]=setInterval(function(){c.updateInvestTime(d)},1000)},scrollTop:function(a){var b=this;var c=$(b.element).data("scrolltop");if(c!==undefined&&c==true){$("html, body").animate({scrollTop:($(a).offset().top)},500)}},secondsToString:function(f){var c=Math.floor((f%31536000)/86400);var e=Math.floor(((f%31536000)%86400)/3600);var d=Math.floor((((f%31536000)%86400)%3600)/60);var a=(((f%31536000)%86400)%3600)%60;var b="";if(c>0){b+=c+" days "}if(e>0){if(e<10){b+="0"}b+=e+":"}else{b+="00:"}if(d>0){if(d<10){b+="0"}b+=d+":"}else{b+="00:"}if(parseInt(a.toString())<10){b+="0"}b+=parseInt(a.toString());return b}};
var tableOverUnderWidget={selectedOptionID:null,optionPayouts:null,rowExpand:false,oldRowExpand:null,init:function(){var a=this;a=$.extend({},tableOverUnderWidget,tableWidget);tableWidget.init.apply(a);a.attachEvents()},attachEvents:function(){var a=this;$(a.element).on("click","tbody tr",function(f){var b=$(this);a.selectedOptionID=b.data("id")||b.data("optid");var d=widgets.options[b.data("id")];if(typeof d=="undefined"){return}var h=$(a.element).find('tr[data-id="'+d.id+'"]');a.extendRow(h,d);var c=b.index()+1;var g=$("tr").eq(0).height();var e=(c-1)*g;b.parent().scrollTop(e)});$(a.element).on("click","tbody tr input.btnAlpha",function(e){var c=this;$(".tradeboxRightHide").addClass("hide");a.element.find(".btnClicked").removeClass("btnClicked");$(c).addClass("btnClicked");var d=$(c).parent().parent();$(".strikeRow").removeClass("activeRow");d.addClass("activeRow ");var b={direction:true,optionId:$(c).data("optionid"),strike:$(c).attr("data-strike")};$(window).trigger(widgets.events.btnOverClicked,b)});$(a.element).on("click","tbody tr input.btnBeta",function(e){var c=this;$(".tradeboxRightHide").addClass("hide");a.element.find(".btnClicked").removeClass("btnClicked");$(c).addClass("btnClicked");var d=$(c).parent().parent();$(".strikeRow").removeClass("activeRow");d.addClass("activeRow ");var b={direction:false,optionId:$(c).data("optionid"),strike:$(c).attr("data-strike")};$(window).trigger(widgets.events.btnUnderClicked,b)});$(window).on(widgets.events.optionPricesUpdated,function(d,b){if(a.rowExpand){var c;$.each(b,function(e,f){c=b[a.selectedOptionID];a.updateStrikePayouts(c)})}});$(window).on(widgets.events.deleteOption,function(){a.rowExpand=false;$(".tradeboxRightHide").removeClass("hide")});$(window).on(widgets.events.linkOptionUpdated,function(b){$(".tradeboxRightHide").removeClass("hide")});$(window).on(widgets.events.tradeIsCompleted,function(b){$(".tradeboxRightHide").removeClass("hide")})},extendRow:function(e,b){var d=this;d.collapseRows();if(d.oldRowExpand!=null&&d.oldRowExpand.hideExpand&&b.id==d.oldRowExpand.optionID){d.oldRowExpand.hideExpand=false;return}var c=widgets.prices[b.id];d.optionPayouts=c.payouts;if(c){var a='<tr  class="overUnder" style="display:none" data-optId='+b.id+'><td class="expandedLadderTD" colspan="'+e.find("td").length+'" id=td_'+b.id+'><div class="strikeContentDivWrap">'+d.createStrikePayoutRows(c,b.id)+"</div></td></tr>";$(a).insertAfter(e).show()}d.oldRowExpand={optionID:b.id,hideExpand:true}},collapseRows:function(){var b=this;var a=b.element.find("[data-optid]");if(a.length>0){a.remove()}},createStrikePayoutRows:function(f,d){var c=this;var e='<div class="strikeContentDivWrap">';var b=widgetMessage.payoutLabel?widgetMessage.payoutLabel:"Payout:";var a=widgetMessage.strikeLabel?widgetMessage.strikeLabel:"Strike:";$.each(f.payouts,function(h,g){e+='<div class="strikeRow" data-strikeLevel="'+h+'"><div class="payoutStrikeWrap"><div class=strikeLabel>'+a+'</div><div class="strike">'+h+'</div></div><div class="payoutUnderWrap"><div class=payoutPutLabel>'+b+'</div><div class="priceBeta">'+helper.formatPayout(g.PutPayout)+'</div></div><div class=underButton><input type="button" class="btnBeta" data-optionid="'+d+'"   data-strike="'+h+'" value="UNDER" /></div><div class=overButton><input type="button" class="btnAlpha" data-optionid="'+d+'"  data-strike="'+h+'"  value="OVER" /></div><div class="payoutOverWrap"><div class=payoutCallLabel>'+b+'</div><div class="priceAlpha">'+helper.formatPayout(g.CallPayout)+"</div></div></div>"});c.rowExpand=true;return e},updateStrikePayouts:function(b){var c=this;var a=c.optionPayouts;$.each(b.payouts,function(d,e){if(a[d].CallPayout!=e.CallPayout){$("div[data-strikeLevel='"+d+"']").find(".priceAlpha").html(helper.formatPayout(e.CallPayout));a[d].CallPayout=e.CallPayout}if(a[d].PutPayout!=e.PutPayout){$("div[data-strikeLevel='"+d+"']").find(".priceBeta").html(helper.formatPayout(e.PutPayout));a[d].PutPayout=e.PutPayout}})}};
var taDepositBonusesWidget={widgetName:"taDepositBonuses",data:null,page:1,isPostBack:false,limit:parseInt($("[data-widget=taDepositBonuses][data-type=paging]").attr("data-pagingLimit"))||5,init:function(){var d=taDepositBonusesWidget;if(!d.isPostBack){d.isPostBack=true;$("[data-widget=taDepositBonuses][data-type=submit]").unbind("click");$("[data-widget=taDepositBonuses][data-type=submit]").click(function(){this.disabled=true;d.submit()});$("[data-widget=taDepositBonuses][data-type=submit]").removeAttr("disabled");d.initTable();if(Object.keys(URL.parse(window.location.href).params).length>0){var c=URL.parse(window.location.href).params.eligible?URL.parse(window.location.href).params.eligible:null;var a=URL.parse(window.location.href).params.earned?URL.parse(window.location.href).params.earned:null;var b=URL.parse(window.location.href).params.paid?URL.parse(window.location.href).params.paid:null;if(c!=null||a!=null||b!=null){d.page=1;var e={};e.eligible=c==null?null:(c=="1"?true:false);e.earned=a==null?null:(a=="1"?true:false);e.paid=b==null?null:(b=="1"?true:false);e.limit=d.limit;e.offset=0;widgets.api.getTADepositBonuses(e,d.processTADepositBonuses)}}$(d.element).show()}},initTable:function(){var a=$("<tbody></tbody>");$("[data-widget=taDepositBonuses][data-type=bonusesTable]").append(a)},submit:function(){var c=taDepositBonusesWidget;var b=$("[data-widget=taDepositBonuses][data-type=outstanding]").is(":checked");var a=$("[data-widget=taDepositBonuses][data-type=paid]").is(":checked");var e=(c.limit*c.page)-c.limit;c.page=1;var d={};d.outstanding=b;d.paid=a;d.limit=c.limit;d.offset=e;widgets.api.getTADepositBonuses(d,c.processTADepositBonuses)},processTADepositBonuses:function(c,d){$("[data-widget=taDepositBonuses][data-type=submit]").removeAttr("disabled");if(c.message=="BadRequest"){if(c.data.type=="NoContent"){$("[data-widget=taDepositBonuses][data-type=paging]").html("");$("[data-widget=taDepositBonuses][data-type=bonusesTable] tbody tr").remove();alert(c.data.text)}}if(c.message!="OK"){return}var b=c.data.results;if(!b){return}var e=taDepositBonusesWidget;var f=b[b.length-1];e.data=c.data;e.doUpdate(d);$("[data-widget=taDepositBonuses][data-type=bonusesTable] tbody tr").remove();var a=$("[data-widget=taDepositBonuses][data-type=bonusesTable] tbody");$.each(b,function(g,h){var j=$('<tr data-bonusId="'+h.bonusId+'"></tr>');$.each($("[data-widget=taDepositBonuses][data-type=bonusesTable]").find("thead tr th"),function(k,l){var m=$("<td></td>");switch($(l).attr("data-column")){case"date":$(m).html(helper.formatDate(h.date,helper.dateFormats.masks.longDate));break;case"amount":$(m).html(helper.formatCurrency(h.currencySymbol,h.amount));break;case"bonusEligible":$(m).html(h.bonusEligible==true?"Yes":"No");break;case"actualTradingVolume":$(m).html(h.actualTradingVolume!=null?(helper.formatCurrency(h.currencySymbol,h.actualTradingVolume)):"");break;case"requiredTradingVolume":$(m).html(h.requiredTradingVolume!=null?(helper.formatCurrency(h.currencySymbol,h.requiredTradingVolume)):"");break;case"bonusEarned":$(m).html(h.bonusEarned!=null?(h.bonusEarned==true?"Yes":"No"):"");break;case"bonusAmount":$(m).html(h.bonusAmount!=null?(helper.formatCurrency(h.currencySymbol,h.bonusAmount)):"");break;case"dateAvailable":$(m).html(h.dateAvailable!=null?(helper.formatDate(h.dateAvailable,helper.dateFormats.masks.longDate)):"");break;case"paid":$(m).html(h.paid!=null?(h.paid==true?"Yes":"No"):"");break}$(j).append(m)});$(a).append(j)})},doUpdate:function(a){if(!taDepositBonusesWidget.data){$("[data-widget=taDepositBonuses][data-type=paging]").html("");return}if(a[3]>0){}else{$("[data-widget=taDepositBonuses][data-type=paging]").html("");this.getNextPage(0,a[3])}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=taDepositBonuses][data-type=paging]");var a=taDepositBonusesWidget.data.total;var d=Math.ceil(a/e.limit);c.html("");var b='<div class="myPaging">';if(f>=e.limit){b+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){b+='<a class="pageLink';if(i==taDepositBonusesWidget.page){b+=" activePage"}b+='" href="javascript:;">'+i+"</a> "}if(d>i){b+='<a class="nextPage" href="javascript:;">...</a>'}b+="</div>";c.html(b);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit)});c.find(".pageLink").click(function(){$("[data-widget=taDepositBonuses][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;e.submit()})}};
var topTradesWidget={isProcessed:false,data:null,page:1,topTrades:{},limit:parseInt($("[data-widget=topTrades][data-type=paging]").attr("data-pagingLimit"))||10,init:function(){var a=this;if(a.isProcessed){return}$(a.element).show();a.initBoard();widgets.api.getTopTrades(50,0,function(b,c){if(b.message!="OK"){return}a.data=b.data;a.showPage(1)});a.isProcessed=true;if($(a.element).attr("data-slide")=="false"){return}setInterval(function(){if($(".myPaging .activePage").next().hasClass("nextPage")){$(".myPaging .nextPage").trigger("click");$(".myPaging .activePage").removeClass("activePage");$(".myPaging .pageLink:first").addClass("activePage");$(".myPaging .pageLink:first").trigger("click");return}if($(".myPaging .activePage").next().length==0){$(".myPaging .activePage").removeClass("activePage");$(".myPaging .prevPage").trigger("click");$(".myPaging a").first().addClass("activePage");$(".myPaging .activePage").trigger("click")}else{$(".myPaging .activePage").next().trigger("click")}},3000)},initBoard:function(){var b=this;var a=$("<tbody></tbody>");$("[data-widget=topTrades][data-type=topTradesTable]").append(a)},showPage:function(c){var b=this;var d=(b.limit*c)-b.limit;var a=b.limit;b.processTopTrades(b.data.results.slice(d,d+a),arguments)},processTopTrades:function(b,c){var d=this;d.doUpdate(c);$("[data-widget=topTrades][data-type=topTradesTable] tbody tr").remove();var a=$("[data-widget=topTrades][data-type=topTradesTable] tbody");$.each(b,function(e,f){var g=$("<tr></tr>");$.each($("[data-widget=topTrades][data-type=topTradesTable]").find("thead tr th"),function(h,k){var l=$("<td></td>");switch($(k).attr("data-column")){case"image":var j='<div class="pImage"><div class="thumb '+(f.gender==true?"male":"female")+'"></div><div class="status '+(f.isOnline==true?"online":"offline")+'"></div>';$(l).append(j);break;case"country":var j='<div class="flag '+f.countryCode+'"></div><div>'+f.countryCode+"</div>";$(l).append(j);break;case"name":var j='<div class="pName">'+f.name+"</div>";$(l).append(j);break;case"countryAndName":var j='<div class="pName">'+f.name+'</div><div class="flag '+f.countryCode+'"></div><div>'+f.countryCode+"</div>";$(l).append(j);break;case"roi":var j='<div class="trend up"></div><div class="number">'+f.returnOfInvestment+"%</div>";$(l).append(j);break;case"tradedAsset":var j='<div class="assetType'+f.assetType+'""></div>'+f.tradedAsset;$(l).append(j);break;case"strikePrice":$(l).html(f.strikePrice);break;case"tradedAsset&Price":var j='<div class="assetType'+f.assetType+'"></div>'+f.tradedAsset+'<div class="price">'+f.strikePrice+"</div>";$(l).append(j);break;case"action":$(l).html(f.action);break;case"isUpIn":$(l).html("<span class="+(f.isUpIn?"upArrow":"downArrow")+"></span>");break;case"isUpInAction":var j="<span class="+(+f.isUpIn?"upArrow":"downArrow")+"></span>"+f.action;$(l).append(j);break;case"profit":var j='<div class="number">'+helper.formatCurrency(f.currencySymbol,f.profit)+"</div>";$(l).append(j);break;case"status":$(l).html(f.status);break}$(g).append(l)});$(a).append(g);$(window).trigger(widgets.events.socialLoadingComplete)})},doUpdate:function(a){if(!topTradesWidget.data){$("[data-widget=topTrades][data-type=paging]").html("");return}if(a[0]>2){}else{$("[data-widget=topTrades][data-type=paging]").html("");this.getNextPage(0,a[2])}},getNextPage:function(f,g){var e=this;var c=$("[data-widget=topTrades][data-type=paging]");var a=topTradesWidget.data.total;var d=Math.ceil(a/e.limit);c.html("");var b='<div class="myPaging">';if(f>=e.limit){b+='<a class="prevPage" href="javascript:;">...</a> '}for(i=f+1;(i<=f+e.limit+1&&i<=d);i++){b+='<a class="pageLink';if(i==topTradesWidget.page){b+=" activePage"}b+='" href="javascript:;">'+i+"</a> "}if(d>i){b+='<a class="nextPage" href="javascript:;">...</a>'}b+="</div>";c.html(b);c.find(".nextPage").click(function(){e.getNextPage(parseInt(i)-1)});c.find(".prevPage").click(function(){e.getNextPage(f-e.limit-1)});c.find(".pageLink").click(function(){$("[data-widget=topTrades][data-type=paging] .activePage").removeClass("activePage");$(this).addClass("activePage");var h=parseInt($(this).html());e.page=h;var j=(e.limit*e.page)-e.limit;e.showPage(h)})},};
var traderInsightWidget={init:function(){var a=this;widgets.api.getTraderInsight(function(b){a.processTraderInsight(b)});$(this.element).show()},processTraderInsight:function(b){var d=this;if(b.code==400){if(b.data!=null&&b.data.type=="TraderInsight_NoContent"){$(window).trigger(widgets.events.traderInsightNoContent,b.data)}return}var c=($("[data-widget=traderInsight]").attr("data-maxItems")>0?$("[data-widget=traderInsight]").attr("data-maxItems"):20);$("[data-widget=traderInsight]").empty();var a=b.data.slice(0,c);$.each(a,function(f,g){var e=$('<div><div class="assetRow"><span class="above"><span class="percent">'+g.callTotalVolume+'%</span></span><span class="below"><span class="percent">'+g.putTotalVolume+'%</span></span><div class="assetName">'+d.processStringLength(g.name)+"</div></div></div>");$("[data-widget=traderInsight]").append(e);e.find(".assetRow .below").animate({width:g.putTotalVolume+"%"},3000)})},processStringLength:function(b){var a=$("[data-widget=traderInsight]").attr("data-maxLength");if(a!=undefined&&parseInt(a)>0){return b.substring(0,a)}else{return b}}};
var traderInsightBarWidget={init:function(){var a=this;if(!$(a.element).hasClass("widgetTraderInsightBar")){$(a.element).addClass("widgetTraderInsightBar")}$(window).on(widgets.events.linkOptionUpdated,function(b){if(widgets.links[a.link].option){a.updateOption(widgets.links[a.link].option)}});$(this.element).show()},processTraderInsight:function(d){var e=this;e.clear();var i=d.data;var f=$('<div class="traderInsightWrapper"></div>');var g=$('<div class="above"></div><div class="below"></div>');var c=$('<div class="volumePercentLeft"><span class="percent">'+i.CallTotalVolume+"%</span></div>");var b=$('<div class="volumePercentRight"><span class="percent">'+i.PutTotalVolume+"%</span></div>");f.append(g);$(e.element).append(c);$(e.element).append(f);$(e.element).append(b);if($(e.element).attr("data-orientation")=="horizontal"){var a=$(e.element).find(".traderInsightWrapper").css("width");a=parseInt(a);$(e.element).find(".traderInsightWrapper .above").animate({width:a*(i.CallTotalVolume*0.01)+"px"},1500)}else{if($(e.element).attr("data-orientation")=="vertical"){var h=$(e.element).find(".traderInsightWrapper").css("height");h=parseInt(h);$(e.element).find(".traderInsightWrapper .above").animate({height:h*(i.CallTotalVolume*0.01)+"px"},1500)}}},updateOption:function(a){var c=this;if(!a){return}var d=$(c.element).attr("data-assetId");var b=traderInsightBarWidget.game=="turboBinary"?widgets.links[c.link].option.id:widgets.links[c.link].option.tradableAssetId;if(b!=d){$(c.element).attr("data-assetId",b);widgets.api.getTraderInsightItem(b,function(e){c.processTraderInsight(e)})}},clear:function(){var a=this;$(a.element).html("")}};
var traderSummaryWidget={widgetName:"traderSummary",isPostBack:false,init:function(){var a=this;if(!a.isPostBack){a.isPostBack=true;$(a.element).show();widgets.api.getTraderSummary(a.processTraderSummary)}},processTraderSummary:function(b){if(b.message!="OK"){return}var d=b.data;if(!d){return}var a=$("[data-widget=traderSummary][data-type=incomplete]");var c=$("[data-widget=traderSummary][data-type=pending]");var e=$("[data-widget=traderSummary][data-type=totalEarned]");a.text(helper.formatCurrency(d.currencySymbol,d.incomplete));c.text(helper.formatCurrency(d.currencySymbol,d.pending));e.text(helper.formatCurrency(d.currencySymbol,d.totalEarned))}};
var tradesOptionsWidget={isProcessed:false,init:function(){var b=this;var a=[widgets.events.expireOptions,widgets.events.reportsTradeAssetsIsLoading];$(window).on(a.join(" "),function(){if(!tradesOptionsWidget.isProcessed&&$(b.element).length<=1){widgets.api.getTradableAssets(function(c){b.processTradableAssets(c)});tradesOptionsWidget.isProcessed=true}});$(b.element).show()},processTradableAssets:function(a){var b=this;if(b.element.data("ismobile")!=undefined&&b.element.data("ismobile")==true){b.getPopUpHtml(a)}else{b.getDropDownHtml(a)}$(window).trigger(widgets.events.closedTradesIsReady)},getDropDownHtml:function(a){var c=this;var b='<option value="0">'+widgetMessage.filterAll+"</option>";$.each(a.data,function(d,e){if(!e||typeof e!="object"){return}b+='<option value="'+e.id+'">'+e.description+"</option>"});$(c.element).append(b)},getPopUpHtml:function(c){var e=this;var i="";var b="";var d="";var a="";$.each(c.data,function(j,k){if(!k||typeof k!="object"){return}switch(k.type){case 1:i+='<div data-id="'+k.id+'" class="tradesOptionsItem">'+k.description+"</div>";break;case 2:d+='<div data-id="'+k.id+'" class="tradesOptionsItem">'+k.description+"</div>";break;case 3:b+='<div data-id="'+k.id+'" class="tradesOptionsItem">'+k.description+"</div>";break;default:a+='<div data-id="'+k.id+'" class="tradesOptionsItem">'+k.description+"</div>"}});var f='<div id="tradesOptionsElementId-0" class="tradesOptionsElement" data-type="showSelected">All</div><div class="tradesOptionsPoUp" style="display: none;"><div class="tradesOptionsWrap"><div class="tradesOptionsFilter"><div><div id="currenciesTradesOptions" class="optionsIndexNav active">Currency</div></div><div><div id="stocksTradesOptions" class="optionsIndexNav">Stocks</div></div><div><div id="indicesTradesOptions" class="optionsIndexNav">Indices</div></div><div><div id="commoditiesTradesOptions" class="optionsIndexNav">Commodities</div></div><div><div id="allTradesOptions">'+widgetMessage.filterAll+'</div></div></div><div class="tradesOptionsAssets"><div id="currenciesTradesOptionsDiv" class="active">'+i+'</div><div id="stocksTradesOptionsDiv">'+b+'</div><div id="indicesTradesOptionsDiv">'+d+'</div><div id="commoditiesTradesOptionsDiv">'+a+"</div></div></div></div>";$(e.element).append(f);var g=e.elements[0].children[0];var h=e.elements[0].children[1];if($.mobile){$(g).on("tap",function(){$(h).show()});$(e.elements).find("#allTradesOptions").on("tap",function(j){$(g).html(widgetMessage.filterAll).attr("id","tradesOptionsElementId-0");$(h).hide()});$(h).find(".optionsIndexNav").on("tap",function(){if($(this).hasClass("active")){return}$(h).find(".optionsIndexNav").removeClass("active");$(h).find(".tradesOptionsAssets > div").removeClass("active");$(this).addClass("active");$(h).find("#"+this.id+"Div").addClass("active")});$(h).find(".tradesOptionsItem").on("tap",function(){var j=this.innerHTML;$(g).html(j).attr("id","tradesOptionsElementId-"+$(this).data("id"));$(h).hide()})}else{$(g).on("click",function(){$(h).show()});$(e.elements).find("#allTradesOptions").on("click",function(j){$(g).html(widgetMessage.filterAll).attr("id","tradesOptionsElementId-0");$(h).hide()});$(h).find(".optionsIndexNav").on("click",function(){if($(this).hasClass("active")){return}$(h).find(".optionsIndexNav").removeClass("active");$(h).find(".tradesOptionsAssets > div").removeClass("active");$(this).addClass("active");$(h).find("#"+this.id+"Div").addClass("active")});$(h).find(".tradesOptionsItem").on("click",function(){var j=this.innerHTML;$(g).html(j).attr("id","tradesOptionsElementId-"+$(this).data("id"));$(h).hide()})}},getValue:function(){var a=this;if(a.element.data("ismobile")!=undefined&&a.element.data("ismobile")==true){return $(a.elements).find("[data-type=showSelected]").attr("id").substr(23)}return $(a.element).val()}};
var turboAdapter={lowPriceTime:0,highPriceTime:100000000,setNewData:function(f,e,h){if(f.length==0||f==""||!this.chart){return}f=parseFloat(f);this.lastPrice=f;h=(h==null||h==undefined||h);var b=parseFloat(e)-(h?parseFloat(this.clientUTCTimeDiff):0);var a=false;var d=this.chart.series[this.chart.series.length-1];var g=d.points[d.points.length-1];if(g){var c=b-g.x;if(c>0){d.addPoint([b,f],false,false);a=true}}if(a){if((f*(1+this.chartDisplayFactor))>this.highPrice){this.highPrice=f*(1+this.chartDisplayFactor);this.highPriceTime=b}if((f*(1-this.chartDisplayFactor))<this.lowPrice){this.lowPrice=f*(1-this.chartDisplayFactor);this.lowPriceTime=b}this.startOptionHistoryTime=this.optionHistoryPrice[0][0];this.endOptionHistoryTime=this.optionHistoryPrice[this.optionHistoryPrice.length-1][0];if(this.highPriceTime<this.startOptionHistoryTime||this.lowPriceTime<this.startOptionHistoryTime){this.recalculateExtremePrices()}this.updateLimits();if(!this.lastPriceIndicatorEnable){this.setIndicator("currentPrice",true,f);this.updatePointMarker()}this.chart.redraw()}},recalculateExtremePrices:function(){var a=0;var c=100000000;var g=0;var f=100000000;var d;var h;var e;if(this.optionHistoryPrice[this.optionHistoryPrice.length-1][0]!=undefined){e=this.optionHistoryPrice[this.optionHistoryPrice.length-1][0]}else{e=this.optionHistoryPrice[this.optionHistoryPrice.length-1].x}for(var b=(this.optionHistoryPrice.length-1);b>-1;b--){if(this.optionHistoryPrice[b].x==undefined){d=this.optionHistoryPrice[b][1];h=this.optionHistoryPrice[b][0]}else{d=this.optionHistoryPrice[b].y;h=this.optionHistoryPrice[b].x}if(d>a){a=d;g=h}if(d<c){c=d;f=h}if(h<(this.optionHistoryPrice[this.optionHistoryPrice.length-1][0]-this.historyLength)){break}}if(a!=0){this.highPrice=a*(1+this.chartDisplayFactor);this.highPriceTime=g}if(c!=100000000){this.lowPrice=c*(1-this.chartDisplayFactor);this.lowPriceTime=f}}};
(function($){$.extend($.ui,{datepicker:{version:"1.7.2"}});var PROP_NAME="datepicker";function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:false};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,showMonthAfterYear:false,yearRange:"-10:+10",showOtherMonths:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){target.id="dp"+(++this.uuid)}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==target){$.datepicker._hideDatepicker()}else{$.datepicker._showDatepicker(target)}return false})}input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst)},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst));this._updateDatepicker(inst);this._updateAlternate(inst)},_dialogDatepicker:function(input,dateText,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+(++this.uuid);this._dialogInput=$('<input type="text" id="'+id+'" size="1" style="position: absolute; top: -100px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});this._dialogInput.val(dateText);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var browserHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker(null)}var date=this._getDateDatepicker(target);extendRemove(inst.settings,settings);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date,endDate){var inst=this._getInst(target);if(inst){this._setDate(inst,date,endDate);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:var sel=$("td."+$.datepicker._dayOverClass+", td."+$.datepicker._currentClass,inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"))}return false;break;case 27:$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"));break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return}var inst=$.datepicker._getInst(input);var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));$.datepicker._hideDatepicker(null,"");$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.rangeStart=null;inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim")||"show";var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;if($.browser.msie&&parseInt($.browser.version,10)<7){$("iframe.ui-datepicker-cover").css({width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4})}};if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim](duration,postProcess)}if(duration==""){postProcess()}if(inst.input[0].type!="hidden"){inst.input[0].focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var dims={width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4};var self=this;inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({width:dims.width,height:dims.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst.input&&inst.input[0].type!="hidden"&&inst==$.datepicker._curInst){$(inst.input[0]).focus()}},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+$(document).scrollLeft();var viewHeight=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0;offset.top-=(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(offset.top+dpHeight+inputHeight*2-viewHeight):0;return offset},_findPos:function(obj){while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj.nextSibling}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input,duration){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(inst.stayOpen){this._selectDate("#"+inst.id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))}inst.stayOpen=false;if(this._datepickerShowing){duration=(duration!=null?duration:this._get(inst,"duration"));var showAnim=this._get(inst,"showAnim");var postProcess=function(){$.datepicker._tidyDialog(inst)};if(duration!=""&&$.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(duration==""?"hide":(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide")))](duration,postProcess)}if(duration==""){this._tidyDialog(inst)}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}this._curInst=null},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target);if(($target.parents("#"+$.datepicker._mainDivId).length==0)&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker(null,"")}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie){inst.input[0].focus()}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;if(inst.stayOpen){inst.endDay=inst.endMonth=inst.endYear=null}this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));if(inst.stayOpen){inst.rangeStart=this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));this._updateDatepicker(inst)}},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);inst.stayOpen=false;inst.endDay=inst.endMonth=inst.endYear=inst.rangeStart=null;this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{if(!inst.stayOpen){this._hideDatepicker(null,this._get(inst,"duration"));this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input[0].focus()}this._lastInput=null}}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getFullYear(),date.getMonth(),date.getDate());var firstMon=new Date(checkDate.getFullYear(),1-1,4);var firstDay=firstMon.getDay()||7;firstMon.setDate(firstMon.getDate()+1-firstDay);if(firstDay<4&&checkDate<firstMon){checkDate.setDate(checkDate.getDate()-3);return $.datepicker.iso8601Week(checkDate)}else{if(checkDate>new Date(checkDate.getFullYear(),12-1,28)){firstDay=new Date(checkDate.getFullYear()+1,1-1,4).getDay()||7;if(firstDay>4&&(checkDate.getDay()||7)<firstDay-3){return 1}}}return Math.floor(((checkDate-firstMon)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){lookAhead(match);var origSize=(match=="@"?14:(match=="y"?4:(match=="o"?3:2)));var size=origSize;var num=0;while(size>0&&iValue<value.length&&value.charAt(iValue)>="0"&&value.charAt(iValue)<="9"){num=num*10+parseInt(value.charAt(iValue++),10);size--}if(size==origSize){throw"Missing number at position "+iValue}return num};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);var size=0;for(var j=0;j<names.length;j++){size=Math.max(size,names[j].length)}var name="";var iInit=iValue;while(size>0&&iValue<value.length){name+=value.charAt(iValue++);for(var i=0;i<names.length;i++){if(name==names[i]){return i+1}}size--}throw"Unknown name at position "+iInit};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":var doy=date.getDate();for(var m=date.getMonth()-1;m>=0;m--){doy+=this._getDaysInMonth(date.getFullYear(),m)}output+=formatNumber("o",doy,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst){var dateFormat=this._get(inst,"dateFormat");var dates=inst.input?inst.input.val():null;inst.endDay=inst.endMonth=inst.endYear=null;var date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);date=defaultDate}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){var date=this._determineDate(this._get(inst,"defaultDate"),new Date());var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date},_determineDate:function(date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset,getDaysInMonth){var date=new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};date=(date==null?defaultDate:(typeof date=="string"?offsetString(date,this._getDaysInMonth):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=="Invalid Date"?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0)}return this._daylightSavingAdjust(date)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,endDate){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._determineDate(date,new Date());inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if(origMonth!=inst.selectedMonth||origYear!=inst.selectedYear){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var stepBigMonths=this._get(inst,"stepBigMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[1]+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#'+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var endDate=inst.endDay?this._daylightSavingAdjust(new Date(inst.endYear,inst.endMonth,inst.endDay)):currentDate;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group ui-datepicker-group-';switch(col){case 0:calender+="first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+="last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+="middle";cornerClass="";break}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead="";for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody="";for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=otherMonth||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":" onclick=\"DP_jQuery.datepicker._selectDay('#"+inst.id+"',"+drawMonth+","+drawYear+', this);return false;"')+">"+(otherMonth?(showOtherMonths?printDate.getDate():"&#xa0;"):(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" ui-state-active":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,secondary,monthNames,monthNamesShort){minDate=(inst.rangeStart&&minDate&&selectedDate<minDate?selectedDate:minDate);var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span> "}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+((secondary||changeMonth||changeYear)&&(!(changeMonth&&changeYear))?"&#xa0;":"")}if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var year=0;var endYear=0;if(years.length!=2){year=drawYear-10;endYear=drawYear+10}else{if(years[0].charAt(0)=="+"||years[0].charAt(0)=="-"){year=drawYear+parseInt(years[0],10);endYear=drawYear+parseInt(years[1],10)}else{year=parseInt(years[0],10);endYear=parseInt(years[1],10)}}year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}html+="</select>"}if(showMonthAfterYear){html+=(secondary||changeMonth||changeYear?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._daylightSavingAdjust(new Date(year,month,day));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax,checkRange){var date=this._determineDate(this._get(inst,minMax+"Date"),null);return(!checkRange||!inst.rangeStart?date:(!date||inst.rangeStart>date?inst.rangeStart:date))},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var newMinDate=(!inst.rangeStart?null:this._daylightSavingAdjust(new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay)));newMinDate=(newMinDate&&inst.rangeStart<newMinDate?inst.rangeStart:newMinDate);var minDate=newMinDate||this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date>=minDate)&&(!maxDate||date<=maxDate))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.7.2";window.DP_jQuery=$})(jQuery);
var userBarWidget={elementsCache:{},isProcessed:false,init:function(){var a=this;a.elementsCache.userIcon=a.elements.filter("[data-type=userIcon]");a.elementsCache.userName=a.elements.filter("[data-type=userName]");a.elementsCache.userLvl=a.elements.filter("[data-type=userLvl]");a.elementsCache.messages=a.elements.filter("[data-type=messages]");a.elementsCache.bonuses=a.elements.filter("[data-type=bonuses]");a.elementsCache.balance=a.elements.filter("[data-type=balance]");a.elementsCache.logout=a.elements.filter("[data-type=logout]");a.firstWidgetsLoad();if(!widgets.isLogged()){a.element.parent().hide()}$(window).on(widgets.events.loadingIsCompleted+" "+widgets.events.tradeIsCompleted,function(){a.elementsCache.bonuses.container.hide()});$(window).on(widgets.events.userLogout,function(){a.element.parent().hide()});if(a.elementsCache.userName){$(window).on(widgets.events.userLogin,function(){if(!a.isProcessed&&widgets.isLogged()){a.isProcessed=true;a.elementsCache.userName.html(widgets.user.firstName);a.element.parent().show()}})}},firstWidgetsLoad:function(){var c=this;if(c.elementsCache.userIcon!=undefined){}if(c.elementsCache.userLvl!=undefined){}if(c.elementsCache.messages!=undefined){messageWidget.element=c.elementsCache.messages;messageWidget.init()}if(c.elementsCache.bonuses!=undefined){var a=(c.elementsCache.bonuses.attr("data-cashback")=="true")?'<div class="cashBackWrapper" data-widget="cashBack" data-type="container"><div class="cashBackHeader" data-translate="cashBackTitle"></div><div class="cashBackCell cashBackTrades" data-translate="cashBackTrades"></div><div class="cashBackCell tradesProgressBar" data-widget="cashBack" data-type="tradesProgressBar"></div><div class="cashBackCell"><label data-widget="cashBack" data-type="leftTrades"></label>/<label data-widget="cashBack" data-type="maxTrades"></label></div></br><div class="cashBackCell cashBackAmount" data-translate="cashBackAmount"></div><div class="cashBackCell amountProgressBar" data-widget="cashBack" data-type="amountProgressBar"></div><div class="cashBackCell"><label data-widget="cashBack" data-type="maxAmountPerTrade"></label>/<label data-widget="cashBack" data-type="leftAmount"></label></div><br /></div>':"";var b='<div id="divAfterWagerBonus"><table data-widget="afterWagerBonus" style="display: none;" data-progress="true"><thead><tr><th colspan="3" class="afterWagerHeader" data-translate="bonusesTitle"></th></tr><tr><th data-column="amount" data-translate="afterWagerBonus"></th><th data-column="remainingVolume" data-translate="remainingVolume"></th><th data-column="remainingTime" data-translate="timeRemaining"></th></tr></thead></table>'+a+"</div>";c.elementsCache.bonuses.after(b);c.elementsCache.bonuses.container=c.elementsCache.bonuses.next();afterWagerBonusWidget.element=c.elementsCache.bonuses.next().find("table");afterWagerBonusWidget.init();if(c.elementsCache.bonuses.attr("data-cashback")=="true"){cashBackWidget.elements=c.elementsCache.bonuses.next().find('[data-widget="cashBack"]');cashBackWidget.init()}c.elementsCache.bonuses.click(function(){if(c.elementsCache.bonuses.next().css("display")=="none"){c.elementsCache.bonuses.container.show()}else{c.elementsCache.bonuses.container.hide()}})}if(c.elementsCache.balance!=undefined){balanceWidget.element=c.elementsCache.balance;balanceWidget.init()}if(c.elementsCache.logout!=undefined){logoutWidget.element=c.elementsCache.logout;logoutWidget.init()}widgets.translate()}};
var userDetailsWidget={data:{},allLanguagesExp:/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC -.']*$/,widgetName:"userDetails",base64String:"",expressions:{email:/\S+@\S+\.\S+/,firstName:"",lastName:"",secondaryPhone:/^[0-9]+$/,phone:/^[0-9]+$/,birthDate:/^([0-9]{4})-([0-9][0-9])-([0-9][0-9])+$/,title:/(mister|miss|mrs)/},init:function(){var a=this;a.expressions.firstName=a.allLanguagesExp;a.expressions.lastName=a.allLanguagesExp;a=$.extend({},validationWidget,userDetailsWidget);$(a.elements).filter("[data-type=submit]").click(function(b){a.submit(b)});a.updateCountries();a.updateBirthDate();a.updateTitle();a.updateGender();$(document).on("click","input[value$='Update']",function(){a.updatePicture()});$(window).on(widgets.events.settingsLoaded,function(b){a.disableDetailsChange()})},updateCountries:function(){var a=this;var b=$(a.elements).filter("[data-type=countryCode]");if(!$(b).length){return}widgets.api.getCountries(function(c){a.processCountries(c)})},updateTitle:function(){var b=this;var a=$(b.elements).filter("[data-type=title]");helper.setTitle(a)},updateGender:function(){var a=this;var b=$(a.elements).filter("[data-type=gender]");helper.setGender(b)},updateBirthDate:function(){var c=this;var a=$(c.elements).filter("[data-type=birthDay]");var b=$(c.elements).filter("[data-type=birthMonth]");var e=$(c.elements).filter("[data-type=birthYear]");helper.setDaysOfMonth(a);var d=b.attr("data-format")==undefined?"mmmm":b.attr("data-format");helper.setMonths(b,d);helper.setYears(e)},processCountries:function(a){var b=this;var c=$(b.elements).filter("[data-type=countryCode]");b.countries=a.data;helper.setCountries(c,a.data);widgets.api.getUserData(function(d){b.process(d)})},process:function(b){if(b.code==401){return}var c=this;c.data=b.data;$(c.elements).filter("[data-type=email]").val(c.data.email);$(c.elements).filter("[data-type=title]").val(c.data.title.toLowerCase());$(c.elements).filter("[data-type=firstName]").val(c.data.firstName);$(c.elements).filter("[data-type=lastName]").val(c.data.lastName);$(c.elements).filter("[data-type=birthDay]").val(c.data.birthDay);$(c.elements).filter("[data-type=birthMonth]").val(c.data.birthMonth);$(c.elements).filter("[data-type=birthYear]").val(c.data.birthYear);$(c.elements).filter("[data-type=city]").val(c.data.city);$(c.elements).filter("[data-type=gender]").val(c.data.gender?c.data.gender.toString():"");$(c.elements).filter("[data-type=zip]").val(c.data.zip);$(c.elements).filter("[data-type=addressLine1]").val(c.data.addressLine1);$(c.elements).filter("[data-type=addressLine2]").val(c.data.addressLine2);$(c.elements).filter("[data-type=secondaryPhone]").val(c.data.secondaryPhone);$(c.elements).filter("[data-type=countryPhoneCode]").val(c.data.countryPhoneCode);$(c.elements).filter("[data-type=areaPhoneCode]").val(c.data.areaPhoneCode);var a=c.data.phone.split("-");$(c.elements).filter("[data-type=countryPhoneCode]").val(a[0]);$(c.elements).filter("[data-type=areaPhoneCode]").val(a[1]);$(c.elements).filter("[data-type=phone]").val(a[2]);$(c.elements).filter("[data-type=countryCode]").val(c.data.countryCode);$(window).trigger(widgets.events.locationLoaded);if(c.data.masterAgentEmail!=null){$(c.elements).filter("[data-type=masterAgentEmail]").text(c.data.masterAgentEmail);$(c.elements).filter("[data-type=masterAgentFirstName]").text(c.data.masterAgentFirstName);$(c.elements).filter("[data-type=masterAgentLastName]").text(c.data.masterAgentLastName);$(c.elements).filter("[data-type=parentAgentEmail]").text(c.data.parentAgentEmail);$(c.elements).filter("[data-type=parentAgentFirstName]").text(c.data.parentAgentFirstName);$(c.elements).filter("[data-type=parentAgentLastName]").text(c.data.parentAgentLastName)}},submit:function(a){var b=this;if(!b.validate()){return false}var c={};$.each(b.elements,function(d,e){c[$(e).attr("data-type")]=$(e).val()});c.base64Photo=b.base64String;widgets.api.updateUserDetails(widgets.token.sessionId,c,b.processAddUser)},processAddUser:function(a){$(window).trigger(widgets.events.userDetailsSubmit,a);if(a.code!=401&&a.code!=400){$(window).trigger(widgets.events.userDetailsUpdated)}},customValidation:function(){var d=this;var a=$(d.elements).filter("[data-type=countryPhoneCode]");var b=$(d.elements).filter("[data-type=areaPhoneCode]");var e=$(d.elements).filter("[data-type=phone]");var c=/^[0-9]+$/;if(!a.val().match(c)||!b.val().match(c)||!e.val().match(c)){d.addError(e.attr("data-type"),e.attr("data-regexpMessage")?e.attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}return true},birthYear:function(d){var g=this;var c=$(g.elements).filter("[data-type=birthDay]").val();var f=$(g.elements).filter("[data-type=birthMonth]").val();var b=$(g.elements).filter("[data-type=birthYear]").val();var a=new Date(b,f,c);var g=this;var e=/^[0-9]+$/;if(!c.match(e)||!f.match(e)||!b.match(e)){g.addError($(d).attr("data-type"),$(d).attr("data-regexpMessage")?$(d).attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}if(!this.meetsMinimumAge(a,18)){g.addError($(d).attr("data-type"),$(d).attr("data-regexpMessage")?$(d).attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}return true},meetsMinimumAge:function(a,c){var b=new Date(a.getFullYear()+c,a.getMonth(),a.getDate());return(b<=new Date())},updatePicture:function(){var b=this;var a=document.getElementById("fileInput");var c=document.getElementById("fileDisplayArea");a.addEventListener("change",function(h){var f=a.files[0];var g=/image.*/;if(f.type.match(g)){var d=new FileReader();d.onload=function(j){c.innerHTML="";var i=new Image();i.src=d.result;c.appendChild(i);$("img:first").addClass("Jcrop_target");$("#fileDisplayArea .Jcrop_target").Jcrop({onChange:function(e){b.updatePreview(e)},onSelect:function(e){b.updatePreview(e)},aspectRatio:1,minSize:[100,100],setSelect:[0,0,100,100],})};d.readAsDataURL(f)}else{$(window).trigger(widgets.events.invalidFileType)}})},updatePreview:function(f){var d=this;if(parseInt(f.w)>0){var e=$("img:first")[0];var a=$(".preview")[0];var b=a.getContext("2d");b.drawImage(e,f.x,f.y,f.w,f.h,0,0,a.width,a.height)}d.base64String=$(".preview").get(0).toDataURL("image/png");d.base64String=d.base64String.replace(/^data:image\/(png|jpg);base64,/,"")},disableDetailsChange:function(){var a=this;if(helper.getGlobalSetting("DisablePersonalDetailsChange")){$(a.elements).filter("[data-type=email]").prop("disabled",true);$(a.elements).filter("[data-type=firstName]").prop("disabled",true);$(a.elements).filter("[data-type=lastName]").prop("disabled",true);$(a.elements).filter("[data-type=birthDay]").prop("disabled",true);$(a.elements).filter("[data-type=birthMonth]").prop("disabled",true);$(a.elements).filter("[data-type=birthYear]").prop("disabled",true);$(a.elements).filter("[data-type=countryPhoneCode]").prop("disabled",true);$(a.elements).filter("[data-type=areaPhoneCode]").prop("disabled",true);$(a.elements).filter("[data-type=phone]").prop("disabled",true)}}};
var validationWidget={expressions:[],errors:[],addError:function(c,a){var b=this;if(!b.errors[c]){b.errors[c]=a}},isEmpty:function(a){var b=($(a).val()==$(a).attr("placeholder")?null:$(a).val());if(b==null){return true}if($(a).val().length==0){return true}if($(a).attr("type")=="checkbox"&&!$(a).is(":checked")){return true}if($(a).attr("data-label")&&$(a).attr("data-label")==$(a).val()){return true}return false},isRequired:function(a){var c=this;var d=$(a).attr("data-type");var b=$(a).attr("data-isRequired")=="true"?true:false;if(b&&c.isEmpty(a)){if($(a).attr("type")=="checkbox"&&widgetMessage[$(a).attr("data-type")]){$("[data-widget="+c.widgetName+"][data-type=error]").append("<p>"+widgetMessage[$(a).attr("data-type")]+"</p>");$("[data-widget="+c.widgetName+"][data-type=error]").show()}c.addError(d,widgetMessage.requiredField);return true}return false},isMinLength:function(b){var c=this;var d=$(b).attr("data-type");var a=$(b).attr("data-minLength")?$(b).attr("data-minLength"):false;if(a&&$(b).val().length<a){c.addError(d,widgetMessage.minLengthError+" "+a+" "+widgetMessage.characters)}return true},isMaxLength:function(b){var c=this;var d=$(b).attr("data-type");var a=$(b).attr("data-maxLength")?$(b).attr("data-maxLength"):false;if(a&&$(b).val().length>a){c.addError(d,widgetMessage.maxLengthError+" "+a+" "+widgetMessage.characters)}return true},validateField:function(b){var d=this;var e=$(b).attr("data-type");var a=d.expressions[e]?d.expressions[e]:new RegExp();var c=$(b).attr("data-regexp")?new RegExp($(b).attr("data-regexp"),"g"):a;if(!$(b).val().match(c)){d.addError(e,$(b).attr("data-regexpMessage")?$(b).attr("data-regexpMessage"):widgetMessage.invalidSyntax);return false}return true},showValidationErrors:function(){var d=this;var b=true;for(var e in d.errors){b=false;var a=d.errors[e];a=$('<div class="validationError" style="display: none"></div>').html(a);var c=$("[data-widget="+d.widgetName+"][data-type="+e+"]");switch($(c).attr("type")){case"checkbox":$(c).addClass("isError");break;default:$("[data-widget="+d.widgetName+"][data-type="+e+"]").after(a);break}$("[data-widget="+d.widgetName+"][data-type="+e+"]").unbind("blur");$("[data-widget="+d.widgetName+"][data-type="+e+"]").blur(function(){d.validate(e)}).prev().css("display","inline-block")}if($(".validationError").length>0){$(".validationError").show()}return b},validate:function(){var b=this;$("[data-widget="+b.widgetName+"][data-type=error]").hide();$("[data-widget="+b.widgetName+"][data-type=error]").html("");$(".validationError").remove();$(".isError").removeClass("isError");b.errors=[];if(typeof b.customValidation=="function"){b.customValidation()}var a=$("[data-widget="+b.widgetName+"]");a.each(function(c,d){var e=$(d).attr("data-type");if(b.isRequired(d)){return}if(!b.isEmpty(d)&&!b.isMinLength(d)){return}if(!b.isEmpty(d)&&!b.isMaxLength(d)){return}if(!b.isEmpty(d)&&!b.validateField(d)){return}if(typeof b[e]=="function"&&e!="submit"){if(!b[e](d)){return}}});return b.showValidationErrors()}};
var virtualDealerWidget={tradeFinished:true,init:function(){var a=this;$(a.element).hide();$(window).on(widgets.events.tradeIsStarted,function(b){a.tradeFinished=false;setTimeout(function(){if(!a.tradeFinished){$(a.element).show()}},1000)});$(window).on(widgets.events.tradeIsCompleted,function(b){if($(a.element).is(":visible")){$(a.element).hide()}a.tradeFinished=true})}};
var helper={ucfirst:function(b){b+="";var a=b.charAt(0).toUpperCase();return a+b.substr(1)},setGender:function(b){var a='<option value="">'+widgetMessage.choose+"</option>";a+='<option value="true">'+widgetMessage.male+"</option>";a+='<option value="false">'+widgetMessage.female+"</option>";b.append(a)},setTitle:function(a){var b='<option value="">'+widgetMessage.choose+"</option>";b+='<option value="mister">'+widgetMessage.mister+"</option>";b+='<option value="miss">'+widgetMessage.miss+"</option>";b+='<option value="mrs">'+widgetMessage.mrs+"</option>";a.append(b)},setCountries:function(a,c){var b='<option value="">'+widgetMessage.choose+"</option>";$.each(c,function(d,e){b+='<option value="'+e.countryCode+'">'+e.name+"</option>"});a.append(b)},setLocation:function(a,b){a.val(b.country.code)},setCurrency:function(a,b){a.val(b.country.currency)},setPhoneCode:function(a,b){a.val(b.country.phoneCode)},setLanguages:function(a,c){var b='<option value="">'+widgetMessage.choose+"</option>";$.each(c,function(d,e){b+='<option value="'+e.lcid+'">'+e.nativeLanguage+"</option>"});a.append(b)},setCurrencies:function(b,c){var a='<option value="">'+widgetMessage.choose+"</option>";$.each(c,function(e,d){a+='<option value="'+e+'">'+d+"</option>"});b.append(a)},setDaysOfMonth:function(c){var b="<option>--</option>";for(var a=1;a<=31;a++){b+='<option value="'+a+'">'+a+"</option>"}c.html(b)},setMonths:function(f,e){var a=widgetMessage.monthNames;if(e){switch(e){case"m":a=["01","02","03","04","05","06","07","08","09","10","11","12"];break;case"mmm":a=widgetMessage.monthNamesShort;break;default:widgetMessage.monthNames;break}}var c="<option>--</option>";for(var b in a){var b=parseInt(b);var d=a[b];c+='<option value="'+(b+1)+'">'+d+"</option>"}f.html(c)},setYears:function(d){var c="<option>--</option>";var a=new Date();var e=a.getFullYear()-18;for(var b=e;b>=1932;b--){c+='<option value="'+b+'">'+b+"</option>"}d.html(c)},setLastExecutedTrade:function(m,g,i,b,f,j,o,h,a,n,k,e,d,l,c){widgets.lastExecutedTrade=new Object();widgets.lastExecutedTrade.ruleId=m;widgets.lastExecutedTrade.option=g;widgets.lastExecutedTrade.investType=i;widgets.lastExecutedTrade.rateAlpha=b;widgets.lastExecutedTrade.rateBeta=f;widgets.lastExecutedTrade.rate=j;widgets.lastExecutedTrade.strikeRate=o;widgets.lastExecutedTrade.amount=h;widgets.lastExecutedTrade.contracts=a;widgets.lastExecutedTrade.game=n;widgets.lastExecutedTrade.serialNumber=k;widgets.lastExecutedTrade.sellOne=e;widgets.lastExecutedTrade.isUp=d?true:false;widgets.lastExecutedTrade.minuteVal=l;widgets.lastExecutedTrade.tsOrderDate=c},isUserClassEnabled:function(a){return widgets.user.userAccountClasses.indexOf(a)>-1},formatPayout:function(a){var c=widgets.payoutType||null;var b=a;if(helper.getGlobalSetting("DisplayPayOutPlus100")){b=this.getReturn(a)}else{b=this.getSimple(a)}switch(c){case"decimal":b=this.getDecimal(a);break;case"fractional":b=this.getFraction(a);break;case"moneyline":b=this.getMoneyline(a);break;case"simple":b=this.getSimple(a);break;default:b;break}return b},formatExpiration:function(c){if(typeof c!="object"){return false}var e=isNaN(new Date(widgets.serverDateTime.timestamp))?new Date():new Date(widgets.serverDateTime.timestamp);var g=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate();var d=c.getFullYear()+"-"+c.getMonth()+"-"+c.getDate();var b=c.getHours();b=(b<10?"0":"")+b;var f=c.getMinutes();f=(f<10?"0":"")+f;var a=b+":"+f;if(d!=g&&!widgets.isLadderBased(widgets.game)){a=$.datepicker.formatDate("dd M "+b+":"+f,c)}return a},formatExpirationTime:function(e,c){if(typeof e!="number"){return false}if(typeof c=="undefined"){c=true}var a="";if(e<24*60*60*1000){a=dateDiff.getDate(e)}else{var f=parseInt((e/1000)%60);f=f<10?"0"+f:f;var d=parseInt((e/(1000*60))%60);d=d<10?"0"+d:d;var b=parseInt((e/(1000*60*60))%24);b=b<10?"0"+b:b;var g=parseInt(e/(1000*60*60*24));a=(g==1?g+" "+widgetMessage.day:g+" "+widgetMessage.days)+" "+b+":"+d+":"+f}if(!c){a=a.substr(0,a.lastIndexOf(":"))}return a},formatDuration:function(e){var a=60*1000;var f=a*60;var d=f*24;var c=d*30;var b=d*365;if(e<a){return Math.round(e/1000)+" sec"}else{if(e<f){return Math.round(e/a)+" min"}else{if(e<d){return Math.round(e/f)+" hours"}else{if(e<c){return Math.round(e/d)+" days"}else{if(e<b){return Math.round(e/c)+" months"}else{return Math.round(e/b)+" years"}}}}}},formatExpirationClosedTrade:function(c){if(typeof c!="object"){return false}var d=c.getFullYear()+"-"+c.getMonth()+"-"+c.getDate();var b=c.getHours();b=(b<10?"0":"")+b;var e=c.getMinutes();e=(e<10?"0":"")+e;var a=b+":"+e;a=$.datepicker.formatDate("dd M "+b+":"+e,c);return a},getSimple:function(a){return("+"+a)+"%"},getFraction:function(a){return this.dec2frac((a/100))},getDecimal:function(a){return(a+100)/100},getReturn:function(a){return(a+100)+"%"},getMoneyline:function(a){var a=(a+100)/100;return a>=2?"+"+Math.round(100*(a-1)):Math.round(-100/(a-1))},dec2frac:function(c){var b=1;var a=1;var e=1;while(b!=c){if(b<c){a+=1}else{e+=1;a=parseInt(c*e)}b=a/e}return a+"/"+e},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))},parsePriceCollection:function(b){var a=[];$.each(b,function(c,d){a.push({id:d.id,rate:d.r,rateAlpha:d.rA,rateBeta:d.rB,type:d.ot,timestamp:d.ts,dateTime:new Date(d.ts)})});return a},parseOptionsCollection:function(d,a){var b=[];if(d.type=="Games_NoOptions"){return b}switch(a){case"turboBinary":var c;$.each(d,function(e,f){c=new Object();c.id=f.id;c.name=f.name;c.type=f.t;c.accuracy=f.acc;c.rules=[];$.each(f.rls,function(g,h){c.rules.push({id:h.id,name:h.name,payout:h.pyt,returnOnLoss:h.ROL,dates:{from:{dateTime:new Date(h.ts.from),timestamp:h.ts.from},to:{dateTime:new Date(h.ts.to),timestamp:h.ts.to}},interval:h.i})});b.push(c)});break;case"ladder":case"binary100":$.each(d,function(e,f){b.push({id:f.id,name:f.name,activeAtDateTime:new Date(f.aAt),activeAtTimestamp:f.aAt,expirationDateTime:new Date(f.expTS),expirationTimestamp:f.expTS,payout:f.pyt,returnOnLoss:f.ROL,assetName:f.aName,disableInvestTimeInSeconds:f.DIT,tradableAssetId:f.TAId,serialNumber:f.sn})});break;default:$.each(d,function(e,f){b.push({id:f.id,name:f.name,expirationDateTime:new Date(f.expTS),expirationTimestamp:f.expTS,payout:f.pyt,returnOnLoss:f.ROL,assetName:f.aName,disableInvestTimeInSeconds:f.DIT,tradableAssetId:f.TAId})})}return b},binary_search_iterative:function(b,d){lo=0;hi=b.length-1;while(lo<=hi){var c=Math.floor((lo+hi)/2);if(b[c]>d){hi=c-1}else{if(b[c]<d){lo=c+1}else{return[c,0]}}}return[lo,hi]},getCSS:function(){},getInternetExplorerVersion:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}else{if(navigator.appName=="Netscape"){var a=navigator.userAgent;var b=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}}return c},translateDatepicker:function(a){a.datepicker("option","monthNames",widgetMessage.monthNames);a.datepicker("option","monthNamesShort",widgetMessage.monthNamesShort);a.datepicker("option","dayNames",widgetMessage.daysNames);a.datepicker("option","dayNamesMin",widgetMessage.daysNamesMin);a.datepicker("option","dayNamesShort",widgetMessage.daysNamesShort);a.datepicker("option","closeText",widgetMessage.close);a.datepicker("option","prevText",widgetMessage.prev);a.datepicker("option","nextText",widgetMessage.next);a.datepicker("option","currentText",widgetMessage.today);$("#ui-datepicker-div").css("display","none")},dateFormats:{masks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoShortTime:"HH:MM",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",normalDateTime:"yyyy-mm-dd' 'HH:MM:ss"},i18n:{dayNames:[widgetMessage.daysNamesShort,widgetMessage.daysNames],monthNames:[widgetMessage.monthNamesShort,widgetMessage.monthNames]}},formatDate:function(v,q,a){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g,r=function(m,d){m=String(m);d=d||2;while(m.length<d){m="0"+m}return m};var j=helper.dateFormats;if(arguments.length==1&&Object.prototype.toString.call(v)=="[object String]"&&!/\d/.test(v)){q=v;v=undefined}if(new Date(v)&&typeof v=="string"){v=v.split(".")[0]}v=v?new Date(v):new Date;if(isNaN(v.timestamp)==false){throw SyntaxError("invalid date")}q=String(j.masks[q]||q||j.masks["default"]);if(q.slice(0,4)=="UTC:"){q=q.slice(4);a=true}var w=a?"getUTC":"get",t=v[w+"Date"](),k=v[w+"Day"](),p=v[w+"Month"](),g=v[w+"FullYear"](),h=v[w+"Hours"](),e=v[w+"Minutes"](),i=v[w+"Seconds"](),f=v[w+"Milliseconds"](),l=a?0:v.getTimezoneOffset(),b={d:t,dd:r(t),ddd:j.i18n.dayNames[0][k],dddd:j.i18n.dayNames[1][k],m:p+1,mm:r(p+1),mmm:j.i18n.monthNames[0][p],mmmm:j.i18n.monthNames[1][p],yy:String(g).slice(2),yyyy:g,h:h%12||12,hh:r(h%12||12),H:h,HH:r(h),M:e,MM:r(e),s:i,ss:r(i),l:r(f,3),L:r(f>99?Math.round(f/10):f),t:h<12?"a":"p",tt:h<12?"am":"pm",T:h<12?"A":"P",TT:h<12?"AM":"PM",Z:a?"UTC":(String(v).match(n)||[""]).pop().replace(u,""),o:(l>0?"-":"+")+r(Math.floor(Math.abs(l)/60)*100+Math.abs(l)%60,4),S:["th","st","nd","rd"][t%10>3?0:(t%100-t%10!=10)*t%10]};return q.replace(c,function(d){return d in b?b[d]:d.slice(1,d.length-1)})},toServerDateFrom:function(c){var a=new Date(c);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var d=new Date(a.setTime(a.getTime()+a.getTimezoneOffset()*1000*60));var b=helper.formatDate(d,helper.dateFormats.masks.isoDateTime);return b},toServerDateTo:function(d){var a=new Date(d);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var b=60*60*24*1000-1000;var e=new Date(a.setTime(a.getTime()+a.getTimezoneOffset()*1000*60+1*(b)));var c=helper.formatDate(e,helper.dateFormats.masks.isoDateTime);return c},getCurrencySymbol:function(a){var b="";if(typeof a=="object"){if(typeof widgets.isUsingCurrencyCode!="undefined"&&widgets.isUsingCurrencyCode==true){b=a.currencyType}else{b=a.currencySymbol}}else{if(widgets.isLogged()){if(typeof widgets.isUsingCurrencyCode!="undefined"&&widgets.isUsingCurrencyCode==true){b=widgets.user.currencyCode}else{b=widgets.user.currencySymbol}}else{if(widgets.settings){if(typeof widgets.isUsingCurrencyCode!="undefined"&&widgets.isUsingCurrencyCode==true){b=widgets.settings.environment.DefaultCurrency.name}else{b=widgets.settings.environment.DefaultCurrency.symbol}}}}return b},getCurrencyFactor:function(){var a;if(widgets.isLogged()){a=widgets.user.currencyFactor}else{a=parseFloat(widgets.settings.environment.CurrencyFactor)}return a},formatCurrency:function(a,c,b){if(!helper.checkCurrencySubUnit(a)&&parseInt(c).toString()!="NaN"){c=helper.numberWithCommas(Math.round(c).toString())}else{if(typeof b!=undefined&&b===true){c=helper.numberWithCommas(c.toString())}}if(helper.currenciesInfrontOfValue.indexOf(a)>-1||(typeof widgets.isUsingCurrencyCode!="undefined"&&widgets.isUsingCurrencyCode==true)){return a+" "+c}else{return c+" "+a}},numberWithCommas:function(a){if(!a){return""}return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},currenciesInfrontOfValue:[String.fromCharCode(36),String.fromCharCode(165),String.fromCharCode(8364),String.fromCharCode(163)],checkCurrencySubUnit:function(b){var a=helper.getGlobalSetting("CurrenciesWithoutSubunits"),c=true;if(a.length>0){$.each(a,function(f,e){var d=e.symbol;if(d==b){c=false;return false}})}return c},getQueryParams:function(){var b=window.location.search;if(!b){return[]}var e=b.split("?")[1];var d=e.split("&");var a={};var f=[];for(var c=0;c<d.length;c++){f=d[c].split("=");a[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return a},addQueryParameter:function(a,h,d,b){replaceDuplicates=true;if(a.indexOf("#")>0){var j=a.indexOf("#");urlhash=a.substring(a.indexOf("#"),a.length)}else{urlhash="";j=a.length}sourceUrl=a.substring(0,j);var c=sourceUrl.split("?");var f="";if(c.length>1){var k=c[1].split("&");for(var e=0;(e<k.length);e++){var g=k[e].split("=");if(!(replaceDuplicates&&g[0]==h)){if(f==""){f="?"}else{f+="&"}f+=g[0]+"="+(g[1]?g[1]:"")}}}if(f==""){f="?"}if(b){f="?"+h+"="+d+(f.length>1?"&"+f.substring(1):"")}else{if(f!==""&&f!="?"){f+="&"}f+=h+"="+(d?d:"")}return c[0]+f+urlhash},formatSerialNumber:function(b){var a=b;if(parseInt(b)<10){a="0"+b}return"#"+a},updateHistoryPricesOffset:function(a){a.date.from.timestamp=widgets.getDate(a.date.from.timestamp).getTime();a.date.to.timestamp=widgets.getDate(a.date.to.timestamp).getTime();for(var b=0;b<a.history.length;b++){a.history[b][0]=widgets.getDate(a.history[b][0]).getTime()}return a},rateDeltaStateClear:function(a){$(a).each(function(){$(this).data("previous-value",null);$(this).removeClass("rate-down").removeClass("rate-up")})},rateDeltaState:function(a){$(a).each(function(){var b=parseFloat($(this).data("previous-value"));var c=parseFloat($(this).html());if(c&&b&&c>b){$(this).data("previous-value",c);$(this).removeClass("rate-down").addClass("rate-up")}else{if(c&&b&&c<b){$(this).data("previous-value",c);$(this).removeClass("rate-up").addClass("rate-down")}else{if(c){$(this).data("previous-value",c)}}}})},truncateDecimals:function(b,c){var e=Math.pow(10,c),a=b*e,d=Math[a<0?"ceil":"floor"](a);return(d/e).toFixed(c)},isBalanceBelowMin:function(){if(widgets.isLogged()&&widgets.user.isReal&&helper.getGlobalSetting("EnableTradeBelowMin")&&widgets.limitations!=null&&parseFloat(widgets.user.balance)<parseFloat(widgets.limitations.minAmount)){return true}else{return false}},isEmptyObject:function(a){return Object.keys(a).length===0},selectGenerator:function(f,c){var e,a,g,f=f,c=c,b="",i="",d,h={helpers:{generateOption:function(j,k,l){return"<li class='option "+(l!==undefined?l:"")+"'"+j+">"+k+"</li>"}},getItemNumberFromValue:function(){if(typeof c==="string"){for(var j=0,k=f.length;j<k;j++){if(f[j].data.value===c){c=j;j=k}}}},generateOptions:function(){for(var k=0,j=f.length;k<j;k++){if(f[k].hasOwnProperty("optgroup")===true){b+="<li class='optgroup'>"+f[k].optgroup+"</li>"}else{i="";if(f[k].hasOwnProperty("data")===true){$.each(f[k].data,function(l,m){i+=" data-"+l+"='"+m+"'"});if(c===undefined){c=k}if(c===k){d=i+" value='"+f[k].data.value+"'"}}else{console.log("The option don't have assigned value")}b+=this.helpers.generateOption(i,f[k].itemText,k===c?"selected":"")}}},generateTemplate:function(){e=$("<div class='select-wrapper'"+d+"><p>"+f[c].itemText+"</p><span class='select-wrapper-icon'></span><ul>"+b+"</ul></div>")},attacheEvents:function(){e.off("click").on("click",function(j){a=$(j.target);if(a[0].className.indexOf("optgroup")!==0){if(e.hasClass("open")===true){$(this).removeClass("open").off("mouseleave mouseenter").trigger("selectIsClose")}else{e.addClass("open").on("mouseleave",function(){g=setTimeout(function(k){return function(){k.removeClass("open").off("mouseleave mouseenter")}}($(this)),1000)}).on("mouseenter",function(){clearTimeout(g)}).trigger("selectIsOpen")}if(a[0].tagName==="LI"){e.off("mouseleave mouseenter").changeSelectedOption(a.attr("data-value"))}}})},setSelectMethods:function(){e.addOption=function(j,l,k){if(k===undefined){$("ul:first",e).append(h.helpers.generateOption(j,l))}else{$("ul:first",e).append(h.helpers.generateOption(j,l))}};e.removeOption=function(j){if(typeof j==="string"){e.find("li[data-value='"+j+"']").remove()}else{e.find("li").eq(j).remove()}};e.sortOptions=function(){};e.changeSelectedOption=function(k){var j=e.find("li"),l;if(k!==undefined){if(typeof k==="string"){l=j.filter("li[data-value='"+k+"']");if(l.length>1){console.log("The are duplicated value, the select will working incorrect values have to be unique. \n The select will be forced to use the first option.");l=l.eq(0)}}else{l=j.filter("li").eq(k)}a=l;m()}else{console.log(typeof k==="string"?"The value that have to be selected don't exist":"The item in custom select that you try to select don't exist")}function m(){$.each(l[0].attributes,function(o,n){if(n.name.indexOf("data-")===0){e.attr(n.name,n.value)}if(n.name==="data-value"||n.name==="value"){e.attr("value",n.value)}});e.trigger("change").find("p").eq(0).text(l.text());j.removeClass("selected");l.addClass("selected")}}},init:function(){h.getItemNumberFromValue();h.generateOptions();h.generateTemplate();h.setSelectMethods();h.attacheEvents()}};h.init();return e},getGlobalSetting:function(a){if(widgets&&widgets.settings&&widgets.settings.application){var b=widgets.settings.application[a];if(b&&b.Value){if(b.Value.toString().toLowerCase()=="true"){return true}else{if(b.Value.toString().toLowerCase()=="false"){return false}else{return b.Value}}}}return false}};var URL=(function(b){return{serialize:function(d){var a,c=[];for(a in d){c.push(encodeURIComponent(a)+"="+encodeURIComponent(d[a]))}return c.join("&")},unserialize:function(a){var d,c={};a=a.replace(/^\?/,"").split(/&/);for(d in a){d=a[d].split("=");c[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return c},parse:function(a){b.href=a;return{hash:b.hash,host:b.host,hostname:b.hostname,href:a,pathname:b.pathname,port:b.port,protocol:b.protocol,search:b.search,file:b.pathname.split("/").pop(),params:URL.unserialize(b.search)}}}}(document.createElement("a")));if(!Date.prototype.toISOString){(function(){function a(c){var b=String(c);if(b.length===1){b="0"+b}return b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}())}Object.keys=Object.keys||(function(){var b=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=a.length;return function(h){if(typeof h!="object"&&typeof h!="function"||h===null){throw new TypeError("Object.keys called on a non-object")}var e=[];for(var f in h){if(b.call(h,f)){e.push(f)}}if(d){for(var g=0;g<c;g++){if(b.call(h,a[g])){e.push(a[g])}}}return e}})();function inArray(d,c){var b=c.length;for(var a=0;a<b;a++){if(c[a]==d){return true}}return false}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}if(!Number.prototype.round){Number.prototype.round=function(a){return +(Math.round(this+"e+"+a)+"e-"+a)}};
var priceHelper={applyBinaryPromotions:function(d){var c=false;var e=priceHelper.userWithMarketPrice();var a={};if(typeof(widgets.user)!=="undefined"&&widgets.user!==null&&typeof(widgets.user.promotionalPrices)!=="undefined"&&widgets.user.promotionalPrices!==null){if(widgets.game=="digital"){var b={};$.each(widgets.user.promotionalPrices,function(f,g){if(!g.IsPrivate){b[g.TradableAssetID]=g}});$.each(widgets.options,function(f,g){if(typeof(b[g.tradableAssetId])!=="undefined"&&b[g.tradableAssetId]!==null){a[g.id]=b[g.tradableAssetId];c=true}})}}if(c===true||e===true){$.each(d,function(g,j){if(j.type=="Binary"){if(e===true){if(typeof(j.marketrate)!=="undefined"&&j.marketrate!==null){j.rate=parseFloat(j.marketrate)}}else{if(c===true&&typeof(a[j.id])!=="undefined"&&a[j.id]!==null){var f=a[j.id];if(f){var k=f.Accuracy;var h=parseFloat(j.rate);if(typeof(j.marketrate)!=="undefined"&&j.marketrate!==null){h=parseFloat(j.marketrate)}j.rate=(h+(f.PriceDeviationInPips/Math.pow(10,k))).toFixed(k);j.marketrate=h;j.PPDRuleID=f.ID}}}}})}},applyTurboPromotions:function(b){if(widgets.game=="turboBinary"){if(typeof(widgets.user)!=="undefined"&&widgets.user!==null&&typeof(widgets.user.promotionalPrices)!=="undefined"&&widgets.user.promotionalPrices!==null){var c=priceHelper.userWithMarketPrice();if(c===false){var a={};$.each(widgets.user.promotionalPrices,function(d,e){if(e.IsPrivate){a[e.TradableAssetID]=e}});$.each(b,function(e,f){if(f.type=="private"){if(typeof(a[f.id])!=="undefined"&&a[f.id]!==null){var d=a[f.id];if(d){var g=d.Accuracy;f.marketrate=f.rate;f.rate=(parseFloat(f.marketrate)+(d.PriceDeviationInPips/Math.pow(10,g))).toFixed(g);f.PPDRuleID=d.ID}}}})}}}},updateOptionPrice:function(g,k){var d=priceHelper.userWithMarketPrice();var b=priceHelper.applyUserRiskFactor(g,k,d);if(g.type=="Binary"){var j={};var l=null;var h=k.isAlpha===true;var c=g.rate;var e=null;var a=null;var i=null;var f=null;if(typeof(g.PPDRuleID)!=="undefined"&&g.PPDRuleID!==null){j.PPDRuleID=g.PPDRuleID;e=parseFloat(g.rate)}else{if(typeof(g.marketrate)!=="undefined"&&g.marketrate!==null&&g.rate!=g.marketrate){a=parseFloat(g.rate);c=parseFloat(g.marketrate)}}if(typeof(b.modified)!=="undefined"&&b.modified===true){if(typeof(b.PWL)!=="undefined"&&b.PWL!==false){i=parseFloat(b.rate)}else{f=parseFloat(b.rate)}}if(d===true){l=c}else{if(e!==null){if(i!==null){if(h===true){l=Math.min(e,i)}else{l=Math.max(e,i)}}else{l=e}if(l!==e){j.PPDRuleID=null;j.priceType="PWL"}else{j.priceType="PPD"}}else{if(i!==null){if(a!==null){if(h){l=Math.min(i,a)}else{l=Math.max(i,a)}}else{l=i}if(l===a){j.priceType="PD"}else{j.priceType="PWL"}}else{if(f!==null){if(a!=null){if(h){l=Math.max(f,a)}else{l=Math.min(f,a)}}else{l=f}if(l===a){j.priceType="PD"}else{j.priceType="NWL"}}else{if(a!=null){l=a;j.priceType="PD"}else{return j}}}}}j.modified=true;j.rate=l;g.riskPrice=j}else{if(typeof(b.modified)!=="undefined"&&b.modified===true){g.riskPrice=b}}},applyUserRiskFactor:function(e,d,c){var a={};if(c===false&&priceHelper.enableRiskFactorPrice()==true){if(typeof(widgets.user)!=="undefined"&&widgets.user!==null&&typeof(widgets.user.riskFactors)!=="undefined"&&widgets.user.riskFactors!==null){var h=widgets.user.riskFactors[e.type];if(h&&h!=0){var g=e.accuracy;switch(e.type){case"Binary":var b=e.rate;if(typeof(e.marketrate)!=="undefined"&&e.marketrate!==null){b=e.marketrate}if(d.isAlpha===true){a.rate=priceHelper.applyRiskFactorToPrice(b,g,h,true);a.PWL=h<0;a.modified=true}else{if(d.isAlpha===false){a.rate=priceHelper.applyRiskFactorToPrice(b,g,h,false);a.PWL=h<0;a.modified=true}}break;case"Touch":if(d.isAlpha===true){a.rateBeta=priceHelper.applyRiskFactorToPrice(e.rateBeta,g,h,true);a.modified=true}else{if(d.isAlpha===false){a.rateAlpha=priceHelper.applyRiskFactorToPrice(e.rateAlpha,g,h,false);a.modified=true}}break;case"OneTouch":var f=d.option.isUp;if(f===true&&d.isAlpha===true){a.rateAlpha=priceHelper.applyRiskFactorToPrice(e.rateAlpha,g,h,true);a.modified=true}else{if(f===true&&d.isAlpha===false){a.rateAlpha=priceHelper.applyRiskFactorToPrice(e.rateAlpha,g,h,false);a.modified=true}else{if(f===false&&d.isAlpha===true){a.rateAlpha=priceHelper.applyRiskFactorToPrice(e.rateAlpha,g,h,false);a.modified=true}else{if(f===false&&d.isAlpha===false){a.rateAlpha=priceHelper.applyRiskFactorToPrice(e.rateAlpha,g,h,true);a.modified=true}}}}break;case"Range":if(d.isAlpha===true){a.rateAlpha={};a.rateAlpha.upperPrice=priceHelper.applyRiskFactorToRange(e.rateAlpha.upperPrice,e.rateAlpha.lowerPrice,g,h,true,true);a.rateAlpha.lowerPrice=priceHelper.applyRiskFactorToRange(e.rateAlpha.upperPrice,e.rateAlpha.lowerPrice,g,h,false,true);a.modified=true}else{if(d.isAlpha===false){a.rateBeta={};a.rateBeta.upperPrice=priceHelper.applyRiskFactorToRange(e.rateBeta.upperPrice,e.rateBeta.lowerPrice,g,h,true,false);a.rateBeta.lowerPrice=priceHelper.applyRiskFactorToRange(e.rateBeta.upperPrice,e.rateBeta.lowerPrice,g,h,false,false);a.modified=true}}break}}}}return a},applyRiskFactorToPrice:function(b,c,d,a){if(a){return parseFloat(parseFloat(b)*(1+d)).toFixed(c)}else{return parseFloat(parseFloat(b)*(1-d)).toFixed(c)}},applyRiskFactorToRange:function(h,c,b,d,a,e){var k=e===true?-1:1;var g=1+k*(d*2000);var f=parseFloat(h)-parseFloat(c);var j=f*g;var i=(j-f)/2;if(a){return(parseFloat(h)+i).toFixed(b)}else{return(parseFloat(c)-i).toFixed(b)}},userWithMarketPrice:function(){if(priceHelper.enableRiskFactorPrice()==true&&typeof(widgets.user)!=="undefined"&&widgets.user!==null&&typeof(widgets.user.riskFactors)!=="undefined"&&widgets.user.riskFactors!==null&&typeof(widgets.user.riskFactors["255"])!=="undefined"&&widgets.user.riskFactors["255"]!==null){return true}return false},enableRiskFactorPrice:function(){if(typeof widgets.settings!="undefined"&&widgets.settings&&typeof widgets.settings.application!="undefined"){return widgets.settings.application.EnableWatchLevel.Value.toString().toLowerCase()=="true"}return false}};
(function(q){var h=q.Chart,z=q.addEvent,e=q.removeEvent,i=q.createElement,g=q.discardElement,w=q.css,m=q.merge,b=q.each,d=q.extend,a=Math.max,n=document,c=window,H=q.isTouchDevice,x=q.Renderer.prototype.symbols,G=q.getOptions(),u;d(G.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});G.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:H?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};G.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};q.post=function(f,j,k){var l,f=i("form",m({method:"post",action:f,enctype:"multipart/form-data"},k),{display:"none"},n.body);for(l in j){i("input",{type:"hidden",name:l,value:j[l]},null,f)}f.submit();g(f)};d(h.prototype,{getSVG:function(f){var j=this,p,r,o,k,l=m(j.options,f);if(!n.createElementNS){n.createElementNS=function(t,s){return n.createElement(s)}}f=i("div",null,{position:"absolute",top:"-9999em",width:j.chartWidth+"px",height:j.chartHeight+"px"},n.body);r=j.renderTo.style.width;k=j.renderTo.style.height;r=l.exporting.sourceWidth||l.chart.width||/px$/.test(r)&&parseInt(r,10)||600;k=l.exporting.sourceHeight||l.chart.height||/px$/.test(k)&&parseInt(k,10)||400;d(l.chart,{animation:!1,renderTo:f,forExport:!0,width:r,height:k});l.exporting.enabled=!1;l.series=[];b(j.series,function(s){o=m(s.options,{animation:!1,showCheckbox:!1,visible:s.visible});o.isInternal||l.series.push(o)});p=new q.Chart(l,j.callback);b(["xAxis","yAxis"],function(s){b(j[s],function(t,B){var y=p[s][B],A=t.getExtremes(),v=A.userMin,A=A.userMax;y&&(v!==void 0||A!==void 0)&&y.setExtremes(v,A,!0,!1)})});r=p.container.innerHTML;l=null;p.destroy();g(f);r=r.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(s){return s.toLowerCase()});return r=r.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(f,j){var f=f||{},k=this.options.exporting,k=this.getSVG(m({chart:{borderRadius:0}},k.chartOptions,j,{exporting:{sourceWidth:f.sourceWidth||k.sourceWidth,sourceHeight:f.sourceHeight||k.sourceHeight}})),f=m(this.options.exporting,f);q.post(f.url,{filename:f.filename||"chart",type:f.type,width:f.width||0,scale:f.scale||2,svg:k},f.formAttributes)},print:function(){var j=this,k=j.container,p=[],r=k.parentNode,o=n.body,l=o.childNodes;if(!j.isPrinting){j.isPrinting=!0,b(l,function(s,f){if(s.nodeType===1){p[f]=s.style.display,s.style.display="none"}}),o.appendChild(k),c.focus(),c.print(),setTimeout(function(){r.appendChild(k);b(l,function(s,f){if(s.nodeType===1){s.style.display=p[f]}});j.isPrinting=!1},1000)}},contextMenu:function(N,O,L,M,J,F,I){var K=this,C=K.options.navigation,v=C.menuItemStyle,B=K.chartWidth,A=K.chartHeight,D="cache-"+N,E=K[D],r=a(J,F),p,l,y,t=function(f){K.pointer.inClass(f.target,N)||l()};if(!E){K[D]=E=i("div",{className:N},{position:"absolute",zIndex:1000,padding:r+"px"},K.container),p=i("div",null,d({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},C.menuStyle),E),l=function(){w(E,{display:"none"});I&&I.setState(0);K.openMenu=!1},z(E,"mouseleave",function(){y=setTimeout(l,500)}),z(E,"mouseenter",function(){clearTimeout(y)}),z(document,"mouseup",t),z(K,"destroy",function(){e(document,"mouseup",t)}),b(O,function(j){if(j){var f=j.separator?i("hr",null,null,p):i("div",{onmouseover:function(){w(this,C.menuItemHoverStyle)},onmouseout:function(){w(this,v)},onclick:function(){l();j.onclick.apply(K,arguments)},innerHTML:j.text||K.options.lang[j.textKey]},d({cursor:"pointer"},v),p);K.exportDivElements.push(f)}}),K.exportDivElements.push(p,E),K.exportMenuWidth=E.offsetWidth,K.exportMenuHeight=E.offsetHeight}O={display:"block"};L+K.exportMenuWidth>B?O.right=B-L-J-r+"px":O.left=L-r+"px";M+F+K.exportMenuHeight>A&&I.alignOptions.verticalAlign!=="top"?O.bottom=A-M-r+"px":O.top=M+F-r+"px";w(E,O);K.openMenu=!0},addButton:function(E){var F=this,C=F.renderer,D=m(F.options.navigation.buttonOptions,E),t=D.onclick,y=D.menuItems,A,B,s={stroke:D.symbolStroke,fill:D.symbolFill},f=D.symbolSize||12;if(!F.btnCount){F.btnCount=0}if(!F.exportDivElements){F.exportDivElements=[],F.exportSVGElements=[]}if(D.enabled!==!1){var r=D.theme,p=r.states,k=p&&p.hover,p=p&&p.select,v;delete r.states;t?v=function(){t.apply(F,arguments)}:y&&(v=function(){F.contextMenu(B.menuClassName,y,B.translateX,B.translateY,B.width,B.height,B);B.setState(2)});D.text&&D.symbol?r.paddingLeft=q.pick(r.paddingLeft,25):D.text||d(r,{width:D.width,height:D.height,padding:0});B=C.button(D.text,0,0,v,r,k,p).attr({title:F.options.lang[D._titleKey],"stroke-linecap":"round"});B.menuClassName=E.menuClassName||"highcharts-menu-"+F.btnCount++;D.symbol&&(A=C.symbol(D.symbol,D.symbolX-f/2,D.symbolY-f/2,f,f).attr(d(s,{"stroke-width":D.symbolStrokeWidth||1,zIndex:1})).add(B));B.add().align(d(D,{width:B.width,x:q.pick(D.x,u)}),!0,"spacingBox");u+=(B.width+D.buttonSpacing)*(D.align==="right"?-1:1);F.exportSVGElements.push(B,A)}},destroyExport:function(f){var f=f.target,j,k;for(j=0;j<f.exportSVGElements.length;j++){if(k=f.exportSVGElements[j]){k.onclick=k.ontouchstart=null,f.exportSVGElements[j]=k.destroy()}}for(j=0;j<f.exportDivElements.length;j++){k=f.exportDivElements[j],e(k,"mouseleave"),f.exportDivElements[j]=k.onmouseout=k.onmouseover=k.ontouchstart=k.onclick=null,g(k)}}});x.menu=function(f,j,k,l){return["M",f,j+2.5,"L",f+k,j+2.5,"M",f,j+l/2+0.5,"L",f+k,j+l/2+0.5,"M",f,j+l-1.5,"L",f+k,j+l-1.5]};h.prototype.callbacks.push(function(f){var j,k=f.options.exporting,l=k.buttons;u=0;if(k.enabled!==!1){for(j in l){f.addButton(l[j])}z(f,"destroy",f.destroyExport)}})})(Highcharts);
(function(am,aa){function x(m,h,n){this.init.call(this,m,h,n)}function l(m,h,n){m.call(this,h,n);if(this.chart.polar){this.closeSegment=function(o){var p=this.xAxis.center;o.push("L",p[0],p[1])},this.closedStacks=!0}}function k(u,s){var r=this.chart,q=this.options.animation,p=this.group,n=this.markerGroup,o=this.xAxis.center,m=r.plotLeft,h=r.plotTop;if(r.polar){if(r.renderer.isSVG){if(q===!0&&(q={}),s){if(r={translateX:o[0]+m,translateY:o[1]+h,scaleX:0.001,scaleY:0.001},p.attr(r),n){n.attrSetters=p.attrSetters,n.attr(r)}}else{r={translateX:m,translateY:h,scaleX:1,scaleY:1},p.animate(r,q),n&&n.animate(r,q),this.animate=null}}}else{u.call(this,s)}}var f=am.arrayMin,e=am.arrayMax,ad=am.each,X=am.extend,aj=am.merge,d=am.map,af=am.pick,ab=am.pInt,al=am.getOptions().plotOptions,an=am.seriesTypes,ai=am.extendClass,j=am.splat,ak=am.wrap,i=am.Axis,ah=am.Tick,t=am.Series,ag=an.column.prototype,Z=Math,D=Z.round,ae=Z.floor,y=Z.ceil,c=Z.min,b=Z.max,W=function(){};X(x.prototype,{init:function(m,h,p){var o=this,n=o.defaultOptions;o.chart=h;if(h.angular){n.background={}}o.options=m=aj(n,m);(m=m.background)&&ad([].concat(j(m)).reverse(),function(r){var q=r.backgroundColor,r=aj(o.defaultBackgroundOptions,r);if(q){r.backgroundColor=q}r.color=r.backgroundColor;p.options.plotBands.unshift(r)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:Number.MIN_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var Y=i.prototype,ah=ah.prototype,a={getOffset:W,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:W,setCategories:W,setTitle:W},g={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,plotBands:[],tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,plotBands:[],showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},plotBands:[],showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(h){this.options=aj(this.defaultOptions,this.defaultRadialOptions,h)},getOffset:function(){Y.getOffset.call(this);this.chart.axisOffset[this.side]=0;this.center=this.pane.center=an.pie.prototype.getCenter.call(this.pane)},getLinePath:function(m,h){var n=this.center,h=af(h,n[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],h,h,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){Y.setAxisTranslation.call(this);if(this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.isXAxis)){this.minPixelPadding=this.transA*this.minPointOffset+(this.reversed?(this.endAngleRad-this.startAngleRad)/4:0)}},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange)},setAxisSize:function(){Y.setAxisSize.call(this);if(this.center){this.len=this.width=this.height=this.isCircular?this.center[2]*(this.endAngleRad-this.startAngleRad)/2:this.center[2]/2}},getPosition:function(m,h){if(!this.isCircular){h=this.translate(m),m=this.min}return this.postTranslate(this.translate(m),af(h,this.center[2]/2)-this.offset)},postTranslate:function(m,h){var o=this.chart,n=this.center,m=this.startAngleRad+m;return{x:o.plotLeft+n[0]+Math.cos(m)*h,y:o.plotTop+n[1]+Math.sin(m)*h}},getPlotBandPath:function(v,u,s){var r=this.center,q=this.startAngleRad,o=r[2]/2,p=[af(s.outerRadius,"100%"),s.innerRadius,af(s.thickness,10)],m=/%$/,h,n=this.isCircular;this.options.gridLineInterpolation==="polygon"?r=this.getPlotLinePath(v).concat(this.getPlotLinePath(u,!0)):(n||(p[0]=this.translate(v),p[1]=this.translate(u)),p=d(p,function(w){m.test(w)&&(w=ab(w,10)*o/100);return w}),s.shape==="circle"||!n?(v=-Math.PI/2,u=Math.PI*1.5,h=!0):(v=q+this.translate(v),u=q+this.translate(u)),r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],p[0],p[0],{start:v,end:u,innerR:af(p[1],p[0]-p[2]),open:h}));return r},getPlotLinePath:function(m,h){var s=this.center,r=this.chart,q=this.getPosition(m),o,p,n;this.isCircular?n=["M",s[0]+r.plotLeft,s[1]+r.plotTop,"L",q.x,q.y]:this.options.gridLineInterpolation==="circle"?(m=this.translate(m))&&(n=this.getLinePath(0,m)):(o=r.xAxis[0],n=[],m=this.translate(m),s=o.tickPositions,o.autoConnect&&(s=s.concat([s[0]])),h&&(s=[].concat(s).reverse()),ad(s,function(v,u){p=o.getPosition(v,m);n.push(u?"L":"M",p.x,p.y)}));return n},getTitlePosition:function(){var m=this.center,h=this.chart,n=this.options.title;return{x:h.plotLeft+m[0]+(n.x||0),y:h.plotTop+m[1]-{high:0.5,middle:0.25,low:0}[n.align]*m[2]+(n.y||0)}}};ak(Y,"init",function(w,v,u){var o;var s=v.angular,r=v.polar,p=u.isX,q=s&&p,m,h;h=v.options;var n=u.pane||0;if(s){if(X(this,q?a:g),m=!p){this.defaultRadialOptions=this.defaultRadialGaugeOptions}}else{if(r){X(this,g),this.defaultRadialOptions=(m=p)?this.defaultRadialXOptions:aj(this.defaultYAxisOptions,this.defaultRadialYOptions)}}w.call(this,v,u);if(!q&&(s||r)){w=this.options;if(!v.panes){v.panes=[]}this.pane=(o=v.panes[n]=v.panes[n]||new x(j(h.pane)[n],v,this),n=o);n=n.options;v.inverted=!1;h.chart.zoomType=null;this.startAngleRad=v=(n.startAngle-90)*Math.PI/180;this.endAngleRad=h=(af(n.endAngle,n.startAngle+360)-90)*Math.PI/180;this.offset=w.offset||0;if((this.isCircular=m)&&u.max===aa&&h-v===2*Math.PI){this.autoConnect=!0}}});ak(ah,"getPosition",function(m,h,q,p,o){var n=this.axis;return n.getPosition?n.getPosition(q):m.call(this,h,q,p,o)});ak(ah,"getLabelPosition",function(B,A,w,v,u,r,s,n,m){var o=this.axis,p=r.y,q=r.align,z=(o.translate(this.pos)+o.startAngleRad+Math.PI/2)/Math.PI*180;o.isRadial?(B=o.getPosition(this.pos,o.center[2]/2+af(r.distance,-25)),r.rotation==="auto"?v.attr({rotation:z}):p===null&&(p=ab(v.styles.lineHeight)*0.9-v.getBBox().height/2),q===null&&(q=o.isCircular?z>20&&z<160?"left":z>200&&z<340?"right":"center":"center",v.attr({align:q})),B.x+=r.x,B.y+=p):B=B.call(this,A,w,v,u,r,s,n,m);return B});ak(ah,"getMarkPath",function(m,h,s,r,q,o,p){var n=this.axis;n.isRadial?(m=n.getPosition(this.pos,n.center[2]/2+r),h=["M",h,s,"L",m.x,m.y]):h=m.call(this,h,s,r,q,o,p);return h});al.arearange=aj(al.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}});an.arearange=am.extendClass(an.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(h){return[h.low,h.high]},pointValKey:"low",translate:function(){var h=this.yAxis;an.area.prototype.translate.apply(this);ad(this.points,function(m){if(m.y!==null){m.plotLow=m.plotY,m.plotHigh=h.translate(m.high,0,1,0,1)}})},getSegmentPath:function(m){var h=[],r=m.length,q=t.prototype.getSegmentPath,p,n;n=this.options;for(var o=n.step;r--;){p=m[r],h.push({plotX:p.plotX,plotY:p.plotHigh})}m=q.call(this,m);if(o){o===!0&&(o="left"),n.step={left:"right",center:"center",right:"left"}[o]}h=q.call(this,h);n.step=o;n=[].concat(m,h);h[0]="L";this.areaPath=this.areaPath.concat(m,h);return n},drawDataLabels:function(){var m=this.data,h=m.length,s,r=[],q=t.prototype,o=this.options.dataLabels,p,n=this.chart.inverted;if(o.enabled||this._hasPointLabels){for(s=h;s--;){p=m[s],p.y=p.high,p.plotY=p.plotHigh,r[s]=p.dataLabel,p.dataLabel=p.dataLabelUpper,p.below=!1,n?(o.align="left",o.x=o.xHigh):o.y=o.yHigh}q.drawDataLabels.apply(this,arguments);for(s=h;s--;){p=m[s],p.dataLabelUpper=p.dataLabel,p.dataLabel=r[s],p.y=p.low,p.plotY=p.plotLow,p.below=!0,n?(o.align="right",o.x=o.xLow):o.y=o.yLow}q.drawDataLabels.apply(this,arguments)}},alignDataLabel:an.column.prototype.alignDataLabel,getSymbol:an.column.prototype.getSymbol,drawPoints:W});al.areasplinerange=aj(al.arearange);an.areasplinerange=ai(an.arearange,{type:"areasplinerange",getPointSpline:an.spline.prototype.getPointSpline});al.columnrange=aj(al.column,al.arearange,{lineWidth:1,pointRange:null});an.columnrange=ai(an.arearange,{type:"columnrange",translate:function(){var m=this.yAxis,h;ag.translate.apply(this);ad(this.points,function(o){var n=o.shapeArgs;o.plotHigh=h=m.translate(o.high,0,1,0,1);o.plotLow=o.plotY;n.y=h;n.height=o.plotY-h})},trackerGroups:["group","dataLabels"],drawGraph:W,pointAttrToOptions:ag.pointAttrToOptions,drawPoints:ag.drawPoints,drawTracker:ag.drawTracker,animate:ag.animate,getColumnMetrics:ag.getColumnMetrics});al.gauge=aj(al.line,{dataLabels:{enabled:!0,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1});ah={type:"gauge",pointClass:am.extendClass(am.Point,{setState:function(h){this.state=h}}),angular:!0,drawGraph:W,trackerGroups:["group","dataLabels"],translate:function(){var m=this.yAxis,h=this.options,n=m.center;this.generatePoints();ad(this.points,function(w){var v=aj(h.dial,w.dial),s=ab(af(v.radius,80))*n[2]/200,u=ab(af(v.baseLength,70))*s/100,p=ab(af(v.rearLength,10))*s/100,o=v.baseWidth||3,q=v.topWidth||1,r=m.startAngleRad+m.translate(w.y,null,null,null,!0);h.wrap===!1&&(r=Math.max(m.startAngleRad,Math.min(m.endAngleRad,r)));r=r*180/Math.PI;w.shapeType="path";w.shapeArgs={d:v.path||["M",-p,-o/2,"L",u,-o/2,s,-q/2,s,q/2,u,o/2,-p,o/2,"z"],translateX:n[0],translateY:n[1],rotation:r};w.plotX=n[0];w.plotY=n[1]})},drawPoints:function(){var m=this,h=m.yAxis.center,q=m.pivot,p=m.options,o=p.pivot,n=m.chart.renderer;ad(m.points,function(w){var r=w.graphic,v=w.shapeArgs,s=v.d,u=aj(p.dial,w.dial);r?(r.animate(v),v.d=s):w.graphic=n[w.shapeType](v).attr({stroke:u.borderColor||"none","stroke-width":u.borderWidth||0,fill:u.backgroundColor||"black",rotation:v.rotation}).add(m.group)});q?q.animate({translateX:h[0],translateY:h[1]}):m.pivot=n.circle(0,0,af(o.radius,5)).attr({"stroke-width":o.borderWidth||0,stroke:o.borderColor||"silver",fill:o.backgroundColor||"black"}).translate(h[0],h[1]).add(m.group)},animate:function(m){var h=this;if(!m){ad(h.points,function(n){var o=n.graphic;o&&(o.attr({rotation:h.yAxis.startAngleRad*180/Math.PI}),o.animate({rotation:n.shapeArgs.rotation},h.options.animation))}),h.animate=null}},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup);an.pie.prototype.render.call(this);this.group.clip(this.chart.clipRect)},setData:an.pie.prototype.setData,drawTracker:an.column.prototype.drawTracker};an.gauge=am.extendClass(an.line,ah);al.boxplot=aj(al.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Minimum: {point.low}<br/>Lower quartile: {point.q1}<br/>Median: {point.median}<br/>Higher quartile: {point.q3}<br/>Maximum: {point.high}<br/>'},whiskerLength:"50%",whiskerWidth:2});an.boxplot=ai(an.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(h){return[h.low,h.q1,h.median,h.q3,h.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:W,translate:function(){var m=this.yAxis,h=this.pointArrayMap;an.column.prototype.translate.apply(this);ad(this.points,function(n){ad(h,function(o){n[o]!==null&&(n[o+"Plot"]=m.translate(n[o],0,1,0,1))})})},drawPoints:function(){var aw=this,av=aw.points,au=aw.options,at=aw.chart.renderer,ar,ap,aq,T,S,U,V,ao,C,R,I,Q,K,E,P,O,G,M,F,H,L,N,s=aw.doQuartiles!==!1,J=parseInt(aw.options.whiskerLength,10)/100;ad(av,function(h){C=h.graphic;L=h.shapeArgs;I={};E={};O={};N=h.color||aw.color;if(h.plotY!==aa){if(ar=h.pointAttr[h.selected?"selected":""],G=L.width,M=ae(L.x),F=M+G,H=D(G/2),ap=ae(s?h.q1Plot:h.lowPlot),aq=ae(s?h.q3Plot:h.lowPlot),T=ae(h.highPlot),S=ae(h.lowPlot),I.stroke=h.stemColor||au.stemColor||N,I["stroke-width"]=h.stemWidth||au.stemWidth||au.lineWidth,I.dashstyle=h.stemDashStyle||au.stemDashStyle,E.stroke=h.whiskerColor||au.whiskerColor||N,E["stroke-width"]=h.whiskerWidth||au.whiskerWidth||au.lineWidth,O.stroke=h.medianColor||au.medianColor||N,O["stroke-width"]=h.medianWidth||au.medianWidth||au.lineWidth,V=I["stroke-width"]%2/2,ao=M+H+V,R=["M",ao,aq,"L",ao,T,"M",ao,ap,"L",ao,S,"z"],s&&(V=ar["stroke-width"]%2/2,ao=ae(ao)+V,ap=ae(ap)+V,aq=ae(aq)+V,M+=V,F+=V,Q=["M",M,aq,"L",M,ap,"L",F,ap,"L",F,aq,"L",M,aq,"z"]),J&&(V=E["stroke-width"]%2/2,T+=V,S+=V,K=["M",ao-H*J,T,"L",ao+H*J,T,"M",ao-H*J,S,"L",ao+H*J,S]),V=O["stroke-width"]%2/2,U=D(h.medianPlot)+V,P=["M",M,U,"L",F,U,"z"],C){h.stem.animate({d:R}),J&&h.whiskers.animate({d:K}),s&&h.box.animate({d:Q}),h.medianShape.animate({d:P})}else{h.graphic=C=at.g().add(aw.group);h.stem=at.path(R).attr(I).add(C);if(J){h.whiskers=at.path(K).attr(E).add(C)}if(s){h.box=at.path(Q).attr(ar).add(C)}h.medianShape=at.path(P).attr(O).add(C)}}})}});al.errorbar=aj(al.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:al.arearange.tooltip.pointFormat},whiskerWidth:null});an.errorbar=ai(an.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(h){return[h.low,h.high]},pointValKey:"high",doQuartiles:!1,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||an.column.prototype.getColumnMetrics.call(this)}});ak(Y,"getSeriesExtremes",function(m,h){m.call(this,h);if(!this.isXAxis){var p=this,o=[],n=!0;ad(p.series,function(G){if(G.visible&&G.stackKey&&!(G.type!=="waterfall"||HighchartsAdapter.inArray(G.stackKey)!==-1)){if(n){p.dataMin=p.dataMax=null,n=!1}var E=G.processedYData,z=E.length,C=E[0],A=E[0],B=G.options.threshold,w=p.stacks,v=G.stackKey,s="-"+v,H,u,r,F;for(F=0;F<z;F++){r=E[F]<B?s:v;H=w[r][F].total;if(F>B){H+=u,w[r][F].setTotal(H),w[r][F]._cum=null}H<C&&(C=H);H>A&&(A=H);u=H}G.dataMin=C;G.dataMax=A;p.dataMin=c(af(p.dataMin,C),C,B);p.dataMax=b(af(p.dataMax,A),A,B);o.push(G.stackKey);if(typeof B==="number"){if(p.dataMin>=B){p.dataMin=B,p.ignoreMinPadding=!0}else{if(p.dataMax<B){p.dataMax=B,p.ignoreMaxPadding=!0}}}}})}});al.waterfall=aj(al.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333"});an.waterfall=ai(an.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["y","low"],pointValKey:"y",init:function(m,h){h.stacking=!0;an.column.prototype.init.call(this,m,h)},translate:function(){var F=this.yAxis,E,C,B,A,w,z,s,r,u,v,q,p,h=this.options.borderWidth%2/2;an.column.prototype.translate.apply(this);B=this.points;u=s=B[0];z=r=B[0].y;for(C=1,E=B.length;C<E;C++){A=B[C],w=A.shapeArgs,v=this.getStack(C),q=this.getStack(C-1),p=this.getStackY(q),u===null&&(u=A,r=0),A.y&&!A.isSum&&!A.isIntermediateSum&&(z+=A.y,r+=A.y),A.isSum||A.isIntermediateSum?(A.isIntermediateSum?(v=this.getSumEdges(u,B[C-1]),A.y=r,u=null):(v=this.getSumEdges(s,B[C-1]),A.y=z),w.y=A.plotY=v[1],w.height=v[0]-v[1]):A.y<0?(q=v._cum===null?q.total:v._cum,v._cum=q+A.y,A=y(F.translate(q,0,1))-h,v=F.translate(v._cum,0,1),w.y=A,w.height=y(v-A)):w.height=ae(p-w.y)}},processData:function(m){t.prototype.processData.call(this,m);var m=this.yData,h=m.length,o,n;for(n=0;n<h;n++){o=m[n],o!==null&&typeof o!=="number"&&(m[n]=o==="sum"?null:o==="intermediateSum"?null:o[0])}},toYData:function(h){if(h.isSum){return"sum"}else{if(h.isIntermediateSum){return"intermediateSum"}}return[h.y]},getAttribs:function(){an.column.prototype.getAttribs.apply(this,arguments);var m=this.options,h=m.states,p=m.upColor||this.color,m=am.Color(p).brighten(0.1).get(),o=aj(this.pointAttr),n=this.upColorProp;o[""][n]=p;o.hover[n]=h.hover.upColor||m;o.select[n]=h.select.upColor||p;ad(this.points,function(q){if(q.y>0&&!q.color){q.pointAttr=o,q.color=p}})},getGraphPath:function(){var m=this.data,h=m.length,r=D(this.options.lineWidth+this.options.borderWidth)%2/2,q=[],p,n,o;for(o=1;o<h;o++){n=m[o].shapeArgs,p=m[o-1].shapeArgs,n=["M",p.x+p.width,p.y+r,"L",n.x,p.y+r],m[o-1].y<0&&(n[2]+=p.height,n[5]+=p.height),q=q.concat(n)}return q},getStack:function(m){var h=this.yAxis.stacks,n=this.stackKey;this.processedYData[m]<this.options.threshold&&(n="-"+n);return h[n][m]},getStackY:function(h){return y(this.yAxis.translate(h.total,null,!0))},getSumEdges:function(m,h){var p,o,n;o=this.options.threshold;p=m.y>=o?m.shapeArgs.y+m.shapeArgs.height:m.shapeArgs.y;o=h.y>=o?h.shapeArgs.y:h.shapeArgs.y+h.shapeArgs.height;o>p&&(n=p,p=o,o=n);return[p,o]},drawGraph:t.prototype.drawGraph});al.bubble=aj(al.scatter,{dataLabels:{inside:!0,style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},zThreshold:0});an.bubble=ai(an.scatter,{type:"bubble",pointArrayMap:["y","z"],trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(m){var h=this.options.marker,n=af(h.fillOpacity,0.5),m=m||h.fillColor||this.color;n!==1&&(m=am.Color(m).setOpacity(n).get("rgba"));return m},convertAttribs:function(){var h=t.prototype.convertAttribs.apply(this,arguments);h.fill=this.applyOpacity(h.fill);return h},getRadii:function(v,u,s,r){var q,o,p,m=this.zData,n=[];for(o=0,q=m.length;o<q;o++){p=u-v,p=p>0?(m[o]-v)/(u-v):0.5,n.push(Z.round(s+p*(r-s))/2)}this.radii=n},animate:function(m){var h=this.options.animation;if(!m){ad(this.points,function(n){var o=n.graphic,n=n.shapeArgs;o&&n&&(o.attr("r",1),o.animate({r:n.r},h))}),this.animate=null}},translate:function(){var m,h=this.data,p,o,n=this.radii;an.scatter.prototype.translate.call(this);for(m=h.length;m--;){p=h[m],o=n[m],p.negative=p.z<(this.options.zThreshold||0),o>=this.minPxSize/2?(p.shapeType="circle",p.shapeArgs={x:p.plotX,y:p.plotY,r:o},p.dlBox={x:p.plotX-o,y:p.plotY-o,width:2*o,height:2*o}):p.shapeArgs=p.plotY=p.dlBox=aa}},drawLegendSymbol:function(m,h){var n=ab(m.itemStyle.fontSize)/2;h.legendSymbol=this.chart.renderer.circle(n,m.baseline-n,n).attr({zIndex:3}).add(h.legendGroup)},drawPoints:an.column.prototype.drawPoints,alignDataLabel:an.column.prototype.alignDataLabel});i.prototype.beforePadding=function(){var G=this.len,F=this.chart,E=0,C=G,B=this.isXAxis,z=B?"xData":"yData",A=this.min,s={},w=Z.min(F.plotWidth,F.plotHeight),u=Number.MAX_VALUE,v=-Number.MAX_VALUE,r=this.max-A,q=G/r,p=[];this.allowZoomOutside=!0;this.tickPositions&&(ad(this.series,function(m){var h=m.options;if(m.type==="bubble"&&m.visible&&(p.push(m),B)){ad(["minSize","maxSize"],function(n){var H=h[n],o=/%$/.test(H),H=ab(H);s[n]=o?w*H/100:H}),m.minPxSize=s.minSize,m=m.zData,u=Z.min(u,Z.max(f(m),h.displayNegative===!1?h.zThreshold:-Number.MAX_VALUE)),v=Z.max(v,e(m))}}),ad(p,function(o){var m=o[z],H=m.length,n;B&&o.getRadii(u,v,s.minSize,s.maxSize);if(r>0){for(;H--;){n=o.radii[H],E=Math.min((m[H]-A)*q-n,E),C=Math.max((m[H]-A)*q+n,C)}}}),r>0&&af(this.options.min,this.userMin)===aa&&af(this.options.max,this.userMax)===aa&&(C-=G,q*=(G+E-C)/G,this.min+=E/q,this.max+=C/q))};var ac=t.prototype,al=am.Pointer.prototype;ac.toXY=function(m){var h,o=this.chart;h=m.plotX;var n=m.plotY;m.rectPlotX=h;m.rectPlotY=n;m.clientX=h/Math.PI*180;h=this.xAxis.postTranslate(m.plotX,this.yAxis.len-n);m.plotX=m.polarPlotX=h.x-o.plotLeft;m.plotY=m.polarPlotY=h.y-o.plotTop};ak(an.area.prototype,"init",l);ak(an.areaspline.prototype,"init",l);ak(an.spline.prototype,"getPointSpline",function(z,w,v,u){var s,q,r,p,m,n,o;if(this.chart.polar){s=v.plotX;q=v.plotY;z=w[u-1];r=w[u+1];this.connectEnds&&(z||(z=w[w.length-2]),r||(r=w[1]));if(z&&r){p=z.plotX,m=z.plotY,w=r.plotX,n=r.plotY,p=(1.5*s+p)/2.5,m=(1.5*q+m)/2.5,r=(1.5*s+w)/2.5,o=(1.5*q+n)/2.5,w=Math.sqrt(Math.pow(p-s,2)+Math.pow(m-q,2)),n=Math.sqrt(Math.pow(r-s,2)+Math.pow(o-q,2)),p=Math.atan2(m-q,p-s),m=Math.atan2(o-q,r-s),o=Math.PI/2+(p+m)/2,Math.abs(p-o)>Math.PI/2&&(o-=Math.PI),p=s+Math.cos(o)*w,m=q+Math.sin(o)*w,r=s+Math.cos(Math.PI+o)*n,o=q+Math.sin(Math.PI+o)*n,v.rightContX=r,v.rightContY=o}u?(v=["C",z.rightContX||z.plotX,z.rightContY||z.plotY,p||s,m||q,s,q],z.rightContX=z.rightContY=null):v=["M",s,q]}else{v=z.call(this,w,v,u)}return v});ak(ac,"translate",function(m){m.call(this);if(this.chart.polar&&!this.preventPostTranslate){for(var m=this.points,h=m.length;h--;){this.toXY(m[h])}}});ak(ac,"getSegmentPath",function(m,h){var n=this.points;if(this.chart.polar&&this.options.connectEnds!==!1&&h[h.length-1]===n[n.length-1]&&n[0].y!==null){this.connectEnds=!0,h=[].concat(h,[n[0]])}return m.call(this,h)});ak(ac,"animate",k);ak(ag,"animate",k);ak(ac,"setTooltipPoints",function(m,h){this.chart.polar&&X(this.xAxis,{tooltipLen:360});return m.call(this,h)});ak(ag,"translate",function(n){var m=this.xAxis,u=this.yAxis.len,s=m.center,r=m.startAngleRad,p=this.chart.renderer,q,o;this.preventPostTranslate=!0;n.call(this);if(m.isRadial){m=this.points;for(o=m.length;o--;){q=m[o],n=q.barX+r,q.shapeType="path",q.shapeArgs={d:p.symbols.arc(s[0],s[1],u-q.plotY,null,{start:n,end:n+q.pointWidth,innerR:u-af(q.yBottom,u)})},this.toXY(q)}}});ak(ag,"alignDataLabel",function(m,h,q,p,o,n){if(this.chart.polar){m=h.rectPlotX/Math.PI*180;if(p.align===null){p.align=m>20&&m<160?"left":m>200&&m<340?"right":"center"}if(p.verticalAlign===null){p.verticalAlign=m<45||m>315?"bottom":m>135&&m<225?"top":"middle"}ac.alignDataLabel.call(this,h,q,p,o,n)}else{m.call(this,h,q,p,o,n)}});ak(al,"getIndex",function(m,h){var p,o=this.chart,n;o.polar?(n=o.xAxis[0].center,p=h.chartX-n[0]-o.plotLeft,o=h.chartY-n[1]-o.plotTop,p=180-Math.round(Math.atan2(p,o)/Math.PI*180)):p=m.call(this,h);return p});ak(al,"getCoordinates",function(m,h){var o=this.chart,n={xAxis:[],yAxis:[]};o.polar?ad(o.axes,function(p){var r=p.isXAxis,s=p.center,q=h.chartX-s[0]-o.plotLeft,s=h.chartY-s[1]-o.plotTop;n[r?"xAxis":"yAxis"].push({axis:p,value:p.translate(r?Math.PI-Math.atan2(q,s):Math.sqrt(Math.pow(q,2)+Math.pow(s,2)),!0)})}):n=m.call(this,h);return n})})(Highcharts);
/*!
* jQuery Cookie Plugin v1.3.1
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2013 Klaus Hartl
* Released under the MIT license
*/
(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend(g,{expires:-1}));return true}return false}}));
var widgetsApi={edgeUrl:null,apiUrl:null,feedUrl:null,loginUser:function(d,b,c){var a={username:d,password:b,method:"post",dataType:"json",format:"json"};return this.callEdge("v2/users/login",a,c)},loginUserExternal:function(d,b,c){var a={username:d,password:b,method:"post",dataType:"json",format:"json"};return this.callEdge("v2/users/login/external",a,c)},getOrderById:function(a,b,c){return this.callEdge("v1/orders/"+a,{},c)},logoutUser:function(b){var a={method:"delete",dataType:"json"};return this.callEdge("v2/users/login",a,b)},addLead:function(a,b){a.method="post";a.name=a.firstName+" "+a.lastName;delete a.firstName;delete a.lastName;return this.callEdge("v1/users/leads",a,function(c){$(window).trigger(widgets.events.leadAdded,[c]);b(c)})},getAnonymousResources:function(b,c){var a={token:widgets.token.accessToken,resources:JSON.stringify(b)};return this.callWeb("v1/merge",a,c)},getAnonymousToken:function(b,a,c){return this.callEdge("v1/token/anonymous",{mapKey:b,currency:a},c)},updateToken:function(a,b){a.method="put";a.dataType="json";if(widgets.isDirectPut){return this.callWebAuthorized("v2/tokens/current",a,b)}else{return this.callEdge("v2/tokens/current",a,b)}},getShowOff:function(a,c,d){var b={limit:a,offset:c};return this.callEdge("v1/social/lastTraders",b,d)},getResources:function(b,c){if(b.options){b.options.hash=widgets.optionsHash.active||widgets.optionsHash}if(b.options&&b.options.created){b.options.hashCreated=widgets.optionsHash.created}if(b.user){b.user.hash=widgets.userHash}var a={resources:JSON.stringify(b)};this.callEdge("v1/merge",a,c)},getSignal:function(){callback()},getToken:function(b){var a=helper.getParameterByName("hash");if(a!=""){widgets.api.callEdge("v1/token?sessionId="+a,{},b);return}return widgets.api.callEdge("v1/token",{},b)},updateRefreshToken:function(b,c){var a={refreshToken:b,method:"post"};return this.callEdge("v1/tokens/refresh",a,c)},addTurboBinaryTradeOrder:function(c,j,a,e,d,g,i,b,f,k){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;var h;var l;$.each(widgets.options[c].rules,function(n,o){if(o.id==j){h=o.payout;l=o.returnOnLoss}});if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var m={tradableAssetId:c,optionId:j,isCall:a,rate:e,volume:d,payout:h,returnOnLoss:l,isDynamicPayout:g,isPayoutManagement:i,marketRate:b,promotionalPriceId:f,method:"post"};return this.callEdge("v1/games/turboBinary/orders",m,k,arguments)},addBinaryTradeOrder:function(a,d,e,c,i,f,g,h){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;var b=widgets.options[a];if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var j={optionId:a,isCall:d,rate:e,volume:c,autoTrades:i,isDynamicPayout:f,isPayoutManagement:g,method:"post"};widgets.api.setTradeStarted(j);return this.callEdge("v1/games/digital/orders",j,h,arguments)},addBinaryTradeOrder_v2:function(a,c,d,b,g,k,j,f,h,e,i){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var l={optionId:a,isCall:c,rate:d,volume:b,autoTrades:j,payout:g,returnOnLoss:k,isDynamicPayout:f,isPayoutManagement:h,promotionalPriceId:e,method:"post"};widgets.api.setTradeStarted(l);return this.callEdge("v1/games/digital/orders",l,i,arguments)},addRangeTradeOrder:function(b,a,e,g,j,d,f,h,i){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;var c=widgets.options[b];if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var k={optionId:b,isIn:a,strikeHigh:g,strikeLow:j,volume:d,rate:e,payout:c.payout,returnOnLoss:c.returnOnLoss,isDynamicPayout:f,isPayoutManagement:h,method:"post"};widgets.api.setTradeStarted(k);return this.callEdge("v1/games/range/orders",k,i,arguments)},addTouchTradeOrder:function(c,a,b,f,e,g,h,i){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;var d=widgets.options[c];if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var j={optionId:c,isUp:a,tradeRate:b,rate:f,volume:e,payout:d.payout,returnOnLoss:d.returnOnLoss,isDynamicPayout:g,isPayoutManagement:h,method:"post"};widgets.api.setTradeStarted(j);return this.callEdge("v1/games/touch/orders",j,i,arguments)},addOneTouchTradeOrder:function(c,b,a,f,e,g,h,i){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;var d=widgets.options[c];if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var j={optionId:c,isTouch:b,tradeRate:a,rate:f,volume:e,payout:d.payout,returnOnLoss:d.returnOnLoss,isDynamicPayout:g,isPayoutManagement:h,method:"post"};widgets.api.setTradeStarted(j);return this.callEdge("v1/games/onetouch/orders",j,i,arguments)},addLadderTradeOrder:function(c,e,f,d,a,i,g,b,h,j,k){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var l={optionId:c,isCall:e,marketRate:f,volume:d,contracts:a,payout:i,rate:g,returnOnLoss:b,isDynamicPayout:h,isPayoutManagement:j,method:"post"};widgets.api.setTradeStarted(l);return this.callEdge("v1/games/ladder/orders",l,k,arguments)},addLadderTouchTradeOrder:function(d,c,f,e,a,i,g,b,h,j,k){if(widgets.tradeOrderInProgress){$(window).trigger(widgets.events.tradeInProgress);return}widgets.tradeOrderInProgress=true;if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var l={optionId:d,isTouch:c,marketRate:f,volume:e,contracts:a,payout:i,rate:g,returnOnLoss:b,isDynamicPayout:h,isPayoutManagement:j,method:"post"};widgets.api.setTradeStarted(l);return this.callEdge("v1/games/laddertouch/orders",l,k,arguments)},addBinary100TradeOrder:function(c,f,g,d,a,j,h,b,i,e,k){if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var l={optionId:c,isCall:f,marketRate:g,volume:d,contracts:a,payout:j,rate:h,returnOnLoss:b,isDynamicPayout:i,isPayoutManagment:e,method:"post"};widgets.api.setTradeStarted(l);return this.callEdge("v1/games/binary100/orders",l,k,arguments)},addOverUnderTradeOrder:function(c,a,e,f,d,g,b,h){if(!widgets.isLogged()){$(window).trigger(widgets.events.notLogged);return}var i={optionId:c,isOver:a,rate:f,marketRate:e,volume:d,payout:g,returnOnLoss:b,method:"post"};widgets.api.setTradeStarted(i);return this.callEdge("v1/games/overunder/orders",i,h,arguments)},setTradeStarted:function(a){$(window).trigger(widgets.events.tradeIsStarted,a)},setTradeCompleted:function(a){widgets.tradeOrderInProgress=false;$(window).trigger(widgets.events.tradeIsCompleted,[a]);if(a.code==401){widgets.logout()}},getTraderInsight:function(b){var a={};return this.callEdge("v2/traderInsight",a,b,arguments)},getTraderInsightItem:function(b,c){var a={};return this.callEdge("v1/traderInsight/"+b,a,c)},getTradableAssets:function(b){var a={filterByType:widgets.filterByAssetType.join(",")};return this.callEdge("v1/assets",a,b)},getAvailableTradableAssets:function(b){var a={active:"true",created:"true"};return this.callEdge("v1/assets",a,b)},getUserTradeOrders:function(a,c,g,d,h,b,e,f){var i={tradableAssetId:a,fromDate:c,toDate:g,limit:d,game:h,action:b,offset:e,sortBy:"OrderDate",sortOrder:"0"};return this.callEdge("v1/users/current/pastTrades",i,f,arguments)},getUserTradeOrdersCharts:function(a,d,c,e){var b={tradableAssetId:0,fromDate:d,toDate:c,limit:1,game:"all",action:"all",offset:1,sortBy:"OrderDate",sortOrder:"0"};return this.callEdge("v1/users/current/pastTrades?assetType="+a,b,e,arguments)},getUserTransactionReports:function(c,f,d,a,e,g){var b={type:c,fromDate:f,toDate:d,limit:a,offset:e};return this.callEdge("v1/users/current/balanceActivity",b,g,arguments)},getUserTradeReportsWithOpenTrades:function(a,c,g,d,h,b,e,f){var i={tradableAssetId:a,fromDate:c,toDate:g,limit:d,game:h,action:b,offset:e,showOpenTrades:true,sortBy:"ExpireAt",sortOrder:"0"};return this.callEdge("v1/users/current/pastTrades/ladder",i,f,arguments)},getUserTradeReports:function(a,c,g,d,h,b,e,f){var i={tradableAssetId:a,fromDate:c,toDate:g,limit:d,game:h,action:b,offset:e,sortBy:"ExpireAt",sortOrder:"0"};return this.callEdge("v1/users/current/pastTrades/ladder",i,f,arguments)},getUserTradeExportReports:function(a,c,h,e,i,b,f,d,g){var j={tradableAssetId:a,fromDate:c,toDate:h,limit:e,game:i,action:b,offset:f,sortBy:"ExpireAt",sortOrder:"0",token:widgets.token.accessToken,encode:d};window.location=widgets.apiUrl+"/v1/users/current/pastTrades/ladder.pdf?"+URL.serialize(j);return},getUserTradeExportExcelReports:function(a,c,h,e,i,b,f,d,g){var j={tradableAssetId:a,fromDate:c,toDate:h,limit:e,game:i,action:b,offset:f,sortBy:"ExpireAt",sortOrder:"0",token:widgets.token.accessToken,encode:d};window.location=widgets.apiUrl+"/v1/users/current/pastTrades/ladder.xls?"+URL.serialize(j);return},getUserTransactionExportPdfReports:function(c,g,e,a,f,d,h){var b={type:c,fromDate:g,toDate:e,limit:a,offset:f,token:widgets.token.accessToken,encode:d};window.location=widgets.apiUrl+"/v1/users/current/balanceActivity.pdf?"+URL.serialize(b);return},getUserTransactionExportExcelReports:function(c,g,e,a,f,d,h){var b={type:c,fromDate:g,toDate:e,limit:a,offset:f,token:widgets.token.accessToken,encode:d};window.location=widgets.apiUrl+"/v1/users/current/balanceActivity.xls?"+URL.serialize(b);return},getInvestPrices:function(a){return this.callEdge("v1/games/turboBinary",{},a)},getLanguages:function(c,a){var b={};return this.callEdge("v1/languages",b,c,a)},getCountries:function(b){var a={};return this.callEdge("v1/countries",a,b)},getCurrencies:function(b){var a={};return this.callEdge("v1/currencies",a,b)},getLocation:function(b){var a={};return this.callEdge("v1/location",a,b)},addUser:function(a,b){a.method="post";return this.callEdge("v2/users",a,b)},getSignal:function(a){$.ajax({url:widgets.signalsUrl,data:{},dataType:"jsonp",success:function(b){if(!b||b==null){var d=new Object();d.code=503;d.message="Failed";d.data=b;a(d);return}var c=new Object();c.code=200;c.message="OK";c.data=b;a(c)}})},getPastExpiries:function(g,e,d,c,b,i,f,j,a,h,k){var l={fromDate:g,toDate:e,tradableAssetId:d,offset:c,limit:b,sortBy:i,optionType:f,isLadder:j,sortOrder:a,useHours:h,dataType:"json"};return this.callEdge("v1/pastExpiries",l,k,arguments)},getMAAgents:function(c,e,d,a,f,g){var b={email:c,qualified:e,allAgents:d,limit:a,offset:f,dataType:"json"};this.callEdge("v1/masterAgent/agents",b,g,arguments)},getMAOrganization:function(d,e,b,f,a,g,h){var c={email:d,fromDate:e,toDate:b,qualified:f,limit:a,offset:g,dataType:"json"};this.callEdge("v1/masterAgent/organization",c,h,arguments)},getMasterAgentSummary:function(b){var a={};this.callEdge("v1/masterAgent/summary",a,b)},getMAVolumeComission:function(d,c,a,e,f){var b={month:d,year:c,limit:a,offset:e,dataType:"json"};this.callEdge("v1/masterAgent/volumeComission",b,f,arguments)},getMAVolumeComissionPeriod:function(b){var a={};this.callEdge("v1/masterAgent/volumeComission/isPeriodFinished",a,b,arguments)},getTADepositBonuses:function(a,b){a.dataType="json";this.callEdge("v1/traderAgent/depositBonuses",a,b,arguments)},getTADepositComission:function(e,a,d,f,b,g,h){var c={noteligible:e,notEarned:a,outstanding:d,alreadyPaid:f,limit:b,offset:g,dataType:"json"};this.callEdge("v1/traderAgent/depositCommission",c,h,arguments)},getTAReferrals:function(a,b){a.dataType="json";this.callEdge("v1/traderAgent/referrals",a,b,arguments)},getTAReferralsDetails:function(a,c){var b={};this.callEdge("v1/traderAgent/referrals/"+a,b,c,arguments)},getTraderAgentSummary:function(b){var a={};this.callEdge("v1/traderAgent/summary",a,b)},getTraderSummary:function(b){var a={};this.callEdge("v1/trader/summary",a,b)},getTAVolumeComission:function(c,d,e,a,f,g){var b={email:c,outstanding:d,alreadyPaid:e,limit:a,offset:f,dataType:"json"};this.callEdge("v1/traderAgent/volumeComission",b,g,arguments)},getPendingBonuses:function(b){var a={limit:1000,offset:0};this.callEdge("v1/traderAgent/pendingBonuses",a,b,arguments)},updatePendingBonus:function(c,b,d){var a={bonusId:c,isAccepted:b,method:"put",dataType:"json"};if(widgets.isDirectPut){this.callWebAuthorized("v1/traderAgent/pendingBonuses",a,d,arguments)}else{this.callEdge("v1/traderAgent/pendingBonuses",a,d,arguments)}},getPendingBonusTermsAndConds:function(b,c){var a={};this.callEdge("v1/traderAgent/pendingBonuses/termsAndCondition?phId="+b,a,c)},getUserData:function(b){var a={};return this.callEdge("v1/users/current",a,b)},getUserDataFilter:function(b,c){var a={filter:b};return this.callEdge("v1/users/current",a,c)},updateUserDetails:function(b,a,c){a.method="put";a.dataType="json";if(!(a.countryPhoneCode==undefined&&a.areaPhoneCode==undefined&&a.phone==undefined)){a.phone=a.countryPhoneCode+"-"+a.areaPhoneCode+"-"+a.phone}if(widgets.isDirectPut){return this.callWebAuthorized("v1/users/current",a,c)}else{return this.callEdge("v1/users/current",a,c)}},sellOpenTrade:function(c,a,e,b,g,d,f,h){var i={contracts:a,amount:e,method:"put",rate:b,optionID:g,isCall:d,strike:f};if(widgets.isDirectPut){return this.callWebAuthorized("v1/orders/"+c+"/sell",i,h)}else{return this.callEdge("v1/orders/"+c+"/sell",i,h)}},updatePassword:function(d,b,c,e){var a={oldPassword:b,newPassword:c,method:"put",dataType:"json",format:"json"};if(widgets.isDirectPut){return this.callWebAuthorized("v1/users/password",a,e)}else{return this.callEdge("v1/users/password",a,e)}},resetPassword:function(b,c){var a={email:b,method:"put",dataType:"json"};if(widgets.isDirectPut){return this.callWebAuthorized("v1/users/password/reset",a,c)}else{return this.callEdge("v1/users/password/reset",a,c)}},postContactUsMessage:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/contact",a,b)},getNotifications:function(b){var a={};return this.callEdge("v1/users/current/notifications",a,b)},getSingleOptionPayouts:function(c,d,b){var a={method:"get"};return this.callEdge("v1/pastExpiries/"+c+"/strikeLevels",a,d,b)},getOptionPriceHistory:function(c,d){var b=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());var a=arguments;$.ajax({url:widgets.feedApiUrl+"/Services.ashx/GetOptionPriceHistory",data:{t:b.getTime(),OptionID:c},dataType:"jsonp",success:function(e){if(!e||e==null){var h=new Object();h.code=503;h.message="Failed";h.data=e;d(h,a);return}var g=new Object();g.code=200;g.message="OK";var f=new Object();f.history=e.optionHistoryPrice;f.price=new Object();f.price.from=e.lowPrice;f.price.to=e.highPrice;f.date=new Object();f.date.from=new Object();f.date.from.datetime=(new Date(e.startOptionHistoryTime)).toISOString();f.date.from.timestamp=e.startOptionHistoryTime;f.date.to=new Object();f.date.to.datetime=(new Date(e.endOptionHistoryTime)).toISOString();f.date.to.timestamp=e.endOptionHistoryTime;f.accuracy=e.AssetsAccuracy;g.data=f;d(g,a)}})},getAssetPriceHistory:function(c,b){var a=arguments;$.ajax({url:widgets.feedApiUrl+"/Services.ashx/GetTradableAssetPriceHistory",data:{TAID:c},dataType:"jsonp",success:function(d){if(!d||d==null||jQuery.isEmptyObject(d)){var i=new Object();i.code=503;i.message="Failed";i.data=d;b(i,a);return}d.startOptionHistoryTime=d.history[0][0];d.endOptionHistoryTime=d.history[d.history.length-1][0];var f=0;var h=100000000;f=d.price.to;h=d.price.from;var g=new Object();g.code=200;g.message="OK";var e=new Object();e.history=d.history;e.price=new Object();e.price.from=h;e.price.to=f;e.date=new Object();e.date.from=new Object();e.date.from.datetime=(new Date(d.startOptionHistoryTime)).toISOString();e.date.from.timestamp=d.startOptionHistoryTime;e.date.to=new Object();e.date.to.datetime=(new Date(d.endOptionHistoryTime)).toISOString();e.date.to.timestamp=d.endOptionHistoryTime;e.accuracy=d.accuracy;g.data=e;b(g,a)}})},getAssetPriceHistoryv2:function(e,c,d){var a=arguments;var b=(widgets.serverDateTime?new Date(widgets.serverDateTime.dateTime):new Date());$.ajax({url:widgets.advfeedApiUrl+"/Services.ashx/GetTradableAssetPriceHistory",data:{TAID:e,l:c,t:b.getTime(),},dataType:"jsonp",success:function(f){if(!f||f==null||jQuery.isEmptyObject(f)){var k=new Object();k.code=503;k.message="Failed";k.data=f;d(k,a);return}f.startOptionHistoryTime=f.history[0][0];f.endOptionHistoryTime=f.history[f.history.length-1][0];var h=0;var j=100000000;h=f.price.to;j=f.price.from;var i=new Object();i.code=200;i.message="OK";var g=new Object();g.history=f.history;g.price=new Object();g.price.from=j;g.price.to=h;g.date=new Object();g.date.from=new Object();g.date.from.datetime=(new Date(f.startOptionHistoryTime)).toISOString();g.date.from.timestamp=f.startOptionHistoryTime;g.date.to=new Object();g.date.to.datetime=(new Date(f.endOptionHistoryTime)).toISOString();g.date.to.timestamp=f.endOptionHistoryTime;g.accuracy=f.accuracy;i.data=g;d(i,a)}})},extendTradeOrder:function(a,d,b,e){var c={method:"put",rate:d};return this.callEdge("v1/orders/"+a+"/offers/"+b,c,e,arguments)},getExtendOffersOptions:function(a,c,d){var b={optionId:c,type:"extend"};return this.callEdge("v1/orders/"+a+"/offers",b,d,arguments)},getStopOffersOptions:function(a,c){var b={type:"stop"};return this.callEdge("v1/orders/"+a+"/offers",b,c,arguments)},stopTradeOrder:function(a,d,b,e){var c={method:"put",rate:d};return this.callEdge("v1/orders/"+a+"/offers/"+b,c,e,arguments)},getLeaderBoard:function(d,a,c,e){var b={period:d,limit:a,offset:c};return this.callEdge("v1/social/leaderBoard",b,e,arguments)},getTopTrades:function(a,c,d){var b={limit:a,offset:c};return this.callEdge("v1/social/topTrades",b,d,arguments)},getQuotes:function(b,c){var a={enabled:"true",dataType:"json"};return this.callEdge("v2/quotes",a,c,arguments)},addDemoUser:function(b){var a={method:"post"};return this.callEdge("v2/users/quickDemo",a,b,arguments)},getTradableAssetsIndex:function(b){var a={};return this.callEdge("v2/assets/index",a,b,arguments)},getTradeTimesForCalendar:function(c,b){var a={};return this.callEdge("v1/calendar/"+c,a,b,arguments)},getFxtfUserMD5:function(a){return this.callEdge("v1/fxtfUserMD5",{},a)},getCachierDepositMethods:function(b,c){var a={};return this.callEdge("v1/cashier/methods/currency/"+b,a,c)},getCreditCardTypes:function(b,c){var a={};return this.callEdge("v1/cashier/methods/cards/currency/"+b,a,c)},getCashierElements:function(b){var a={};return this.callEdge("v1/cashier/deposits",a,b)},getPromoCodeValidation:function(b,c){var a={};return this.callEdge("v1/users/current/deposits/promocode/"+b,a,c)},getCashierWithdrawKioskElements:function(b){var a={};return this.callEdge("v1/cashier/kioskwithdraw",a,b)},addPendingKioskWithdrawRequest:function(a,c){var b={"":a,method:"post",dataType:"json",format:"json"};return this.callEdge("v1/cashier/kioskwithdraw/request/"+a,b,c)},getCashierQuickDepositElements:function(b){var a={};return this.callEdge("v1/cashier/deposits/quick",a,b)},getCashierCardsShortElements:function(b){var a={};return this.callEdge("v1/cashier/deposits/cardsshort",a,b)},getCashierWireTransfer:function(b){var a={};return this.callEdge("v1/cashier/wiretransfers",a,b)},getCashierTraderTransferElements:function(b){var a={};return this.callEdge("v1/cashier/trader/transfers",a,b)},getCashierWireTransferCms:function(b){var a={};a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/wiretransfers/cms",a,b)},validateTransferData:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/trader/transfers/validate",a,b)},finalizeTransferData:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/trader/transfers",a,b)},getCashierTraderTransferUserInfo:function(b,c){var a={email:b};return this.callEdge("v1/cashier/trader/transfers/user",a,c)},payNewCreditCardDeposit:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/deposits/cardsnew",a,b)},payNewCreditCardDepositShort:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v2/cashier/deposits/cardsnew",a,b)},payWithExistingCredit:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/deposits/cards",a,b)},payWithWallet:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/deposits/wallet",a,b)},validateDepositLimits:function(b,c,d,e){var a={amount:b,currencyId:c,paymentMethodId:d};return this.callEdge("v1/cashier/deposits/limits",a,e)},getWithdrawMethods:function(b){var a={};return this.callEdge("v1/cashier/withdraw/methods",a,b)},getStartUpData:function(b){var a={};return this.callEdge("v1/cashier/withdraw/startupdata",a,b)},checkWithdrawLimits:function(a,b,d,e){var c={methodId:a,methodName:b,amount:d};return this.callEdge("v1/cashier/withdraw/limits",c,e)},startWithdrawRequest:function(a,b){a.method="post";a.dataType="json";a.format="json";return this.callEdge("v1/cashier/withdraw/request",a,b)},getTransactionHistory:function(a,b){return this.callEdge("v1/cashier/transactions",a,b)},getWithdrawalHistory:function(a,b){return this.callEdge("v1/cashier/withdrawals",a,b)},getCollectionData:function(a,b){return this.callEdge("v1/cashier/collection",a,b)},getTraderTransferBonusData:function(a,b){return this.callEdge("v1/cashier/trader/transfers/bonuses",a,b)},getBonusHistory:function(a,b){return this.callEdge("v1/cashier/bonuses",a,b)},cancelBonus:function(b,c){var a={method:"delete",dataType:"json",format:"json"};return this.callEdge("v1/cashier/bonuses/"+b,a,c)},activateBonus:function(b,c){var a={method:"post",dataType:"json",format:"json"};return this.callEdge("v1/cashier/bonuses/"+b+"/activate",a,c)},getBonusDescription:function(a,c){var b={};return this.callEdge("v1/cashier/bonuses/description/"+a,b,c)},cancelTraderTransferBonus:function(b,c){var a={method:"delete",dataType:"json",format:"json"};return this.callEdge("v1/cashier/trader/transfers/bonuses/"+b,a,c)},cancelWithdrawRequest:function(b,c){var a={method:"delete",dataType:"json",format:"json"};return this.callEdge("v1/cashier/withdrawals/"+b,a,c)},getCMScontent:function(c,b){var a={};return this.callEdge("v1/cms/contents/"+c,a,b)},insertAuditLog:function(d,b,c,e){var a={method:"post",field:d,oldValue:b,newValue:c};return this.callEdge("v1/users/current/auditLog",a,e)},getLimitation:function(c,b){var a={};return this.callEdge("v1/limitations/"+c,a,b)},getMyStatisticsPieData:function(c,a,d,e){var b={fromDate:c,toDate:a,assetType:d};return this.callEdge("v1/users/current/statistics/pie",b,e,arguments)},getMyStatisticsChartData:function(c,a,d,e){var b={fromDate:c,toDate:a,assetType:d};return this.callEdge("v1/users/current/statistics/chart",b,e)},getPastExpiriesChartData:function(b,c){var a={};return this.callEdge("v1/options/"+b+"/priceHistory",a,c)},getAfterWagerBonuses:function(b){var a={};return this.callEdge("v1/users/current/afterWagerBonuses",a,b)},getInboxMessages:function(c,a,d){var b={offset:c,limit:a};return this.callEdge("v1/messages",b,d)},getMessages:function(b){var a={method:"get",};return this.callEdge("v1/messages/pending",a,b)},getMessageDetails:function(c,b){var a={};return this.callEdge("v1/messages/"+c,a,b)},markMessageRead:function(c,b){var a={method:"put",isRead:"true"};return this.callEdge("v1/messages/"+c,a,b)},callWeb:function(a,c,d,b){c.isAnonymous=true;widgets.api.call(widgets.apiUrl+"/"+a,c,d,b)},callWebAuthorized:function(a,c,d,b){c.isAnonymous=false;widgets.api.call(widgets.apiUrl+"/"+a,c,d,b)},callFeed:function(a,c,d,b){c.isAnonymous=true;widgets.api.call(widgets.feedApiUrl+"/"+a,c,d,b)},callEdge:function(a,c,d,b){widgets.api.call(widgets.edgeUrl+"/"+a,c,d,b)},call:function(b,c,f,a){var e="get";var d=false;if(c.method){e=c.method;delete c.method}if(c.isAnonymous){d=c.isAnonymous;delete c.isAnonymous}widgets.requestsInProgress++;if(widgets.debugKey!=""){b=helper.addQueryParameter(b,"wdebug",widgets.debugKey)}$.ajax({type:e,url:b,data:c,dataType:"json",cache:false,crossDomain:true,beforeSend:function(g){if(!d&&widgets.token&&widgets.token.accessToken){g.setRequestHeader("Authorization","oauth oauth_token="+widgets.token.accessToken)}},complete:function(i,h,j){widgets.requestsInProgress--;if(i.responseText&&i.responseText.length==0&&h.toLowerCase()=="error"){return}if(i.status==403&widgets.isFirstStart){widgets.getTokenWithRefresh(true)}try{var g=$.parseJSON(i.responseText);if(g.code==400&&g.data.type=="Refresh_Unsuccessfull"){$.removeCookie(widgets.tokenCookie);window.location=window.location}}catch(k){return}if(f){if(typeof f=="object"){$.each(f,function(l,m){if(typeof m=="function"){return m(g,a)}})}else{return f(g,a)}}return g}})}};
/*! jQuery UI - v1.10.4 - 2014-04-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.spinner.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(g,d){function c(k,j){var l,e,n,m=k.nodeName.toLowerCase();return"area"===m?(l=k.parentNode,e=l.name,k.href&&e&&"map"===l.nodeName.toLowerCase()?(n=g("img[usemap=#"+e+"]")[0],!!n&&h(n)):!1):(/input|select|textarea|button|object/.test(m)?!k.disabled:"a"===m?k.href||j:j)&&h(k)}function h(a){return g.expr.filters.visible(a)&&!g(a).parents().addBack().filter(function(){return"hidden"===g.css(this,"visibility")}).length}var f=0,b=/^ui-id-\d+$/;g.ui=g.ui||{},g.extend(g.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),g.fn.extend({focus:function(a){return function(e,j){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){g(i).focus(),j&&j.call(i)},e)}):a.apply(this,arguments)}}(g.fn.focus),scrollParent:function(){var a;return a=g.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(g.css(this,"position"))&&/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?g(document):a},zIndex:function(j){if(j!==d){return this.css("zIndex",j)}if(this.length){for(var l,k,e=g(this[0]);e.length&&e[0]!==document;){if(l=e.css("position"),("absolute"===l||"relative"===l||"fixed"===l)&&(k=parseInt(e.css("zIndex"),10),!isNaN(k)&&0!==k)){return k}e=e.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++f)})},removeUniqueId:function(){return this.each(function(){b.test(this.id)&&g(this).removeAttr("id")})}}),g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(a){return function(e){return !!g.data(e,a)}}):function(e,a,j){return !!g.data(e,j[3])},focusable:function(a){return c(a,!isNaN(g.attr(a,"tabindex")))},tabbable:function(a){var i=g.attr(a,"tabindex"),e=isNaN(i);return(e||i>=0)&&c(a,!e)}}),g("<a>").outerWidth(1).jquery||g.each(["Width","Height"],function(j,p){function k(o,a,r,q){return g.each(e,function(){a-=parseFloat(g.css(o,"padding"+this))||0,r&&(a-=parseFloat(g.css(o,"border"+this+"Width"))||0),q&&(a-=parseFloat(g.css(o,"margin"+this))||0)}),a}var e="Width"===p?["Left","Right"]:["Top","Bottom"],m=p.toLowerCase(),l={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};g.fn["inner"+p]=function(a){return a===d?l["inner"+p].call(this):this.each(function(){g(this).css(m,k(this,a)+"px")})},g.fn["outer"+p]=function(n,a){return"number"!=typeof n?l["outer"+p].call(this,n):this.each(function(){g(this).css(m,k(this,n,!0,a)+"px")})}}),g.fn.addBack||(g.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),g("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(g.fn.removeData=function(a){return function(e){return arguments.length?a.call(this,g.camelCase(e)):a.call(this)}}(g.fn.removeData)),g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),g.support.selectstart="onselectstart" in document.createElement("div"),g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),g.extend(g.ui,{plugin:{add:function(k,j,m){var l,e=g.ui[k].prototype;for(l in m){e.plugins[l]=e.plugins[l]||[],e.plugins[l].push([j,m[l]])}},call:function(l,j,a){var m,k=l.plugins[j];if(k&&l.element[0].parentNode&&11!==l.element[0].parentNode.nodeType){for(m=0;k.length>m;m++){l.options[k[m][0]]&&k[m][1].apply(l.element,a)}}}},hasScroll:function(e,a){if("hidden"===g(e).css("overflow")){return !1}var k=a&&"left"===a?"scrollLeft":"scrollTop",j=!1;return e[k]>0?!0:(e[k]=1,j=e[k]>0,e[k]=0,j)}})})(jQuery);(function(b,d){var a=0,c=Array.prototype.slice,f=b.cleanData;b.cleanData=function(j){for(var g,h=0;null!=(g=j[h]);h++){try{b(g).triggerHandler("remove")}catch(k){}}f(j)},b.widget=function(m,u,j){var g,t,e,p,k={},q=m.split(".")[0];m=m.split(".")[1],g=q+"-"+m,j||(j=u,u=b.Widget),b.expr[":"][g.toLowerCase()]=function(h){return !!b.data(h,g)},b[q]=b[q]||{},t=b[q][m],e=b[q][m]=function(l,h){return this._createWidget?(arguments.length&&this._createWidget(l,h),d):new e(l,h)},b.extend(e,t,{version:j.version,_proto:b.extend({},j),_childConstructors:[]}),p=new u,p.options=b.widget.extend({},p.options),b.each(j,function(h,l){return b.isFunction(l)?(k[h]=function(){var i=function(){return u.prototype[h].apply(this,arguments)},n=function(o){return u.prototype[h].apply(this,o)};return function(){var r,v=this._super,w=this._superApply;return this._super=i,this._superApply=n,r=l.apply(this,arguments),this._super=v,this._superApply=w,r}}(),d):(k[h]=l,d)}),e.prototype=b.widget.extend(p,{widgetEventPrefix:t?p.widgetEventPrefix||m:m},k,{constructor:e,namespace:q,widgetName:m,widgetFullName:g}),t?(b.each(t._childConstructors,function(n,h){var l=h.prototype;b.widget(l.namespace+"."+l.widgetName,e,h._proto)}),delete t._childConstructors):u._childConstructors.push(e),b.widget.bridge(m,e)},b.widget.extend=function(g){for(var m,l,e=c.call(arguments,1),k=0,j=e.length;j>k;k++){for(m in e[k]){l=e[k][m],e[k].hasOwnProperty(m)&&l!==d&&(g[m]=b.isPlainObject(l)?b.isPlainObject(g[m])?b.widget.extend({},g[m],l):b.widget.extend({},l):l)}}return g},b.widget.bridge=function(e,h){var g=h.prototype.widgetFullName||e;b.fn[e]=function(j){var m="string"==typeof j,k=c.call(arguments,1),i=this;return j=!m&&k.length?b.widget.extend.apply(null,[j].concat(k)):j,m?this.each(function(){var l,o=b.data(this,g);return o?b.isFunction(o[j])&&"_"!==j.charAt(0)?(l=o[j].apply(o,k),l!==o&&l!==d?(i=l&&l.jquery?i.pushStack(l.get()):l,!1):d):b.error("no such method '"+j+"' for "+e+" widget instance"):b.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+j+"'")}):this.each(function(){var l=b.data(this,g);l?l.option(j||{})._init():b.data(this,g,new h(j,this))}),i}},b.Widget=function(){},b.Widget._childConstructors=[],b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(h,g){g=b(g||this.defaultElement||this)[0],this.element=b(g),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=b.widget.extend({},this.options,this._getCreateOptions(),h),this.bindings=b(),this.hoverable=b(),this.focusable=b(),g!==this&&(b.data(g,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===g&&this.destroy()}}),this.document=b(g.style?g.ownerDocument:g.document||g),this.window=b(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(g,h){var l,k,e,j=g;if(0===arguments.length){return b.widget.extend({},this.options)}if("string"==typeof g){if(j={},l=g.split("."),g=l.shift(),l.length){for(k=j[g]=b.widget.extend({},this.options[g]),e=0;l.length-1>e;e++){k[l[e]]=k[l[e]]||{},k=k[l[e]]}if(g=l.pop(),1===arguments.length){return k[g]===d?null:k[g]}k[g]=h}else{if(1===arguments.length){return this.options[g]===d?null:this.options[g]}j[g]=h}}return this._setOptions(j),this},_setOptions:function(g){var h;for(h in g){this._setOption(h,g[h])}return this},_setOption:function(g,h){return this.options[g]=h,"disabled"===g&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!h).attr("aria-disabled",h),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(g,h,k){var j,e=this;"boolean"!=typeof g&&(k=h,h=g,g=!1),k?(h=j=b(h),this.bindings=this.bindings.add(h)):(k=h,h=this.element,j=this.widget()),b.each(k,function(s,p){function o(){return g||e.options.disabled!==!0&&!b(this).hasClass("ui-state-disabled")?("string"==typeof p?e[p]:p).apply(e,arguments):d}"string"!=typeof p&&(o.guid=p.guid=p.guid||o.guid||b.guid++);var i=s.match(/^(\w+)\s*(.*)$/),q=i[1]+e.eventNamespace,m=i[2];m?j.delegate(m,q,o):h.bind(q,o)})},_off:function(g,h){h=(h||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,g.unbind(h).undelegate(h)},_delay:function(h,k){function g(){return("string"==typeof h?j[h]:h).apply(j,arguments)}var j=this;return setTimeout(g,k||0)},_hoverable:function(g){this.hoverable=this.hoverable.add(g),this._on(g,{mouseenter:function(h){b(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){b(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g),this._on(g,{focusin:function(h){b(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){b(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(k,h,j){var m,l,g=this.options[k];if(j=j||{},h=b.Event(h),h.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase(),h.target=this.element[0],l=h.originalEvent){for(m in l){m in h||(h[m]=l[m])}}return this.element.trigger(h,j),!(b.isFunction(g)&&g.apply(this.element[0],[h].concat(j))===!1||h.isDefaultPrevented())}},b.each({show:"fadeIn",hide:"fadeOut"},function(h,g){b.Widget.prototype["_"+h]=function(i,l,k){"string"==typeof l&&(l={effect:l});var e,j=l?l===!0||"number"==typeof l?g:l.effect||g:h;l=l||{},"number"==typeof l&&(l={duration:l}),e=!b.isEmptyObject(l),l.complete=k,l.delay&&i.delay(l.delay),e&&b.effects&&b.effects.effect[j]?i[h](l):j!==h&&i[j]?i[j](l.duration,l.easing,k):i.queue(function(m){b(this)[h](),k&&k.call(i[0]),m()})}})})(jQuery);(function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(d){return !0===a.data(d.target,c.widgetName+".preventClickEvent")?(a.removeData(d.target,c.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseStarted&&this._mouseUp(d),this._mouseDownEvent=d;var e=this,f=1===d.which,c="string"==typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:!1;return f&&!c&&this._mouseCapture(d)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=this._mouseStart(d)!==!1,!this._mouseStarted)?(d.preventDefault(),!0):(!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(g){return e._mouseMove(g)},this._mouseUpDelegate=function(g){return e._mouseUp(g)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),d.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(c){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button?this._mouseUp(c):this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted)},_mouseUp:function(c){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}})})(jQuery);(function(C,x){function q(c,d,a){return[parseFloat(c[0])*(g.test(c[0])?d/100:1),parseFloat(c[1])*(g.test(c[1])?a/100:1)]}function D(c,a){return parseInt(C.css(c,a),10)||0}function k(c){var a=c[0];return 9===a.nodeType?{width:c.width(),height:c.height(),offset:{top:0,left:0}}:C.isWindow(a)?{width:c.width(),height:c.height(),offset:{top:c.scrollTop(),left:c.scrollLeft()}}:a.preventDefault?{width:0,height:0,offset:{top:a.pageY,left:a.pageX}}:{width:c.outerWidth(),height:c.outerHeight(),offset:c.offset()}}C.ui=C.ui||{};var A,j=Math.max,b=Math.abs,m=Math.round,v=/left|center|right/,z=/top|center|bottom/,B=/[\+\-]\d+(\.[\d]+)?%?/,y=/^\w+/,g=/%$/,w=C.fn.position;C.position={scrollbarWidth:function(){if(A!==x){return A}var a,c,e=C("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),d=e.children()[0];return C("body").append(e),a=d.offsetWidth,e.css("overflow","scroll"),c=d.offsetWidth,a===c&&(c=e[0].clientWidth),e.remove(),A=a-c},getScrollInfo:function(h){var d=h.isWindow||h.isDocument?"":h.element.css("overflow-x"),f=h.isWindow||h.isDocument?"":h.element.css("overflow-y"),l="scroll"===d||"auto"===d&&h.width<h.element[0].scrollWidth,c="scroll"===f||"auto"===f&&h.height<h.element[0].scrollHeight;return{width:c?C.position.scrollbarWidth():0,height:l?C.position.scrollbarWidth():0}},getWithinInfo:function(d){var a=C(d||window),c=C.isWindow(a[0]),f=!!a[0]&&9===a[0].nodeType;return{element:a,isWindow:c,isDocument:f,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}},C.fn.position=function(l){if(!l||!l.of){return w.apply(this,arguments)}l=C.extend({},l);var r,d,i,f,u,t,o=C(l.of),n=C.position.getWithinInfo(l.within),h=C.position.getScrollInfo(n),s=(l.collision||"flip").split(" "),c={};return t=k(o),o[0].preventDefault&&(l.at="left top"),d=t.width,i=t.height,f=t.offset,u=C.extend({},f),C.each(["my","at"],function(){var e,a,p=(l[this]||"").split(" ");1===p.length&&(p=v.test(p[0])?p.concat(["center"]):z.test(p[0])?["center"].concat(p):["center","center"]),p[0]=v.test(p[0])?p[0]:"center",p[1]=z.test(p[1])?p[1]:"center",e=B.exec(p[0]),a=B.exec(p[1]),c[this]=[e?e[0]:0,a?a[0]:0],l[this]=[y.exec(p[0])[0],y.exec(p[1])[0]]}),1===s.length&&(s[1]=s[0]),"right"===l.at[0]?u.left+=d:"center"===l.at[0]&&(u.left+=d/2),"bottom"===l.at[1]?u.top+=i:"center"===l.at[1]&&(u.top+=i/2),r=q(c.at,d,i),u.left+=r[0],u.top+=r[1],this.each(function(){var e,E,I=C(this),L=I.outerWidth(),H=I.outerHeight(),F=D(this,"marginLeft"),K=D(this,"marginTop"),J=L+F+D(this,"marginRight")+h.width,a=H+K+D(this,"marginBottom")+h.height,G=C.extend({},u),p=q(c.my,I.outerWidth(),I.outerHeight());"right"===l.my[0]?G.left-=L:"center"===l.my[0]&&(G.left-=L/2),"bottom"===l.my[1]?G.top-=H:"center"===l.my[1]&&(G.top-=H/2),G.left+=p[0],G.top+=p[1],C.support.offsetFractions||(G.left=m(G.left),G.top=m(G.top)),e={marginLeft:F,marginTop:K},C.each(["left","top"],function(M,N){C.ui.position[s[M]]&&C.ui.position[s[M]][N](G,{targetWidth:d,targetHeight:i,elemWidth:L,elemHeight:H,collisionPosition:e,collisionWidth:J,collisionHeight:a,offset:[r[0]+p[0],r[1]+p[1]],my:l.my,at:l.at,within:n,elem:I})}),l.using&&(E=function(P){var O=f.left-G.left,Q=O+d-L,R=f.top-G.top,N=R+i-H,M={target:{element:o,left:f.left,top:f.top,width:d,height:i},element:{element:I,left:G.left,top:G.top,width:L,height:H},horizontal:0>Q?"left":O>0?"right":"center",vertical:0>N?"top":R>0?"bottom":"middle"};L>d&&d>b(O+Q)&&(M.horizontal="center"),H>i&&i>b(R+N)&&(M.vertical="middle"),M.important=j(b(O),b(Q))>j(b(R),b(N))?"horizontal":"vertical",l.using.call(this,P,M)}),I.offset(C.extend(G,{using:E}))})},C.ui.position={fit:{left:function(F,u){var o,G=u.within,d=G.isWindow?G.scrollLeft:G.offset.left,E=G.width,c=F.left-u.collisionPosition.marginLeft,f=d-c,p=c+u.collisionWidth-E-d;u.collisionWidth>E?f>0&&0>=p?(o=F.left+f+u.collisionWidth-E-d,F.left+=f-o):F.left=p>0&&0>=f?d:f>p?d+E-u.collisionWidth:d:f>0?F.left+=f:p>0?F.left-=p:F.left=j(F.left-c,F.left)},top:function(F,u){var o,G=u.within,d=G.isWindow?G.scrollTop:G.offset.top,E=u.within.height,c=F.top-u.collisionPosition.marginTop,f=d-c,p=c+u.collisionHeight-E-d;u.collisionHeight>E?f>0&&0>=p?(o=F.top+f+u.collisionHeight-E-d,F.top+=f-o):F.top=p>0&&0>=f?d:f>p?d+E-u.collisionHeight:d:f>0?F.top+=f:p>0?F.top-=p:F.top=j(F.top-c,F.top)}},flip:{left:function(P,K){var H,Q,F=K.within,N=F.offset.left+F.scrollLeft,E=F.width,G=F.isWindow?F.scrollLeft:F.offset.left,I=P.left-K.collisionPosition.marginLeft,M=I-G,O=I+K.collisionWidth-E-G,L="left"===K.my[0]?-K.elemWidth:"right"===K.my[0]?K.elemWidth:0,r="left"===K.at[0]?K.targetWidth:"right"===K.at[0]?-K.targetWidth:0,J=-2*K.offset[0];0>M?(H=P.left+L+r+J+K.collisionWidth-E-N,(0>H||b(M)>H)&&(P.left+=L+r+J)):O>0&&(Q=P.left-K.collisionPosition.marginLeft+L+r+J-G,(Q>0||O>b(Q))&&(P.left+=L+r+J))},top:function(Q,L){var H,R,F=L.within,O=F.offset.top+F.scrollTop,E=F.height,G=F.isWindow?F.scrollTop:F.offset.top,I=Q.top-L.collisionPosition.marginTop,N=I-G,P=I+L.collisionHeight-E-G,M="top"===L.my[1],r=M?-L.elemHeight:"bottom"===L.my[1]?L.elemHeight:0,K="top"===L.at[1]?L.targetHeight:"bottom"===L.at[1]?-L.targetHeight:0,J=-2*L.offset[1];0>N?(R=Q.top+r+K+J+L.collisionHeight-E-O,Q.top+r+K+J>N&&(0>R||b(N)>R)&&(Q.top+=r+K+J)):P>0&&(H=Q.top-L.collisionPosition.marginTop+r+K+J-G,Q.top+r+K+J>P&&(H>0||P>b(H))&&(Q.top+=r+K+J))}},flipfit:{left:function(){C.ui.position.flip.left.apply(this,arguments),C.ui.position.fit.left.apply(this,arguments)},top:function(){C.ui.position.flip.top.apply(this,arguments),C.ui.position.fit.top.apply(this,arguments)}}},function(){var l,d,f,t,c,p=document.getElementsByTagName("body")[0],h=document.createElement("div");l=document.createElement(p?"div":"body"),f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},p&&C.extend(f,{position:"absolute",left:"-1000px",top:"-1000px"});for(c in f){l.style[c]=f[c]}l.appendChild(h),d=p||document.documentElement,d.insertBefore(l,d.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",t=C(h).offset().left,C.support.offsetFractions=t>10&&11>t,l.innerHTML="",d.removeChild(l)}()})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(c){var b=this.options;return this.helper||b.disabled||a(c.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(c),this.handle?(a(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(c){var b=this.options;return this.helper=this._createHelper(c),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(c),this.originalPageX=c.pageX,this.originalPageY=c.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this._setContainment(),this._trigger("start",c)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c),this._mouseDrag(c,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,c),!0)},_mouseDrag:function(d,b){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(d),this.positionAbs=this._convertPositionTo("absolute"),!b){var c=this._uiHash();if(this._trigger("drag",d,c)===!1){return this._mouseUp({}),!1}this.position=c.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,d),!1},_mouseStop:function(d){var b=this,c=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,d)),this.dropped&&(c=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!c||"valid"===this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){b._trigger("stop",d)!==!1&&b._clear()}):this._trigger("stop",d)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(d){var b=this.options,c=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[d])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo),c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute"),c},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left" in b&&(this.offset.click.left=b.left+this.margins.left),"right" in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top" in b&&(this.offset.click.top=b.top+this.margins.top),"bottom" in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d,b,c,f=this.options;return f.containment?"window"===f.containment?(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===f.containment?(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):f.containment.constructor===Array?(this.containment=f.containment,undefined):("parent"===f.containment&&(f.containment=this.helper[0].parentNode),b=a(f.containment),c=b[0],c&&(d="hidden"!==b.css("overflow"),this.containment=[(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=b),undefined):(this.containment=null,undefined)},_convertPositionTo:function(d,b){b||(b=this.position);var c="absolute"===d?1:-1,f="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:f.scrollTop(),left:f.scrollLeft()}),{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*c}},_generatePosition:function(k){var g,p,d,m,c=this.options,b="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=k.pageX,j=k.pageY;return this.offset.scroll||(this.offset.scroll={top:b.scrollTop(),left:b.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(p=this.relative_container.offset(),g=[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]):g=this.containment,k.pageX-this.offset.click.left<g[0]&&(f=g[0]+this.offset.click.left),k.pageY-this.offset.click.top<g[1]&&(j=g[1]+this.offset.click.top),k.pageX-this.offset.click.left>g[2]&&(f=g[2]+this.offset.click.left),k.pageY-this.offset.click.top>g[3]&&(j=g[3]+this.offset.click.top)),c.grid&&(d=c.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,j=g?d-this.offset.click.top>=g[1]||d-this.offset.click.top>g[3]?d:d-this.offset.click.top>=g[1]?d-c.grid[1]:d+c.grid[1]:d,m=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,f=g?m-this.offset.click.left>=g[0]||m-this.offset.click.left>g[2]?m:m-this.offset.click.left>=g[0]?m-c.grid[0]:m+c.grid[0]:m)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(d,b,c){return c=c||this._uiHash(),a.ui.plugin.call(this,d,[b,c]),"drag"===d&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,d,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(f,c){var d=a(this).data("ui-draggable"),g=d.options,b=a.extend({},c,{item:d.element});d.sortables=[],a(g.connectToSortable).each(function(){var e=a.data(this,"ui-sortable");e&&!e.options.disabled&&(d.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",f,b))})},stop:function(d,b){var c=a(this).data("ui-draggable"),f=a.extend({},b,{item:c.element});a.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(d),this.instance.options.helper=this.instance.options._helper,"original"===c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",d,f))})},drag:function(d,b){var c=a(this).data("ui-draggable"),f=this;a.each(c.sortables,function(){var e=!1,g=this;this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(e=!0,a.each(c.sortables,function(){return this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(e=!1),e})),e?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},d.target=this.instance.currentItem[0],this.instance._mouseCapture(d,!0),this.instance._mouseStart(d,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",d),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(d)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",d,this.instance._uiHash(this.instance)),this.instance._mouseStop(d,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",d),c.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var c=a("body"),b=a(this).data("ui-draggable").options;c.css("cursor")&&(b._cursor=c.css("cursor")),c.css("cursor",b.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(d,b){var c=a(b.helper),f=a(this).data("ui-draggable").options;c.css("opacity")&&(f._opacity=c.css("opacity")),c.css("opacity",f.opacity)},stop:function(d,b){var c=a(this).data("ui-draggable").options;c._opacity&&a(b.helper).css("opacity",c._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(d){var b=a(this).data("ui-draggable"),c=b.options,f=!1;b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName?(c.axis&&"x"===c.axis||(b.overflowOffset.top+b.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity?b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed:d.pageY-b.overflowOffset.top<c.scrollSensitivity&&(b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(b.overflowOffset.left+b.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity?b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed:d.pageX-b.overflowOffset.left<c.scrollSensitivity&&(b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(d.pageY-a(document).scrollTop()<c.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(d.pageX-a(document).scrollLeft()<c.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(b,d)}}),a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("ui-draggable"),b=c.options;c.snapElements=[],a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var d=a(this),e=d.offset();this!==c.element[0]&&c.snapElements.push({item:this,width:d.outerWidth(),height:d.outerHeight(),top:e.top,left:e.left})})},drag:function(F,B){var q,y,J,x,t,A,C,H,k,G,w=a(this).data("ui-draggable"),D=w.options,E=D.snapTolerance,z=B.offset.left,K=z+w.helperProportions.width,j=B.offset.top,I=j+w.helperProportions.height;for(k=w.snapElements.length-1;k>=0;k--){t=w.snapElements[k].left,A=t+w.snapElements[k].width,C=w.snapElements[k].top,H=C+w.snapElements[k].height,t-E>K||z>A+E||C-E>I||j>H+E||!a.contains(w.snapElements[k].item.ownerDocument,w.snapElements[k].item)?(w.snapElements[k].snapping&&w.options.snap.release&&w.options.snap.release.call(w.element,F,a.extend(w._uiHash(),{snapItem:w.snapElements[k].item})),w.snapElements[k].snapping=!1):("inner"!==D.snapMode&&(q=E>=Math.abs(C-I),y=E>=Math.abs(H-j),J=E>=Math.abs(t-K),x=E>=Math.abs(A-z),q&&(B.position.top=w._convertPositionTo("relative",{top:C-w.helperProportions.height,left:0}).top-w.margins.top),y&&(B.position.top=w._convertPositionTo("relative",{top:H,left:0}).top-w.margins.top),J&&(B.position.left=w._convertPositionTo("relative",{top:0,left:t-w.helperProportions.width}).left-w.margins.left),x&&(B.position.left=w._convertPositionTo("relative",{top:0,left:A}).left-w.margins.left)),G=q||y||J||x,"outer"!==D.snapMode&&(q=E>=Math.abs(C-j),y=E>=Math.abs(H-I),J=E>=Math.abs(t-z),x=E>=Math.abs(A-K),q&&(B.position.top=w._convertPositionTo("relative",{top:C,left:0}).top-w.margins.top),y&&(B.position.top=w._convertPositionTo("relative",{top:H-w.helperProportions.height,left:0}).top-w.margins.top),J&&(B.position.left=w._convertPositionTo("relative",{top:0,left:t}).left-w.margins.left),x&&(B.position.left=w._convertPositionTo("relative",{top:0,left:A-w.helperProportions.width}).left-w.margins.left)),!w.snapElements[k].snapping&&(q||y||J||x||G)&&w.options.snap.snap&&w.options.snap.snap.call(w.element,F,a.extend(w._uiHash(),{snapItem:w.snapElements[k].item})),w.snapElements[k].snapping=q||y||J||x||G)}}}),a.ui.plugin.add("draggable","stack",{start:function(){var d,b=this.data("ui-draggable").options,c=a.makeArray(a(b.stack)).sort(function(g,f){return(parseInt(a(g).css("zIndex"),10)||0)-(parseInt(a(f).css("zIndex"),10)||0)});c.length&&(d=parseInt(a(c[0]).css("zIndex"),10)||0,a(c).each(function(e){a(this).css("zIndex",d+e)}),this.css("zIndex",d+c.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(d,b){var c=a(b.helper),f=a(this).data("ui-draggable").options;c.css("zIndex")&&(f._zIndex=c.css("zIndex")),c.css("zIndex",f.zIndex)},stop:function(d,b){var c=a(this).data("ui-draggable").options;c._zIndex&&a(b.helper).css("zIndex",c._zIndex)}})})(jQuery);(function(b){function c(d){return parseInt(d,10)||0}function a(d){return !isNaN(parseInt(d,10))}b.widget("ui.resizable",b.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var j,f,g,l,d,k=this,h=this.options;if(this.element.addClass("ui-resizable"),b.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String){for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),j=this.handles.split(","),this.handles={},f=0;j.length>f;f++){g=b.trim(j[f]),d="ui-resizable-"+g,l=b("<div class='ui-resizable-handle "+d+"'></div>"),l.css({zIndex:h.zIndex}),"se"===g&&l.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[g]=".ui-resizable-"+g,this.element.append(l)}}this._renderAxis=function(q){var o,p,r,m;q=q||this.element;for(o in this.handles){this.handles[o].constructor===String&&(this.handles[o]=b(this.handles[o],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(p=b(this.handles[o],this.element),m=/sw|ne|nw|se|n|s/.test(o)?p.outerHeight():p.outerWidth(),r=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join(""),q.css(r,m),this._proportionallyResize()),b(this.handles[o]).length}},this._renderAxis(this.element),this._handles=b(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){k.resizing||(this.className&&(l=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),k.axis=l&&l[1]?l[1]:"se")}),h.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(b(this).removeClass("ui-resizable-autohide"),k._handles.show())}).mouseleave(function(){h.disabled||k.resizing||(b(this).addClass("ui-resizable-autohide"),k._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var f,d=function(g){b(g).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(d(this.element),f=this.element,this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f),f.remove()),this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),this},_mouseCapture:function(g){var d,f,h=!1;for(d in this.handles){f=b(this.handles[d])[0],(f===g.target||b.contains(f,g.target))&&(h=!0)}return !this.options.disabled&&h},_mouseStart:function(e){var g,l,d,k=this.options,j=this.element.position(),f=this.element;return this.resizing=!0,/absolute/.test(f.css("position"))?f.css({position:"absolute",top:f.css("top"),left:f.css("left")}):f.is(".ui-draggable")&&f.css({position:"absolute",top:j.top,left:j.left}),this._renderProxy(),g=c(this.helper.css("left")),l=c(this.helper.css("top")),k.containment&&(g+=b(k.containment).scrollLeft()||0,l+=b(k.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:l},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:l},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1,d=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===d?this.axis+"-resize":d),f.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(v){var q,A=this.helper,k={},y=this.originalMousePosition,j=this.axis,f=this.position.top,t=this.position.left,m=this.size.width,x=this.size.height,z=v.pageX-y.left||0,w=v.pageY-y.top||0,g=this._change[j];return g?(q=g.apply(this,[v,z,w]),this._updateVirtualBoundaries(v.shiftKey),(this._aspectRatio||v.shiftKey)&&(q=this._updateRatio(q,v)),q=this._respectSize(q,v),this._updateCache(q),this._propagate("resize",v),this.position.top!==f&&(k.top=this.position.top+"px"),this.position.left!==t&&(k.left=this.position.left+"px"),this.size.width!==m&&(k.width=this.size.width+"px"),this.size.height!==x&&(k.height=this.size.height+"px"),A.css(k),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(k)||this._trigger("resize",v,this.ui()),!1):!1},_mouseStop:function(p){this.resizing=!1;var k,u,g,t,f,d,m,j=this.options,q=this;return this._helper&&(k=this._proportionallyResizeElements,u=k.length&&/textarea/i.test(k[0].nodeName),g=u&&b.ui.hasScroll(k[0],"left")?0:q.sizeDiff.height,t=u?0:q.sizeDiff.width,f={width:q.helper.width()-t,height:q.helper.height()-g},d=parseInt(q.element.css("left"),10)+(q.position.left-q.originalPosition.left)||null,m=parseInt(q.element.css("top"),10)+(q.position.top-q.originalPosition.top)||null,j.animate||this.element.css(b.extend(f,{top:m,left:d})),q.helper.height(q.size.height),q.helper.width(q.size.width),this._helper&&!j.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",p),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(f){var i,g,k,d,j,h=this.options;j={minWidth:a(h.minWidth)?h.minWidth:0,maxWidth:a(h.maxWidth)?h.maxWidth:1/0,minHeight:a(h.minHeight)?h.minHeight:0,maxHeight:a(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||f)&&(i=j.minHeight*this.aspectRatio,k=j.minWidth/this.aspectRatio,g=j.maxHeight*this.aspectRatio,d=j.maxWidth/this.aspectRatio,i>j.minWidth&&(j.minWidth=i),k>j.minHeight&&(j.minHeight=k),j.maxWidth>g&&(j.maxWidth=g),j.maxHeight>d&&(j.maxHeight=d)),this._vBoundaries=j},_updateCache:function(d){this.offset=this.helper.offset(),a(d.left)&&(this.position.left=d.left),a(d.top)&&(this.position.top=d.top),a(d.height)&&(this.size.height=d.height),a(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var g=this.position,f=this.size,h=this.axis;return a(d.height)?d.width=d.height*this.aspectRatio:a(d.width)&&(d.height=d.width/this.aspectRatio),"sw"===h&&(d.left=g.left+(f.width-d.width),d.top=null),"nw"===h&&(d.top=g.top+(f.height-d.height),d.left=g.left+(f.width-d.width)),d},_respectSize:function(v){var k=this._vBoundaries,w=this.axis,g=a(v.width)&&k.maxWidth&&k.maxWidth<v.width,p=a(v.height)&&k.maxHeight&&k.maxHeight<v.height,f=a(v.width)&&k.minWidth&&k.minWidth>v.width,d=a(v.height)&&k.minHeight&&k.minHeight>v.height,j=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,m=/sw|nw|w/.test(w),q=/nw|ne|n/.test(w);return f&&(v.width=k.minWidth),d&&(v.height=k.minHeight),g&&(v.width=k.maxWidth),p&&(v.height=k.maxHeight),f&&m&&(v.left=j-k.minWidth),g&&m&&(v.left=j-k.maxWidth),d&&q&&(v.top=i-k.minHeight),p&&q&&(v.top=i-k.maxHeight),v.width||v.height||v.left||!v.top?v.width||v.height||v.top||!v.left||(v.left=null):v.top=null,v},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var g,j,f,h,k,d=this.helper||this.element;for(g=0;this._proportionallyResizeElements.length>g;g++){if(k=this._proportionallyResizeElements[g],!this.borderDif){for(this.borderDif=[],f=[k.css("borderTopWidth"),k.css("borderRightWidth"),k.css("borderBottomWidth"),k.css("borderLeftWidth")],h=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")],j=0;f.length>j;j++){this.borderDif[j]=(parseInt(f[j],10)||0)+(parseInt(h[j],10)||0)}}k.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var f=this.element,d=this.options;this.elementOffset=f.offset(),this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,f){return{width:this.originalSize.width+f}},w:function(f,h){var d=this.originalSize,g=this.originalPosition;return{left:g.left+h,width:d.width-h}},n:function(f,h,d){var g=this.originalSize,j=this.originalPosition;return{top:j.top+d,height:g.height-d}},s:function(f,g,d){return{height:this.originalSize.height+d}},se:function(g,d,f){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,d,f]))},sw:function(g,d,f){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,d,f]))},ne:function(g,d,f){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,d,f]))},nw:function(g,d,f){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,d,f]))}},_propagate:function(f,d){b.ui.plugin.call(this,f,[d,this.ui()]),"resize"!==f&&this._trigger(f,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),b.ui.plugin.add("resizable","animate",{stop:function(p){var k=b(this).data("ui-resizable"),u=k.options,g=k._proportionallyResizeElements,t=g.length&&/textarea/i.test(g[0].nodeName),f=t&&b.ui.hasScroll(g[0],"left")?0:k.sizeDiff.height,d=t?0:k.sizeDiff.width,m={width:k.size.width-d,height:k.size.height-f},j=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,q=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null;k.element.animate(b.extend(m,q&&j?{top:q,left:j}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var e={width:parseInt(k.element.css("width"),10),height:parseInt(k.element.css("height"),10),top:parseInt(k.element.css("top"),10),left:parseInt(k.element.css("left"),10)};g&&g.length&&b(g[0]).css({width:e.width,height:e.height}),k._updateCache(e),k._propagate("resize",p)}})}}),b.ui.plugin.add("resizable","containment",{start:function(){var m,y,j,w,g,e,q,k=b(this).data("ui-resizable"),v=k.options,x=k.element,t=v.containment,f=t instanceof b?t.get(0):/parent/.test(t)?x.parent().get(0):t;f&&(k.containerElement=b(f),/document/.test(t)||t===document?(k.containerOffset={left:0,top:0},k.containerPosition={left:0,top:0},k.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}):(m=b(f),y=[],b(["Top","Right","Left","Bottom"]).each(function(d,h){y[d]=c(m.css("padding"+h))}),k.containerOffset=m.offset(),k.containerPosition=m.position(),k.containerSize={height:m.innerHeight()-y[3],width:m.innerWidth()-y[1]},j=k.containerOffset,w=k.containerSize.height,g=k.containerSize.width,e=b.ui.hasScroll(f,"left")?f.scrollWidth:g,q=b.ui.hasScroll(f)?f.scrollHeight:w,k.parentData={element:f,left:j.left,top:j.top,width:e,height:q}))},resize:function(q){var m,y,j,w,g=b(this).data("ui-resizable"),f=g.options,p=g.containerOffset,k=g.position,v=g._aspectRatio||q.shiftKey,x={top:0,left:0},t=g.containerElement;t[0]!==document&&/static/.test(t.css("position"))&&(x=p),k.left<(g._helper?p.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-p.left:g.position.left-x.left),v&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=f.helper?p.left:0),k.top<(g._helper?p.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-p.top:g.position.top),v&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?p.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,m=Math.abs((g._helper?g.offset.left-x.left:g.offset.left-x.left)+g.sizeDiff.width),y=Math.abs((g._helper?g.offset.top-x.top:g.offset.top-p.top)+g.sizeDiff.height),j=g.containerElement.get(0)===g.element.parent().get(0),w=/relative|absolute/.test(g.containerElement.css("position")),j&&w&&(m-=Math.abs(g.parentData.left)),m+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-m,v&&(g.size.height=g.size.width/g.aspectRatio)),y+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-y,v&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var p=b(this).data("ui-resizable"),k=p.options,t=p.containerOffset,g=p.containerPosition,q=p.containerElement,f=b(p.helper),d=f.offset(),m=f.outerWidth()-p.sizeDiff.width,j=f.outerHeight()-p.sizeDiff.height;p._helper&&!k.animate&&/relative/.test(q.css("position"))&&b(this).css({left:d.left-g.left-t.left,width:m,height:j}),p._helper&&!k.animate&&/static/.test(q.css("position"))&&b(this).css({left:d.left-g.left-t.left,width:m,height:j})}}),b.ui.plugin.add("resizable","alsoResize",{start:function(){var g=b(this).data("ui-resizable"),d=g.options,f=function(h){b(h).each(function(){var i=b(this);i.data("ui-resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)})})};"object"!=typeof d.alsoResize||d.alsoResize.parentNode?f(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],f(d.alsoResize)):b.each(d.alsoResize,function(e){f(e)})},resize:function(l,f){var j=b(this).data("ui-resizable"),p=j.options,d=j.originalSize,m=j.originalPosition,k={height:j.size.height-d.height||0,width:j.size.width-d.width||0,top:j.position.top-m.top||0,left:j.position.left-m.left||0},g=function(i,h){b(i).each(function(){var r=b(this),t=b(this).data("ui-resizable-alsoresize"),q={},s=h&&h.length?h:r.parents(f.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(s,function(o,u){var n=(t[u]||0)+(k[u]||0);n&&n>=0&&(q[u]=n||null)}),r.css(q)})};"object"!=typeof p.alsoResize||p.alsoResize.nodeType?g(p.alsoResize):b.each(p.alsoResize,function(h,i){g(h,i)})},stop:function(){b(this).removeData("resizable-alsoresize")}}),b.ui.plugin.add("resizable","ghost",{start:function(){var g=b(this).data("ui-resizable"),d=g.options,f=g.size;g.ghost=g.originalElement.clone(),g.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?d.ghost:""),g.ghost.appendTo(g.helper)},resize:function(){var d=b(this).data("ui-resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=b(this).data("ui-resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),b.ui.plugin.add("resizable","grid",{resize:function(){var C=b(this).data("ui-resizable"),y=C.options,I=C.size,t=C.originalSize,F=C.originalPosition,q=C.axis,j="number"==typeof y.grid?[y.grid,y.grid]:y.grid,z=j[0]||1,x=j[1]||1,E=Math.round((I.width-t.width)/z)*z,H=Math.round((I.height-t.height)/x)*x,D=t.width+E,k=t.height+H,B=y.maxWidth&&D>y.maxWidth,A=y.maxHeight&&k>y.maxHeight,w=y.minWidth&&y.minWidth>D,G=y.minHeight&&y.minHeight>k;y.grid=j,w&&(D+=z),G&&(k+=x),B&&(D-=z),A&&(k-=x),/^(se|s|e)$/.test(q)?(C.size.width=D,C.size.height=k):/^(ne)$/.test(q)?(C.size.width=D,C.size.height=k,C.position.top=F.top-H):/^(sw)$/.test(q)?(C.size.width=D,C.size.height=k,C.position.left=F.left-E):(k-x>0?(C.size.height=k,C.position.top=F.top-H):(C.size.height=x,C.position.top=F.top+t.height-x),D-z>0?(C.size.width=D,C.position.left=F.left-E):(C.size.width=z,C.position.left=F.left+t.width-z))}})})(jQuery);(function(g){var d,c="ui-button ui-widget ui-state-default ui-corner-all",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var a=g(this);setTimeout(function(){a.find(":ui-button").button("refresh")},1)},b=function(e){var a=e.name,k=e.form,j=g([]);return a&&(a=a.replace(/'/g,"\\'"),j=k?g(k).find("[name='"+a+"']"):g("[name='"+a+"']",e.ownerDocument).filter(function(){return !this.form})),j};g.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var j=this,i=this.options,e="checkbox"===this.type||"radio"===this.type,a=e?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===d&&g(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||g(this).removeClass(a)}).bind("click"+this.eventNamespace,function(k){i.disabled&&(k.preventDefault(),k.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),e&&this.element.bind("change"+this.eventNamespace,function(){j.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled){return !1}g(this).addClass("ui-state-active"),j.buttonElement.attr("aria-pressed","true");var k=j.element[0];b(k).not(k).map(function(){return g(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(g(this).addClass("ui-state-active"),d=this,j.document.one("mouseup",function(){d=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(g(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(k){return i.disabled?!1:((k.keyCode===g.ui.keyCode.SPACE||k.keyCode===g.ui.keyCode.ENTER)&&g(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){g(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(k){k.keyCode===g.ui.keyCode.SPACE&&g(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var k,j,a;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(k=this.element.parents().last(),j="label[for='"+this.element.attr("id")+"']",this.buttonElement=k.find(j),this.buttonElement.length||(k=k.length?k.siblings():this.element.siblings(),this.buttonElement=k.filter(j),this.buttonElement.length||(this.buttonElement=k.find(j))),this.element.addClass("ui-helper-hidden-accessible"),a=this.element.is(":checked"),a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(c+" ui-state-active "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(i,a){return this._super(i,a),"disabled"===i?(this.element.prop("disabled",!!a),a&&this.buttonElement.removeClass("ui-state-focus"),undefined):(this._resetButton(),undefined)},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOption("disabled",a),"radio"===this.type?b(this.element[0]).each(function(){g(this).is(":checked")?g(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):g(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type){return this.options.label&&this.element.val(this.options.label),undefined}var k=this.buttonElement.removeClass(h),j=g("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(k.empty()).text(),l=this.options.icons,e=l.primary&&l.secondary,m=[];l.primary||l.secondary?(this.options.text&&m.push("ui-button-text-icon"+(e?"s":l.primary?"-primary":"-secondary")),l.primary&&k.prepend("<span class='ui-button-icon-primary ui-icon "+l.primary+"'></span>"),l.secondary&&k.append("<span class='ui-button-icon-secondary ui-icon "+l.secondary+"'></span>"),this.options.text||(m.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||k.attr("title",g.trim(j)))):m.push("ui-button-text-only"),k.addClass(m.join(" "))}}),g.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(i,a){"disabled"===i&&this.buttons.button("option",i,a),this._super(i,a)},refresh:function(){var a="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return g(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return g(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(h,d){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},h.extend(this._defaults,this.regional[""]),this.dpDiv=b(h("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function b(e){var a="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(a,"mouseout",function(){h(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&h(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&h(this).removeClass("ui-datepicker-next-hover")}).delegate(a,"mouseover",function(){h.datepicker._isDisabledDatepicker(j.inline?e.parent()[0]:j.input[0])||(h(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),h(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&h(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&h(this).addClass("ui-datepicker-next-hover"))})}function f(l,k){h.extend(l,k);for(var e in k){null==k[e]&&(l[e]=k[e])}return l}h.extend(h.ui,{datepicker:{version:"1.10.4"}});var j,g="datepicker";h.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return f(this._defaults,a||{}),this},_attachDatepicker:function(l,k){var e,m,o;e=l.nodeName.toLowerCase(),m="div"===e||"span"===e,l.id||(this.uuid+=1,l.id="dp"+this.uuid),o=this._newInst(h(l),m),o.settings=h.extend({},k||{}),"input"===e?this._connectDatepicker(l,o):m&&this._inlineDatepicker(l,o)},_newInst:function(e,a){var k=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:k,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?b(h("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(l,k){var e=h(l);k.append=h([]),k.trigger=h([]),e.hasClass(this.markerClassName)||(this._attachments(e,k),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(k),h.data(l,g,k),k.settings.disabled&&this._disableDatepicker(l))},_attachments:function(l,k){var e,m,u,p=this._get(k,"appendText"),q=this._get(k,"isRTL");k.append&&k.append.remove(),p&&(k.append=h("<span class='"+this._appendClass+"'>"+p+"</span>"),l[q?"before":"after"](k.append)),l.unbind("focus",this._showDatepicker),k.trigger&&k.trigger.remove(),e=this._get(k,"showOn"),("focus"===e||"both"===e)&&l.focus(this._showDatepicker),("button"===e||"both"===e)&&(m=this._get(k,"buttonText"),u=this._get(k,"buttonImage"),k.trigger=h(this._get(k,"buttonImageOnly")?h("<img/>").addClass(this._triggerClass).attr({src:u,alt:m,title:m}):h("<button type='button'></button>").addClass(this._triggerClass).html(u?h("<img/>").attr({src:u,alt:m,title:m}):m)),l[q?"before":"after"](k.trigger),k.trigger.click(function(){return h.datepicker._datepickerShowing&&h.datepicker._lastInput===l[0]?h.datepicker._hideDatepicker():h.datepicker._datepickerShowing&&h.datepicker._lastInput!==l[0]?(h.datepicker._hideDatepicker(),h.datepicker._showDatepicker(l[0])):h.datepicker._showDatepicker(l[0]),!1}))},_autoSize:function(q){if(this._get(q,"autoSize")&&!q.inline){var m,l,k,o,u=new Date(2009,11,20),p=this._get(q,"dateFormat");p.match(/[DM]/)&&(m=function(a){for(l=0,k=0,o=0;a.length>o;o++){a[o].length>l&&(l=a[o].length,k=o)}return k},u.setMonth(m(this._get(q,p.match(/MM/)?"monthNames":"monthNamesShort"))),u.setDate(m(this._get(q,p.match(/DD/)?"dayNames":"dayNamesShort"))+20-u.getDay())),q.input.attr("size",this._formatDate(q,u).length)}},_inlineDatepicker:function(l,k){var e=h(l);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(k.dpDiv),h.data(l,g,k),this._setDate(k,this._getDefaultDate(k),!0),this._updateDatepicker(k),this._updateAlternate(k),k.settings.disabled&&this._disableDatepicker(l),k.dpDiv.css("display","block"))},_dialogDatepicker:function(z,r,x,m,k){var y,w,s,q,v,e=this._dialogInst;return e||(this.uuid+=1,y="dp"+this.uuid,this._dialogInput=h("<input type='text' id='"+y+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),h("body").append(this._dialogInput),e=this._dialogInst=this._newInst(this._dialogInput,!1),e.settings={},h.data(this._dialogInput[0],g,e)),f(e.settings,m||{}),r=r&&r.constructor===Date?this._formatDate(e,r):r,this._dialogInput.val(r),this._pos=k?k.length?k:[k.pageX,k.pageY]:null,this._pos||(w=document.documentElement.clientWidth,s=document.documentElement.clientHeight,q=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[w/2-100+q,s/2-150+v]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),e.settings.onSelect=x,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),h.blockUI&&h.blockUI(this.dpDiv),h.data(this._dialogInput[0],g,e),this},_destroyDatepicker:function(l){var k,e=h(l),m=h.data(l,g);e.hasClass(this.markerClassName)&&(k=l.nodeName.toLowerCase(),h.removeData(l,g),"input"===k?(m.append.remove(),m.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===k||"span"===k)&&e.removeClass(this.markerClassName).empty())},_enableDatepicker:function(l){var k,e,m=h(l),o=h.data(l,g);m.hasClass(this.markerClassName)&&(k=l.nodeName.toLowerCase(),"input"===k?(l.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===k||"span"===k)&&(e=m.children("."+this._inlineClass),e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=h.map(this._disabledInputs,function(a){return a===l?null:a}))},_disableDatepicker:function(l){var k,e,m=h(l),o=h.data(l,g);m.hasClass(this.markerClassName)&&(k=l.nodeName.toLowerCase(),"input"===k?(l.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===k||"span"===k)&&(e=m.children("."+this._inlineClass),e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=h.map(this._disabledInputs,function(a){return a===l?null:a}),this._disabledInputs[this._disabledInputs.length]=l)},_isDisabledDatepicker:function(i){if(!i){return !1}for(var a=0;this._disabledInputs.length>a;a++){if(this._disabledInputs[a]===i){return !0}}return !1},_getInst:function(e){try{return h.data(e,g)}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(l,e,t){var p,q,k,s,m=this._getInst(l);return 2===arguments.length&&"string"==typeof e?"defaults"===e?h.extend({},h.datepicker._defaults):m?"all"===e?h.extend({},m.settings):this._get(m,e):null:(p=e||{},"string"==typeof e&&(p={},p[e]=t),m&&(this._curInst===m&&this._hideDatepicker(),q=this._getDateDatepicker(l,!0),k=this._getMinMaxDate(m,"min"),s=this._getMinMaxDate(m,"max"),f(m.settings,p),null!==k&&p.dateFormat!==d&&p.minDate===d&&(m.settings.minDate=this._formatDate(m,k)),null!==s&&p.dateFormat!==d&&p.maxDate===d&&(m.settings.maxDate=this._formatDate(m,s)),"disabled" in p&&(p.disabled?this._disableDatepicker(l):this._enableDatepicker(l)),this._attachments(h(l),m),this._autoSize(m),this._setDate(m,q),this._updateAlternate(m),this._updateDatepicker(m)),d)},_changeDatepicker:function(l,k,a){this._optionDatepicker(l,k,a)},_refreshDatepicker:function(i){var a=this._getInst(i);a&&this._updateDatepicker(a)},_setDateDatepicker:function(l,k){var a=this._getInst(l);a&&(this._setDate(a,k),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(l,k){var a=this._getInst(l);return a&&!a.inline&&this._setDateFromField(a,k),a?this._getDate(a):null},_doKeyDown:function(l){var k,e,m,u=h.datepicker._getInst(l.target),p=!0,q=u.dpDiv.is(".ui-datepicker-rtl");if(u._keyEvent=!0,h.datepicker._datepickerShowing){switch(l.keyCode){case 9:h.datepicker._hideDatepicker(),p=!1;break;case 13:return m=h("td."+h.datepicker._dayOverClass+":not(."+h.datepicker._currentClass+")",u.dpDiv),m[0]&&h.datepicker._selectDay(l.target,u.selectedMonth,u.selectedYear,m[0]),k=h.datepicker._get(u,"onSelect"),k?(e=h.datepicker._formatDate(u),k.apply(u.input?u.input[0]:null,[e,u])):h.datepicker._hideDatepicker(),!1;case 27:h.datepicker._hideDatepicker();break;case 33:h.datepicker._adjustDate(l.target,l.ctrlKey?-h.datepicker._get(u,"stepBigMonths"):-h.datepicker._get(u,"stepMonths"),"M");break;case 34:h.datepicker._adjustDate(l.target,l.ctrlKey?+h.datepicker._get(u,"stepBigMonths"):+h.datepicker._get(u,"stepMonths"),"M");break;case 35:(l.ctrlKey||l.metaKey)&&h.datepicker._clearDate(l.target),p=l.ctrlKey||l.metaKey;break;case 36:(l.ctrlKey||l.metaKey)&&h.datepicker._gotoToday(l.target),p=l.ctrlKey||l.metaKey;break;case 37:(l.ctrlKey||l.metaKey)&&h.datepicker._adjustDate(l.target,q?1:-1,"D"),p=l.ctrlKey||l.metaKey,l.originalEvent.altKey&&h.datepicker._adjustDate(l.target,l.ctrlKey?-h.datepicker._get(u,"stepBigMonths"):-h.datepicker._get(u,"stepMonths"),"M");break;case 38:(l.ctrlKey||l.metaKey)&&h.datepicker._adjustDate(l.target,-7,"D"),p=l.ctrlKey||l.metaKey;break;case 39:(l.ctrlKey||l.metaKey)&&h.datepicker._adjustDate(l.target,q?-1:1,"D"),p=l.ctrlKey||l.metaKey,l.originalEvent.altKey&&h.datepicker._adjustDate(l.target,l.ctrlKey?+h.datepicker._get(u,"stepBigMonths"):+h.datepicker._get(u,"stepMonths"),"M");break;case 40:(l.ctrlKey||l.metaKey)&&h.datepicker._adjustDate(l.target,7,"D"),p=l.ctrlKey||l.metaKey;break;default:p=!1}}else{36===l.keyCode&&l.ctrlKey?h.datepicker._showDatepicker(this):p=!1}p&&(l.preventDefault(),l.stopPropagation())},_doKeyPress:function(k){var e,l,m=h.datepicker._getInst(k.target);return h.datepicker._get(m,"constrainInput")?(e=h.datepicker._possibleChars(h.datepicker._get(m,"dateFormat")),l=String.fromCharCode(null==k.charCode?k.keyCode:k.charCode),k.ctrlKey||k.metaKey||" ">l||!e||e.indexOf(l)>-1):d},_doKeyUp:function(l){var k,e=h.datepicker._getInst(l.target);if(e.input.val()!==e.lastVal){try{k=h.datepicker.parseDate(h.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,h.datepicker._getFormatConfig(e)),k&&(h.datepicker._setDateFromField(e),h.datepicker._updateAlternate(e),h.datepicker._updateDatepicker(e))}catch(m){}}return !0},_showDatepicker:function(m){if(m=m.target||m,"input"!==m.nodeName.toLowerCase()&&(m=h("input",m.parentNode)[0]),!h.datepicker._isDisabledDatepicker(m)&&h.datepicker._lastInput!==m){var l,e,v,p,q,k,s;l=h.datepicker._getInst(m),h.datepicker._curInst&&h.datepicker._curInst!==l&&(h.datepicker._curInst.dpDiv.stop(!0,!0),l&&h.datepicker._datepickerShowing&&h.datepicker._hideDatepicker(h.datepicker._curInst.input[0])),e=h.datepicker._get(l,"beforeShow"),v=e?e.apply(m,[m,l]):{},v!==!1&&(f(l.settings,v),l.lastVal=null,h.datepicker._lastInput=m,h.datepicker._setDateFromField(l),h.datepicker._inDialog&&(m.value=""),h.datepicker._pos||(h.datepicker._pos=h.datepicker._findPos(m),h.datepicker._pos[1]+=m.offsetHeight),p=!1,h(m).parents().each(function(){return p|="fixed"===h(this).css("position"),!p}),q={left:h.datepicker._pos[0],top:h.datepicker._pos[1]},h.datepicker._pos=null,l.dpDiv.empty(),l.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),h.datepicker._updateDatepicker(l),q=h.datepicker._checkOffset(l,q,p),l.dpDiv.css({position:h.datepicker._inDialog&&h.blockUI?"static":p?"fixed":"absolute",display:"none",left:q.left+"px",top:q.top+"px"}),l.inline||(k=h.datepicker._get(l,"showAnim"),s=h.datepicker._get(l,"duration"),l.dpDiv.zIndex(h(m).zIndex()+1),h.datepicker._datepickerShowing=!0,h.effects&&h.effects.effect[k]?l.dpDiv.show(k,h.datepicker._get(l,"showOptions"),s):l.dpDiv[k||"show"](k?s:null),h.datepicker._shouldFocusInput(l)&&l.input.focus(),h.datepicker._curInst=l))}},_updateDatepicker:function(l){this.maxRows=4,j=l,l.dpDiv.empty().append(this._generateHTML(l)),this._attachHandlers(l),l.dpDiv.find("."+this._dayOverClass+" a").mouseover();var k,e=this._getNumberOfMonths(l),m=e[1],n=17;l.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),m>1&&l.dpDiv.addClass("ui-datepicker-multi-"+m).css("width",n*m+"em"),l.dpDiv[(1!==e[0]||1!==e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),l.dpDiv[(this._get(l,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),l===h.datepicker._curInst&&h.datepicker._datepickerShowing&&h.datepicker._shouldFocusInput(l)&&l.input.focus(),l.yearshtml&&(k=l.yearshtml,setTimeout(function(){k===l.yearshtml&&l.yearshtml&&l.dpDiv.find("select.ui-datepicker-year:first").replaceWith(l.yearshtml),k=l.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(w,m,q){var x=w.dpDiv.outerWidth(),l=w.dpDiv.outerHeight(),e=w.input?w.input.outerWidth():0,k=w.input?w.input.outerHeight():0,v=document.documentElement.clientWidth+(q?0:h(document).scrollLeft()),p=document.documentElement.clientHeight+(q?0:h(document).scrollTop());return m.left-=this._get(w,"isRTL")?x-e:0,m.left-=q&&m.left===w.input.offset().left?h(document).scrollLeft():0,m.top-=q&&m.top===w.input.offset().top+k?h(document).scrollTop():0,m.left-=Math.min(m.left,m.left+x>v&&v>x?Math.abs(m.left+x-v):0),m.top-=Math.min(m.top,m.top+l>p&&p>l?Math.abs(l+k):0),m},_findPos:function(l){for(var k,e=this._getInst(l),m=this._get(e,"isRTL");l&&("hidden"===l.type||1!==l.nodeType||h.expr.filters.hidden(l));){l=l[m?"previousSibling":"nextSibling"]}return k=h(l).offset(),[k.left,k.top]},_hideDatepicker:function(l){var k,e,m,q,p=this._curInst;!p||l&&p!==h.data(l,g)||this._datepickerShowing&&(k=this._get(p,"showAnim"),e=this._get(p,"duration"),m=function(){h.datepicker._tidyDialog(p)},h.effects&&(h.effects.effect[k]||h.effects[k])?p.dpDiv.hide(k,h.datepicker._get(p,"showOptions"),e,m):p.dpDiv["slideDown"===k?"slideUp":"fadeIn"===k?"fadeOut":"hide"](k?e:null,m),k||m(),this._datepickerShowing=!1,q=this._get(p,"onClose"),q&&q.apply(p.input?p.input[0]:null,[p.input?p.input.val():"",p]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),h.blockUI&&(h.unblockUI(),h("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(l){if(h.datepicker._curInst){var k=h(l.target),e=h.datepicker._getInst(k[0]);(k[0].id!==h.datepicker._mainDivId&&0===k.parents("#"+h.datepicker._mainDivId).length&&!k.hasClass(h.datepicker.markerClassName)&&!k.closest("."+h.datepicker._triggerClass).length&&h.datepicker._datepickerShowing&&(!h.datepicker._inDialog||!h.blockUI)||k.hasClass(h.datepicker.markerClassName)&&h.datepicker._curInst!==e)&&h.datepicker._hideDatepicker()}},_adjustDate:function(l,k,e){var m=h(l),o=this._getInst(m[0]);this._isDisabledDatepicker(m[0])||(this._adjustInstDate(o,k+("M"===e?this._get(o,"showCurrentAtPos"):0),e),this._updateDatepicker(o))},_gotoToday:function(l){var k,e=h(l),m=this._getInst(e[0]);this._get(m,"gotoCurrent")&&m.currentDay?(m.selectedDay=m.currentDay,m.drawMonth=m.selectedMonth=m.currentMonth,m.drawYear=m.selectedYear=m.currentYear):(k=new Date,m.selectedDay=k.getDate(),m.drawMonth=m.selectedMonth=k.getMonth(),m.drawYear=m.selectedYear=k.getFullYear()),this._notifyChange(m),this._adjustDate(e)},_selectMonthYear:function(l,k,e){var m=h(l),o=this._getInst(m[0]);o["selected"+("M"===e?"Month":"Year")]=o["draw"+("M"===e?"Month":"Year")]=parseInt(k.options[k.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(m)},_selectDay:function(l,k,e,m){var p,o=h(l);h(m).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(p=this._getInst(o[0]),p.selectedDay=p.currentDay=h("a",m).html(),p.selectedMonth=p.currentMonth=k,p.selectedYear=p.currentYear=e,this._selectDate(l,this._formatDate(p,p.currentDay,p.currentMonth,p.currentYear)))},_clearDate:function(e){var a=h(e);this._selectDate(a,"")},_selectDate:function(l,k){var e,m=h(l),o=this._getInst(m[0]);k=null!=k?k:this._formatDate(o),o.input&&o.input.val(k),this._updateAlternate(o),e=this._get(o,"onSelect"),e?e.apply(o.input?o.input[0]:null,[k,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(l){var k,e,m,o=this._get(l,"altField");o&&(k=this._get(l,"altFormat")||this._get(l,"dateFormat"),e=this._getDate(l),m=this.formatDate(k,e,this._getFormatConfig(l)),h(o).each(function(){h(this).val(m)}))},noWeekends:function(i){var a=i.getDay();return[a>0&&6>a,""]},iso8601Week:function(l){var k,a=new Date(l.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),k=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((k-a)/86400000)/7)+1},parseDate:function(K,S,B){if(null==K||null==S){throw"Invalid arguments"}if(S="object"==typeof S?""+S:S+"",""===S){return null}var G,C,F,z,Q=0,L=(B?B.shortYearCutoff:null)||this._defaults.shortYearCutoff,I="string"!=typeof L?L:(new Date).getFullYear()%100+parseInt(L,10),P=(B?B.dayNamesShort:null)||this._defaults.dayNamesShort,E=(B?B.dayNames:null)||this._defaults.dayNames,N=(B?B.monthNamesShort:null)||this._defaults.monthNamesShort,H=(B?B.monthNames:null)||this._defaults.monthNames,O=-1,T=-1,x=-1,J=-1,q=!1,R=function(i){var a=K.length>G+1&&K.charAt(G+1)===i;return a&&G++,a},A=function(m){var k=R(m),a="@"===m?14:"!"===m?20:"y"===m&&k?4:"o"===m?3:2,l=RegExp("^\\d{1,"+a+"}"),o=S.substring(Q).match(l);if(!o){throw"Missing number at position "+Q}return Q+=o[0].length,parseInt(o[0],10)},t=function(a,k,p){var l=-1,m=h.map(R(a)?p:k,function(n,i){return[[i,n]]}).sort(function(n,i){return -(n[1].length-i[1].length)});if(h.each(m,function(r,n){var o=n[1];return S.substr(Q,o.length).toLowerCase()===o.toLowerCase()?(l=n[0],Q+=o.length,!1):d}),-1!==l){return l+1}throw"Unknown name at position "+Q},e=function(){if(S.charAt(Q)!==K.charAt(G)){throw"Unexpected literal at position "+Q}Q++};for(G=0;K.length>G;G++){if(q){"'"!==K.charAt(G)||R("'")?e():q=!1}else{switch(K.charAt(G)){case"d":x=A("d");break;case"D":t("D",P,E);break;case"o":J=A("o");break;case"m":T=A("m");break;case"M":T=t("M",N,H);break;case"y":O=A("y");break;case"@":z=new Date(A("@")),O=z.getFullYear(),T=z.getMonth()+1,x=z.getDate();break;case"!":z=new Date((A("!")-this._ticksTo1970)/10000),O=z.getFullYear(),T=z.getMonth()+1,x=z.getDate();break;case"'":R("'")?e():q=!0;break;default:e()}}}if(S.length>Q&&(F=S.substr(Q),!/^\s+/.test(F))){throw"Extra/unparsed characters found in date: "+F}if(-1===O?O=(new Date).getFullYear():100>O&&(O+=(new Date).getFullYear()-(new Date).getFullYear()%100+(I>=O?0:-100)),J>-1){for(T=1,x=J;;){if(C=this._getDaysInMonth(O,T-1),C>=x){break}T++,x-=C}}if(z=this._daylightSavingAdjust(new Date(O,T-1,x)),z.getFullYear()!==O||z.getMonth()+1!==T||z.getDate()!==x){throw"Invalid date"}return z},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:10000000*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(x,C,v){if(!C){return""}var A,D=(v?v.dayNamesShort:null)||this._defaults.dayNamesShort,p=(v?v.dayNames:null)||this._defaults.dayNames,k=(v?v.monthNamesShort:null)||this._defaults.monthNamesShort,m=(v?v.monthNames:null)||this._defaults.monthNames,B=function(e){var a=x.length>A+1&&x.charAt(A+1)===e;return a&&A++,a},z=function(r,o,n){var l=""+o;if(B(r)){for(;n>l.length;){l="0"+l}}return l},w=function(r,o,n,l){return B(r)?l[o]:n[o]},q="",y=!1;if(C){for(A=0;x.length>A;A++){if(y){"'"!==x.charAt(A)||B("'")?q+=x.charAt(A):y=!1}else{switch(x.charAt(A)){case"d":q+=z("d",C.getDate(),2);break;case"D":q+=w("D",C.getDay(),D,p);break;case"o":q+=z("o",Math.round((new Date(C.getFullYear(),C.getMonth(),C.getDate()).getTime()-new Date(C.getFullYear(),0,0).getTime())/86400000),3);break;case"m":q+=z("m",C.getMonth()+1,2);break;case"M":q+=w("M",C.getMonth(),k,m);break;case"y":q+=B("y")?C.getFullYear():(10>C.getYear()%100?"0":"")+C.getYear()%100;break;case"@":q+=C.getTime();break;case"!":q+=10000*C.getTime()+this._ticksTo1970;break;case"'":B("'")?q+="'":y=!0;break;default:q+=x.charAt(A)}}}}return q},_possibleChars:function(o){var m,l="",k=!1,n=function(p){var e=o.length>m+1&&o.charAt(m+1)===p;return e&&m++,e};for(m=0;o.length>m;m++){if(k){"'"!==o.charAt(m)||n("'")?l+=o.charAt(m):k=!1}else{switch(o.charAt(m)){case"d":case"m":case"y":case"@":l+="0123456789";break;case"D":case"M":return null;case"'":n("'")?l+="'":k=!0;break;default:l+=o.charAt(m)}}}return l},_get:function(k,a){return k.settings[a]!==d?k.settings[a]:this._defaults[a]},_setDateFromField:function(u,m){if(u.input.val()!==u.lastVal){var l=this._get(u,"dateFormat"),k=u.lastVal=u.input?u.input.val():null,p=this._getDefaultDate(u),w=p,q=this._getFormatConfig(u);try{w=this.parseDate(l,k,q)||p}catch(v){k=m?"":k}u.selectedDay=w.getDate(),u.drawMonth=u.selectedMonth=w.getMonth(),u.drawYear=u.selectedYear=w.getFullYear(),u.currentDay=k?w.getDate():0,u.currentMonth=k?w.getMonth():0,u.currentYear=k?w.getFullYear():0,this._adjustInstDate(u)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(l,k,e){var m=function(i){var a=new Date;return a.setDate(a.getDate()+i),a},p=function(v){try{return h.datepicker.parseDate(h.datepicker._get(l,"dateFormat"),v,h.datepicker._getFormatConfig(l))}catch(q){}for(var w=(v.toLowerCase().match(/^c/)?h.datepicker._getDate(l):null)||new Date,A=w.getFullYear(),x=w.getMonth(),y=w.getDate(),t=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,z=t.exec(v);z;){switch(z[2]||"d"){case"d":case"D":y+=parseInt(z[1],10);break;case"w":case"W":y+=7*parseInt(z[1],10);break;case"m":case"M":x+=parseInt(z[1],10),y=Math.min(y,h.datepicker._getDaysInMonth(A,x));break;case"y":case"Y":A+=parseInt(z[1],10),y=Math.min(y,h.datepicker._getDaysInMonth(A,x))}z=t.exec(v)}return new Date(A,x,y)},o=null==k||""===k?e:"string"==typeof k?p(k):"number"==typeof k?isNaN(k)?e:m(k):new Date(k.getTime());return o=o&&"Invalid Date"==""+o?e:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(q,m,l){var k=!m,o=q.selectedMonth,u=q.selectedYear,p=this._restrictMinMax(q,this._determineDate(q,m,new Date));q.selectedDay=q.currentDay=p.getDate(),q.drawMonth=q.selectedMonth=q.currentMonth=p.getMonth(),q.drawYear=q.selectedYear=q.currentYear=p.getFullYear(),o===q.selectedMonth&&u===q.selectedYear||l||this._notifyChange(q),this._adjustInstDate(q),q.input&&q.input.val(k?"":this._formatDate(q))},_getDate:function(i){var a=!i.currentYear||i.input&&""===i.input.val()?null:this._daylightSavingAdjust(new Date(i.currentYear,i.currentMonth,i.currentDay));return a},_attachHandlers:function(l){var k=this._get(l,"stepMonths"),e="#"+l.id.replace(/\\\\/g,"\\");l.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){h.datepicker._adjustDate(e,-k,"M")},next:function(){h.datepicker._adjustDate(e,+k,"M")},hide:function(){h.datepicker._hideDatepicker()},today:function(){h.datepicker._gotoToday(e)},selectDay:function(){return h.datepicker._selectDay(e,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return h.datepicker._selectMonthYear(e,this,"M"),!1},selectYear:function(){return h.datepicker._selectMonthYear(e,this,"Y"),!1}};h(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(aY){var aI,aU,a2,aJ,aP,aK,aO,aH,a0,aV,aR,aZ,aN,aW,aQ,aX,a3,aG,aS,aD,a1,ax,aF,an,ay,aE,ar,am,ag,aA,aw,ah,ab,av,ak,al,aT,ap,ai,at=new Date,ad=this._daylightSavingAdjust(new Date(at.getFullYear(),at.getMonth(),at.getDate())),ao=this._get(aY,"isRTL"),af=this._get(aY,"showButtonPanel"),az=this._get(aY,"hideIfNoPrevNext"),aC=this._get(aY,"navigationAsDateFormat"),aL=this._getNumberOfMonths(aY),au=this._get(aY,"showCurrentAtPos"),aq=this._get(aY,"stepMonths"),aj=1!==aL[0]||1!==aL[1],ae=this._daylightSavingAdjust(aY.currentDay?new Date(aY.currentYear,aY.currentMonth,aY.currentDay):new Date(9999,9,9)),aB=this._getMinMaxDate(aY,"min"),ac=this._getMinMaxDate(aY,"max"),aa=aY.drawMonth-au,aM=aY.drawYear;if(0>aa&&(aa+=12,aM--),ac){for(aI=this._daylightSavingAdjust(new Date(ac.getFullYear(),ac.getMonth()-aL[0]*aL[1]+1,ac.getDate())),aI=aB&&aB>aI?aB:aI;this._daylightSavingAdjust(new Date(aM,aa,1))>aI;){aa--,0>aa&&(aa=11,aM--)}}for(aY.drawMonth=aa,aY.drawYear=aM,aU=this._get(aY,"prevText"),aU=aC?this.formatDate(aU,this._daylightSavingAdjust(new Date(aM,aa-aq,1)),this._getFormatConfig(aY)):aU,a2=this._canAdjustMonth(aY,-1,aM,aa)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ao?"e":"w")+"'>"+aU+"</span></a>":az?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ao?"e":"w")+"'>"+aU+"</span></a>",aJ=this._get(aY,"nextText"),aJ=aC?this.formatDate(aJ,this._daylightSavingAdjust(new Date(aM,aa+aq,1)),this._getFormatConfig(aY)):aJ,aP=this._canAdjustMonth(aY,1,aM,aa)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+aJ+"'><span class='ui-icon ui-icon-circle-triangle-"+(ao?"w":"e")+"'>"+aJ+"</span></a>":az?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+aJ+"'><span class='ui-icon ui-icon-circle-triangle-"+(ao?"w":"e")+"'>"+aJ+"</span></a>",aK=this._get(aY,"currentText"),aO=this._get(aY,"gotoCurrent")&&aY.currentDay?ae:ad,aK=aC?this.formatDate(aK,aO,this._getFormatConfig(aY)):aK,aH=aY.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(aY,"closeText")+"</button>",a0=af?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(ao?aH:"")+(this._isInRange(aY,aO)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+aK+"</button>":"")+(ao?"":aH)+"</div>":"",aV=parseInt(this._get(aY,"firstDay"),10),aV=isNaN(aV)?0:aV,aR=this._get(aY,"showWeek"),aZ=this._get(aY,"dayNames"),aN=this._get(aY,"dayNamesMin"),aW=this._get(aY,"monthNames"),aQ=this._get(aY,"monthNamesShort"),aX=this._get(aY,"beforeShowDay"),a3=this._get(aY,"showOtherMonths"),aG=this._get(aY,"selectOtherMonths"),aS=this._getDefaultDate(aY),aD="",ax=0;aL[0]>ax;ax++){for(aF="",this.maxRows=4,an=0;aL[1]>an;an++){if(ay=this._daylightSavingAdjust(new Date(aM,aa,aY.selectedDay)),aE=" ui-corner-all",ar="",aj){if(ar+="<div class='ui-datepicker-group",aL[1]>1){switch(an){case 0:ar+=" ui-datepicker-group-first",aE=" ui-corner-"+(ao?"right":"left");break;case aL[1]-1:ar+=" ui-datepicker-group-last",aE=" ui-corner-"+(ao?"left":"right");break;default:ar+=" ui-datepicker-group-middle",aE=""}}ar+="'>"}for(ar+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+aE+"'>"+(/all|left/.test(aE)&&0===ax?ao?aP:a2:"")+(/all|right/.test(aE)&&0===ax?ao?a2:aP:"")+this._generateMonthYearHeader(aY,aa,aM,aB,ac,ax>0||an>0,aW,aQ)+"</div><table class='ui-datepicker-calendar'><thead><tr>",am=aR?"<th class='ui-datepicker-week-col'>"+this._get(aY,"weekHeader")+"</th>":"",a1=0;7>a1;a1++){ag=(a1+aV)%7,am+="<th"+((a1+aV+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+aZ[ag]+"'>"+aN[ag]+"</span></th>"}for(ar+=am+"</tr></thead><tbody>",aA=this._getDaysInMonth(aM,aa),aM===aY.selectedYear&&aa===aY.selectedMonth&&(aY.selectedDay=Math.min(aY.selectedDay,aA)),aw=(this._getFirstDayOfMonth(aM,aa)-aV+7)%7,ah=Math.ceil((aw+aA)/7),ab=aj?this.maxRows>ah?this.maxRows:ah:ah,this.maxRows=ab,av=this._daylightSavingAdjust(new Date(aM,aa,1-aw)),ak=0;ab>ak;ak++){for(ar+="<tr>",al=aR?"<td class='ui-datepicker-week-col'>"+this._get(aY,"calculateWeek")(av)+"</td>":"",a1=0;7>a1;a1++){aT=aX?aX.apply(aY.input?aY.input[0]:null,[av]):[!0,""],ap=av.getMonth()!==aa,ai=ap&&!aG||!aT[0]||aB&&aB>av||ac&&av>ac,al+="<td class='"+((a1+aV+6)%7>=5?" ui-datepicker-week-end":"")+(ap?" ui-datepicker-other-month":"")+(av.getTime()===ay.getTime()&&aa===aY.selectedMonth&&aY._keyEvent||aS.getTime()===av.getTime()&&aS.getTime()===ay.getTime()?" "+this._dayOverClass:"")+(ai?" "+this._unselectableClass+" ui-state-disabled":"")+(ap&&!a3?"":" "+aT[1]+(av.getTime()===ae.getTime()?" "+this._currentClass:"")+(av.getTime()===ad.getTime()?" ui-datepicker-today":""))+"'"+(ap&&!a3||!aT[2]?"":" title='"+aT[2].replace(/'/g,"&#39;")+"'")+(ai?"":" data-handler='selectDay' data-event='click' data-month='"+av.getMonth()+"' data-year='"+av.getFullYear()+"'")+">"+(ap&&!a3?"&#xa0;":ai?"<span class='ui-state-default'>"+av.getDate()+"</span>":"<a class='ui-state-default"+(av.getTime()===ad.getTime()?" ui-state-highlight":"")+(av.getTime()===ae.getTime()?" ui-state-active":"")+(ap?" ui-priority-secondary":"")+"' href='#'>"+av.getDate()+"</a>")+"</td>",av.setDate(av.getDate()+1),av=this._daylightSavingAdjust(av)}ar+=al+"</tr>"}aa++,aa>11&&(aa=0,aM++),ar+="</tbody></table>"+(aj?"</div>"+(aL[0]>0&&an===aL[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),aF+=ar}aD+=aF}return aD+=a0,aY._keyEvent=!1,aD},_generateMonthYearHeader:function(M,z,I,P,A,E,B,D){var x,O,J,G,N,C,K,F,L=this._get(M,"changeMonth"),Q=this._get(M,"changeYear"),w=this._get(M,"showMonthAfterYear"),H="<div class='ui-datepicker-title'>",q="";if(E||!L){q+="<span class='ui-datepicker-month'>"+B[z]+"</span>"}else{for(x=P&&P.getFullYear()===I,O=A&&A.getFullYear()===I,q+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",J=0;12>J;J++){(!x||J>=P.getMonth())&&(!O||A.getMonth()>=J)&&(q+="<option value='"+J+"'"+(J===z?" selected='selected'":"")+">"+D[J]+"</option>")}q+="</select>"}if(w||(H+=q+(!E&&L&&Q?"":"&#xa0;")),!M.yearshtml){if(M.yearshtml="",E||!Q){H+="<span class='ui-datepicker-year'>"+I+"</span>"}else{for(G=this._get(M,"yearRange").split(":"),N=(new Date).getFullYear(),C=function(i){var a=i.match(/c[+\-].*/)?I+parseInt(i.substring(1),10):i.match(/[+\-].*/)?N+parseInt(i,10):parseInt(i,10);return isNaN(a)?N:a},K=C(G[0]),F=Math.max(K,C(G[1]||"")),K=P?Math.max(K,P.getFullYear()):K,F=A?Math.min(F,A.getFullYear()):F,M.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";F>=K;K++){M.yearshtml+="<option value='"+K+"'"+(K===I?" selected='selected'":"")+">"+K+"</option>"}M.yearshtml+="</select>",H+=M.yearshtml,M.yearshtml=null}}return H+=this._get(M,"yearSuffix"),w&&(H+=(!E&&L&&Q?"":"&#xa0;")+q),H+="</div>"},_adjustInstDate:function(q,m,l){var k=q.drawYear+("Y"===l?m:0),o=q.drawMonth+("M"===l?m:0),u=Math.min(q.selectedDay,this._getDaysInMonth(k,o))+("D"===l?m:0),p=this._restrictMinMax(q,this._daylightSavingAdjust(new Date(k,o,u)));q.selectedDay=p.getDate(),q.drawMonth=q.selectedMonth=p.getMonth(),q.drawYear=q.selectedYear=p.getFullYear(),("M"===l||"Y"===l)&&this._notifyChange(q)},_restrictMinMax:function(o,m){var l=this._getMinMaxDate(o,"min"),k=this._getMinMaxDate(o,"max"),n=l&&l>m?l:m;return k&&n>k?k:n},_notifyChange:function(i){var a=this._get(i,"onChangeMonthYear");a&&a.apply(i.input?i.input[0]:null,[i.selectedYear,i.selectedMonth+1,i])},_getNumberOfMonths:function(i){var a=this._get(i,"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(i,a){return this._determineDate(i,this._get(i,a+"Date"),null)},_getDaysInMonth:function(i,a){return 32-this._daylightSavingAdjust(new Date(i,a,32)).getDate()},_getFirstDayOfMonth:function(i,a){return new Date(i,a,1).getDay()},_canAdjustMonth:function(p,m,l,k){var o=this._getNumberOfMonths(p),q=this._daylightSavingAdjust(new Date(l,k+(0>m?m:o[0]*o[1]),1));return 0>m&&q.setDate(this._getDaysInMonth(q.getFullYear(),q.getMonth())),this._isInRange(p,q)},_isInRange:function(q,x){var p,v,y=this._getMinMaxDate(q,"min"),m=this._getMinMaxDate(q,"max"),k=null,l=null,w=this._get(q,"yearRange");return w&&(p=w.split(":"),v=(new Date).getFullYear(),k=parseInt(p[0],10),l=parseInt(p[1],10),p[0].match(/[+\-].*/)&&(k+=v),p[1].match(/[+\-].*/)&&(l+=v)),(!y||x.getTime()>=y.getTime())&&(!m||x.getTime()<=m.getTime())&&(!k||x.getFullYear()>=k)&&(!l||l>=x.getFullYear())},_getFormatConfig:function(i){var a=this._get(i,"shortYearCutoff");return a="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10),{shortYearCutoff:a,dayNamesShort:this._get(i,"dayNamesShort"),dayNames:this._get(i,"dayNames"),monthNamesShort:this._get(i,"monthNamesShort"),monthNames:this._get(i,"monthNames")}},_formatDate:function(o,m,l,k){m||(o.currentDay=o.selectedDay,o.currentMonth=o.selectedMonth,o.currentYear=o.selectedYear);var n=m?"object"==typeof m?m:this._daylightSavingAdjust(new Date(k,l,m)):this._daylightSavingAdjust(new Date(o.currentYear,o.currentMonth,o.currentDay));return this.formatDate(this._get(o,"dateFormat"),n,this._getFormatConfig(o))}}),h.fn.datepicker=function(e){if(!this.length){return this}h.datepicker.initialized||(h(document).mousedown(h.datepicker._checkExternalClick),h.datepicker.initialized=!0),0===h("#"+h.datepicker._mainDivId).length&&h("body").append(h.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?h.datepicker["_"+e+"Datepicker"].apply(h.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof e?h.datepicker["_"+e+"Datepicker"].apply(h.datepicker,[this].concat(a)):h.datepicker._attachDatepicker(this,e)}):h.datepicker["_"+e+"Datepicker"].apply(h.datepicker,[this[0]].concat(a))},h.datepicker=new c,h.datepicker.initialized=!1,h.datepicker.uuid=(new Date).getTime(),h.datepicker.version="1.10.4"})(jQuery);(function(c){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};c.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var d=c(this).css(e).offset().top;0>d&&c(this).css("top",e.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&c.fn.draggable&&this._makeDraggable(),this.options.resizable&&c.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var d=this.options.appendTo;return d&&(d.jquery||d.nodeType)?c(d):this.document.find(d||"body").eq(0)},_destroy:function(){var f,d=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),f=d.parent.children().eq(d.index),f.length&&f[0]!==this.element[0]?f.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(f){var e,d=this;if(this._isOpen&&this._trigger("beforeClose",f)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length){try{e=this.document[0].activeElement,e&&"body"!==e.nodeName.toLowerCase()&&c(e).blur()}catch(g){}}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",f)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(g,f){var d=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return d&&!f&&this._trigger("focus",g),d},open:function(){var d=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=c(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){d._focusTabbable(),d._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var d=this.element.find("[autofocus]");d.length||(d=this.element.find(":tabbable")),d.length||(d=this.uiDialogButtonPane.find(":tabbable")),d.length||(d=this.uiDialogTitlebarClose.filter(":tabbable")),d.length||(d=this.uiDialog),d.eq(0).focus()},_keepFocus:function(e){function d(){var g=this.document[0].activeElement,f=this.uiDialog[0]===g||c.contains(this.uiDialog[0],g);f||this._focusTabbable()}e.preventDefault(),d.call(this),this._delay(d)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(f){if(this.options.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===c.ui.keyCode.ESCAPE){return f.preventDefault(),this.close(f),undefined}if(f.keyCode===c.ui.keyCode.TAB){var e=this.uiDialog.find(":tabbable"),d=e.filter(":first"),g=e.filter(":last");f.target!==g[0]&&f.target!==this.uiDialog[0]||f.shiftKey?f.target!==d[0]&&f.target!==this.uiDialog[0]||!f.shiftKey||(g.focus(1),f.preventDefault()):(d.focus(1),f.preventDefault())}},mousedown:function(d){this._moveToTop(d)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var d;this.uiDialogTitlebar=c("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){c(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=c("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(f){f.preventDefault(),this.close(f)}}),d=c("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(d),this.uiDialog.attr({"aria-labelledby":d.attr("id")})},_title:function(d){this.options.title||d.html("&#160;"),d.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=c("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=c("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,d=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),c.isEmptyObject(d)||c.isArray(d)&&!d.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(c.each(d,function(g,f){var h,j;f=c.isFunction(f)?{click:f,text:g}:f,f=c.extend({type:"button"},f),h=f.click,f.click=function(){h.apply(e.element[0],arguments)},j={icons:f.icons,text:f.showText},delete f.icons,delete f.showText,c("<button></button>",f).button(j).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function f(g){return{position:g.position,offset:g.offset}}var e=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(g,h){c(this).addClass("ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",g,f(h))},drag:function(h,g){e._trigger("drag",h,f(g))},stop:function(g,h){d.position=[h.position.left-e.document.scrollLeft(),h.position.top-e.document.scrollTop()],c(this).removeClass("ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",g,f(h))}})},_makeResizable:function(){function f(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}var e=this,d=this.options,g=d.resizable,j=this.uiDialog.css("position"),h="string"==typeof g?g:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:h,start:function(i,k){c(this).addClass("ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,f(k))},resize:function(k,i){e._trigger("resize",k,f(i))},stop:function(i,k){d.height=c(this).height(),d.width=c(this).width(),c(this).removeClass("ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",i,f(k))}}).css("position",j)},_minHeight:function(){var d=this.options;return"auto"===d.height?d.minHeight:Math.min(d.minHeight,d.height)},_position:function(){var d=this.uiDialog.is(":visible");d||this.uiDialog.show(),this.uiDialog.position(this.options.position),d||this.uiDialog.hide()},_setOptions:function(d){var e=this,g=!1,f={};c.each(d,function(i,h){e._setOption(i,h),i in b&&(g=!0),i in a&&(f[i]=h)}),g&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(j,g){var f,d,h=this.uiDialog;"dialogClass"===j&&h.removeClass(this.options.dialogClass).addClass(g),"disabled"!==j&&(this._super(j,g),"appendTo"===j&&this.uiDialog.appendTo(this._appendTo()),"buttons"===j&&this._createButtons(),"closeText"===j&&this.uiDialogTitlebarClose.button({label:""+g}),"draggable"===j&&(f=h.is(":data(ui-draggable)"),f&&!g&&h.draggable("destroy"),!f&&g&&this._makeDraggable()),"position"===j&&this._position(),"resizable"===j&&(d=h.is(":data(ui-resizable)"),d&&!g&&h.resizable("destroy"),d&&"string"==typeof g&&h.resizable("option","handles",g),d||g===!1||this._makeResizable()),"title"===j&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var h,g,f,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),h=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),g=Math.max(0,d.minHeight-h),f="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-h):"none","auto"===d.height?this.element.css({minHeight:g,maxHeight:f,height:"auto"}):this.element.height(Math.max(0,d.height-h)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var d=c(this);return c("<div>").css({position:"absolute",width:d.outerWidth(),height:d.outerHeight()}).appendTo(d.parent()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(d){return c(d.target).closest(".ui-dialog").length?!0:!!c(d.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,d=this.widgetFullName;c.ui.dialog.overlayInstances||this._delay(function(){c.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(f){e._allowInteraction(f)||(f.preventDefault(),c(".ui-dialog:visible:last .ui-dialog-content").data(d)._focusTabbable())})}),this.overlay=c("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),c.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(c.ui.dialog.overlayInstances--,c.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),c.ui.dialog.overlayInstances=0,c.uiBackCompat!==!1&&c.widget("ui.dialog",c.ui.dialog,{_position:function(){var f,e=this.options.position,d=[],g=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0" in e)&&(d=e.split?e.split(" "):[e[0],e[1]],1===d.length&&(d[1]=d[0]),c.each(["left","top"],function(i,h){+d[i]===d[i]&&(g[i]=d[i],d[i]=h)}),e={my:d[0]+(0>g[0]?g[0]:"+"+g[0])+" "+d[1]+(0>g[1]?g[1]:"+"+g[1]),at:d.join(" ")}),e=c.extend({},c.ui.dialog.prototype.options.position,e)):e=c.ui.dialog.prototype.options.position,f=this.uiDialog.is(":visible"),f||this.uiDialog.show(),this.uiDialog.position(e),f||this.uiDialog.hide()}})})(jQuery);(function(a){function b(c){return function(){var d=this.element.val();c.apply(this,arguments),this._refresh(),d!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d={},c=this.element;return a.each(["min","max","step"],function(e,f){var g=c.attr(f);void 0!==g&&g.length&&(d[f]=g)}),d},_events:{keydown:function(c){this._start(c)&&this._keydown(c)&&c.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(c){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",c),void 0)},mousewheel:function(c,d){if(d){if(!this.spinning&&!this._start(c)){return !1}this._spin((d>0?1:-1)*this.options.step,c),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(c)},100),c.preventDefault()}},"mousedown .ui-spinner-button":function(f){function c(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),f.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(f)!==!1&&this._repeat(null,a(f.currentTarget).hasClass("ui-spinner-up")?1:-1,f)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(c){return a(c.currentTarget).hasClass("ui-state-active")?this._start(c)===!1?!1:(this._repeat(null,a(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var c=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(0.5*c.height())&&c.height()>0&&c.height(c.height()),this.options.disabled&&this.disable()},_keydown:function(f){var c=this.options,d=a.ui.keyCode;switch(f.keyCode){case d.UP:return this._repeat(null,1,f),!0;case d.DOWN:return this._repeat(null,-1,f),!0;case d.PAGE_UP:return this._repeat(null,c.page,f),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,f),!0}return !1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(c){return this.spinning||this._trigger("start",c)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(d,f,c){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,f,c)},d),this._spin(f*this.options.step,c)},_spin:function(d,f){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+d*this._increment(this.counter)),this.spinning&&this._trigger("spin",f,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(d){var c=this.options.incremental;return c?a.isFunction(c)?c(d):Math.floor(d*d*d/50000-d*d/500+17*d/200+1):1},_precision:function(){var c=this._precisionOf(this.options.step);return null!==this.options.min&&(c=Math.max(c,this._precisionOf(this.options.min))),c},_precisionOf:function(d){var f=""+d,c=f.indexOf(".");return -1===c?0:f.length-c-1},_adjustValue:function(d){var g,c,f=this.options;return g=null!==f.min?f.min:0,c=d-g,c=Math.round(c/f.step)*f.step,d=g+c,d=parseFloat(d.toFixed(this._precision())),null!==f.max&&d>f.max?f.max:null!==f.min&&f.min>d?f.min:d},_stop:function(c){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",c))},_setOption:function(d,f){if("culture"===d||"numberFormat"===d){var c=this._parse(this.element.val());return this.options[d]=f,this.element.val(this._format(c)),void 0}("max"===d||"min"===d||"step"===d)&&"string"==typeof f&&(f=this._parse(f)),"icons"===d&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(f.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(f.down)),this._super(d,f),"disabled"===d&&(f?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(c){this._super(c),this._value(this.element.val())}),_parse:function(c){return"string"==typeof c&&""!==c&&(c=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(c,10,this.options.culture):+c),""===c||isNaN(c)?null:c},_format:function(c){return""===c?"":window.Globalize&&this.options.numberFormat?Globalize.format(c,this.options.numberFormat,this.options.culture):c},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(d,f){var c;""!==d&&(c=this._parse(d),null!==c&&(f||(c=this._adjustValue(c)),d=this._format(c))),this.element.val(d),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(c){this._stepUp(c)}),_stepUp:function(c){this._start()&&(this._spin((c||1)*this.options.step),this._stop())},stepDown:b(function(c){this._stepDown(c)}),_stepDown:function(c){this._start()&&(this._spin((c||1)*-this.options.step),this._stop())},pageUp:b(function(c){this._stepUp((c||1)*this.options.page)}),pageDown:b(function(c){this._stepDown((c||1)*this.options.page)}),value:function(c){return arguments.length?(b(this._value).call(this,c),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})})(jQuery);
$.ajaxSetup({cache:true});var widgets={tokenCookie:"token",isProcessed:false,updateIntervalInMs:10000,updatePriceIntervalInMs:1000,updatePriceRequestCount:0,updateLadderStrikePricesInMs:1000,getAllOptions:false,requestsInProgress:0,isFirstStart:true,version:"v6",token:null,libs:[],demand:[],timers:{},baseUrl:null,apiUrl:null,edgeUrl:null,feedApiUrl:null,signalsUrl:null,messagePopUpPullInterval:null,messageInboxPullInterval:null,dateFormat:"",all:{},links:{},events:{},settings:null,assets:{},assetsPrices:{},options:{},optionsCreated:{},prices:{},openTrades:{},lastExecutedTrade:null,lastExecutedSell:null,isTraderoom:false,isLadderPastExpiries:false,game:null,user:null,limitations:null,filterByAssetType:["currencies","stocks","commodities","indices"],selectedAssetFilter:"all",filterOnly30secOptions:false,filterFrom15To60secOptions:false,supportedGames:["binary","touch","range","turbobinary","ladder","laddertouch","binary100","overunder"],lcid:1033,sliderSpeed:250000,riskFactor:0,demoUserCookie:"isDemoMode",debugKey:"",bugsense:null,bugsenseApiKey:"ce527ad0",isDirectPut:false,messages:{},serverDateTime:{dateTime:new Date(),timestamp:new Date().getTime()},timezoneOffset:new Date().getTimezoneOffset(),clientDateTimeOffset:null,tradeOrderInProgress:false,payoutTotalUSD:10,restApiRetries:0,restApiMaxRetries:5,isUsingCurrencyCode:false,optionsHash:"",userHash:"",payoutType:null,init:function(){$(window).trigger("loadingIsStarted");widgets.setLibraries();widgets.getLibraries()},start:function(){widgets.setGlobalConfig();widgets.api=widgetsApi;if(widgets.isQuickDemoMode){widgets.initQuickDemoMode()}var a=helper.getQueryParams();if(typeof a.wdebug=="string"){widgets.debugKey=escape(a.wdebug)}widgets.setToken();widgets.setTimers();$(window).on(widgets.events.loginIsCompleted,function(){var b={};b.settings={};if(widgets.game){widgets.options={};widgets.getOptionsResource(b)}widgets.api.getAnonymousResources(b,widgets.processResources)});$(window).on(widgets.events.userLogout,function(){if(widgets.isLogged()){var b={};b.settings={};widgets.getOptionsResource(b);widgets.api.getAnonymousResources(b,widgets.processResources)}});$(window).on(widgets.events.assetFilterChanged+" "+widgets.events.populateMarketAssets,function(b,d){var c={};if(widgets.selectedAssetFilter!=d){widgets.selectedAssetFilter=d;widgets.optionsHash=""}widgets.getOptionsResource(c);widgets.api.getAnonymousResources(c,widgets.processResources)});$(window).on(widgets.events.linkOptionExpired,function(c,b){if(b){widgets.getNextOption(b,true)}});widgets.translate()},setTimers:function(){clearInterval(widgets.timers.refreshToken);widgets.timers.refreshToken=setInterval(function(){if(!widgets.isTokenValid()){widgets.getTokenWithRefresh()}},5000)},setServerDateTimeTimer:function(){clearInterval(widgets.timers.timeSync);widgets.timers.timeSync=setInterval(function(){var a=new Date(parseInt(widgets.serverDateTime.timestamp)+1000);widgets.serverDateTime.dateTime=a;widgets.serverDateTime.timestamp=a.getTime()},1000)},setToken:function(){var b=helper.getParameterByName("hash");if(b!=""){$.removeCookie(widgets.tokenCookie,{path:"/"})}var a=$.cookie(widgets.tokenCookie);if(a){widgets.token=$.parseJSON(a)}if(!widgets.token){widgets.getToken(widgets.processToken);return}if(!widgets.isTokenValid()){widgets.getTokenWithRefresh();return}widgets.processToken({data:widgets.token})},setLanguage:function(a){widgets.api.updateToken({lcid:a},function(b){var d=b;widgets.getTokenWithRefresh(false,function(){$(window).trigger(widgets.events.languageUpdate,d)});var c=b.data;$.cookie(widgets.tokenCookie,JSON.stringify(c),{path:"/"});widgets.token=c})},isTokenValid:function(){var b=false;var a=widgets.token&&widgets.token.expire&&widgets.token.expire.timestamp;if(a){var c=(widgets.serverDateTime?new Date(widgets.serverDateTime.timestamp):new Date());b=(widgets.token.expire.timestamp-c.getTime())>20000}return b},getToken:function(b){var a=widgets.anonymous&&widgets.anonymous.mapKey&&widgets.anonymous.currency;if(a){return widgets.api.getAnonymousToken(widgets.anonymous.mapKey,widgets.anonymous.currency,b)}return widgets.api.getToken(b)},getTokenWithRefresh:function(b,a){if(!widgets.token){return}widgets.api.updateRefreshToken(widgets.token.refreshToken,[function(c){widgets.processRefreshToken(c,b)},a])},processRefreshToken:function(a,b){if(a&&a.code==200){widgets.processToken(a,true);if(b!=undefined&&b==true){window.location=window.location}return}},processToken:function(a,c){if(a.code&&a.code!==200){setTimeout(function(){widgets.setToken()},3000);return}var b=a.data;$.cookie(widgets.tokenCookie,JSON.stringify(b),{path:"/"});widgets.token=b;if(c&&widgets.isProcessed){return}widgets.isProcessed=true;widgets.setWidgets();widgets.getWidgets()},setWidgets:function(){$.each($("[data-widget]"),function(e,d){var g={};var h=$(d).data("widget");var b=null;var j="-";if(h.indexOf(j)>-1){if(h.indexOf("_")>-1){var c=h.substring(h.lastIndexOf("_")+1,h.indexOf(j)+1);b=c.replace(j,"");h=h.replace(c,"")}else{b=h.substring(0,h.indexOf(j));h=h.substring(b.length+1,99)}}g.name=h;g.type=g.name;g.element=$(d);g.elements=$("[data-widget="+g.name+"]");var a=$(d).data("date-format");if(a&&a.length>0){g.dateFormat=a}else{if(widgetMessage&&widgetMessage.dateFormat){g.dateFormat=widgetMessage.dateFormat}else{g.dateFormat=widgets.dateFormat}}var l=g.name.split("_");if(l.length==3){g.game=l[0];g.link=l[1];g.type=l[2]}g.createInstance=$(d).data("instance");if(g.link&&!widgets.links[g.link]){widgets.links[g.link]={}}var k=[];switch(g.type){case"registration":case"userDetails":case"login":case"contactUs":case"changePassword":case"leads":case"resetPassword":case"cashierDeposit":case"cashierCreditCardDeposit":case"cashierCardDeposit":case"cashierWithdraw":case"cashierWithdrawKiosk":case"cashierCardDepositQuick":if(!window.validationWidget){widgets.demand.push(widgets.baseUrl+"/widgets/validation.js")}if(!window.strengthMeterWidget){widgets.demand.push(widgets.baseUrl+"/widgets/strengthMeter.js")}break;case"myTradesOptions":if(!window.tradesOptionsWidget){widgets.demand.push(widgets.baseUrl+"/widgets/tradesOptions.js")}break;case"table":if(!window.investAmountWidget){widgets.demand.push(widgets.baseUrl+"/widgets/investAmount.js")}if(!window.buttonAlphaWidget){widgets.demand.push(widgets.baseUrl+"/widgets/buttonAlpha.js")}if(!window.buttonBetaWidget){widgets.demand.push(widgets.baseUrl+"/widgets/buttonBeta.js")}if(!window.payoutWidget){widgets.demand.push(widgets.baseUrl+"/widgets/payout.js")}if(!window.payoutAdvancedWidget){widgets.demand.push(widgets.baseUrl+"/widgets/payoutAdvanced.js")}break;case"myTradesPaging":case"pastExpiriesPaging":case"messageInbox":if(!window.pagingWidget){widgets.demand.push(widgets.baseUrl+"/widgets/paging.js")}break;case"tableOverUnder":if(!window.tableWidget){widgets.demand.push(widgets.baseUrl+"/widgets/table.js")}break;case"userBar":if(!window.messageWidget){widgets.demand.push(widgets.baseUrl+"/widgets/message.js")}if(!window.balanceWidget){widgets.demand.push(widgets.baseUrl+"/widgets/balance.js")}if(!window.logoutWidget){widgets.demand.push(widgets.baseUrl+"/widgets/logout.js")}if(!window.afterWagerBonusWidget){widgets.demand.push(widgets.baseUrl+"/widgets/afterWagerBonus.js")}if(!window.cashBackWidget){widgets.demand.push(widgets.baseUrl+"/widgets/cashBack.js")}break}if(!widgets.all[g.name]&&!window[g.type+"Widget"]){var f=widgets.baseUrl+"/widgets/"+(b?"widgets-"+b+"/":"")+g.type+".js";widgets.demand.push(f)}widgets.all[g.name]=g;if(g.game=="binary100"){widgets.payoutTotalUSD=100}})},getWidgets:function(){if(widgets.demand.length==0){widgets.processWidgets();return}var a=widgets.demand.shift();$.getScript(a,function(){widgets.getWidgets()})},processWidgets:function(){var a="";$.each(widgets.all,function(c,d){if("createInstance" in d&&d.createInstance==true){widgets.all[d.name]=$.extend({},window[d.type+"Widget"],d)}else{widgets.all[d.name]=$.extend({},window[d.type+"Widget"],d);window[d.type+"Widget"]=widgets.all[d.name]}if(widgets.all[d.name].init){widgets.all[d.name].init()}if(a==""&&d.game){a=d.game}});widgets.game=a;var b={};b.settings={};b.user={id:"current",hash:widgets.userHash};b.limitations={};if(a&&a=="turboBinary"){b.limitations={isPrivate:"true"}}if(a){widgets.getOptionsResource(b);if(a==="turboBinary"||widgets.isLadderBased(a)){b.optionPrices={filterByGame:helper.ucfirst(a)}}}if(widgets.token&&widgets.token.sessionId){b.openTrades={includeOffers:true};b.riskFactor={game:helper.ucfirst(a)}}if(widgets.isTraderoom){widgets.api.getAnonymousResources(b,[widgets.processResources,widgets.updatePrices])}else{widgets.api.getAnonymousResources(b,widgets.processResources)}delete b.settings;delete b.riskFactor;delete b.limitations;if(b.optionPrices){delete b.optionPrices}clearInterval(widgets.timers.updateOptions);widgets.timers.updateOptions=setInterval(function(){delete b.openTrades;if(widgets.isLogged()){b.openTrades={includeOffers:true}}widgets.getOptionsResource(b);if(widgets.isTraderoom){widgets.api.getResources(b,widgets.processResources)}},widgets.updateIntervalInMs)},updatePrices:function(){var d={};widgets.updatePriceRequestCount++;d.optionPrices={};d.assetPrices={};var b=widgets.game.toLowerCase();if(b=="ladder"||b=="laddertouch"||b=="binary100"){if(widgets.isLogged()){d.optionPrices.currency=widgets.user.currencyCode}else{d.optionPrices.currency=widgets.settings.environment.DefaultCurrency.name}}if(!widgets.getAllOptions){var c=widgets.getActiveOptions();if(c.length==0){delete d.optionPrices}else{d.optionPrices.filterById=c.join(",")}var e=widgets.getActiveAssets();if(e.length==0){delete d.assetPrices}else{d.assetPrices.filterById=e.join(",")}}if(d.optionPrices&&widgets.updatePriceRequestCount===1&&b!=="turbobinary"){var a=widgets.getGame(widgets.game.toLowerCase());d.optionPrices.filterByGame=a}if(d.assetPrices&&d.assetPrices.filterById&&widgets.updatePriceRequestCount===1&&(b==="turbobinary"||widgets.isLadderBased(b))){d.assetPrices={}}if(widgets.isTraderoom){if(Object.keys(d).length){widgets.api.getAnonymousResources(d,widgets.processResources)}}clearInterval(widgets.timers.updatePrices);widgets.timers.updatePrices=setInterval(function(){if(widgets.requestsInProgress>0){return}if(widgets.isTraderoom){widgets.updatePrices()}},widgets.updatePriceIntervalInMs);if(widgets.updatePriceRequestCount>=4){widgets.updatePriceRequestCount=0}},getGame:function(a){var a=a.toLowerCase();switch(a){case"digital":return"Digital";case"touch":return"Touch";case"range":return"Range";case"turbobinary":return"TurboBinary";case"onetouch":return"OneTouch";case"overunder":return"OverUnder";case"binary100":return"Binary100";case"ladder":return"Ladder";case"laddertouch":return"LadderTouch"}},getActiveOptions:function(){var a=[];$.each(widgets.links,function(c,b){if(b.option&&!b.option.rules&&b.option.id){a.push(b.option.id)}});$.each(widgets.openTrades,function(b,c){if(!c||!c.optionId){return}if(c.game=="TurboBinary"){return}a.push(c.optionId)});a=$.unique(a);return a},getActiveAssets:function(){var a=[];$.each(widgets.links,function(c,b){if(b.option&&b.option.rules){a.push(b.option.id)}else{if((widgets.game=="ladder"||widgets.game=="binary100")&&b.option){a.push(b.option.tradableAssetId)}}});$.each(widgets.openTrades,function(b,c){if(c&&(c.game=="TurboBinary"||c.game=="Ladder"||c.game=="Binary100")){a.push(c.tradableAssetId)}});a=$.unique(a);return a},getOptionsResource:function(a){if(widgets.game){a.options={game:helper.ucfirst(widgets.game||""),hash:widgets.optionsHash.active||widgets.optionsHash};if(typeof widgets.all.assetFilterCustom!="undefined"){a.options=widgets.all.assetFilterCustom.applyResourceFilter(a.options)}if(typeof widgets.all.assetFilter!="undefined"){a.options=widgets.all.assetFilter.applyResourceFilter(a.options)}if(typeof widgets.all[widgets.game+"_"+Object.keys(widgets.links)[0]+"_tableBase"]!="undefined"){a.options.created=true;a.options.hashCreated=widgets.optionsHash.created}}},isLogged:function(){if(widgets.user){return true}return false},logout:function(){widgets.api.logoutUser(function(a){if(a.code==200||a.code==201){var b=a.data;$.cookie(widgets.tokenCookie,JSON.stringify(b),{path:"/"});widgets.token=b}widgets.user=null;$(window).trigger(widgets.events.userLogout)})},processResources:function(a){if(!a||!a.data){return false}if(a.serverTime){widgets.serverDateTime=a.serverTime;if(isNaN(new Date(widgets.serverDateTime.dateTime))){widgets.serverDateTime.dateTime=new Date(a.serverTime.timestamp);widgets.serverDateTime.timestamp=a.serverTime.timestamp}widgets.setServerDateTimeTimer()}$.each(a.data,function(b,d){var c="process"+helper.ucfirst(b);if(widgets[c]){widgets[c](d)}})},setLinkOption:function(e,b,c,f,g,a){var d=widgets.links[e].option;widgets.links[e].option=c?c:widgets.options[b];var j=widgets.links[e].option;if(!b){b=c.id}var i=false;$.each(widgets.links,function(o,k){var n=k.option?k.option.tradableAssetId||k.option.id:null;var m=j?j.tradableAssetId||j.id:null;if(j&&k.option&&e!=o&&n==m&&!k.isDuplicated){i=true;return false}});if(a&&widgets.links[e].isDuplicated){widgets.links[e].isDuplicated=false}else{widgets.links[e].isDuplicated=g?true:(widgets.links[e].isDuplicated?widgets.links[e].isDuplicated:false)}if(i&&!g&&d){var h={options:d,link:e};if(!f){$(window).trigger(widgets.events.assetAlreadyUsed,h)}$(window).trigger(widgets.events.assetAlreadyUsedForWidgets,h);widgets.links[e].option=d;return}widgets.links[e].price=widgets.links[e].option.rules?widgets.assetsPrices[widgets.links[e].option.id]:widgets.prices[widgets.links[e].option.id];$(window).trigger(widgets.events.linkOptionUpdated,[e])},processSettings:function(a){widgets.settings=a.data;widgets.updatePriceIntervalInMs=widgets.settings.application.ClientPriceInterval.Value;$(window).trigger(widgets.events.settingsLoaded)},processRiskFactor:function(a){if(a.data&&typeof a.data.riskFactor!="undefined"){widgets.riskFactor=a.data.riskFactor}},processUser:function(a){var b=widgets.user?true:false;if(!a||a.code==401){if(widgets.isLogged()){widgets.user=null;$(window).trigger(widgets.events.userLogout)}if(!widgets.isTraderoom&&widgets.isFirstStart){$(window).trigger(widgets.events.loadingIsCompleted);widgets.isFirstStart=false}return false}if(a.data.type&&a.data.type=="User_NotModified"){return}if(a.code==200){widgets.user=a.data;widgets.userHash=a.hash;if(!widgets.isTraderoom&&widgets.isFirstStart){$(window).trigger(widgets.events.loadingIsCompleted);widgets.isFirstStart=false}$(window).trigger(widgets.events.userLogin)}},processLimitations:function(a){if(!a||a.code==401){if(widgets.isLogged()){widgets.limitations=null}}if(a.code==200){widgets.limitations=a.data;$(window).trigger(widgets.events.limitationsLoaded)}},processOptionPrices:function(a){if(!a||!a.data||Object.keys(widgets.options).length==0){return}if(typeof(priceHelper)!=="undefined"&&priceHelper!==null){priceHelper.applyBinaryPromotions(a.data)}if(widgets.updatePriceRequestCount==1){widgets.prices=a.data}else{$.each(a.data,function(b,c){widgets.prices[b]=c})}$.each(widgets.links,function(d,c){if(!c.option||c.option.rules){return}var b=widgets.prices[c.option.id];if(typeof(priceHelper)!=="undefined"){priceHelper.updateOptionPrice(b,c)}widgets.links[d].price=b});if(a.data&&Object.keys(a.data).length>0){$(window).trigger(widgets.events.optionPricesUpdated,[a.data])}if(widgets.isFirstStart){$(window).trigger(widgets.events.loadingIsCompleted);widgets.isFirstStart=false}},processAssetPrices:function(a){if(!a||!a.data||Object.keys(widgets.options).length==0){return}if(typeof(priceHelper)!=="undefined"&&priceHelper!==null){priceHelper.applyTurboPromotions(a.data)}if(widgets.updatePriceRequestCount==1){widgets.assetsPrices=a.data}else{$.each(a.data,function(b,c){widgets.assetsPrices[b]=c})}$.each(widgets.links,function(c,b){if(!b.option||!b.option.rules){return}widgets.links[c].price=widgets.assetsPrices[b.option.id]});if(a.data&&Object.keys(a.data).length>0){$(window).trigger(widgets.events.assetPricesUpdated,[a.data])}},processOptions:function(a){var o={};if(a.data.active){o=a.data.created;a.data=a.data.active}var m=[];var g=[];var d=[];var r=[];var l=true;l=widgets.checkServerProcessOptionsResponse(a.data,a);if(l){widgets.restApiRetries=0;if(a.hash){widgets.optionsHash=a.hash}var f=false;if(typeof widgets.settings!="undefined"&&widgets.settings&&typeof widgets.settings.application!="undefined"){f=widgets.settings.application.EnableSuperTurbo.Value.toString().toLowerCase()=="true"}var c=a.data.length;for(var p=c-1;p>=0;p--){var h=a.data[p];var u=h.assetName?h.assetName:h.type;if(!inArray(u.toLowerCase(),widgets.filterByAssetType)){a.data.splice(p,1);continue}if(f&&widgets.game=="turboBinary"&&widgets.filterOnly30secOptions){var t=h.rules.length;for(var n=t-1;n>=0;n--){if(h.rules[n].interval!=0.5){a.data[p].rules.splice(n,1)}}if(a.data[p].rules.length==0){a.data.splice(p,1)}}if(f&&widgets.game=="turboBinary"&&widgets.filterFrom15To60secOptions){var t=h.rules.length;for(var n=t-1;n>=0;n--){if(!(h.rules[n].interval==0.25||h.rules[n].interval==0.5||h.rules[n].interval==0.75||h.rules[n].interval==1)){a.data[p].rules.splice(n,1)}}if(a.data[p].rules.length==0){a.data.splice(p,1)}}}if(a.data.length==0){$(window).trigger(widgets.events.noOptions,a);return}var b=[];var s=[];$.each(a.data,function(i,j){if(j&&$.inArray(j.name,b)==-1){b.push(j.name)}if(widgets.game=="turboBinary"&&widgets.options[j.id]){if(j.rules.length!=widgets.options[j.id].rules.length){widgets.options[j.id]=j;s.push(j.id)}}});var e={};var k=0;$.each(widgets.links,function(j,i){if(!i.isDuplicated){k++;if(i.option&&b.indexOf(i.option.name)>-1){e[i.option.name]=true}}});$.each(widgets.links,function(w,i){if(s.length>0&&s.indexOf(i.option.id)>-1){widgets.setLinkOption(w,i.option.id,false,true,false)}if(i.option&&b.indexOf(i.option.name)>-1&&!i.isDuplicated){return}var j=0;if(b.length<Object.keys(widgets.links).length&&b.length==Object.keys(e).length){$(window).trigger(widgets.events.noAvailableOptions,[w]);widgets.setLinkOption(w,false,a.data[0],true,true);return}$.each(a.data,function(y,x){if(!e[x.name]){e[x.name]=true;j=y;return false}});var v=b.length>k&&i.isDuplicated;widgets.setLinkOption(w,false,a.data[j],true,false,v);if(v){$(window).trigger(widgets.events.unhideMilkMessage,[w])}});$.each(widgets.options,function(v,j){var w=false;$.each(a.data,function(i,x){if(j.id==x.id){w=true;return}});if(!w){delete widgets.options[j.id];$.each(widgets.links,function(x,i){if(i.option&&i.option.id==j.id){widgets.getNextOption(j)}});g.push(j)}});$.each(a.data,function(j,v){if(v&&!widgets.options[v.id]){widgets.options[v.id]=v;m.push(v)}})}var q=true;q=widgets.checkServerProcessCreatedResponse(o);if(q){$.each(widgets.optionsCreated,function(v,j){var w=false;$.each(o,function(i,x){if(j.tradableAssetId==x.tradableAssetId){w=true;return}});if(!w){delete widgets.optionsCreated[j.tradableAssetId];r.push(j)}});$.each(o,function(j,v){if(v&&!widgets.optionsCreated[v.tradableAssetId]){widgets.optionsCreated[v.tradableAssetId]=v;d.push(v)}})}if(l||q){if(m.length>0||d.length>0){$(window).trigger(widgets.events.optionsUpdated,["add",m,d])}if(g.length>0||r.length>0){$(window).trigger(widgets.events.optionsUpdated,["del",g,r])}}},checkServerProcessOptionsResponse:function(c,b){if(c.type&&c.type=="Games_NoOptions"){if(Object.keys(widgets.options).length>0){var a=widgets.options;widgets.options={};$(window).trigger(widgets.events.optionsUpdated,["del",a])}$(window).trigger(widgets.events.noOptions,b);return false}else{if(c.type&&c.type=="Exception"&&Object.keys(widgets.options).length>0){if(widgets.restApiRetries<widgets.restApiMaxRetries){widgets.restApiRetries++}else{widgets.options={};$(window).trigger(widgets.events.noOptions,b)}return false}else{if(c.type&&c.type=="Exception"&&Object.keys(widgets.options).length==0){$(window).trigger(widgets.events.noOptions,b);return false}else{if(c.type&&c.type=="Games_OptionsNotChanged"){return false}}}}return true},checkServerProcessCreatedResponse:function(b){if(b.type&&b.type=="Games_NoOptions"){if(Object.keys(widgets.optionsCreated).length>0){var a={};var c=[];$.each(widgets.optionsCreated,function(d,e){c.push(e)});widgets.optionsCreated={};$(window).trigger(widgets.events.optionsUpdated,["del",a,c])}return false}else{if(b.type&&b.type=="Exception"){return false}else{if(b.type&&b.type=="Games_OptionsNotChanged"){return false}}}return true},getNextOption:function(e,b){if(!b){b=false}var c=[];var a=[];var d;$.each(widgets.options,function(l,j){var f=false;if(b){var h=isNaN(new Date(widgets.serverDateTime.timestamp))?new Date():new Date(widgets.serverDateTime.timestamp);var g=j.expirationTimestamp-h.getTime()-j.disableInvestTimeInSeconds*1000;f=g<0}if(!f){var i=j.tradableAssetId||j.id;var k=e.tradableAssetId||e.id;if(i==k){c.push(j)}a.push(j)}});if(c.length==0){a.sort(function(g,f){return g.expirationTimestamp-f.expirationTimestamp});d=a.shift()}else{c.sort(function(g,f){return g.expirationTimestamp-f.expirationTimestamp});d=c.shift()}if(d){$.each(widgets.links,function(g,f){if(f.option.id==e.id){widgets.setLinkOption(g,d.id,null,true)}})}},processOpenTrades:function(a){widgets.openTrades=a.data;$(window).trigger(widgets.events.openTradesUpdated,[a.data])},setLibraries:function(){if(typeof widgetsEvents!="undefined"){return}widgets.libs=[widgets.baseUrl+"/lib/events.js",widgets.baseUrl+"/lib/api.service.js",widgets.baseUrl+"/lib/external/jquery.alsEN-1.2.js",widgets.baseUrl+"/lib/external/jquery.xdomain.min.js",widgets.baseUrl+"/lib/jquery.cookie.js",widgets.baseUrl+"/lib/external/bugsense.js",widgets.baseUrl+"/lib/external/stupidtable.min.js",widgets.baseUrl+"/lib/helper.js",widgets.baseUrl+"/lib/pricehelper.js",widgets.baseUrl+"/lib/external/dateDiff.js",widgets.baseUrl+"/lib/scripts/iChart.js",widgets.baseUrl+"/lib/scripts/histock/highstock.js",widgets.baseUrl+"/lib/scripts/histock/hightstock.LastPriceIndicator.js",widgets.baseUrl+"/lib/charts/turbo.js",widgets.baseUrl+"/lib/external/jquery.jcarousel.js",widgets.baseUrl+"/lib/external/jquery-ui-1.10.4.custom.min.js"]},getLibraries:function(){if(widgets.libs.length==0){widgets.start();return}var a=widgets.libs.shift();$.getScript(a,function(){widgets.getLibraries()})},setGlobalConfig:function(){jQuery.support.cors=true;highstockScriptIncluded=true;if(typeof authResponse!="undefined"){$.cookie(widgets.tokenCookie,JSON.stringify(authResponse.data),{path:"/"})}widgets.events=widgetsEvents;$(window).trigger(widgetsEvents.widgetsRegisterEvents)},translate:function(a){if(typeof a=="object"){var b=$(a).find("[data-translate]")}else{var b=$("*").find("[data-translate]")}$.each(b,function(d,f){var e=$(f).prop("tagName").toLowerCase();var c=$(f).data("translate");switch(e){case"input":if($(f).is("[placeholder]")){$(f).attr("placeholder",widgetMessage[c])}else{$(f).attr("value",widgetMessage[c])}break;default:$(f).html(widgetMessage[c]);break}})},reset:function(){$(window).trigger("resetWidget");$.each(widgets.links,function(a,b){widgets.links[a].option=null})},getQueryParams:function(){var b=window.location.search;if(!b){return[]}var e=b.split("?")[1];var d=e.split("&");var a={};var f=[];for(var c=0;c<d.length;c++){f=d[c].split("=");a[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return a},isLadderBased:function(a){var a=typeof a!="undefined"?a.toLowerCase():widgets.game.toLowerCase();if(a=="ladder"||a=="laddertouch"||a=="binary100"){return true}return false},debug:function(){widgets.log("Gathering data ...");widgets.log("REST API: "+widgets.apiUrl);widgets.log("EDGE: "+widgets.edgeUrl);widgets.log("FEED: "+widgets.feedApiUrl);widgets.log("SIGNALS: "+widgets.signalsUrl);widgets.log("Do we have token... "+(widgets.token!=null?"yes":"NO"));if(widgets.isFirstStart){widgets.log("Loading widgets ... error");return}widgets.log("Gathering data ...");widgets.log("Loaded widgets: "+widgets.all.length)},log:function(a){console.log(a)},getDate:function(b,f){if(isNaN(parseInt(widgets.clientDateTimeOffset))){var d=0;var c=isNaN(new Date(b))?new Date():new Date(b);var g=d*1000;var a=new Date(c.getTime()+g)}else{var d=widgets.clientDateTimeOffset;var c=new Date(b||widgets.serverDateTime.dateTime);var e=widgets.timezoneOffset*60*1000;var g=d*1000;var a=new Date(c.getTime()+g+e)}if(f){return helper.formatDate(a,f)}else{return a}}};$(document).ready(function(){initWidgets()});

var framer = {
	callTraderoom: function() {
		var win = document.getElementById("iframeWL").contentWindow;
		var json = JSON.stringify({ type: 'function', data: arguments })
		win.postMessage(json, '*');
	},

	receiveMessageFromTraderoom: function(data) {
	    try {
  			var message = JSON.parse(data.data, true);
            var params = message.data;
        	if (params) {
                	var func = params[0];
	                var args = [];
        	        delete params[0];
                	for (var key in params) {
                        	args.push(params[key]);
	                }
        	        window[func].apply(null, args);
	        }    
	    }
	    catch(e) {	        
        }
	
	}
};

// for IE
if (!window.addEventListener) {
    window.attachEvent("message", framer.receiveMessageFromTraderoom);
}

else {
    window.addEventListener("message", framer.receiveMessageFromTraderoom, false);
}

function framer_callbackHeight(height) {
	var win = document.getElementById("iframeWL");
	win.height = height + 30;
};

jQuery(function ($) {
	if ( document.getElementById("iframeWL") !== null ) {
		document.getElementById("iframeWL").onload = function() {
			framer.callTraderoom('framer_funcAndBack', 'framer_getHeight', 'framer_callbackHeight');
		};
	};

});

function depositConfirmation(link){
	
	location.href = redirectUrl['deposit-confirmation'];

	/*
	$('#content').html($('#cashierDepositConfirmation').html());
	if (widgets.isLoggedIn()) {

        widgets.api.getUserData(function(response){
            $('#userAccountBalance').text((response.data.currencySymbol == '$' ? '$' : '') + response.data.balance + (response.data.currencySymbol == '$' ? '' : response.data.currencySymbol));
            $.cookie('widgetUserData', JSON.stringify(response.data), { path: '/' });
        });
    }
    */
}

function redirectToRegistration(){
	location.href = redirectUrl['open-account'];
}

function updateUserBalance(amount) {
	console.log('updateUserBalance');


	//location.href = redirectUrl['home-page'];

	/*

	if ( typeof loadUserData === 'function' ) {
		if (widgets.config.sessionId != '00000000-0000-0000-0000-000000000000') {
		    loadUserData(refreshBalance);
		}

	}

	*/

	

}
//function below is a hack for
//misbehaving tools widget
var onActionButtonClick = function(btn){
  var parentRow = $(btn).parents('tr'),
      toolsRow = $('.tradeTools[data-orderid="' + parentRow.data('orderid') + '"]');

  if(parentRow.hasClass('toolsOpen')){
    toolsRow.hide();
  }else{
    if(toolsRow.find('.activeTab').length === 0){
      toolsRow.find('.headerExtend').click();
    }
  }
  parentRow.toggleClass('toolsOpen');
};

var overrideOpenTradesChartButtonClick = function(){
  var originalOpenTradesChartButtonClick = widgets.all.openTrades.openTradesChartButtonClick;
  widgets.all.openTrades.openTradesChartButtonClick = function(){
    var me = this,
        pos = {},
        $elem;
    originalOpenTradesChartButtonClick.call(me, arguments);
    $('.openTradesChartClose').html('');
    $elem = $('.openTradesChart');
    pos = $elem.position();
    $elem.css({
      left: pos.left - 271,
      top: pos.top + 32
    });
  };
};

try {
  $(document).ready(function(){
    $(window).on('loadingIsCompleted', function(){
      //hacking myTradesOptionsWidget init
      if($('[data-widget="myTradesOptions"]').length > 0){
        $(window).trigger(widgets.events.reportsTradeAssetsIsLoading);
      }
      //hacking position of open trades chart widget
      if(typeof widgets.all.openTrades !== 'undefined'){
        overrideOpenTradesChartButtonClick();
      }
    });
  });
}catch(e){}

//implementing missing currentDateTimeWidget
(function(){
  var $wrapper,
      formatNumberAsString = function(number){
        return number < 10 ? '0' + number : number + '';
      },
      formatTime = function(dateObj) {
        var hours = dateObj.getHours(),
            minutes = dateObj.getMinutes(),
            seconds = dateObj.getSeconds(),
            ampm = hours >= 12 ? 'PM' : 'AM';

        hours = hours % 12;
        hours = hours ? hours : 12;

        return formatNumberAsString(hours) + ':' +
          formatNumberAsString(minutes) + ':' +
          '<b>' + formatNumberAsString(seconds) + '</b>' +
          '<i> ' + ampm + '</i>';
      },
      insertTime = function(){
        $wrapper.html(formatTime(new Date()));
      };
  $(document).ready(function(){
    $wrapper = $('.currentTimeWidget');
    setInterval(insertTime, 1000);
  });
})();

$(document).ready(function() {

	// init sidebar menu
    sidebar_menu_folding();
    child_pages_folding();

    //Control_Sound();

    if (self != top) {
        update_parent_window_hash();
    }

	setParentHeight();

	// prevent clicking for footers categories
	$(".footerMenuHeader").find('a:first').click(function(e){
		e.preventDefault();
	});

	// show spinner on loginButton click
	$('.login .loginButton').click(function(e){
        $(e.currentTarget).addClass('loginButtonLoading');
    });

    // >IE10 detection
    if (navigator.userAgent.indexOf("MSIE 1") > -1) {
        document.body.classList.add("modernIE");
    }

    // hide placeholders on click
    //console.log($('.loginFormLabels').is(':visible'));
    //if ($('.loginLabel') && $('.passLabel') && $('.loginFormLabels').is(':visible')) {
        $('#username').focus( function () { $('.loginLabel').hide(); } );
        $('#password').focus( function () { $('.passLabel').hide(); } );
    //}
});

// Account Types
var accountTypesInit = function() {
    $('.accountTypesColumn').hover(function(){
        if ( $(this).hasClass('amber')) {
            $(this).stop().css({'z-index':'2', 'border-color': '#bc8b1a', 'cursor':'pointer'}).animate({ backgroundColor: "#4a4b4c", marginTop: "-5px", boxShadow: "0 0 30px #000" }, "fast");
            $('li', this).animate({ color: "#fff" }, "fast");
        } else {
            $(this).stop().css({'z-index':'2', 'border-color': '#464748','cursor':'pointer'}).animate({ backgroundColor: "#1d1d23", marginTop: "-5px", boxShadow: "0 0 30px #000" }, "fast");
            $('li', this).animate({ color: "#fff" }, "fast");
        }
    }, function(){
        if ( $(this).hasClass('amber')) {
            $(this).stop().css({'z-index':'1', 'border-color':'transparent','cursor':'normal'}).animate({ backgroundColor: "#3B3C3D", marginTop: "0px", boxShadow: "0" }, "fast");
            $('li', this).animate({ color: "#b9b9b9" }, "fast");
        } else {
            $(this).stop().css({'z-index':'1', 'border-color':'transparent','cursor':'normal'}).animate({ backgroundColor: "#121318", marginTop: "0px", boxShadow: "0" }, "fast");
            $('li', this).animate({ color: "#b9b9b9" }, "fast");
        }
    });
};
/*
 * jQuery FlexSlider v2.2.0
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */(function(e){e.flexslider=function(t,n){var r=e(t);r.vars=e.extend({},e.flexslider.defaults,n);var i=r.vars.namespace,s=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,o=("ontouchstart"in window||s||window.DocumentTouch&&document instanceof DocumentTouch)&&r.vars.touch,u="click touchend MSPointerUp",a="",f,l=r.vars.direction==="vertical",c=r.vars.reverse,h=r.vars.itemWidth>0,p=r.vars.animation==="fade",d=r.vars.asNavFor!=="",v={},m=!0;e.data(t,"flexslider",r);v={init:function(){r.animating=!1;r.currentSlide=parseInt(r.vars.startAt?r.vars.startAt:0);isNaN(r.currentSlide)&&(r.currentSlide=0);r.animatingTo=r.currentSlide;r.atEnd=r.currentSlide===0||r.currentSlide===r.last;r.containerSelector=r.vars.selector.substr(0,r.vars.selector.search(" "));r.slides=e(r.vars.selector,r);r.container=e(r.containerSelector,r);r.count=r.slides.length;r.syncExists=e(r.vars.sync).length>0;r.vars.animation==="slide"&&(r.vars.animation="swing");r.prop=l?"top":"marginLeft";r.args={};r.manualPause=!1;r.stopped=!1;r.started=!1;r.startTimeout=null;r.transitions=!r.vars.video&&!p&&r.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(e.style[t[n]]!==undefined){r.pfx=t[n].replace("Perspective","").toLowerCase();r.prop="-"+r.pfx+"-transform";return!0}return!1}();r.vars.controlsContainer!==""&&(r.controlsContainer=e(r.vars.controlsContainer).length>0&&e(r.vars.controlsContainer));r.vars.manualControls!==""&&(r.manualControls=e(r.vars.manualControls).length>0&&e(r.vars.manualControls));if(r.vars.randomize){r.slides.sort(function(){return Math.round(Math.random())-.5});r.container.empty().append(r.slides)}r.doMath();r.setup("init");r.vars.controlNav&&v.controlNav.setup();r.vars.directionNav&&v.directionNav.setup();r.vars.keyboard&&(e(r.containerSelector).length===1||r.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!r.animating&&(t===39||t===37)){var n=t===39?r.getTarget("next"):t===37?r.getTarget("prev"):!1;r.flexAnimate(n,r.vars.pauseOnAction)}});r.vars.mousewheel&&r.bind("mousewheel",function(e,t,n,i){e.preventDefault();var s=t<0?r.getTarget("next"):r.getTarget("prev");r.flexAnimate(s,r.vars.pauseOnAction)});r.vars.pausePlay&&v.pausePlay.setup();r.vars.slideshow&&r.vars.pauseInvisible&&v.pauseInvisible.init();if(r.vars.slideshow){r.vars.pauseOnHover&&r.hover(function(){!r.manualPlay&&!r.manualPause&&r.pause()},function(){!r.manualPause&&!r.manualPlay&&!r.stopped&&r.play()});if(!r.vars.pauseInvisible||!v.pauseInvisible.isHidden())r.vars.initDelay>0?r.startTimeout=setTimeout(r.play,r.vars.initDelay):r.play()}d&&v.asNav.setup();o&&r.vars.touch&&v.touch();(!p||p&&r.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",v.resize);r.find("img").attr("draggable","false");setTimeout(function(){r.vars.start(r)},200)},asNav:{setup:function(){r.asNav=!0;r.animatingTo=Math.floor(r.currentSlide/r.move);r.currentItem=r.currentSlide;r.slides.removeClass(i+"active-slide").eq(r.currentItem).addClass(i+"active-slide");if(!s)r.slides.click(function(t){t.preventDefault();var n=e(this),s=n.index(),o=n.offset().left-e(r).scrollLeft();if(o<=0&&n.hasClass(i+"active-slide"))r.flexAnimate(r.getTarget("prev"),!0);else if(!e(r.vars.asNavFor).data("flexslider").animating&&!n.hasClass(i+"active-slide")){r.direction=r.currentItem<s?"next":"prev";r.flexAnimate(s,r.vars.pauseOnAction,!1,!0,!0)}});else{t._slider=r;r.slides.each(function(){var t=this;t._gesture=new MSGesture;t._gesture.target=t;t.addEventListener("MSPointerDown",function(e){e.preventDefault();e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1);t.addEventListener("MSGestureTap",function(t){t.preventDefault();var n=e(this),i=n.index();if(!e(r.vars.asNavFor).data("flexslider").animating&&!n.hasClass("active")){r.direction=r.currentItem<i?"next":"prev";r.flexAnimate(i,r.vars.pauseOnAction,!1,!0,!0)}})})}}},controlNav:{setup:function(){r.manualControls?v.controlNav.setupManual():v.controlNav.setupPaging()},setupPaging:function(){var t=r.vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",n=1,s,o;r.controlNavScaffold=e('<ol class="'+i+"control-nav "+i+t+'"></ol>');if(r.pagingCount>1)for(var f=0;f<r.pagingCount;f++){o=r.slides.eq(f);s=r.vars.controlNav==="thumbnails"?'<img src="'+o.attr("data-thumb")+'"/>':"<a>"+n+"</a>";if("thumbnails"===r.vars.controlNav&&!0===r.vars.thumbCaptions){var l=o.attr("data-thumbcaption");""!=l&&undefined!=l&&(s+='<span class="'+i+'caption">'+l+"</span>")}r.controlNavScaffold.append("<li>"+s+"</li>");n++}r.controlsContainer?e(r.controlsContainer).append(r.controlNavScaffold):r.append(r.controlNavScaffold);v.controlNav.set();v.controlNav.active();r.controlNavScaffold.delegate("a, img",u,function(t){t.preventDefault();if(a===""||a===t.type){var n=e(this),s=r.controlNav.index(n);if(!n.hasClass(i+"active")){r.direction=s>r.currentSlide?"next":"prev";r.flexAnimate(s,r.vars.pauseOnAction)}}a===""&&(a=t.type);v.setToClearWatchedEvent()})},setupManual:function(){r.controlNav=r.manualControls;v.controlNav.active();r.controlNav.bind(u,function(t){t.preventDefault();if(a===""||a===t.type){var n=e(this),s=r.controlNav.index(n);if(!n.hasClass(i+"active")){s>r.currentSlide?r.direction="next":r.direction="prev";r.flexAnimate(s,r.vars.pauseOnAction)}}a===""&&(a=t.type);v.setToClearWatchedEvent()})},set:function(){var t=r.vars.controlNav==="thumbnails"?"img":"a";r.controlNav=e("."+i+"control-nav li "+t,r.controlsContainer?r.controlsContainer:r)},active:function(){r.controlNav.removeClass(i+"active").eq(r.animatingTo).addClass(i+"active")},update:function(t,n){r.pagingCount>1&&t==="add"?r.controlNavScaffold.append(e("<li><a>"+r.count+"</a></li>")):r.pagingCount===1?r.controlNavScaffold.find("li").remove():r.controlNav.eq(n).closest("li").remove();v.controlNav.set();r.pagingCount>1&&r.pagingCount!==r.controlNav.length?r.update(n,t):v.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+i+'direction-nav"><li><a class="'+i+'prev" href="#">'+r.vars.prevText+'</a></li><li><a class="'+i+'next" href="#">'+r.vars.nextText+"</a></li></ul>");if(r.controlsContainer){e(r.controlsContainer).append(t);r.directionNav=e("."+i+"direction-nav li a",r.controlsContainer)}else{r.append(t);r.directionNav=e("."+i+"direction-nav li a",r)}v.directionNav.update();r.directionNav.bind(u,function(t){t.preventDefault();var n;if(a===""||a===t.type){n=e(this).hasClass(i+"next")?r.getTarget("next"):r.getTarget("prev");r.flexAnimate(n,r.vars.pauseOnAction)}a===""&&(a=t.type);v.setToClearWatchedEvent()})},update:function(){var e=i+"disabled";r.pagingCount===1?r.directionNav.addClass(e).attr("tabindex","-1"):r.vars.animationLoop?r.directionNav.removeClass(e).removeAttr("tabindex"):r.animatingTo===0?r.directionNav.removeClass(e).filter("."+i+"prev").addClass(e).attr("tabindex","-1"):r.animatingTo===r.last?r.directionNav.removeClass(e).filter("."+i+"next").addClass(e).attr("tabindex","-1"):r.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+i+'pauseplay"><a></a></div>');if(r.controlsContainer){r.controlsContainer.append(t);r.pausePlay=e("."+i+"pauseplay a",r.controlsContainer)}else{r.append(t);r.pausePlay=e("."+i+"pauseplay a",r)}v.pausePlay.update(r.vars.slideshow?i+"pause":i+"play");r.pausePlay.bind(u,function(t){t.preventDefault();if(a===""||a===t.type)if(e(this).hasClass(i+"pause")){r.manualPause=!0;r.manualPlay=!1;r.pause()}else{r.manualPause=!1;r.manualPlay=!0;r.play()}a===""&&(a=t.type);v.setToClearWatchedEvent()})},update:function(e){e==="play"?r.pausePlay.removeClass(i+"pause").addClass(i+"play").html(r.vars.playText):r.pausePlay.removeClass(i+"play").addClass(i+"pause").html(r.vars.pauseText)}},touch:function(){var e,n,i,o,u,a,f=!1,d=0,v=0,m=0;if(!s){t.addEventListener("touchstart",g,!1);function g(s){if(r.animating)s.preventDefault();else if(window.navigator.msPointerEnabled||s.touches.length===1){r.pause();o=l?r.h:r.w;a=Number(new Date);d=s.touches[0].pageX;v=s.touches[0].pageY;i=h&&c&&r.animatingTo===r.last?0:h&&c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:h&&r.currentSlide===r.last?r.limit:h?(r.itemW+r.vars.itemMargin)*r.move*r.currentSlide:c?(r.last-r.currentSlide+r.cloneOffset)*o:(r.currentSlide+r.cloneOffset)*o;e=l?v:d;n=l?d:v;t.addEventListener("touchmove",y,!1);t.addEventListener("touchend",b,!1)}}function y(t){d=t.touches[0].pageX;v=t.touches[0].pageY;u=l?e-v:e-d;f=l?Math.abs(u)<Math.abs(d-n):Math.abs(u)<Math.abs(v-n);var s=500;if(!f||Number(new Date)-a>s){t.preventDefault();if(!p&&r.transitions){r.vars.animationLoop||(u/=r.currentSlide===0&&u<0||r.currentSlide===r.last&&u>0?Math.abs(u)/o+2:1);r.setProps(i+u,"setTouch")}}}function b(s){t.removeEventListener("touchmove",y,!1);if(r.animatingTo===r.currentSlide&&!f&&u!==null){var l=c?-u:u,h=l>0?r.getTarget("next"):r.getTarget("prev");r.canAdvance(h)&&(Number(new Date)-a<550&&Math.abs(l)>50||Math.abs(l)>o/2)?r.flexAnimate(h,r.vars.pauseOnAction):p||r.flexAnimate(r.currentSlide,r.vars.pauseOnAction,!0)}t.removeEventListener("touchend",b,!1);e=null;n=null;u=null;i=null}}else{t.style.msTouchAction="none";t._gesture=new MSGesture;t._gesture.target=t;t.addEventListener("MSPointerDown",w,!1);t._slider=r;t.addEventListener("MSGestureChange",E,!1);t.addEventListener("MSGestureEnd",S,!1);function w(e){e.stopPropagation();if(r.animating)e.preventDefault();else{r.pause();t._gesture.addPointer(e.pointerId);m=0;o=l?r.h:r.w;a=Number(new Date);i=h&&c&&r.animatingTo===r.last?0:h&&c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:h&&r.currentSlide===r.last?r.limit:h?(r.itemW+r.vars.itemMargin)*r.move*r.currentSlide:c?(r.last-r.currentSlide+r.cloneOffset)*o:(r.currentSlide+r.cloneOffset)*o}}function E(e){e.stopPropagation();var n=e.target._slider;if(!n)return;var r=-e.translationX,s=-e.translationY;m+=l?s:r;u=m;f=l?Math.abs(m)<Math.abs(-r):Math.abs(m)<Math.abs(-s);if(e.detail===e.MSGESTURE_FLAG_INERTIA){setImmediate(function(){t._gesture.stop()});return}if(!f||Number(new Date)-a>500){e.preventDefault();if(!p&&n.transitions){n.vars.animationLoop||(u=m/(n.currentSlide===0&&m<0||n.currentSlide===n.last&&m>0?Math.abs(m)/o+2:1));n.setProps(i+u,"setTouch")}}}function S(t){t.stopPropagation();var r=t.target._slider;if(!r)return;if(r.animatingTo===r.currentSlide&&!f&&u!==null){var s=c?-u:u,l=s>0?r.getTarget("next"):r.getTarget("prev");r.canAdvance(l)&&(Number(new Date)-a<550&&Math.abs(s)>50||Math.abs(s)>o/2)?r.flexAnimate(l,r.vars.pauseOnAction):p||r.flexAnimate(r.currentSlide,r.vars.pauseOnAction,!0)}e=null;n=null;u=null;i=null;m=0}}},resize:function(){if(!r.animating&&r.is(":visible")){h||r.doMath();if(p)v.smoothHeight();else if(h){r.slides.width(r.computedW);r.update(r.pagingCount);r.setProps()}else if(l){r.viewport.height(r.h);r.setProps(r.h,"setTotal")}else{r.vars.smoothHeight&&v.smoothHeight();r.newSlides.width(r.computedW);r.setProps(r.computedW,"setTotal")}}},smoothHeight:function(e){if(!l||p){var t=p?r:r.viewport;e?t.animate({height:r.slides.eq(r.animatingTo).height()},e):t.height(r.slides.eq(r.animatingTo).height())}},sync:function(t){var n=e(r.vars.sync).data("flexslider"),i=r.animatingTo;switch(t){case"animate":n.flexAnimate(i,r.vars.pauseOnAction,!1,!0);break;case"play":!n.playing&&!n.asNav&&n.play();break;case"pause":n.pause()}},pauseInvisible:{visProp:null,init:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)e[t]+"Hidden"in document&&(v.pauseInvisible.visProp=e[t]+"Hidden");if(v.pauseInvisible.visProp){var n=v.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(n,function(){v.pauseInvisible.isHidden()?r.startTimeout?clearTimeout(r.startTimeout):r.pause():r.started?r.play():r.vars.initDelay>0?setTimeout(r.play,r.vars.initDelay):r.play()})}},isHidden:function(){return document[v.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(f);f=setTimeout(function(){a=""},3e3)}};r.flexAnimate=function(t,n,s,u,a){!r.vars.animationLoop&&t!==r.currentSlide&&(r.direction=t>r.currentSlide?"next":"prev");d&&r.pagingCount===1&&(r.direction=r.currentItem<t?"next":"prev");if(!r.animating&&(r.canAdvance(t,a)||s)&&r.is(":visible")){if(d&&u){var f=e(r.vars.asNavFor).data("flexslider");r.atEnd=t===0||t===r.count-1;f.flexAnimate(t,!0,!1,!0,a);r.direction=r.currentItem<t?"next":"prev";f.direction=r.direction;if(Math.ceil((t+1)/r.visible)-1===r.currentSlide||t===0){r.currentItem=t;r.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide");return!1}r.currentItem=t;r.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide");t=Math.floor(t/r.visible)}r.animating=!0;r.animatingTo=t;n&&r.pause();r.vars.before(r);r.syncExists&&!a&&v.sync("animate");r.vars.controlNav&&v.controlNav.active();h||r.slides.removeClass(i+"active-slide").eq(t).addClass(i+"active-slide");r.atEnd=t===0||t===r.last;r.vars.directionNav&&v.directionNav.update();if(t===r.last){r.vars.end(r);r.vars.animationLoop||r.pause()}if(!p){var m=l?r.slides.filter(":first").height():r.computedW,g,y,b;if(h){g=r.vars.itemMargin;b=(r.itemW+g)*r.move*r.animatingTo;y=b>r.limit&&r.visible!==1?r.limit:b}else r.currentSlide===0&&t===r.count-1&&r.vars.animationLoop&&r.direction!=="next"?y=c?(r.count+r.cloneOffset)*m:0:r.currentSlide===r.last&&t===0&&r.vars.animationLoop&&r.direction!=="prev"?y=c?0:(r.count+1)*m:y=c?(r.count-1-t+r.cloneOffset)*m:(t+r.cloneOffset)*m;r.setProps(y,"",r.vars.animationSpeed);if(r.transitions){if(!r.vars.animationLoop||!r.atEnd){r.animating=!1;r.currentSlide=r.animatingTo}r.container.unbind("webkitTransitionEnd transitionend");r.container.bind("webkitTransitionEnd transitionend",function(){r.wrapup(m)})}else r.container.animate(r.args,r.vars.animationSpeed,r.vars.easing,function(){r.wrapup(m)})}else if(!o){r.slides.eq(r.currentSlide).css({zIndex:1}).animate({opacity:0},r.vars.animationSpeed,r.vars.easing);r.slides.eq(t).css({zIndex:2}).animate({opacity:1},r.vars.animationSpeed,r.vars.easing,r.wrapup)}else{r.slides.eq(r.currentSlide).css({opacity:0,zIndex:1});r.slides.eq(t).css({opacity:1,zIndex:2});r.wrapup(m)}r.vars.smoothHeight&&v.smoothHeight(r.vars.animationSpeed)}};r.wrapup=function(e){!p&&!h&&(r.currentSlide===0&&r.animatingTo===r.last&&r.vars.animationLoop?r.setProps(e,"jumpEnd"):r.currentSlide===r.last&&r.animatingTo===0&&r.vars.animationLoop&&r.setProps(e,"jumpStart"));r.animating=!1;r.currentSlide=r.animatingTo;r.vars.after(r)};r.animateSlides=function(){!r.animating&&m&&r.flexAnimate(r.getTarget("next"))};r.pause=function(){clearInterval(r.animatedSlides);r.animatedSlides=null;r.playing=!1;r.vars.pausePlay&&v.pausePlay.update("play");r.syncExists&&v.sync("pause")};r.play=function(){r.playing&&clearInterval(r.animatedSlides);r.animatedSlides=r.animatedSlides||setInterval(r.animateSlides,r.vars.slideshowSpeed);r.started=r.playing=!0;r.vars.pausePlay&&v.pausePlay.update("pause");r.syncExists&&v.sync("play")};r.stop=function(){r.pause();r.stopped=!0};r.canAdvance=function(e,t){var n=d?r.pagingCount-1:r.last;return t?!0:d&&r.currentItem===r.count-1&&e===0&&r.direction==="prev"?!0:d&&r.currentItem===0&&e===r.pagingCount-1&&r.direction!=="next"?!1:e===r.currentSlide&&!d?!1:r.vars.animationLoop?!0:r.atEnd&&r.currentSlide===0&&e===n&&r.direction!=="next"?!1:r.atEnd&&r.currentSlide===n&&e===0&&r.direction==="next"?!1:!0};r.getTarget=function(e){r.direction=e;return e==="next"?r.currentSlide===r.last?0:r.currentSlide+1:r.currentSlide===0?r.last:r.currentSlide-1};r.setProps=function(e,t,n){var i=function(){var n=e?e:(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo,i=function(){if(h)return t==="setTouch"?e:c&&r.animatingTo===r.last?0:c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:r.animatingTo===r.last?r.limit:n;switch(t){case"setTotal":return c?(r.count-1-r.currentSlide+r.cloneOffset)*e:(r.currentSlide+r.cloneOffset)*e;case"setTouch":return c?e:e;case"jumpEnd":return c?e:r.count*e;case"jumpStart":return c?r.count*e:e;default:return e}}();return i*-1+"px"}();if(r.transitions){i=l?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)";n=n!==undefined?n/1e3+"s":"0s";r.container.css("-"+r.pfx+"-transition-duration",n)}r.args[r.prop]=i;(r.transitions||n===undefined)&&r.container.css(r.args)};r.setup=function(t){if(!p){var n,s;if(t==="init"){r.viewport=e('<div class="'+i+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(r).append(r.container);r.cloneCount=0;r.cloneOffset=0;if(c){s=e.makeArray(r.slides).reverse();r.slides=e(s);r.container.empty().append(r.slides)}}if(r.vars.animationLoop&&!h){r.cloneCount=2;r.cloneOffset=1;t!=="init"&&r.container.find(".clone").remove();r.container.append(r.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(r.slides.last().clone().addClass("clone").attr("aria-hidden","true"))}r.newSlides=e(r.vars.selector,r);n=c?r.count-1-r.currentSlide+r.cloneOffset:r.currentSlide+r.cloneOffset;if(l&&!h){r.container.height((r.count+r.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){r.newSlides.css({display:"block"});r.doMath();r.viewport.height(r.h);r.setProps(n*r.h,"init")},t==="init"?100:0)}else{r.container.width((r.count+r.cloneCount)*200+"%");r.setProps(n*r.computedW,"init");setTimeout(function(){r.doMath();r.newSlides.css({width:r.computedW,"float":"left",display:"block"});r.vars.smoothHeight&&v.smoothHeight()},t==="init"?100:0)}}else{r.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});t==="init"&&(o?r.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+r.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(r.currentSlide).css({opacity:1,zIndex:2}):r.slides.css({opacity:0,display:"block",zIndex:1}).eq(r.currentSlide).css({zIndex:2}).animate({opacity:1},r.vars.animationSpeed,r.vars.easing));r.vars.smoothHeight&&v.smoothHeight()}h||r.slides.removeClass(i+"active-slide").eq(r.currentSlide).addClass(i+"active-slide")};r.doMath=function(){var e=r.slides.first(),t=r.vars.itemMargin,n=r.vars.minItems,i=r.vars.maxItems;r.w=r.viewport===undefined?r.width():r.viewport.width();r.h=e.height();r.boxPadding=e.outerWidth()-e.width();if(h){r.itemT=r.vars.itemWidth+t;r.minW=n?n*r.itemT:r.w;r.maxW=i?i*r.itemT-t:r.w;r.itemW=r.minW>r.w?(r.w-t*(n-1))/n:r.maxW<r.w?(r.w-t*(i-1))/i:r.vars.itemWidth>r.w?r.w:r.vars.itemWidth;r.visible=Math.floor(r.w/r.itemW);r.move=r.vars.move>0&&r.vars.move<r.visible?r.vars.move:r.visible;r.pagingCount=Math.ceil((r.count-r.visible)/r.move+1);r.last=r.pagingCount-1;r.limit=r.pagingCount===1?0:r.vars.itemWidth>r.w?r.itemW*(r.count-1)+t*(r.count-1):(r.itemW+t)*r.count-r.w-t}else{r.itemW=r.w;r.pagingCount=r.count;r.last=r.count-1}r.computedW=r.itemW-r.boxPadding};r.update=function(e,t){r.doMath();if(!h){e<r.currentSlide?r.currentSlide+=1:e<=r.currentSlide&&e!==0&&(r.currentSlide-=1);r.animatingTo=r.currentSlide}if(r.vars.controlNav&&!r.manualControls)if(t==="add"&&!h||r.pagingCount>r.controlNav.length)v.controlNav.update("add");else if(t==="remove"&&!h||r.pagingCount<r.controlNav.length){if(h&&r.currentSlide>r.last){r.currentSlide-=1;r.animatingTo-=1}v.controlNav.update("remove",r.last)}r.vars.directionNav&&v.directionNav.update()};r.addSlide=function(t,n){var i=e(t);r.count+=1;r.last=r.count-1;l&&c?n!==undefined?r.slides.eq(r.count-n).after(i):r.container.prepend(i):n!==undefined?r.slides.eq(n).before(i):r.container.append(i);r.update(n,"add");r.slides=e(r.vars.selector+":not(.clone)",r);r.setup();r.vars.added(r)};r.removeSlide=function(t){var n=isNaN(t)?r.slides.index(e(t)):t;r.count-=1;r.last=r.count-1;isNaN(t)?e(t,r.slides).remove():l&&c?r.slides.eq(r.last).remove():r.slides.eq(t).remove();r.doMath();r.update(n,"remove");r.slides=e(r.vars.selector+":not(.clone)",r);r.setup();r.vars.removed(r)};v.init()};e(window).blur(function(e){focused=!1}).focus(function(e){focused=!0});e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};e.fn.flexslider=function(t){t===undefined&&(t={});if(typeof t=="object")return this.each(function(){var n=e(this),r=t.selector?t.selector:".slides > li",i=n.find(r);if(i.length===1&&t.allowOneSlide===!0||i.length===0){i.fadeIn(400);t.start&&t.start(n)}else n.data("flexslider")===undefined&&new e.flexslider(this,t)});var n=e(this).data("flexslider");switch(t){case"play":n.play();break;case"pause":n.pause();break;case"stop":n.stop();break;case"next":n.flexAnimate(n.getTarget("next"),!0);break;case"prev":case"previous":n.flexAnimate(n.getTarget("prev"),!0);break;default:typeof t=="number"&&n.flexAnimate(t,!0)}}})(jQuery);